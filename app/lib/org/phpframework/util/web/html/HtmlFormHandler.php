<?php
/*
 * Copyright (c) 2007 PHPMyFrameWork - Joao Pinto
 * AUTHOR: Joao Paulo Lopes Pinto -- http://jplpinto.com
 * 
 * The use of this code must be allowed first by the creator Joao Pinto, since this is a private and proprietary code.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS 
 * OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY 
 * AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR 
 * CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL 
 * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, 
 * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER 
 * IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT 
 * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE. IN NO EVENT SHALL 
 * THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN 
 * AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE 
 * OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 */
include_once get_lib("org.phpframework.util.web.html.pagination.PaginationLayout"); include_once get_lib("org.phpframework.util.web.html.XssSanitizer"); include_once get_lib("org.phpframework.util.text.TextValidator"); include_once get_lib("org.phpframework.util.HashTagParameter"); include_once get_lib("org.phpframework.ptl.PHPTemplateLanguage"); class HtmlFormHandler { public $settings; public $PHPTemplateLanguage; public static $INVALID_VALUE_FOR_ATTRIBUTE_MESSAGE = "Invalid value for"; private $v35749ed6d7; private $v360b1d47f8 = "input"; private $pc419a7ec = "i"; public function __construct($v30857f7eca = false) { if (!empty($v30857f7eca["ptl"])) { $v30857f7eca["ptl"] = !is_array($v30857f7eca["ptl"]) ? array() : $v30857f7eca["ptl"]; if (empty($v30857f7eca["ptl"]["input_data_var_name"])) $v30857f7eca["ptl"]["input_data_var_name"] = $this->v360b1d47f8; if (empty($v30857f7eca["ptl"]["idx_var_name"])) $v30857f7eca["ptl"]["idx_var_name"] = $this->pc419a7ec; } $v30857f7eca["parse_values"] = isset($v30857f7eca["parse_values"]) ? $v30857f7eca["parse_values"] : true; $this->settings = $v30857f7eca; $this->PHPTemplateLanguage = new PHPTemplateLanguage(); if (!empty($v30857f7eca["CacheHandler"])) $this->PHPTemplateLanguage->setCacheHandler($v30857f7eca["CacheHandler"]); } public static function validateData($v309062f80b, $v90963767ae, $v6c49f59329 = false, &$pffa799aa = false) { $v5c1c342594 = true; if (is_array($v90963767ae)) { if (empty($v309062f80b["input"]["allow_null"]) && !count($v90963767ae)) $v5c1c342594 = false; if ($v5c1c342594 && empty($v309062f80b["input"]["allow_javascript"]) && $v90963767ae) if ($v90963767ae != XssSanitizer::sanitizeVariable($v90963767ae)) $v5c1c342594 = false; $v5c1c342594 = $v5c1c342594 && isset($v309062f80b["input"]["min_length"]) && is_numeric($v309062f80b["input"]["min_length"]) ? count($v90963767ae) >= $v309062f80b["input"]["min_length"] : $v5c1c342594; $v5c1c342594 = $v5c1c342594 && isset($v309062f80b["input"]["max_length"]) && is_numeric($v309062f80b["input"]["max_length"]) ? count($v90963767ae) <= $v309062f80b["input"]["max_length"] : $v5c1c342594; } else { if (empty($v309062f80b["input"]["allow_null"]) && !strlen($v90963767ae)) $v5c1c342594 = false; if ($v5c1c342594 && empty($v309062f80b["input"]["allow_javascript"]) && $v90963767ae) { if (strpos($v90963767ae, "<script") !== FALSE) $v5c1c342594 = false; else if ($v90963767ae != XssSanitizer::sanitizeHtml($v90963767ae)) $v5c1c342594 = false; } if ($v5c1c342594 && $v90963767ae) { $v3fb9f41470 = isset($v309062f80b["input"]["validation_type"]) ? $v309062f80b["input"]["validation_type"] : null; switch ($v3fb9f41470) { case "int": case "bigint": case "number": $v5c1c342594 = TextValidator::isNumber($v90963767ae); break; case "decimal": case "float": case "double": $v5c1c342594 = TextValidator::isDecimal($v90963767ae); break; case "smallint": $v5c1c342594 = TextValidator::isSmallInt($v90963767ae); break; case "phone": $v5c1c342594 = TextValidator::isPhone($v90963767ae); break; case "fax": $v5c1c342594 = TextValidator::isPhone($v90963767ae); break; case "email": $v5c1c342594 = TextValidator::isEmail($v90963767ae); break; case "date": $v5c1c342594 = TextValidator::isDate($v90963767ae); break; case "datetime": case "timestamp": $v5c1c342594 = TextValidator::isDateTime($v90963767ae); break; case "time": $v5c1c342594 = TextValidator::isTime($v90963767ae); break; case "ipaddress": $v5c1c342594 = TextValidator::isIPAddress($v90963767ae); break; case "filename": $v5c1c342594 = TextValidator::isFileName($v90963767ae); break; } $v5c1c342594 = $v5c1c342594 && isset($v309062f80b["input"]["min_length"]) && is_numeric($v309062f80b["input"]["min_length"]) ? TextValidator::checkMinLength($v90963767ae, $v309062f80b["input"]["min_length"]) : $v5c1c342594; $v5c1c342594 = $v5c1c342594 && isset($v309062f80b["input"]["max_length"]) && is_numeric($v309062f80b["input"]["max_length"]) ? TextValidator::checkMaxLength($v90963767ae, $v309062f80b["input"]["max_length"]) : $v5c1c342594; if ($v3fb9f41470 == "date" || $v3fb9f41470 == "datetime" || $v3fb9f41470 == "datetime-local") { $v5c1c342594 = $v5c1c342594 && !empty($v309062f80b["input"]["min_value"]) ? TextValidator::checkMinDate($v90963767ae, $v309062f80b["input"]["min_value"]) : $v5c1c342594; $v5c1c342594 = $v5c1c342594 && !empty($v309062f80b["input"]["max_value"]) ? TextValidator::checkMaxDate($v90963767ae, $v309062f80b["input"]["max_value"]) : $v5c1c342594; } else { $v5c1c342594 = $v5c1c342594 && isset($v309062f80b["input"]["min_value"]) && is_numeric($v309062f80b["input"]["min_value"]) ? TextValidator::checkMinValue($v90963767ae, $v309062f80b["input"]["min_value"]) : $v5c1c342594; $v5c1c342594 = $v5c1c342594 && isset($v309062f80b["input"]["max_value"]) && is_numeric($v309062f80b["input"]["max_value"]) ? TextValidator::checkMaxValue($v90963767ae, $v309062f80b["input"]["max_value"]) : $v5c1c342594; } $v5c1c342594 = $v5c1c342594 && isset($v309062f80b["input"]["min_words"]) && is_numeric($v309062f80b["input"]["min_words"]) ? TextValidator::checkMinWords($v90963767ae, $v309062f80b["input"]["min_words"]) : $v5c1c342594; $v5c1c342594 = $v5c1c342594 && isset($v309062f80b["input"]["max_words"]) && is_numeric($v309062f80b["input"]["max_words"]) ? TextValidator::checkMaxWords($v90963767ae, $v309062f80b["input"]["max_words"]) : $v5c1c342594; } } if (!$v5c1c342594) { $pffa799aa = !empty($v309062f80b["input"]["validation_message"]) ? $v309062f80b["input"]["validation_message"] : self::$INVALID_VALUE_FOR_ATTRIBUTE_MESSAGE . " " . $v6c49f59329 . "."; return false; } return true; } public static function createHtmlForm($v30857f7eca, $v6d9e688100 = false) { $pfc216969 = new HtmlFormHandler($v30857f7eca); if (!empty($v30857f7eca["ptl"])) { $v30ed7d8f0b = array($pfc216969->settings["ptl"]["input_data_var_name"] => $v6d9e688100); $v30ed7d8f0b = isset($pfc216969->settings["ptl"]["external_vars"]) && is_array($pfc216969->settings["ptl"]["external_vars"]) ? array_merge($pfc216969->settings["ptl"]["external_vars"], $v30ed7d8f0b) : $v30ed7d8f0b; $v6d9e688100 = false; } if (!empty($v30857f7eca["ptl"]["code"])) { $v30857f7eca["ptl"]["code"] = $pfc216969->getPTLParsedValueFromData($v30857f7eca["ptl"]["code"], $v6d9e688100); return $pfc216969->PHPTemplateLanguage->parseTemplate($v30857f7eca["ptl"]["code"], $v30ed7d8f0b); } $pf8ed4912 = $pfc216969->getHtmlForm($v6d9e688100); if (!empty($v30857f7eca["ptl"])) return $pfc216969->PHPTemplateLanguage->parseTemplate($pf8ed4912, $v30ed7d8f0b); return $pf8ed4912; } public function getHtmlForm($v6d9e688100 = false) { $pf8ed4912 = ''; $this->v35749ed6d7 = $v6d9e688100; $v30857f7eca = $this->settings; if (!empty($v30857f7eca["form_css"])) $pf8ed4912 .= '<style>' . str_replace('\n', "\n", $v30857f7eca["form_css"]) . '</style>'; if (!empty($v30857f7eca["with_form"])) { $pf8ed4912 .= '<form'; $v90cd343a76 = !empty($v30857f7eca["form_id"]) ? $this->f820e5f681a($v30857f7eca["form_id"], $v6d9e688100) : "form_" . rand(0, 10000); if ($v90cd343a76) $pf8ed4912 .= ' id="' . $v90cd343a76 . '"'; if (!empty($v30857f7eca["form_method"])) $pf8ed4912 .= ' method="' . $this->f820e5f681a($v30857f7eca["form_method"], $v6d9e688100) . '"'; $pf8ed4912 .= ' class="'; if (!empty($v30857f7eca["form_type"])) { switch ($v30857f7eca["form_type"]) { case "horizontal": $pf8ed4912 .= 'form-horizontal'; break; case "inline": $pf8ed4912 .= 'form-inline'; break; } } if (!empty($v30857f7eca["form_class"])) $pf8ed4912 .= ' ' . $this->f820e5f681a($v30857f7eca["form_class"], $v6d9e688100); $pf8ed4912 .= '"'; if (!empty($v30857f7eca["form_action"])) $pf8ed4912 .= ' action="' . $this->f820e5f681a($v30857f7eca["form_action"], $v6d9e688100) . '"'; $pf8ed4912 .= ' onSubmit="return ' . (!empty($v30857f7eca["form_on_submit"]) ? $v30857f7eca["form_on_submit"] . ' && ' : '') . '(typeof MyJSLib == \'undefined\' || MyJSLib.FormHandler.formCheck(this));"'; if (!empty($v30857f7eca["extra_attributes"])) { $v30857f7eca["extra_attributes"] = $this->f2fa073f7cc($v30857f7eca["extra_attributes"], $v6d9e688100); $ped0a6251 = array("extra_attributes"); $pf8ed4912 .= $this->f7f50294902($v30857f7eca, $ped0a6251, $v6d9e688100); } $pf8ed4912 .= ' enctype="multipart/form-data">'; } $pf8ed4912 .= isset($v30857f7eca["form_containers"]) ? $this->createElements($v30857f7eca["form_containers"], $v6d9e688100) : ""; if (!empty($v30857f7eca["with_form"])) $pf8ed4912 .= '</form>
			<script>if (typeof MyJSLib != "undefined") { MyJSLib.FormHandler.initForm( $("#' . $v90cd343a76 . '")[0] ) }</script>'; if (!empty($v30857f7eca["form_js"])) $pf8ed4912 .= '<script>' . str_replace('\n', "\n", $v30857f7eca["form_js"]) . '</script>'; return $pf8ed4912; } public function getParsedValueFromData($v67db1bd535, $v6d9e688100, $pd69fb7d0 = false, $v2d93385579 = false) { $v2d93385579 = $this->mbd5c6d3194be($v2d93385579, $v6d9e688100, $pd69fb7d0); if ($v67db1bd535 && $v6d9e688100 && empty($this->settings["ptl"]) && is_string($v67db1bd535) && substr($v67db1bd535, 0, 1) == "#" && substr($v67db1bd535, -1, 1) == "#" && strpos(substr($v67db1bd535, 1, -1), "#") === false) { $v67db1bd535 = $this->ma080ac9f9175($v67db1bd535, $v6d9e688100, $pd69fb7d0); if (!is_string($v67db1bd535) || empty($v67db1bd535)) return $v67db1bd535; } return $this->f3f46b56057($v67db1bd535, $v6d9e688100, $pd69fb7d0, $v2d93385579); } public function getPTLParsedValueFromData($v67db1bd535, $v6d9e688100, $pd69fb7d0 = false, $v2d93385579 = false) { if (strpos($v67db1bd535, '#') !== false && strpos($v67db1bd535, '<ptl:') === false) { $v2d93385579 = $this->mbd5c6d3194be($v2d93385579, $v6d9e688100, $pd69fb7d0); return $this->f3f46b56057($v67db1bd535, $v6d9e688100, $pd69fb7d0, $v2d93385579); } return $v67db1bd535; } public function getFieldHtml($v5d170b1de6, $v6d9e688100 = false, $pd69fb7d0 = false) { return $this->f9f7390dc37($v5d170b1de6, $v6d9e688100, $pd69fb7d0); } public function getFieldLabelHtml($v5d170b1de6, $v6d9e688100 = false, $pd69fb7d0 = false) { return $this->f6635c7799a($v5d170b1de6, $v6d9e688100, $pd69fb7d0); } public function getFieldInputHtml($v5d170b1de6, $v6d9e688100 = false, $pd69fb7d0 = false) { return $this->f754c0f002b($v5d170b1de6, $v6d9e688100, $pd69fb7d0); } public function createElements($pdfa15f64, $v6d9e688100 = false, $pd69fb7d0 = false) { $pf8ed4912 = ''; if (is_array($pdfa15f64)) foreach ($pdfa15f64 as $v06f2bc39aa) $pf8ed4912 .= $this->createElement($v06f2bc39aa, $v6d9e688100, $pd69fb7d0); return $pf8ed4912; } public function createElement($v06f2bc39aa, $v6d9e688100 = false, $pd69fb7d0 = false) { $pf8ed4912 = ''; if (!empty($v06f2bc39aa["ptl"])) { $v408c531c27 = !empty($v06f2bc39aa["ptl"]["input_data_var_name"]) ? $v06f2bc39aa["ptl"]["input_data_var_name"] : ( !empty($this->settings["ptl"]["input_data_var_name"]) ? $this->settings["ptl"]["input_data_var_name"] : $this->v360b1d47f8 ); $v0d677b4bf8 = !empty($v06f2bc39aa["ptl"]["idx_var_name"]) ? $v06f2bc39aa["ptl"]["idx_var_name"] : ( !empty($this->settings["ptl"]["idx_var_name"]) ? $this->settings["ptl"]["idx_var_name"] : $this->pc419a7ec ); if (!empty($v06f2bc39aa["ptl"]["code"])) { $v06f2bc39aa["ptl"]["code"] = $this->getPTLParsedValueFromData($v06f2bc39aa["ptl"]["code"], $v6d9e688100, $pd69fb7d0); return $this->PHPTemplateLanguage->parseTemplate($v06f2bc39aa["ptl"]["code"], array($v408c531c27 => $v6d9e688100, $v0d677b4bf8 => $pd69fb7d0)); } return ""; } else if (!empty($v06f2bc39aa["container"])) $pf8ed4912 .= $this->f1148925584($v06f2bc39aa["container"], $v6d9e688100, $pd69fb7d0); else if (!empty($v06f2bc39aa["field"])) $pf8ed4912 .= $this->f9f7390dc37($v06f2bc39aa["field"], $v6d9e688100, $pd69fb7d0); else if (!empty($v06f2bc39aa["pagination"])) $pf8ed4912 .= $this->mbeb02820b96c($v06f2bc39aa["pagination"], $v6d9e688100, $pd69fb7d0); else if (!empty($v06f2bc39aa["table"]) || !empty($v06f2bc39aa["tree"])) { if (!empty($this->settings["ptl"]) && isset($pd69fb7d0) && $pd69fb7d0 !== false) { $v0256b506d2 = $this->settings["ptl"]["input_data_var_name"]; $this->settings["ptl"]["input_data_var_name"] = $v0256b506d2 . "_" . rand(1, 1000); $pf8ed4912 .= '<ptl:var:' . $this->settings["ptl"]["input_data_var_name"] . ' $' . $v0256b506d2 . '[$' . $this->settings["ptl"]["idx_var_name"] . '] />'; } else $pf72c1d58 = isset($pd69fb7d0) && $pd69fb7d0 !== false ? $v6d9e688100[$pd69fb7d0] : $v6d9e688100; $pf8ed4912 .= !empty($v06f2bc39aa["table"]) ? $this->f77b04817d2($v06f2bc39aa["table"], $pf72c1d58) : $this->f47e4a3b460($v06f2bc39aa["tree"], $pf72c1d58); if (!empty($this->settings["ptl"]) && isset($pd69fb7d0) && $pd69fb7d0 !== false) $this->settings["ptl"]["input_data_var_name"] = $v0256b506d2; } return $pf8ed4912; } private function f1148925584($v9e5e05b9b9, $v6d9e688100 = false, $pd69fb7d0 = false) { $pf8ed4912 = '<div'; if (!empty($v9e5e05b9b9["id"])) $pf8ed4912 .= ' id="' . $this->f820e5f681a($v9e5e05b9b9["id"], $v6d9e688100, $pd69fb7d0) . '"'; if (!empty($v9e5e05b9b9["class"])) $pf8ed4912 .= ' class="' . $this->f820e5f681a($v9e5e05b9b9["class"], $v6d9e688100, $pd69fb7d0) . '"'; $v9e5e05b9b9["extra_attributes"] = isset($v9e5e05b9b9["extra_attributes"]) ? $this->f2fa073f7cc($v9e5e05b9b9["extra_attributes"], $v6d9e688100, $pd69fb7d0) : null; $ped0a6251 = array("extra_attributes"); $pf8ed4912 .= $this->f7f50294902($v9e5e05b9b9, $ped0a6251, $v6d9e688100, $pd69fb7d0); $pf8ed4912 .= '>'; $v63967fdd7c = !empty($v9e5e05b9b9["href"]) && (!empty($this->settings["ptl"]) || trim($this->f820e5f681a($v9e5e05b9b9["href"], $v6d9e688100, $pd69fb7d0))); if ($v63967fdd7c) { $pf8ed4912 .= '<a'; $ped0a6251 = array("href", "title", "target"); $pf8ed4912 .= $this->f7f50294902($v9e5e05b9b9, $ped0a6251, $v6d9e688100, $pd69fb7d0); $pf8ed4912 .= '>'; } $pf8ed4912 .= isset($v9e5e05b9b9["previous_html"]) ? $this->f3f46b56057($v9e5e05b9b9["previous_html"], $v6d9e688100, $pd69fb7d0) : ""; $pf8ed4912 .= isset($v9e5e05b9b9["elements"]) ? $this->createElements($v9e5e05b9b9["elements"], $v6d9e688100, $pd69fb7d0) : ""; $pf8ed4912 .= isset($v9e5e05b9b9["next_html"]) ? $this->f3f46b56057($v9e5e05b9b9["next_html"], $v6d9e688100, $pd69fb7d0) : ""; if ($v63967fdd7c) $pf8ed4912 .= '</a>'; $pf8ed4912 .= '</div>'; return $pf8ed4912; } private function f9f7390dc37($v5d170b1de6, $v6d9e688100 = false, $pd69fb7d0 = false) { $pf8ed4912 = ''; $v16b9d683b1 = isset($v5d170b1de6["input"]["type"]) ? $v5d170b1de6["input"]["type"] : $v5d170b1de6["type"]; $v16b9d683b1 = $this->f820e5f681a($v16b9d683b1, $v6d9e688100, $pd69fb7d0); $v16b9d683b1 = strtolower($v16b9d683b1); $v5d170b1de6["input"]["type"] = $v16b9d683b1; if (empty($v5d170b1de6["disable_field_group"])) { $v9a8b7dc209 = !empty($v5d170b1de6["class"]) ? $this->f820e5f681a($v5d170b1de6["class"], $v6d9e688100, $pd69fb7d0) : ""; $v9a8b7dc209 .= $v16b9d683b1 == "hidden" ? " hidden" : ""; $v5d170b1de6["extra_attributes"] = isset($v5d170b1de6["extra_attributes"]) ? $this->f2fa073f7cc($v5d170b1de6["extra_attributes"], $v6d9e688100, $pd69fb7d0) : null; $ped0a6251 = array("extra_attributes"); $pf8ed4912 .= $this->f7f50294902($v5d170b1de6, $ped0a6251, $v6d9e688100, $pd69fb7d0); $pf8ed4912 .= '<div' . (trim($v9a8b7dc209) ? ' class="' . $v9a8b7dc209 . '"' : '') . '>'; } foreach ($v5d170b1de6 as $pe5c5e2fe => $v956913c90f) switch ($pe5c5e2fe) { case "label": $pf8ed4912 .= $this->f6635c7799a($v5d170b1de6, $v6d9e688100, $pd69fb7d0); break; case "input": $pf8ed4912 .= $this->f754c0f002b($v5d170b1de6, $v6d9e688100, $pd69fb7d0); break; } if (empty($v5d170b1de6["disable_field_group"])) $pf8ed4912 .= '</div>'; return $pf8ed4912; } private function mbeb02820b96c($pabde73f0, $v6d9e688100 = false, $pd69fb7d0 = false) { if (!empty($this->settings["ptl"])) return $this->f4e7fb5f8a6($pabde73f0); $v8ed660d4a1 = !empty($pabde73f0["page_attr_name"]) ? $this->f7263332819($pabde73f0["page_attr_name"], $v6d9e688100, $pd69fb7d0) : 'pg'; $v0f1f552536 = !empty($pabde73f0["max_num_of_shown_pages"]) ? $this->f7263332819($pabde73f0["max_num_of_shown_pages"], $v6d9e688100, $pd69fb7d0) : 5; $v25ca459c32 = isset($pabde73f0["total_rows"]) ? $this->f7263332819($pabde73f0["total_rows"], $v6d9e688100, $pd69fb7d0) : null; $v19429f8570 = isset($pabde73f0["rows_per_page"]) ? $this->f7263332819($pabde73f0["rows_per_page"], $v6d9e688100, $pd69fb7d0) : null; $v6525d734e7 = isset($pabde73f0["page_number"]) ? $this->f7263332819($pabde73f0["page_number"], $v6d9e688100, $pd69fb7d0) : null; $v99ef1d18ad = isset($pabde73f0["pagination_template"]) ? $this->f7263332819($pabde73f0["pagination_template"], $v6d9e688100, $pd69fb7d0) : null; $v33751cd2d7 = isset($pabde73f0["on_click_js_func"]) ? $this->f7263332819($pabde73f0["on_click_js_func"], $v6d9e688100, $pd69fb7d0) : null; $v30857f7eca = array( $v8ed660d4a1 => $v6525d734e7, ); $pdb3fba92 = new PaginationLayout($v25ca459c32, $v19429f8570, $v30857f7eca, $v8ed660d4a1, $v33751cd2d7); $pdb3fba92->show_x_pages_at_once = $v0f1f552536; $v539082ff30 = $pdb3fba92->data; $v539082ff30["style"] = $v99ef1d18ad; $pf8ed4912 = $pdb3fba92->designWithStyle(1, $v539082ff30); return $pf8ed4912; } private function f4e7fb5f8a6($pabde73f0) { $v8ed660d4a1 = !empty($pabde73f0["page_attr_name"]) ? $this->f7263332819($pabde73f0["page_attr_name"]) : 'pg'; $v0f1f552536 = !empty($pabde73f0["max_num_of_shown_pages"]) ? $this->f7263332819($pabde73f0["max_num_of_shown_pages"]) : 5; $v25ca459c32 = isset($pabde73f0["total_rows"]) ? $this->f7263332819($pabde73f0["total_rows"]) : null; $v19429f8570 = isset($pabde73f0["rows_per_page"]) ? $this->f7263332819($pabde73f0["rows_per_page"]) : null; $v6525d734e7 = isset($pabde73f0["page_number"]) ? $this->f7263332819($pabde73f0["page_number"]) : null; $v99ef1d18ad = isset($pabde73f0["pagination_template"]) ? $this->f7263332819($pabde73f0["pagination_template"]) : null; $v33751cd2d7 = isset($pabde73f0["on_click_js_func"]) ? $this->f7263332819($pabde73f0["on_click_js_func"]) : null; $v25ca459c32 = empty($v25ca459c32) ? 0 : $v25ca459c32; $v19429f8570 = empty($v19429f8570) ? 0 : $v19429f8570; $v6525d734e7 = empty($v6525d734e7) ? 0 : $v6525d734e7; $v0f1f552536 = empty($v0f1f552536) ? 0 : $v0f1f552536; $pf8ed4912 = '<ptl:var:PaginationLayout new PaginationLayout(' . $v25ca459c32 . ', ' . $v19429f8570 . ', array("' . $v8ed660d4a1 . '" =&gt; ' . $v6525d734e7 . '), "' . $v8ed660d4a1 . '"' . ($v33751cd2d7 ? ', "' . $v33751cd2d7 . '"' : "") . ') />
		<ptl:var:PaginationLayout-&gt;show_x_pages_at_once ' . $v0f1f552536 . ' />
		<ptl:var:pagination_data $PaginationLayout-&gt;data />
		<ptl:var:pagination_data["style"] "' . $v99ef1d18ad . '" />
		<ptl:echo $PaginationLayout-&gt;designWithStyle(1, $pagination_data) />'; return $pf8ed4912; } private function f77b04817d2($pc661dc6b, $v6d9e688100 = false) { if (!empty($this->settings["ptl"])) return $this->mb33052e833eb($pc661dc6b); if (!empty($pc661dc6b["default_input_data"])) $v6d9e688100 = $this->ma080ac9f9175($pc661dc6b["default_input_data"], $v6d9e688100); $pf8ed4912 .= '<table'; if (!empty($pc661dc6b["table_class"])) $pf8ed4912 .= ' class="' . $this->f820e5f681a($pc661dc6b["table_class"], $v6d9e688100) . '"'; $pf8ed4912 .= '>'; $pdfa15f64 = isset($pc661dc6b["elements"]) ? $pc661dc6b["elements"] : null; if ($pdfa15f64) { $v84ad930a7a = !empty($pc661dc6b["rows_class"]) ? ' class="' . $this->f820e5f681a($pc661dc6b["rows_class"], $v6d9e688100) . '"' : ''; $pf8ed4912 .= '
			<thead>
				<tr' . $v84ad930a7a . '>'; foreach ($pdfa15f64 as $pd69fb7d0 => $v06f2bc39aa) if (is_array($v06f2bc39aa) && !empty($v06f2bc39aa)) { reset($v06f2bc39aa); $v201d5661d1 = key($v06f2bc39aa); $v3ae55a9a2e = !empty($v06f2bc39aa[$v201d5661d1]["class"]) ? ' class="' . $this->f820e5f681a($v06f2bc39aa[$v201d5661d1]["class"], $v6d9e688100) . '"' : ''; $pf8ed4912 .= '<th' . $v3ae55a9a2e . '>' . $this->f6635c7799a($v06f2bc39aa[$v201d5661d1], $v6d9e688100) . '</th>'; unset($pdfa15f64[$pd69fb7d0]["field"]["label"]); } $pf8ed4912 .= '</tr>
			</thead>
			<tbody>'; if (is_array($v6d9e688100) || is_object($v6d9e688100)) { foreach ($v6d9e688100 as $v43dd7d0051 => $v02a69d4e0f) { $v84ad930a7a = !empty($pc661dc6b["rows_class"]) ? ' class="' . $this->f820e5f681a($pc661dc6b["rows_class"], $v6d9e688100, $v43dd7d0051) . '"' : ''; $pf8ed4912 .= '<tr' . $v84ad930a7a . '>'; foreach ($pdfa15f64 as $v06f2bc39aa) if (is_array($v06f2bc39aa) && !empty($v06f2bc39aa)) { reset($v06f2bc39aa); $v201d5661d1 = key($v06f2bc39aa); $v3ae55a9a2e = !empty($v06f2bc39aa[$v201d5661d1]["class"]) ? ' class="' . $this->f820e5f681a($v06f2bc39aa[$v201d5661d1]["class"], $v6d9e688100, $v43dd7d0051) . '"' : ''; $v06f2bc39aa[$v201d5661d1]["class"] = ""; $v06f2bc39aa[$v201d5661d1]["disable_field_group"] = 1; $pf8ed4912 .= '<td' . $v3ae55a9a2e . '>' . $this->createElement($v06f2bc39aa, $v6d9e688100, $v43dd7d0051) . '</td>'; } $pf8ed4912 .= '</tr>'; } } $pf8ed4912 .= '</tbody>'; } $pf8ed4912 .= '</table>'; return $pf8ed4912; } private function mb33052e833eb($pc661dc6b) { $pf8ed4912 = ''; $v93ff269092 = rand(1, 1000); $v408c531c27 = $this->settings["ptl"]["input_data_var_name"] . "_$v93ff269092"; if (!empty($pc661dc6b["default_input_data"])) $pf8ed4912 .= '<ptl:var:' . $v408c531c27 . ' ' . str_replace(">", "&gt;", var_export($this->ma080ac9f9175($pc661dc6b["default_input_data"]), true)) . '/>'; else $pf8ed4912 .= '<ptl:var:' . $v408c531c27 . ' $' . $this->settings["ptl"]["input_data_var_name"] . '/>'; $v0256b506d2 = $this->settings["ptl"]["input_data_var_name"]; $this->settings["ptl"]["input_data_var_name"] = $v408c531c27; $pf8ed4912 .= '<table'; if (!empty($pc661dc6b["table_class"])) $pf8ed4912 .= ' class="' . $this->f820e5f681a($pc661dc6b["table_class"]) . '"'; $pf8ed4912 .= '>'; $pdfa15f64 = isset($pc661dc6b["elements"]) ? $pc661dc6b["elements"] : null; if ($pdfa15f64) { $paae9985b = $this->settings["ptl"]["idx_var_name"]; $this->settings["ptl"]["idx_var_name"] = 'idx_' . $v93ff269092; $v84ad930a7a = !empty($pc661dc6b["rows_class"]) ? ' class="' . $this->f820e5f681a($pc661dc6b["rows_class"]) . '"' : ''; $pf8ed4912 .= '
			<thead>
				<tr' . $v84ad930a7a . '>'; foreach ($pdfa15f64 as $pd69fb7d0 => $v06f2bc39aa) if (is_array($v06f2bc39aa) && !empty($v06f2bc39aa)) { reset($v06f2bc39aa); $v201d5661d1 = key($v06f2bc39aa); $v3ae55a9a2e = !empty($v06f2bc39aa[$v201d5661d1]["class"]) ? ' class="' . $this->f820e5f681a($v06f2bc39aa[$v201d5661d1]["class"]) . '"' : ''; $pf8ed4912 .= '<th' . $v3ae55a9a2e . '>' . $this->f6635c7799a($v06f2bc39aa[$v201d5661d1]) . '</th>'; unset($pdfa15f64[$pd69fb7d0]["field"]["label"]); } $pf8ed4912 .= '</tr>
			</thead>
			<tbody>
				<ptl:if is_array($' . $v408c531c27 . ')>
					<ptl:foreach $' . $v408c531c27 . ' ' . $this->settings["ptl"]["idx_var_name"] . ' item>
						<tr' . $v84ad930a7a . '>'; foreach ($pdfa15f64 as $v06f2bc39aa) if (is_array($v06f2bc39aa) && !empty($v06f2bc39aa)) { reset($v06f2bc39aa); $v201d5661d1 = key($v06f2bc39aa); $v3ae55a9a2e = !empty($v06f2bc39aa[$v201d5661d1]["class"]) ? ' class="' . $this->f820e5f681a($v06f2bc39aa[$v201d5661d1]["class"]) . '"' : ''; $v06f2bc39aa[$v201d5661d1]["class"] = ""; $v06f2bc39aa[$v201d5661d1]["disable_field_group"] = 1; $pf8ed4912 .= '		<td' . $v3ae55a9a2e . '>' . $this->createElement($v06f2bc39aa, null, true) . '</td>'; } $pf8ed4912 .= '		</tr>			
					</ptl:foreach>
				</ptl:if>
			</tbody>'; $this->settings["ptl"]["idx_var_name"] = $paae9985b; } $this->settings["ptl"]["input_data_var_name"] = $v0256b506d2; $pf8ed4912 .= '</table>'; return $pf8ed4912; } private function f47e4a3b460($pb68464cb, $v6d9e688100 = false) { if (!empty($this->settings["ptl"])) return $this->f4f67b6745c($pb68464cb); $pf8ed4912 = ''; $pf14b30fb = !empty($pb68464cb["ordered"]) ? 'ol' : 'ul'; if (!empty($pb68464cb["default_input_data"])) $v6d9e688100 = $this->ma080ac9f9175($pb68464cb["default_input_data"], $v6d9e688100); $pf8ed4912 .= '<' . $pf14b30fb; if (!empty($pb68464cb["tree_class"])) $pf8ed4912 .= ' class="' . $this->f820e5f681a($pb68464cb["tree_class"], $v6d9e688100) . '"'; $pf8ed4912 .= '>'; $pdfa15f64 = isset($pb68464cb["elements"]) ? $pb68464cb["elements"] : null; if ($pdfa15f64) { if (is_array($v6d9e688100) || is_object($v6d9e688100)) { foreach ($v6d9e688100 as $v43dd7d0051 => $v342a134247) { $v86e5d83e26 = ""; foreach ($pdfa15f64 as $v06f2bc39aa) $v86e5d83e26 .= $this->createElement($v06f2bc39aa, $v6d9e688100, $v43dd7d0051); $pa2e264f3 = !empty($pb68464cb["lis_class"]) ? ' class="' . $this->f820e5f681a($pb68464cb["lis_class"], $v6d9e688100, $v43dd7d0051) . '"' : ''; $pf8ed4912 .= '<li' . $pa2e264f3 . '>' . $v86e5d83e26; if (!empty($pb68464cb["recursive"]) && !empty($pb68464cb["recursive_input_data"])) { $pb0e4fbbf = $this->ma080ac9f9175($pb68464cb["recursive_input_data"], $v342a134247); if (!empty($pb0e4fbbf) && (is_array($pb0e4fbbf) || is_object($pb0e4fbbf))) $pf8ed4912 .= $this->f47e4a3b460($pb68464cb, $pb0e4fbbf); } $pf8ed4912 .= '</li>'; } } } $pf8ed4912 .= '</' . $pf14b30fb . '>'; return $pf8ed4912; } private function f4f67b6745c($pb68464cb) { $pf8ed4912 = ''; $pf14b30fb = !empty($pb68464cb["ordered"]) ? 'ol' : 'ul'; $v93ff269092 = rand(1, 1000); $v408c531c27 = $this->settings["ptl"]["input_data_var_name"] . "_$v93ff269092"; if (!empty($pb68464cb["default_input_data"])) $pf8ed4912 .= '<ptl:var:' . $v408c531c27 . ' ' . str_replace(">", "&gt;", var_export($this->ma080ac9f9175($pb68464cb["default_input_data"]), true)) . '/>'; else $pf8ed4912 .= '<ptl:var:' . $v408c531c27 . ' $' . $this->settings["ptl"]["input_data_var_name"] . '/>'; $v0256b506d2 = $this->settings["ptl"]["input_data_var_name"]; $this->settings["ptl"]["input_data_var_name"] = $v408c531c27; $pf8ed4912 .= '<' . $pf14b30fb; if (!empty($pb68464cb["tree_class"])) $pf8ed4912 .= ' class="' . $this->f820e5f681a($pb68464cb["tree_class"]) . '"'; $pf8ed4912 .= '>'; $pdfa15f64 = isset($pb68464cb["elements"]) ? $pb68464cb["elements"] : null; if ($pdfa15f64) { $pccc626e4 = $this->v360b1d47f8; $this->settings["ptl"]["input_data_var_name"] = $pccc626e4; $paae9985b = $this->settings["ptl"]["idx_var_name"]; $this->settings["ptl"]["idx_var_name"] = 'i'; $pa2e264f3 = !empty($pb68464cb["lis_class"]) ? ' class="' . $this->f820e5f681a($pb68464cb["lis_class"]) . '"' : ''; $v86e5d83e26 = ""; foreach ($pdfa15f64 as $v06f2bc39aa) $v86e5d83e26 .= $this->createElement($v06f2bc39aa, null, true); do { preg_match("/<ptl:function:([\w]+) $pccc626e4>/iu", $v86e5d83e26, $pbae7526c, PREG_OFFSET_CAPTURE); if ($pbae7526c[0]) { $v1b1c6a10a2 = "</ptl:function:" . $pbae7526c[1][0] . ">"; $v7e4b517c18 = $pbae7526c[0][1]; $v27e200bd34 = strpos($v86e5d83e26, $v1b1c6a10a2, $v7e4b517c18) + strlen($v1b1c6a10a2); $pf8ed4912 .= substr($v86e5d83e26, $v7e4b517c18, $v27e200bd34 - $v7e4b517c18); $v86e5d83e26 = substr($v86e5d83e26, 0, $v7e4b517c18) . substr($v86e5d83e26, $v27e200bd34); } } while ($pbae7526c); $pf8ed4912 .= '
			<ptl:function:createTree_' . $v93ff269092 . ' ' . $pccc626e4 . '>
				<ptl:if !empty($' . $pccc626e4 . ') && (is_array($' . $pccc626e4 . ') || is_object($' . $pccc626e4 . '))>
					<ptl:foreach $' . $pccc626e4 . ' i item>
						<li' . $pa2e264f3 . '>' . $v86e5d83e26; if (!empty($pb68464cb["recursive"]) && !empty($pb68464cb["recursive_input_data"])) { $this->settings["ptl"]["input_data_var_name"] = 'item'; $pf8ed4912 .= '		<ptl:var:sub_items ' . str_replace(">", "&gt;", var_export($this->ma080ac9f9175($pb68464cb["recursive_input_data"]), true)) . '/>
							<ptl:createTree_' . $v93ff269092 . ' $sub_items />'; } $pf8ed4912 .= '		</li>
					</ptl:foreach>
				</ptl:if>
			</ptl:function:createTree_' . $v93ff269092 . '>'; $pf8ed4912 .= '<ptl:createTree_' . $v93ff269092 . ' $' . $v408c531c27 . ' />'; $this->settings["ptl"]["idx_var_name"] = $paae9985b; } $this->settings["ptl"]["input_data_var_name"] = $v0256b506d2; $pf8ed4912 .= '</' . $pf14b30fb . '>'; return $pf8ed4912; } private function f6635c7799a($v5d170b1de6, $v6d9e688100 = false, $pd69fb7d0 = false) { $pd67aa87a = isset($v5d170b1de6["label"]) ? $v5d170b1de6["label"] : null; if ($pd67aa87a) { $pf8ed4912 = isset($pd67aa87a["previous_html"]) ? $this->f3f46b56057($pd67aa87a["previous_html"], $v6d9e688100, $pd69fb7d0) : ""; if (!empty($pd67aa87a["value"])) { $pc5fc8b02 = !empty($pd67aa87a["type"]) ? $pd67aa87a["type"] : "label"; $pf8ed4912 .= '<' . $pc5fc8b02 . ' class="' . $this->f9065d190bd($pd67aa87a, $v6d9e688100, $pd69fb7d0) . '"'; $pd67aa87a["extra_attributes"] = isset($pd67aa87a["extra_attributes"]) ? $this->f2fa073f7cc($pd67aa87a["extra_attributes"], $v6d9e688100, $pd69fb7d0) : null; $ped0a6251 = array("title", "extra_attributes"); $pf8ed4912 .= $this->f7f50294902($pd67aa87a, $ped0a6251, $v6d9e688100, $pd69fb7d0); $pf8ed4912 .= '>'; $pf8ed4912 .= isset($pd67aa87a["value"]) ? $this->f3f46b56057($pd67aa87a["value"], $v6d9e688100, $pd69fb7d0) : ""; $pf8ed4912 .= '</' . $pc5fc8b02 . '>'; } $pf8ed4912 .= isset($pd67aa87a["next_html"]) ? $this->f3f46b56057($pd67aa87a["next_html"], $v6d9e688100, $pd69fb7d0) : ""; return $pf8ed4912; } } private function f754c0f002b($v5d170b1de6, $v6d9e688100 = false, $pd69fb7d0 = false) { if (isset($v5d170b1de6["input"]["available_values"])) $v5d170b1de6["input"]["available_values"] = $this->mbd5c6d3194be($v5d170b1de6["input"]["available_values"], $v6d9e688100, $pd69fb7d0); if (isset($v5d170b1de6["input"]["extra_attributes"])) $v5d170b1de6["input"]["extra_attributes"] = $this->f2fa073f7cc($v5d170b1de6["input"]["extra_attributes"], $v6d9e688100, $pd69fb7d0); $pf8ed4912 = isset($v5d170b1de6["input"]["previous_html"]) ? $this->f3f46b56057($v5d170b1de6["input"]["previous_html"], $v6d9e688100, $pd69fb7d0) : ""; if (isset($v5d170b1de6["input"]["type"])) switch($v5d170b1de6["input"]["type"]) { case "text": case "password": case "file": case "search": case "url": case "email": case "tel": case "number": case "range": case "date": case "month": case "week": case "time": case "datetime": case "datetime-local": case "color": case "hidden": case "button": case "submit": case "button_img": $pf8ed4912 .= $this->f2980e4d546($v5d170b1de6, $v6d9e688100, $pd69fb7d0); break; case "checkbox": case "radio": $pf8ed4912 .= $this->mcf488cdc071f($v5d170b1de6, $v6d9e688100, $pd69fb7d0); break; case "select": $pf8ed4912 .= $this->md587dc78c081($v5d170b1de6, $v6d9e688100, $pd69fb7d0); break; case "textarea": $pf8ed4912 .= $this->f0259865d55($v5d170b1de6, $v6d9e688100, $pd69fb7d0); break; case "link": $pf8ed4912 .= $this->f9172d8e7ee($v5d170b1de6, $v6d9e688100, $pd69fb7d0); break; case "image": $pf8ed4912 .= $this->mc991df685262($v5d170b1de6, $v6d9e688100, $pd69fb7d0); break; case "label": case "h1": case "h2": case "h3": case "h4": case "h5": $pf8ed4912 .= $this->md8cd1647cccb($v5d170b1de6, $v6d9e688100, $pd69fb7d0); break; } $pf8ed4912 .= isset($v5d170b1de6["input"]["next_html"]) ? $this->f3f46b56057($v5d170b1de6["input"]["next_html"], $v6d9e688100, $pd69fb7d0) : ""; return $pf8ed4912; } private function f2980e4d546($v5d170b1de6, $v6d9e688100 = false, $pd69fb7d0 = false) { $v81ea576318 = isset($v5d170b1de6["input"]) ? $v5d170b1de6["input"] : null; $v16b9d683b1 = isset($v81ea576318["type"]) ? $v81ea576318["type"] : null; $v16b9d683b1 = $v16b9d683b1 == "button_img" ? "image" : $v16b9d683b1; $v2d93385579 = isset($v81ea576318["available_values"]) ? $v81ea576318["available_values"] : null; $v991cb8b5d6 = isset($v81ea576318["value"]) ? $v81ea576318["value"] : null; $pf8ed4912 = '<input type="' . $v16b9d683b1 . '" class="' . $this->f9065d190bd($v81ea576318, $v6d9e688100, $pd69fb7d0) . '" value="' . $this->f820e5f681a($v991cb8b5d6, $v6d9e688100, $pd69fb7d0, $v2d93385579) . '"'; $ped0a6251 = array("extra_attributes", "name", "title", "confirmation", "place_holder"); if ($v16b9d683b1 == "image") $ped0a6251[] = "src"; if ($v16b9d683b1 != "hidden") { $ped0a6251[] = "confirmation_message"; $ped0a6251[] = "allow_null"; $ped0a6251[] = "allow_javascript"; $ped0a6251[] = "validation_label"; $ped0a6251[] = "validation_message"; $ped0a6251[] = "validation_type"; $ped0a6251[] = "validation_regex"; $ped0a6251[] = "min_length"; $ped0a6251[] = "max_length"; $ped0a6251[] = "min_value"; $ped0a6251[] = "max_value"; $ped0a6251[] = "min_words"; $ped0a6251[] = "max_words"; } $pf8ed4912 .= $this->f7f50294902($v81ea576318, $ped0a6251, $v6d9e688100, $pd69fb7d0); $pf8ed4912 .= ' />'; return $pf8ed4912; } private function mcf488cdc071f($v5d170b1de6, $v6d9e688100 = false, $pd69fb7d0 = false) { $v81ea576318 = isset($v5d170b1de6["input"]) ? $v5d170b1de6["input"] : null; $v3ae55a9a2e = $this->f9065d190bd($v81ea576318, $v6d9e688100, $pd69fb7d0); $ped0a6251 = array("extra_attributes", "name", "title", "allow_null", "validation_label", "validation_message"); $v42a08d8b64 = $this->f7f50294902($v81ea576318, $ped0a6251, $v6d9e688100, $pd69fb7d0); $v5d3813882f = isset($v81ea576318["options"]) ? $this->f7ed873744c($v81ea576318["options"], $v6d9e688100, $pd69fb7d0) : null; if(empty($v5d3813882f)) $v5d3813882f = array(array("value" => 1)); $pf8ed4912 = ''; if(is_array($v5d3813882f)) { $v16b9d683b1 = isset($v81ea576318["type"]) ? $v81ea576318["type"] : null; $v2d93385579 = isset($v81ea576318["available_values"]) ? $v81ea576318["available_values"] : null; $v991cb8b5d6 = isset($v81ea576318["value"]) ? $v81ea576318["value"] : null; $pdba7ae94 = $this->f3f46b56057($v991cb8b5d6, $v6d9e688100, $pd69fb7d0, $v2d93385579); if (!empty($this->settings["ptl"])) { if (is_array($pdba7ae94)) $pdba7ae94 = '<ptl:var:selected_value ' . str_replace(">", "&gt;", var_export($pdba7ae94, true)) . '/>'; else if (strpos($pdba7ae94, "<ptl:echo ") !== false) $pdba7ae94 = str_replace("<ptl:echo ", "<ptl:var:selected_value ", $pdba7ae94); else { $pdba7ae94 = strpos($pdba7ae94, '"') !== false || strpos($pdba7ae94, "'") !== false || is_numeric($pdba7ae94) ? $pdba7ae94 : '"' . addcslashes($pdba7ae94, '\\"') . '"'; $pdba7ae94 = "<ptl:var:selected_value " . $pdba7ae94 . ">"; } $pf8ed4912 .= $pdba7ae94; } $pc37695cb = count($v5d3813882f); foreach ($v5d3813882f as $pcec77170) { $v0e90dff0d5 = null; if (isset($pcec77170["label"])) $v0e90dff0d5 = $this->f3f46b56057($pcec77170["label"], $v6d9e688100, $pd69fb7d0); $v417d73dcba = $v42a08d8b64; if ($pc37695cb > 1 || $v0e90dff0d5) $pf8ed4912 .= '
				<div class="' . $v3ae55a9a2e . '">
					' . ($v0e90dff0d5 ? '<label>' . $v0e90dff0d5 . '</label>' : ''); else if ($v3ae55a9a2e) $v417d73dcba = strpos($v417d73dcba, 'class="') !== false ? $this->ma98cb2ed99ec('class="', 'class="' . $v3ae55a9a2e . ' ', $v417d73dcba) : ' class="' . $v3ae55a9a2e . '" ' . $v417d73dcba; $pf8ed4912 .= '<input type="' . $v16b9d683b1 . '"' . $v417d73dcba; $v9be6913e98 = ""; if (isset($pcec77170["value"])) { $v9be6913e98 = !empty($this->settings["ptl"]) ? $pcec77170["value"] : $this->f3f46b56057($pcec77170["value"], $v6d9e688100, $pd69fb7d0); $pf8ed4912 .= ' value="' . $this->f820e5f681a($pcec77170["value"], $v6d9e688100, $pd69fb7d0) . '"'; } else if (isset($v0e90dff0d5)) $v9be6913e98 = !empty($this->settings["ptl"]) ? $pcec77170["label"] : $v0e90dff0d5; if (!empty($pcec77170["other_attributes"])) $pf8ed4912 .= ' ' . $this->f3f46b56057($pcec77170["other_attributes"], $v6d9e688100, $pd69fb7d0); if (!empty($this->settings["ptl"])) { if (strpos($v9be6913e98, "<ptl:echo ") !== false) $v9be6913e98 = str_replace("<ptl:echo ", "<ptl:var:opt_value ", $v9be6913e98); else { $v9be6913e98 = strpos($v9be6913e98, '"') !== false || strpos($v9be6913e98, "'") !== false || is_numeric($v9be6913e98) ? $v9be6913e98 : '"' . addcslashes($v9be6913e98, '\\"') . '"'; $v9be6913e98 = "<ptl:var:opt_value " . $v9be6913e98 . ">"; } $pf8ed4912 .= $v9be6913e98 . '<ptl:if (is_array($selected_value) && in_array($opt_value, $selected_value)) || (!is_array($selected_value) && $opt_value == $selected_value)><ptl:echo checked/></ptl:if>'; } else if (is_array($pdba7ae94) && in_array($v9be6913e98, $pdba7ae94)) $pf8ed4912 .= ' checked'; else if ($v9be6913e98 == $pdba7ae94) $pf8ed4912 .= ' checked'; $pf8ed4912 .= '/>'; if ($pc37695cb > 1 || $v0e90dff0d5) $pf8ed4912 .= '</div>'; } } return $pf8ed4912; } private function md587dc78c081($v5d170b1de6, $v6d9e688100 = false, $pd69fb7d0 = false) { $v81ea576318 = isset($v5d170b1de6["input"]) ? $v5d170b1de6["input"] : null; $pf8ed4912 = '<select class="' . $this->f9065d190bd($v81ea576318, $v6d9e688100, $pd69fb7d0) . '"'; $ped0a6251 = array("extra_attributes", "name", "title", "allow_null", "validation_label", "validation_message"); $pf8ed4912 .= $this->f7f50294902($v81ea576318, $ped0a6251, $v6d9e688100, $pd69fb7d0); $pf8ed4912 .= '>'; $v2d93385579 = isset($v81ea576318["available_values"]) ? $v81ea576318["available_values"] : null; $v991cb8b5d6 = isset($v81ea576318["value"]) ? $v81ea576318["value"] : null; $pdba7ae94 = $this->f3f46b56057($v991cb8b5d6, $v6d9e688100, $pd69fb7d0, $v2d93385579); $v116275474d = false; if (!empty($this->settings["ptl"])) { if (is_array($pdba7ae94)) $pdba7ae94 = '<ptl:var:selected_value ' . str_replace(">", "&gt;", var_export($pdba7ae94, true)) . '/>'; else if (strpos($pdba7ae94, "<ptl:echo ") !== false) $pdba7ae94 = str_replace("<ptl:echo ", "<ptl:var:selected_value ", $pdba7ae94); else { $pdba7ae94 = strpos($pdba7ae94, '"') !== false || strpos($pdba7ae94, "'") !== false || is_numeric($pdba7ae94) ? $pdba7ae94 : '"' . addcslashes($pdba7ae94, '\\"') . '"'; $pdba7ae94 = "<ptl:var:selected_value " . $pdba7ae94 . ">"; } $pf8ed4912 .= $pdba7ae94; $pf8ed4912 .= "<ptl:var:selected_value_exists false/>"; } $v5d3813882f = isset($v81ea576318["options"]) ? $this->f7ed873744c($v81ea576318["options"], $v6d9e688100, $pd69fb7d0) : null; if(is_array($v5d3813882f)) foreach ($v5d3813882f as $pcec77170) { $v0e90dff0d5 = null; if (isset($pcec77170["label"])) $v0e90dff0d5 = $this->f3f46b56057($pcec77170["label"], $v6d9e688100, $pd69fb7d0); $pf8ed4912 .= '<option'; $v9be6913e98 = ""; if (isset($pcec77170["value"])) { $v9be6913e98 = $this->f3f46b56057($pcec77170["value"], $v6d9e688100, $pd69fb7d0); $pf8ed4912 .= ' value="' . $this->f820e5f681a($pcec77170["value"], $v6d9e688100, $pd69fb7d0) . '"'; } else if (isset($v0e90dff0d5)) $v9be6913e98 = $v0e90dff0d5; if (!empty($pcec77170["other_attributes"])) $pf8ed4912 .= ' ' . $this->f3f46b56057($pcec77170["other_attributes"], $v6d9e688100, $pd69fb7d0); if (!empty($this->settings["ptl"])) { if (strpos($v9be6913e98, "<ptl:echo ") !== false) $v9be6913e98 = str_replace("<ptl:echo ", "<ptl:var:opt_value ", $v9be6913e98); else { $v9be6913e98 = strpos($v9be6913e98, '"') !== false || strpos($v9be6913e98, "'") !== false || is_numeric($v9be6913e98) ? $v9be6913e98 : '"' . addcslashes($v9be6913e98, '\\"') . '"'; $v9be6913e98 = "<ptl:var:opt_value " . $v9be6913e98 . ">"; } $pf8ed4912 .= $v9be6913e98 . '<ptl:if (is_array($selected_value) && in_array($opt_value, $selected_value)) || (!is_array($selected_value) && $opt_value == $selected_value)> <ptl:echo selected/><ptl:var:selected_value_exists true/></ptl:if>'; } else if (is_array($pdba7ae94) && in_array($v9be6913e98, $pdba7ae94)) { $pf8ed4912 .= ' selected'; $v116275474d = true; } else if ($v9be6913e98 == $pdba7ae94) { $pf8ed4912 .= ' selected'; $v116275474d = true; } $pf8ed4912 .= '>' . $v0e90dff0d5 . '</option>'; } if (!empty($this->settings["ptl"])) $pf8ed4912 .= '<ptl:if is_string($selected_value) && strlen($selected_value) && !$selected_value_exists><option class="option-non-existent" value="<ptl:echo $selected_value/>" selected><ptl:echo $selected_value/></option></ptl:if>'; else if (is_string($pdba7ae94) && strlen($pdba7ae94) && !$v116275474d) $pf8ed4912 .= '<option class="option-non-existent" value="' . $pdba7ae94 . '" selected>' . $pdba7ae94 . '</option>'; $pf8ed4912 .= '</select>'; return $pf8ed4912; } private function f0259865d55($v5d170b1de6, $v6d9e688100 = false, $pd69fb7d0 = false) { $v81ea576318 = isset($v5d170b1de6["input"]) ? $v5d170b1de6["input"] : null; $pf8ed4912 = '<textarea class="' . $this->f9065d190bd($v81ea576318, $v6d9e688100, $pd69fb7d0) . '"'; $ped0a6251 = array("extra_attributes", "name", "title", "allow_null", "allow_javascript", "validation_label", "validation_message", "validation_type", "validation_regex", "min_length", "max_length", "min_value", "max_value", "min_words", "max_words", "place_holder"); $pf8ed4912 .= $this->f7f50294902($v81ea576318, $ped0a6251, $v6d9e688100, $pd69fb7d0); $v2d93385579 = isset($v81ea576318["available_values"]) ? $v81ea576318["available_values"] : null; $v991cb8b5d6 = isset($v81ea576318["value"]) ? $v81ea576318["value"] : null; $v67db1bd535 = $this->f3f46b56057($v991cb8b5d6, $v6d9e688100, $pd69fb7d0, $v2d93385579); $pf8ed4912 .= '>' . $this->ma98cb2ed99ec('</textarea', '&lt/textarea', $v67db1bd535) . '</textarea>'; return $pf8ed4912; } private function md8cd1647cccb($v5d170b1de6, $v6d9e688100 = false, $pd69fb7d0 = false) { $v81ea576318 = isset($v5d170b1de6["input"]) ? $v5d170b1de6["input"] : null; $v16b9d683b1 = isset($v81ea576318["type"]) ? $v81ea576318["type"] : null; $pf14b30fb = $v16b9d683b1 == "h1" || $v16b9d683b1 == "h2" || $v16b9d683b1 == "h3" || $v16b9d683b1 == "h4" || $v16b9d683b1 == "h5" ? $v16b9d683b1 : "span"; $pf8ed4912 = '<' . $pf14b30fb . ' class="' . $this->f9065d190bd($v81ea576318, $v6d9e688100, $pd69fb7d0) . '"'; $ped0a6251 = array("extra_attributes", "title"); $pf8ed4912 .= $this->f7f50294902($v81ea576318, $ped0a6251, $v6d9e688100, $pd69fb7d0); $v2d93385579 = isset($v81ea576318["available_values"]) ? $v81ea576318["available_values"] : null; $v991cb8b5d6 = isset($v81ea576318["value"]) ? $v81ea576318["value"] : null; $pf8ed4912 .= '>' . $this->f3f46b56057($v991cb8b5d6, $v6d9e688100, $pd69fb7d0, $v2d93385579) . '</' . $pf14b30fb . '>'; return $pf8ed4912; } private function f9172d8e7ee($v5d170b1de6, $v6d9e688100 = false, $pd69fb7d0 = false) { $v81ea576318 = isset($v5d170b1de6["input"]) ? $v5d170b1de6["input"] : null; $pf8ed4912 = '<a class="' . $this->f9065d190bd($v81ea576318, $v6d9e688100, $pd69fb7d0) . '"'; $ped0a6251 = array("extra_attributes", "href", "title", "target"); $pf8ed4912 .= $this->f7f50294902($v81ea576318, $ped0a6251, $v6d9e688100, $pd69fb7d0); $v2d93385579 = isset($v81ea576318["available_values"]) ? $v81ea576318["available_values"] : null; $v991cb8b5d6 = isset($v81ea576318["value"]) ? $v81ea576318["value"] : null; $pf8ed4912 .= '>' . $this->f3f46b56057($v991cb8b5d6, $v6d9e688100, $pd69fb7d0, $v2d93385579) . '</a>'; return $pf8ed4912; } private function mc991df685262($v5d170b1de6, $v6d9e688100 = false, $pd69fb7d0 = false) { $v81ea576318 = isset($v5d170b1de6["input"]) ? $v5d170b1de6["input"] : null; $pf8ed4912 = '<img class="' . $this->f9065d190bd($v81ea576318, $v6d9e688100, $pd69fb7d0) . '"'; if (!empty($v81ea576318["src"])) $pf8ed4912 .= ' src="' . $this->f820e5f681a($v81ea576318["src"], $v6d9e688100, $pd69fb7d0) . '"'; else if (!empty($v81ea576318["value"])) { $v2d93385579 = isset($v81ea576318["available_values"]) ? $v81ea576318["available_values"] : null; $pf8ed4912 .= ' src="' . $this->f820e5f681a($v81ea576318["value"], $v6d9e688100, $pd69fb7d0, $v2d93385579) . '"'; } $ped0a6251 = array("extra_attributes", "title"); $pf8ed4912 .= $this->f7f50294902($v81ea576318, $ped0a6251, $v6d9e688100, $pd69fb7d0); $pf8ed4912 .= ' />'; return $pf8ed4912; } private function f9065d190bd(&$v5d170b1de6, $v6d9e688100 = false, $pd69fb7d0 = false, $ped0a6251 = false) { $v3ae55a9a2e = ""; if (is_array($ped0a6251)) foreach ($ped0a6251 as $v1b0cfa478b) if (isset($v5d170b1de6[$v1b0cfa478b]) && strlen($v5d170b1de6[$v1b0cfa478b])) $v3ae55a9a2e .= $this->f820e5f681a($v5d170b1de6[$v1b0cfa478b], $v6d9e688100, $pd69fb7d0) . ' '; $v3ae55a9a2e .= !empty($v5d170b1de6["class"]) ? $this->f820e5f681a($v5d170b1de6["class"], $v6d9e688100, $pd69fb7d0) : ""; if(isset($v5d170b1de6["extra_attributes"]) && is_array($v5d170b1de6["extra_attributes"])) foreach ($v5d170b1de6["extra_attributes"] as $pe5c5e2fe => $v1b08a89324) if (isset($v1b08a89324["name"]) && strtolower($this->f3f46b56057($v1b08a89324["name"], $v6d9e688100, $pd69fb7d0)) == "class") { $v3ae55a9a2e .= ($v3ae55a9a2e ? ' ' : '') . (isset($v1b08a89324["value"]) ? $this->f820e5f681a($v1b08a89324["value"], $v6d9e688100, $pd69fb7d0) : ""); unset($v5d170b1de6["extra_attributes"][$pe5c5e2fe]); } return $v3ae55a9a2e; } private function f7f50294902($v5d170b1de6, $ped0a6251, $v6d9e688100 = false, $pd69fb7d0 = false) { $v067674f4e4 = ""; $v16b9d683b1 = isset($v5d170b1de6["type"]) ? $v5d170b1de6["type"] : null; if (is_array($ped0a6251)) foreach ($ped0a6251 as $v1b0cfa478b) if (isset($v5d170b1de6[$v1b0cfa478b])) switch ($v1b0cfa478b) { case "extra_attributes": if ($v5d170b1de6["extra_attributes"]) { if(is_array($v5d170b1de6["extra_attributes"])) foreach ($v5d170b1de6["extra_attributes"] as $v1b08a89324) if (!empty($v1b08a89324["name"])) $v067674f4e4 .= ' ' . $this->f3f46b56057($v1b08a89324["name"], $v6d9e688100, $pd69fb7d0) . '="' . $this->f820e5f681a($v1b08a89324["value"], $v6d9e688100, $pd69fb7d0) . '"'; else $v067674f4e4 .= ' ' . $v5d170b1de6["extra_attributes"]; } break; case "href": if ($v5d170b1de6["href"]) { $v63967fdd7c = $this->f820e5f681a($v5d170b1de6["href"], $v6d9e688100, $pd69fb7d0); $v067674f4e4 .= ' href="' . $this->ma98cb2ed99ec(' ', '%20', $v63967fdd7c) . '"'; } break; case "allow_null": $v067674f4e4 .= ' data-allow-null="' . ($v5d170b1de6["allow_null"] ? $v5d170b1de6["allow_null"] : 0) . '"'; break; case "allow_javascript": if ($v5d170b1de6["allow_javascript"] && ($v5d170b1de6["allow_javascript"] == "1" || strtolower($v5d170b1de6["allow_javascript"]) == "true")) $v067674f4e4 .= ' data-allow-javascript="1"'; break; case "validation_regex": $v067674f4e4 .= $v5d170b1de6["validation_regex"] ? ' data-validation-regex="' . $v5d170b1de6["validation_regex"] . '"' : ""; break; case "validation_label": case "validation_message": case "validation_type": case "confirmation": case "confirmation_message": $v067674f4e4 .= $v5d170b1de6[$v1b0cfa478b] ? ' data-' . str_replace("_", "-", $v1b0cfa478b) . '="' . $this->f820e5f681a($v5d170b1de6[$v1b0cfa478b], $v6d9e688100, $pd69fb7d0) . '"' : ""; break; case "min_words": case "max_words": $v067674f4e4 .= is_numeric($v5d170b1de6[$v1b0cfa478b]) ? ' data-' . str_replace("_", "-", $v1b0cfa478b) . '="' . $v5d170b1de6[$v1b0cfa478b] . '"' : ''; break; case "min_length": $v067674f4e4 .= is_numeric($v5d170b1de6["min_length"]) ? ' minLength="' . $v5d170b1de6["min_length"] . '"' : ''; break; case "max_length": $v067674f4e4 .= is_numeric($v5d170b1de6["max_length"]) ? ' maxLength="' . $v5d170b1de6["max_length"] . '"' : ''; break; case "min_value": $v560b43f6bc = $v16b9d683b1 == "date" || $v16b9d683b1 == "datetime" || $v16b9d683b1 == "datetime-local"; $v067674f4e4 .= ($v560b43f6bc ? $v5d170b1de6["min_value"] : is_numeric($v5d170b1de6["min_value"])) ? ' min="' . $v5d170b1de6["min_value"] . '"' : ''; break; case "max_value": $v560b43f6bc = $v16b9d683b1 == "date" || $v16b9d683b1 == "datetime" || $v16b9d683b1 == "datetime-local"; $v067674f4e4 .= ($v560b43f6bc ? $v5d170b1de6["max_value"] : is_numeric($v5d170b1de6["max_value"])) ? ' max="' . $v5d170b1de6["max_value"] . '"' : ''; break; case "place_holder": $v067674f4e4 .= $v5d170b1de6["place_holder"] ? ' placeHolder="' . $this->f820e5f681a($v5d170b1de6["place_holder"], $v6d9e688100, $pd69fb7d0) . '"' : ''; break; default: if (strlen($v5d170b1de6[$v1b0cfa478b])) $v067674f4e4 .= ' ' . $v1b0cfa478b . '="' . $this->f820e5f681a($v5d170b1de6[$v1b0cfa478b], $v6d9e688100, $pd69fb7d0) . '"'; } return $v067674f4e4; } private function f7ed873744c($v5d3813882f, $v6d9e688100 = false, $pd69fb7d0 = false) { if ($v5d3813882f) { if (is_string($v5d3813882f)) { $v3b471758ae = isset($this->settings["ptl"]) ? $this->settings["ptl"] : null; $this->settings["ptl"] = false; $pebb3f429 = $v6d9e688100 ? $this->ma080ac9f9175($v5d3813882f, $v6d9e688100, $pd69fb7d0) : null; if (!is_array($pebb3f429) && $this->v35749ed6d7) $pebb3f429 = $this->ma080ac9f9175($v5d3813882f, $this->v35749ed6d7, $pd69fb7d0); $v5d3813882f = $pebb3f429; $this->settings["ptl"] = $v3b471758ae; } if (is_array($v5d3813882f)) { $pebb3f429 = array(); foreach ($v5d3813882f as $pe5c5e2fe => $v956913c90f) { if (!is_array($v956913c90f)) { $pebb3f429[] = array( "value" => $pe5c5e2fe, "label" => $v956913c90f ); } else if ($v956913c90f) { if (!isset($v956913c90f["value"]) && !isset($v956913c90f["label"]) && !isset($v956913c90f["other_attributes"])) { $pebb3f429[] = array( "value" => $pe5c5e2fe, "label" => $v956913c90f ); } else $pebb3f429[] = $v956913c90f; } } $v5d3813882f = $pebb3f429; } } return $v5d3813882f; } private function f2fa073f7cc($paf762455, $v6d9e688100 = false, $pd69fb7d0 = false) { if ($paf762455) { if (is_string($paf762455)) { $v3b471758ae = isset($this->settings["ptl"]) ? $this->settings["ptl"] : null; $this->settings["ptl"] = false; $v2e1e0db913 = $v6d9e688100 ? $this->ma080ac9f9175($paf762455, $v6d9e688100, $pd69fb7d0) : null; if (!is_array($v2e1e0db913) && $this->v35749ed6d7) $v2e1e0db913 = $this->ma080ac9f9175($paf762455, $this->v35749ed6d7, $pd69fb7d0); $paf762455 = $v2e1e0db913; $this->settings["ptl"] = $v3b471758ae; } if (is_array($paf762455)) { $v2e1e0db913 = array(); foreach ($paf762455 as $pe5c5e2fe => $v956913c90f) { if (!is_array($v956913c90f)) { $v2e1e0db913[] = array( "name" => $pe5c5e2fe, "value" => $v956913c90f ); } else if ($v956913c90f) { if (!isset($v956913c90f["name"]) && !isset($v956913c90f["value"])) { $v2e1e0db913[] = array( "name" => $pe5c5e2fe, "value" => $v956913c90f ); } else $v2e1e0db913[] = $v956913c90f; } } $paf762455 = $v2e1e0db913; } } return $paf762455; } private function mbd5c6d3194be($v2d93385579, $v6d9e688100 = false, $pd69fb7d0 = false) { if ($v2d93385579) { if (is_string($v2d93385579)) { $v3b471758ae = isset($this->settings["ptl"]) ? $this->settings["ptl"] : null; $this->settings["ptl"] = false; $v8726312395 = $v6d9e688100 ? $this->ma080ac9f9175($v2d93385579, $v6d9e688100, $pd69fb7d0) : null; if (!is_array($v8726312395) && $this->v35749ed6d7) $v8726312395 = $this->ma080ac9f9175($v2d93385579, $this->v35749ed6d7, $pd69fb7d0); $v2d93385579 = $v8726312395; $this->settings["ptl"] = $v3b471758ae; } if (is_array($v2d93385579)) { $v9994512d98 = array_keys($v2d93385579); $v201d5661d1 = $v9994512d98[0]; $pf0e4da14 = isset($v2d93385579[$v201d5661d1]["old_value"]) || isset($v2d93385579[$v201d5661d1]["new_value"]); if ($pf0e4da14) { $v8726312395 = array(); foreach ($v2d93385579 as $v4620a0d531) { $pe30f5b53 = isset($v4620a0d531["old_value"]) ? $v4620a0d531["old_value"] : null; $v8726312395[$pe30f5b53] = isset($v4620a0d531["new_value"]) ? $v4620a0d531["new_value"] : null; } $v2d93385579 = $v8726312395; } } } return $v2d93385579; } private function f4d52bfc95d($v8007f64d4d, $v91a962d917, $v70a24a74ac) { $pac65f06f = 0; $v0911c6122e = strlen($v70a24a74ac); $v327f72fb62 = ''; do { preg_match("/<(php|ptl|\?):([^ ]+) ([^>]*)>/iu", $v70a24a74ac, $pbae7526c, PREG_OFFSET_CAPTURE, $pac65f06f); if (!empty($pbae7526c[0])) { $v956913c90f = substr($pbae7526c[3][0], -1) == "/" ? substr($pbae7526c[3][0], 0, -1) : $pbae7526c[3][0]; $v327f72fb62 .= str_replace($v8007f64d4d, $v91a962d917, substr($v70a24a74ac, $pac65f06f, $pbae7526c[0][1] - $pac65f06f)) . '<' . $pbae7526c[1][0] . ':' . $pbae7526c[2][0] . ' '; if ($pbae7526c[2][0] == "echo") $v327f72fb62 .= 'str_replace(\'' . addcslashes($v8007f64d4d, "'") . '\', \'' . addcslashes($v91a962d917, "'") . '\', (' . $v956913c90f . '))'; else $v327f72fb62 .= $v956913c90f; $v327f72fb62 .= (substr($v327f72fb62, -1) != " " ? " " : "") . '/>'; $pac65f06f = $pbae7526c[0][1] + strlen($pbae7526c[0][0]); } } while ($pbae7526c && $pac65f06f < $v0911c6122e); $v327f72fb62 .= str_replace($v8007f64d4d, $v91a962d917, substr($v70a24a74ac, $pac65f06f, $v0911c6122e)); return $v327f72fb62; } private function ma98cb2ed99ec($v8007f64d4d, $v91a962d917, $v70a24a74ac) { return !empty($this->settings["ptl"]) ? $this->f4d52bfc95d($v8007f64d4d, $v91a962d917, $v70a24a74ac) : str_replace($v8007f64d4d, $v91a962d917, $v70a24a74ac); } private function f820e5f681a($v67db1bd535, $v6d9e688100 = false, $pd69fb7d0 = false, $v2d93385579 = false) { $v67db1bd535 = $this->f3f46b56057($v67db1bd535, $v6d9e688100, $pd69fb7d0, $v2d93385579); return $this->ma98cb2ed99ec('"', '&quot;', $v67db1bd535); } private function f3f46b56057($v67db1bd535, $input_data = false, $idx = false, $v2d93385579 = false) { $pa25336d7 = $v67db1bd535; $v67db1bd535 = $this->f7263332819($v67db1bd535, $input_data, $idx); if (is_array($v67db1bd535)) return $v67db1bd535; else { if ($v2d93385579 && is_array($v2d93385579)) { if (!empty($this->settings["ptl"])) { $v93ff269092 = rand(0, 1000); $v67db1bd535 = '
					<ptl:var:av_exists_' . $v93ff269092 . ' false/>
					<ptl:var:var_aux_' . $v93ff269092 . ' ' . str_replace(">", "&gt;", $v67db1bd535) . '/>
					<ptl:var:avs_' . $v93ff269092 . ' ' . str_replace(">", "&gt;", var_export($v2d93385579, true)) . '/>
					<ptl:if is_array($avs_' . $v93ff269092 . ') />
						<ptl:foreach $avs_' . $v93ff269092 . ' k v>
							<ptl:if $k == $var_aux_' . $v93ff269092 . '>
								<ptl:echo $v/>
								<ptl:var:av_exists_' . $v93ff269092 . ' true/>
								<ptl:break/>
							</ptl:if>
						</ptl:foreach>
					</ptl:if>
					<ptl:if !$av_exists_' . $v93ff269092 . '>
						<ptl:echo $var_aux_' . $v93ff269092 . '/>
					</ptl:if>'; } else if (!empty($this->settings["parse_values"]) && isset($v2d93385579[$v67db1bd535])) $v67db1bd535 = $v2d93385579[$v67db1bd535]; } else if (!empty($this->settings["ptl"]) && $pa25336d7 != $v67db1bd535) $v67db1bd535 = '<ptl:echo ' . str_replace(">", "&gt;", $v67db1bd535) . '/>'; } return $v67db1bd535; } private function ma080ac9f9175($v67db1bd535, $input_data = false, $idx = false) { if (is_array($v67db1bd535) || is_object($v67db1bd535)) return $v67db1bd535; if ($v67db1bd535 && ($input_data || !empty($this->settings["ptl"]))) { $v67db1bd535 = trim($v67db1bd535); if (substr($v67db1bd535, 0, 1) == "#" && substr($v67db1bd535, -1, 1) == "#" && strpos(substr($v67db1bd535, 1, -1), "#") === false) { $pee4c7870 = $this->f7263332819($v67db1bd535, $input_data, $idx, true); $v67db1bd535 = isset($pee4c7870[0]) ? $pee4c7870[0] : null; } return $v67db1bd535; } return $input_data; } private function f7263332819($v67db1bd535, $input_data = false, $idx = false, $v9fd841e46d = false) { $pee4c7870 = array(); $v960e916cfd = !empty($this->settings["ptl"]); if ($v67db1bd535 && strpos($v67db1bd535, "#") !== false && ($v960e916cfd || !empty($this->settings["parse_values"]))) { $v5f7147fb39 = HashTagParameter::HTML_HASH_TAG_PARAMETER_FULL_REGEX; if (!$v960e916cfd && (!isset($input_data) || $input_data === false)) $pee4c7870[] = preg_replace($v5f7147fb39, "", $v67db1bd535); else { preg_match_all($v5f7147fb39, $v67db1bd535, $pbae7526c, PREG_OFFSET_CAPTURE); if (empty($pbae7526c[1])) $pee4c7870[] = $v67db1bd535; else { $pac65f06f = 0; $pc37695cb = count($pbae7526c[1]); $v408c531c27 = !empty($this->settings["ptl"]["input_data_var_name"]) ? $this->settings["ptl"]["input_data_var_name"] : $this->v360b1d47f8; $v0d677b4bf8 = !empty($this->settings["ptl"]["idx_var_name"]) ? $this->settings["ptl"]["idx_var_name"] : $this->pc419a7ec; for ($v43dd7d0051 = 0; $v43dd7d0051 < $pc37695cb; $v43dd7d0051++) { $v6107abf109 = $pbae7526c[1][$v43dd7d0051][0]; $replacement = ""; if (strpos($v6107abf109, "[") !== false) { preg_match_all("/([^\[\]]+)/u", trim($v6107abf109), $pcd395670, PREG_PATTERN_ORDER); $pcd395670 = isset($pcd395670[1]) ? $pcd395670[1] : null; if ($pcd395670) { try { $pd28479e5 = count($pcd395670); $v330c9aa8d1 = $idx ? (is_numeric($idx) ? $idx : '"' . $idx . '"') : 0; for ($v9d27441e80 = 0; $v9d27441e80 < $pd28479e5; $v9d27441e80++) { $pe9ab71dc = strtolower($pcd395670[$v9d27441e80]); if ($pe9ab71dc == 'idx' || $pe9ab71dc == '$idx') $pcd395670[$v9d27441e80] = $v960e916cfd ? '$' . $v0d677b4bf8 : $v330c9aa8d1; else if ($pe9ab71dc == '\\$idx') $pcd395670[$v9d27441e80] = $v960e916cfd ? '\\$' . $v0d677b4bf8 : $v330c9aa8d1; else if (preg_match("/(^|[^a-z\_])idx[^a-z\_]/i", $pe9ab71dc) && !preg_match("/[a-z\_]/i", $pe9ab71dc)) $pcd395670[$v9d27441e80] = preg_replace("/(^|[^a-z\_])\\?\$?idx[^a-z\_]/i", $v960e916cfd ? '\\$' . $v0d677b4bf8 : $v330c9aa8d1, $pcd395670[$v9d27441e80]); else if (preg_match("/\$idx[^a-z\_]/i", $pe9ab71dc) && preg_match("/[a-z\_]/i", $pe9ab71dc)) { $v02a69d4e0f = $v960e916cfd ? '\\$' . $v0d677b4bf8 : $v330c9aa8d1; $pcd395670[$v9d27441e80] = '"' . preg_replace("/\\?\$idx[^a-z\_]/i", '" . ' . $v02a69d4e0f . ' . "', $pcd395670[$v9d27441e80]) . '"'; $pcd395670[$v9d27441e80] = str_replace(array('"" . ', ' . ""'), "", $pcd395670[$v9d27441e80]); } else if (!is_numeric($pe9ab71dc) && strpos($pe9ab71dc, "'") === false && strpos($pe9ab71dc, '"') === false) { $pcd395670[$v9d27441e80] = $v960e916cfd ? $pcd395670[$v9d27441e80] : '"' . $pcd395670[$v9d27441e80] . '"'; } } if ($v960e916cfd) $replacement = '$' . $v408c531c27 . '[' . implode("][", str_replace('$idx', '$' . $v0d677b4bf8, $pcd395670)) . ']'; else eval('$replacement = isset($input_data[' . implode("][", $pcd395670) . ']) ? $input_data[' . implode("][", $pcd395670) . '] : null;'); } catch (Exception $paec2c009) { $replacement = "#ERROR REPLACING '$v6107abf109'#"; } } } else if ($v960e916cfd && $v6107abf109 == '$' . $v408c531c27) $replacement = '$' . $v408c531c27; else if ($v6107abf109 == '$' . $this->v360b1d47f8) $replacement = $v960e916cfd ? '$' . $this->v360b1d47f8 : $input_data; else if ($v6107abf109 == '$input' || $v6107abf109 == '$input_data') { echo "MAJOR ERROR in getParsedValue method in HTMLFormHandler.php and PTLFieldsUtilObj.js. Is missing here something... I should re-check the code of this method."; } else if ($v6107abf109 == 'idx' || $v6107abf109 == '$idx') $replacement = $v960e916cfd ? '$' . $v0d677b4bf8 : $idx; else if ($v6107abf109 == '\\$idx') $replacement = $v960e916cfd ? '\\$' . $v0d677b4bf8 : $idx; else $replacement = $v960e916cfd ? '$' . $v408c531c27 . '[' . $v6107abf109 . ']' : $input_data[$v6107abf109]; $v02a69d4e0f = substr($v67db1bd535, $pac65f06f, $pbae7526c[0][$v43dd7d0051][1] - $pac65f06f); if ($v960e916cfd && strlen($v02a69d4e0f)) $pee4c7870[] = '"' . addcslashes($v02a69d4e0f, '"') . '"'; else if (strlen($v02a69d4e0f)) $pee4c7870[] = $v02a69d4e0f; $pee4c7870[] = $replacement; $pac65f06f = $pbae7526c[0][$v43dd7d0051][1] + strlen($pbae7526c[0][$v43dd7d0051][0]); } $v02a69d4e0f = substr($v67db1bd535, $pac65f06f); if ($v960e916cfd && strlen($v02a69d4e0f)) $pee4c7870[] = '"' . addcslashes($v02a69d4e0f, '"') . '"'; else if (strlen($v02a69d4e0f)) $pee4c7870[] = $v02a69d4e0f; } } } else $pee4c7870[] = $v67db1bd535; if ($v9fd841e46d) return $pee4c7870; else if (count($pee4c7870) == 1 && is_array($pee4c7870[0])) return $pee4c7870[0]; else return implode($v960e916cfd ? " " : "", $pee4c7870); } } ?>
