<?php
/*
 * Copyright (c) 2007 PHPMyFrameWork - Joao Pinto
 * AUTHOR: Joao Paulo Lopes Pinto -- http://jplpinto.com
 * 
 * The use of this code must be allowed first by the creator Joao Pinto, since this is a private and proprietary code.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS 
 * OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY 
 * AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR 
 * CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL 
 * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, 
 * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER 
 * IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT 
 * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE. IN NO EVENT SHALL 
 * THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN 
 * AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE 
 * OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 */
include_once get_lib("org.phpframework.layer.presentation.PresentationLayer"); include get_lib("org.phpframework.layer.presentation.evc.exception.EVCException"); class EVC { private $pd3623f40; private $v874d5d2d79; private $pbfdbe299 = array(); private $v5ec1fba56e = array(); private $pad5cfe31 = array(); private $v94d48fb72f = array(); private $v288200236e = array(); private $pe0bab64b = array(); private $v46d0933d62 = array(); private $pf601636a; public function setPresentationLayer(PresentationLayer $pd3623f40) {$this->pd3623f40 = $pd3623f40;} public function getPresentationLayer() {return $this->pd3623f40;} public function getCommonProjectName() { return $this->pd3623f40->getCommonProjectName(); } public function setCMSLayer($v874d5d2d79) {$this->v874d5d2d79 = $v874d5d2d79;} public function getCMSLayer() {return $this->v874d5d2d79;} public function getControllersPath($v4eca125fbe = false) { if (!$v4eca125fbe) return $this->pd3623f40->getSelectedPresentationSetting("presentation_controllers_path"); if (empty($this->pd3623f40->settings["presentation_controllers_path"])) launch_exception(new EVCException(5, "EVC->PresentationLayer->settings[presentation_controllers_path]")); return $this->pd3623f40->getPresentationPath($v4eca125fbe) . $this->pd3623f40->settings["presentation_controllers_path"]; } public function getControllerPath($v17b67de068, $v4eca125fbe = false) { return $this->getControllersPath($v4eca125fbe) . $v17b67de068 . "." . $this->pd3623f40->getPresentationFileExtension(); } public function controllerExists($v17b67de068, $v4eca125fbe = false) { return file_exists($this->getControllerPath($v17b67de068, $v4eca125fbe)); } public function getController() { return isset($this->pbfdbe299[0]) ? $this->pbfdbe299[0] : null; } public function getControllers() { return $this->pbfdbe299; } public function setController($v17b67de068) { $this->pbfdbe299 = array($v17b67de068); } public function addController($v17b67de068) { $this->pbfdbe299[] = $v17b67de068; } public function getDefaultController() { return $this->pf601636a; } public function setDefaultController($pf601636a) { $this->pf601636a = $pf601636a; } public function getEntitiesPath($v4eca125fbe = false) { if (!$v4eca125fbe) return $this->pd3623f40->getSelectedPresentationSetting("presentation_entities_path"); if (empty($this->pd3623f40->settings["presentation_entities_path"])) launch_exception(new EVCException(5, "EVC->PresentationLayer->settings[presentation_entities_path]")); return $this->pd3623f40->getPresentationPath($v4eca125fbe) . $this->pd3623f40->settings["presentation_entities_path"]; } public function getEntityPath($pfefc55de, $v4eca125fbe = false) { return $this->getEntitiesPath($v4eca125fbe) . $pfefc55de . "." . $this->pd3623f40->getPresentationFileExtension(); } public function entityExists($pfefc55de, $v4eca125fbe = false) { return file_exists($this->getEntityPath($pfefc55de, $v4eca125fbe)); } public function getEntity() { return isset($this->v5ec1fba56e[0]) ? $this->v5ec1fba56e[0] : null; } public function getEntities() { return $this->v5ec1fba56e; } public function getEntityParams() { return isset($this->v288200236e[0]) ? $this->v288200236e[0] : null; } public function getEntitiesParams() { return $this->v288200236e; } public function resetEntities() { $this->v5ec1fba56e = array(); $this->v288200236e = array(); } public function setEntity($pfefc55de, $v0d484b37bf = null) { $this->v5ec1fba56e = array($pfefc55de); $this->v288200236e = array($v0d484b37bf); } public function addEntity($pfefc55de, $v0d484b37bf = null) { $this->v5ec1fba56e[] = $pfefc55de; $this->v288200236e[] = $v0d484b37bf; } public function getViewsPath($v4eca125fbe = false) { if (!$v4eca125fbe) return $this->pd3623f40->getSelectedPresentationSetting("presentation_views_path"); if (empty($this->pd3623f40->settings["presentation_views_path"])) launch_exception(new EVCException(5, "EVC->PresentationLayer->settings[presentation_views_path]")); return $this->pd3623f40->getPresentationPath($v4eca125fbe) . $this->pd3623f40->settings["presentation_views_path"]; } public function getViewPath($v766248f341, $v4eca125fbe = false) { return $this->getViewsPath($v4eca125fbe) . $v766248f341 . "." . $this->pd3623f40->getPresentationFileExtension(); } public function viewExists($v766248f341, $v4eca125fbe = false) { return file_exists($this->getViewPath($v766248f341, $v4eca125fbe)); } public function getView() { return isset($this->pad5cfe31[0]) ? $this->pad5cfe31[0] : null; } public function getViews() { return $this->pad5cfe31; } public function getViewParams() { return isset($this->pe0bab64b[0]) ? $this->pe0bab64b[0] : null; } public function getViewsParams() { return $this->pe0bab64b; } public function resetViews() { $this->pad5cfe31 = array(); $this->pe0bab64b = array(); } public function setView($v766248f341, $v52d9e072ad = null) { $this->pad5cfe31 = array($v766248f341); $this->pe0bab64b = array($v52d9e072ad); } public function addView($v766248f341, $v52d9e072ad = null) { $this->pad5cfe31[] = $v766248f341; $this->pe0bab64b[] = $v52d9e072ad; } public function getTemplatesPath($v4eca125fbe = false) { if (!$v4eca125fbe) return $this->pd3623f40->getSelectedPresentationSetting("presentation_templates_path"); if (empty($this->pd3623f40->settings["presentation_templates_path"])) launch_exception(new EVCException(5, "EVC->PresentationLayer->settings[presentation_templates_path]")); return $this->pd3623f40->getPresentationPath($v4eca125fbe) . $this->pd3623f40->settings["presentation_templates_path"]; } public function getTemplatePath($v01c84b1653, $v4eca125fbe = false) { return $this->getTemplatesPath($v4eca125fbe) . $v01c84b1653 . "." . $this->pd3623f40->getPresentationFileExtension(); } public function templateExists($v01c84b1653, $v4eca125fbe = false) { return file_exists($this->getTemplatePath($v01c84b1653, $v4eca125fbe)); } public function getTemplate() { return isset($this->v94d48fb72f[0]) ? $this->v94d48fb72f[0] : null; } public function getTemplates() { return $this->v94d48fb72f; } public function getTemplateParams() { return isset($this->v46d0933d62[0]) ? $this->v46d0933d62[0] : null; } public function getTemplatesParams() { return $this->v46d0933d62; } public function resetTemplates() { $this->v94d48fb72f = array(); $this->v46d0933d62 = array(); } public function setTemplate($v01c84b1653, $v9e3513bc0e = null) { $this->v94d48fb72f = array($v01c84b1653); $this->v46d0933d62 = array($v9e3513bc0e); } public function addTemplate($v01c84b1653, $v9e3513bc0e = null) { $this->v94d48fb72f[] = $v01c84b1653; $this->v46d0933d62[] = $v9e3513bc0e; } public function getConfigsPath($v4eca125fbe = false) { if (!$v4eca125fbe) return $this->pd3623f40->getSelectedPresentationSetting("presentation_configs_path"); if (empty($this->pd3623f40->settings["presentation_configs_path"])) launch_exception(new EVCException(5, "EVC->PresentationLayer->settings[presentation_configs_path]")); return $this->pd3623f40->getPresentationPath($v4eca125fbe) . $this->pd3623f40->settings["presentation_configs_path"]; } public function getConfigPath($v2ade4acdce, $v4eca125fbe = false) { return $this->getConfigsPath($v4eca125fbe) . $v2ade4acdce . "." . $this->pd3623f40->getPresentationFileExtension(); } public function configExists($v2ade4acdce, $v4eca125fbe = false) { return file_exists($this->getConfigPath($v2ade4acdce, $v4eca125fbe)); } public function getUtilsPath($v4eca125fbe = false) { if (!$v4eca125fbe) return $this->pd3623f40->getSelectedPresentationSetting("presentation_utils_path"); if (empty($this->pd3623f40->settings["presentation_utils_path"])) launch_exception(new EVCException(5, "EVC->PresentationLayer->settings[presentation_utils_path]")); return $this->pd3623f40->getPresentationPath($v4eca125fbe) . $this->pd3623f40->settings["presentation_utils_path"]; } public function getUtilPath($pdc412cd1, $v4eca125fbe = false) { return $this->getUtilsPath($v4eca125fbe) . $pdc412cd1 . "." . $this->pd3623f40->getPresentationFileExtension(); } public function utilExists($pdc412cd1, $v4eca125fbe = false) { return file_exists($this->getUtilPath($pdc412cd1, $v4eca125fbe)); } public function getBlocksPath($v4eca125fbe = false) { if (!$v4eca125fbe) return $this->pd3623f40->getSelectedPresentationSetting("presentation_blocks_path"); if (empty($this->pd3623f40->settings["presentation_blocks_path"])) launch_exception(new EVCException(5, "EVC->PresentationLayer->settings[presentation_blocks_path]")); return $this->pd3623f40->getPresentationPath($v4eca125fbe) . $this->pd3623f40->settings["presentation_blocks_path"]; } public function getBlockPath($v6d17a5248e, $v4eca125fbe = false) { return $this->getBlocksPath($v4eca125fbe) . $v6d17a5248e . "." . $this->pd3623f40->getPresentationFileExtension(); } public function getModulesPath($v4eca125fbe = false) { if (!$v4eca125fbe) return $this->pd3623f40->getSelectedPresentationSetting("presentation_modules_path"); if (empty($this->pd3623f40->settings["presentation_modules_path"])) launch_exception(new EVCException(5, "EVC->PresentationLayer->settings[presentation_modules_path]")); return $this->pd3623f40->getPresentationPath($v4eca125fbe) . $this->pd3623f40->settings["presentation_modules_path"]; } public function getModulePath($pb0023f59, $v4eca125fbe = false) { return $this->getModulesPath($v4eca125fbe) . $pb0023f59 . "." . $this->pd3623f40->getPresentationFileExtension(); } public function getWebrootPath($v4eca125fbe = false) { if (!$v4eca125fbe) return $this->pd3623f40->getSelectedPresentationSetting("presentation_webroot_path"); if (empty($this->pd3623f40->settings["presentation_webroot_path"])) launch_exception(new EVCException(5, "EVC->PresentationLayer->settings[presentation_webroot_path]")); return $this->pd3623f40->getPresentationPath($v4eca125fbe) . $this->pd3623f40->settings["presentation_webroot_path"]; } public function addBroker($pd922c2f7, $v2b2cf4c0eb = false) {$this->pd3623f40->addBroker($pd922c2f7, $v2b2cf4c0eb);} public function getBroker($v2b2cf4c0eb = false) {return $this->pd3623f40->getBroker($v2b2cf4c0eb);} public function getBrokers() {return $this->pd3623f40->getBrokers();} public function getProjectsId($v9643d970d1 = "", &$pf9b48cd3 = array()) { $v90b50cf52d = array(); $pa2bba2ac = $this->pd3623f40->getLayerPathSetting(); $v9643d970d1 .= $v9643d970d1 && substr($v9643d970d1, -1) != "/" ? "/" : ""; if (empty($this->pd3623f40->settings["presentation_webroot_path"])) launch_exception(new EVCException(5, "EVC->PresentationLayer->settings[presentation_webroot_path]")); if (($v89d33f4133 = opendir($pa2bba2ac . $v9643d970d1)) ) { while( ($v7dffdb5a5b = readdir($v89d33f4133)) !== false) { if (substr($v7dffdb5a5b, 0, 1) != ".") { $pdd397f0a = $v9643d970d1 . $v7dffdb5a5b; if (is_dir($pa2bba2ac . $pdd397f0a)) { if (is_dir($pa2bba2ac . $pdd397f0a . "/" . $this->pd3623f40->settings["presentation_webroot_path"])) $v90b50cf52d[] = $pdd397f0a; else { $pf9b48cd3[] = $pdd397f0a; $pb4fa3b99 = $this->getProjectsId($pdd397f0a . "/", $pf9b48cd3); $v90b50cf52d = array_merge($v90b50cf52d, $pb4fa3b99); } } } } closedir($v89d33f4133); } return $v90b50cf52d; } } ?>
