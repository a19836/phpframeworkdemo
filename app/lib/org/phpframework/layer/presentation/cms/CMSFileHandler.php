<?php
/*
 * Copyright (c) 2007 PHPMyFrameWork - Joao Pinto
 * AUTHOR: Joao Paulo Lopes Pinto -- http://jplpinto.com
 * 
 * The use of this code must be allowed first by the creator Joao Pinto, since this is a private and proprietary code.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS 
 * OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY 
 * AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR 
 * CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL 
 * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, 
 * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER 
 * IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT 
 * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE. IN NO EVENT SHALL 
 * THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN 
 * AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE 
 * OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 */
include_once get_lib("lib.vendor.phpparser.lib.bootstrap"); include_once get_lib("org.phpframework.workflow.PHPParserPrettyPrinter"); include_once get_lib("org.phpframework.phpscript.PHPCodeBeautifier"); include_once get_lib("org.phpframework.util.text.TextSanitizer"); class CMSFileHandler { public static function getContentsMethodParams($v6490ea3a15, $v28b9855350, $pacfef7d5 = false, $v08a1062039 = 0, $pf9851a9c = -1) { if ($v6490ea3a15) { self::f0dbc620630($v6490ea3a15); $v0b196f001b = $pacfef7d5 && substr($pacfef7d5, 0, 1) != '$' ? '$' . $pacfef7d5 : $pacfef7d5; $pedde3449 = self::f9312178574($v6490ea3a15, $v28b9855350, $v0b196f001b, $v08a1062039, $pf9851a9c); return $pedde3449; } } public static function getFileTemplates($pf3dc0762, $pacfef7d5 = false, $v08a1062039 = 0, $pf9851a9c = -1) { return self::getTemplates(self::getFileContents($pf3dc0762), $pacfef7d5, $v08a1062039, $pf9851a9c); } public static function getTemplates($v6490ea3a15, $pacfef7d5 = false, $v08a1062039 = 0, $pf9851a9c = -1) { $v94d48fb72f = array(); if ($v6490ea3a15) { self::f0dbc620630($v6490ea3a15); $v0b196f001b = $pacfef7d5 && substr($pacfef7d5, 0, 1) != '$' ? '$' . $pacfef7d5 : $pacfef7d5; $pedde3449 = self::f9312178574($v6490ea3a15, "setTemplate", $v0b196f001b, $v08a1062039, $pf9851a9c); foreach ($pedde3449 as $v6cd9d4006f) { if (empty($v6cd9d4006f["static"])) { self::f98375c70ac($v6cd9d4006f, 0, $pe7333513, $v3ba41b5a07); self::f98375c70ac($v6cd9d4006f, 1, $v9e3513bc0e, $pc34fdd94); $v94d48fb72f[] = array( "match" => isset($v6cd9d4006f["match"]) ? $v6cd9d4006f["match"] : null, "class_obj" => isset($v6cd9d4006f["class_obj"]) ? $v6cd9d4006f["class_obj"] : null, "template" => $pe7333513, "template_type" => $v3ba41b5a07, "template_params" => $v9e3513bc0e, "template_params_type" => $pc34fdd94, "line" => isset($v6cd9d4006f["line"]) ? $v6cd9d4006f["line"] : null, ); } } } return $v94d48fb72f; } public static function getFileRegions($pf3dc0762, $pacfef7d5 = false, $v08a1062039 = 0, $pf9851a9c = -1) { return self::getRegions( self::getFileContents($pf3dc0762), $pacfef7d5, $v08a1062039, $pf9851a9c); } public static function getRegions($v6490ea3a15, $pacfef7d5 = false, $v08a1062039 = 0, $pf9851a9c = -1) { $v86f703e78b = array(); if ($v6490ea3a15) { self::f0dbc620630($v6490ea3a15); $v0b196f001b = $pacfef7d5 && substr($pacfef7d5, 0, 1) != '$' ? '$' . $pacfef7d5 : $pacfef7d5; $pedde3449 = self::f9312178574($v6490ea3a15, "renderRegion", $v0b196f001b, $v08a1062039, $pf9851a9c); foreach ($pedde3449 as $v6cd9d4006f) { if (empty($v6cd9d4006f["static"])) { self::f98375c70ac($v6cd9d4006f, 0, $v9b9b8653bc, $v3017a9dd59); $v86f703e78b[] = array( "match" => isset($v6cd9d4006f["match"]) ? $v6cd9d4006f["match"] : null, "class_obj" => isset($v6cd9d4006f["class_obj"]) ? $v6cd9d4006f["class_obj"] : null, "region" => $v9b9b8653bc, "region_type" => $v3017a9dd59, "line" => isset($v6cd9d4006f["line"]) ? $v6cd9d4006f["line"] : null, ); } } } return $v86f703e78b; } public static function getFileRegionsBlocks($pf3dc0762, $pacfef7d5 = false) { return self::getRegionsBlocks( self::getFileContents($pf3dc0762), $pacfef7d5 ); } public static function getRegionsBlocks($v6490ea3a15, $pacfef7d5 = false) { $pf2e4821f = array(); if ($v6490ea3a15) { self::f0dbc620630($v6490ea3a15); preg_match_all('/(include_once|include|require_once|require)(\s*)\$(\w+)(\s*)->(\s*)getBlockPath(\s*)\((\s*)([^\),]*)(\s*),?(\s*)([^\)]*)(\s*)\)([^;]*);/iu', $v6490ea3a15, $pbae7526c, PREG_PATTERN_ORDER); $v4e2bc3d073 = !empty($pbae7526c[8]) ? $pbae7526c[8] : array(); $v53f9c31536 = !empty($pbae7526c[11]) ? $pbae7526c[11] : array(); $v705772ca7e = array(); $pc37695cb = count($v4e2bc3d073); for ($v43dd7d0051 = 0; $v43dd7d0051 < $pc37695cb; $v43dd7d0051++) { $v303bc2287d = trim($v4e2bc3d073[$v43dd7d0051]); $v93756c94b3 = trim($v53f9c31536[$v43dd7d0051]); $v705772ca7e[$v303bc2287d][] = $v93756c94b3; } preg_match_all('/(include_once|include|require_once|require)(\s*)\$(\w+)(\s*)->(\s*)getViewPath(\s*)\((\s*)([^\),]*)(\s*),?(\s*)([^\)]*)(\s*)\)([^;]*);/iu', $v6490ea3a15, $pbae7526c, PREG_PATTERN_ORDER); $pc4a9fa39 = !empty($pbae7526c[8]) ? $pbae7526c[8] : array(); $v7f59684171 = !empty($pbae7526c[11]) ? $pbae7526c[11] : array(); $pcd49c023 = array(); $pc37695cb = count($pc4a9fa39); for ($v43dd7d0051 = 0; $v43dd7d0051 < $pc37695cb; $v43dd7d0051++) { $pd368028b = trim($pc4a9fa39[$v43dd7d0051]); $v93756c94b3 = trim($v7f59684171[$v43dd7d0051]); $pcd49c023[$pd368028b][] = $v93756c94b3; } $v0b196f001b = $pacfef7d5 && substr($pacfef7d5, 0, 1) != '$' ? '$' . $pacfef7d5 : $pacfef7d5; $pedde3449 = self::f9312178574($v6490ea3a15, array("addRegionHtml", "addRegionBlock", "includeRegionBlockPathOutput", "addRegionView", "includeRegionViewPathOutput"), $v0b196f001b, $v08a1062039, $pf9851a9c); $v3704c439d9 = array(); $pefda4390 = array(); foreach ($pedde3449 as $v6cd9d4006f) { if (empty($v6cd9d4006f["static"])) { $v603bd47baf = isset($v6cd9d4006f["method"]) ? $v6cd9d4006f["method"] : null; $peebaaf55 = $pa7fd620a = $v175e16d850 = $v76425220d5 = null; $v3fb9f41470 = null; self::f98375c70ac($v6cd9d4006f, 0, $v9b9b8653bc, $v3017a9dd59); if ($v603bd47baf == "addRegionHtml") { $v3fb9f41470 = 1; self::f98375c70ac($v6cd9d4006f, 1, $peebaaf55, $pa7fd620a); } else if ($v603bd47baf == "addRegionBlock") { $v3fb9f41470 = 2; self::f98375c70ac($v6cd9d4006f, 1, $peebaaf55, $pa7fd620a); $v7aeaf992f5 = trim( self::getVariableValueCode($peebaaf55, $pa7fd620a) ); $pd69fb7d0 = $v3704c439d9[$v7aeaf992f5] ? $v3704c439d9[$v7aeaf992f5] : 0; $v175e16d850 = $v705772ca7e[$v7aeaf992f5][$pd69fb7d0]; $v3704c439d9[$v7aeaf992f5] = $v705772ca7e[$v7aeaf992f5] && count($v705772ca7e[$v7aeaf992f5]) > $pd69fb7d0 + 1 ? $pd69fb7d0 + 1 : $pd69fb7d0; if ($v175e16d850) { $v76425220d5 = self::getArgumentType($v175e16d850); $v175e16d850 = self::prepareArgument($v175e16d850, $v76425220d5); } else self::f98375c70ac($v6cd9d4006f, 2, $v175e16d850, $v76425220d5); } else if ($v603bd47baf == "includeRegionBlockPathOutput") { $v3fb9f41470 = 3; self::f98375c70ac($v6cd9d4006f, 1, $peebaaf55, $pa7fd620a); self::f98375c70ac($v6cd9d4006f, 2, $v175e16d850, $v76425220d5); } else if ($v603bd47baf == "addRegionView") { $v3fb9f41470 = 4; self::f98375c70ac($v6cd9d4006f, 1, $peebaaf55, $pa7fd620a); $v7aeaf992f5 = trim( self::getVariableValueCode($peebaaf55, $pa7fd620a) ); $pd69fb7d0 = $pefda4390[$v7aeaf992f5] ? $pefda4390[$v7aeaf992f5] : 0; $v175e16d850 = $pcd49c023[$v7aeaf992f5][$pd69fb7d0]; $pefda4390[$v7aeaf992f5] = $pcd49c023[$v7aeaf992f5] && count($pcd49c023[$v7aeaf992f5]) > $pd69fb7d0 + 1 ? $pd69fb7d0 + 1 : $pd69fb7d0; if ($v175e16d850) { $v76425220d5 = self::getArgumentType($v175e16d850); $v175e16d850 = self::prepareArgument($v175e16d850, $v76425220d5); } else self::f98375c70ac($v6cd9d4006f, 2, $v175e16d850, $v76425220d5); } else if ($v603bd47baf == "includeRegionViewPathOutput") { $v3fb9f41470 = 5; self::f98375c70ac($v6cd9d4006f, 1, $peebaaf55, $pa7fd620a); self::f98375c70ac($v6cd9d4006f, 2, $v175e16d850, $v76425220d5); } $pf2e4821f[] = array( "match" => isset($v6cd9d4006f["match"]) ? $v6cd9d4006f["match"] : null, "method" => $v603bd47baf, "type" => $v3fb9f41470, "class_obj" => isset($v6cd9d4006f["class_obj"]) ? $v6cd9d4006f["class_obj"] : null, "region" => $v9b9b8653bc, "region_type" => $v3017a9dd59, "block" => $peebaaf55, "block_type" => $pa7fd620a, "block_project" => $v175e16d850, "block_project_type" => $v76425220d5, "line" => isset($v6cd9d4006f["line"]) ? $v6cd9d4006f["line"] : null, ); } } } return $pf2e4821f; } public static function getHardCodedRegionsBlocks($v6490ea3a15, $pacfef7d5 = false) { $v9158f5ed68 = array(); if ($v6490ea3a15) { self::f0dbc620630($v6490ea3a15); preg_match_all('/(include_once|include|require_once|require)(\s*)\$(\w+)(\s*)->(\s*)getBlockPath(\s*)\((\s*)([^\),]*)(\s*),?(\s*)([^\)]*)(\s*)\)([^;]*);/iu', $v6490ea3a15, $pbae7526c, PREG_PATTERN_ORDER); $v4e2bc3d073 = !empty($pbae7526c[8]) ? $pbae7526c[8] : array(); $v53f9c31536 = !empty($pbae7526c[11]) ? $pbae7526c[11] : array(); $v705772ca7e = array(); $pc37695cb = count($v4e2bc3d073); for ($v43dd7d0051 = 0; $v43dd7d0051 < $pc37695cb; $v43dd7d0051++) { $v303bc2287d = trim($v4e2bc3d073[$v43dd7d0051]); $v93756c94b3 = trim($v53f9c31536[$v43dd7d0051]); $v705772ca7e[$v303bc2287d][] = $v93756c94b3; } preg_match_all('/(include_once|include|require_once|require)(\s*)\$(\w+)(\s*)->(\s*)getViewPath(\s*)\((\s*)([^\),]*)(\s*),?(\s*)([^\)]*)(\s*)\)([^;]*);/iu', $v6490ea3a15, $pbae7526c, PREG_PATTERN_ORDER); $pc4a9fa39 = !empty($pbae7526c[8]) ? $pbae7526c[8] : array(); $v7f59684171 = !empty($pbae7526c[11]) ? $pbae7526c[11] : array(); $pcd49c023 = array(); $pc37695cb = count($pc4a9fa39); for ($v43dd7d0051 = 0; $v43dd7d0051 < $pc37695cb; $v43dd7d0051++) { $pd368028b = trim($pc4a9fa39[$v43dd7d0051]); $v93756c94b3 = trim($v7f59684171[$v43dd7d0051]); $pcd49c023[$pd368028b][] = $v93756c94b3; } $v0b196f001b = $pacfef7d5 && substr($pacfef7d5, 0, 1) != '$' ? '$' . $pacfef7d5 : $pacfef7d5; $pedde3449 = self::f9312178574($v6490ea3a15, array("getBlock", "getView"), $v0b196f001b, $v08a1062039, $pf9851a9c); $v3704c439d9 = array(); $pefda4390 = array(); foreach ($pedde3449 as $v6cd9d4006f) { if (empty($v6cd9d4006f["static"])) { $v603bd47baf = isset($v6cd9d4006f["method"]) ? $v6cd9d4006f["method"] : null; self::f98375c70ac($v6cd9d4006f, 0, $peebaaf55, $pa7fd620a); $v7aeaf992f5 = trim( self::getVariableValueCode($peebaaf55, $pa7fd620a) ); if ($v603bd47baf == "getBlock") { $pd69fb7d0 = !empty($v3704c439d9[$v7aeaf992f5]) ? $v3704c439d9[$v7aeaf992f5] : 0; $v175e16d850 = isset($v705772ca7e[$v7aeaf992f5][$pd69fb7d0]) ? $v705772ca7e[$v7aeaf992f5][$pd69fb7d0] : null; $v3704c439d9[$v7aeaf992f5] = !empty($v705772ca7e[$v7aeaf992f5]) && count($v705772ca7e[$v7aeaf992f5]) > $pd69fb7d0 + 1 ? $pd69fb7d0 + 1 : $pd69fb7d0; } else { $pd69fb7d0 = !empty($pefda4390[$v7aeaf992f5]) ? $pefda4390[$v7aeaf992f5] : 0; $v175e16d850 = isset($pcd49c023[$v7aeaf992f5][$pd69fb7d0]) ? $pcd49c023[$v7aeaf992f5][$pd69fb7d0] : null; $v3704c439d9[$v7aeaf992f5] = !empty($pcd49c023[$v7aeaf992f5]) && count($pcd49c023[$v7aeaf992f5]) > $pd69fb7d0 + 1 ? $pd69fb7d0 + 1 : $pd69fb7d0; } if ($v175e16d850) { $v76425220d5 = self::getArgumentType($v175e16d850); $v175e16d850 = self::prepareArgument($v175e16d850, $v76425220d5); } else self::f98375c70ac($v6cd9d4006f, 1, $v175e16d850, $v76425220d5); $v9158f5ed68[] = array( "match" => isset($v6cd9d4006f["match"]) ? $v6cd9d4006f["match"] : null, "method" => $v603bd47baf, "type" => $v603bd47baf == "getBlock" ? 2 : 4, "class_obj" => isset($v6cd9d4006f["class_obj"]) ? $v6cd9d4006f["class_obj"] : null, "block" => $peebaaf55, "block_type" => $pa7fd620a, "block_project" => $v175e16d850, "block_project_type" => $v76425220d5, "line" => isset($v6cd9d4006f["line"]) ? $v6cd9d4006f["line"] : null, ); } } } return $v9158f5ed68; } public static function getFileIncludes($pf3dc0762, $pc1ebfcb5 = true) { return self::getIncludes( self::getFileContents($pf3dc0762, $pc1ebfcb5) ); } public static function getIncludes($v6490ea3a15, $pc1ebfcb5 = true) { $pc06f1034 = array(); if ($v6490ea3a15) { self::f0dbc620630($v6490ea3a15); preg_match_all('/(include( |\$)|include_once( |\$)|require( |\$)|require_once( |\$))(\s*)([^;]+);/iu', $v6490ea3a15, $pbae7526c, PREG_PATTERN_ORDER); $v9fb2eada1a = !empty($pbae7526c[0]) ? $pbae7526c[0] : array(); $v4159504aa3 = !empty($pbae7526c[1]) ? $pbae7526c[1] : array(); $v57a9807e67 = !empty($pbae7526c[7]) ? $pbae7526c[7] : array(); $pc37695cb = count($v9fb2eada1a); for ($v43dd7d0051 = 0; $v43dd7d0051 < $pc37695cb; $v43dd7d0051++) if (isset($v57a9807e67[$v43dd7d0051])) { $pa32be502 = trim($v57a9807e67[$v43dd7d0051]); $v62cb335f98 = self::getArgumentType($pa32be502); $pa32be502 = self::prepareArgument($pa32be502, $v62cb335f98); if (!$pc1ebfcb5) { preg_match_all('/(include_once|include|require_once|require)(\s*)\$(\w+)(\s*)->(\s*)getBlockPath(\s*)\((\s*)([^\)]*)(\s*)\)([^;]*);/iu', $v9fb2eada1a[$v43dd7d0051], $v6107abf109, PREG_PATTERN_ORDER); if (isset($v6107abf109[8][0])) continue 1; else { preg_match_all('/(include_once|include|require_once|require)(\s*)\$(\w+\(?\)?\->)+(\s*)(includeRegionBlockPathOutput|includeRegionViewPathOutput)(\s*)\((\s*)([^,]*)(\s*),(\s*)([^\),]*)(\s*),?(\s*)([^\)]*)(\s*)\)([^;]*);/iu', $v9fb2eada1a[$v43dd7d0051], $v6107abf109, PREG_PATTERN_ORDER); if (isset($v6107abf109[8][0])) continue 1; } } $pc06f1034[] = array( "match" => $v9fb2eada1a[$v43dd7d0051], "once" => isset($v4159504aa3[$v43dd7d0051]) && strpos($v4159504aa3[$v43dd7d0051], "_once") > 0, "path" => $pa32be502, "path_type" => $v62cb335f98, ); } } return $pc06f1034; } public static function getFileIncludesBlock($pf3dc0762) { return self::getIncludesBlock( self::getFileContents($pf3dc0762) ); } public static function getIncludesBlock($v6490ea3a15) { $pc06f1034 = array(); if ($v6490ea3a15) { self::f0dbc620630($v6490ea3a15); preg_match_all('/(include_once|include|require_once|require)(\s*)\$(\w+)(\s*)->(\s*)getBlockPath(\s*)\((\s*)([^\),]*)(\s*),?(\s*)([^\)]*)(\s*)\)([^;]*);/iu', $v6490ea3a15, $pbae7526c, PREG_PATTERN_ORDER); $pad730ee8 = !empty($pbae7526c[0]) ? $pbae7526c[0] : array(); $v306d1e048e = !empty($pbae7526c[1]) ? $pbae7526c[1] : array(); $pe06b5f32 = !empty($pbae7526c[8]) ? $pbae7526c[8] : array(); $pfc8b9958 = !empty($pbae7526c[11]) ? $pbae7526c[11] : array(); $v2b0900ac0c = array(); preg_match_all('/(include_once|include|require_once|require)(\s*)\$(\w+)(\s*)->(\s*)getBlocksPath\(\)(\s*)\.(\s*)([^;]*)(\s*)([^;]*);/iu', $v6490ea3a15, $pbae7526c, PREG_PATTERN_ORDER); $peae05b1e = !empty($pbae7526c[0]) ? $pbae7526c[0] : array(); $pce5fe1bb = !empty($pbae7526c[1]) ? $pbae7526c[1] : array(); $pb16e5996 = !empty($pbae7526c[8]) ? $pbae7526c[8] : array(); $v500e733a7f = array(); $v76169959a3 = array(); preg_match_all('/(include_once|include|require_once|require)(\s*)\$(\w+)(\s*)->(\s*)includeRegionBlockPathOutput(\s*)\((\s*)([^,]*)(\s*),(\s*)([^\),]*)(\s*),?(\s*)([^\)]*)(\s*)\)([^;]*);/iu', $v6490ea3a15, $pbae7526c, PREG_PATTERN_ORDER); $v435812ae71 = !empty($pbae7526c[0]) ? $pbae7526c[0] : array(); $v0208307677 = !empty($pbae7526c[1]) ? $pbae7526c[1] : array(); $v84329b08e7 = !empty($pbae7526c[11]) ? $pbae7526c[11] : array(); $pc2136082 = !empty($pbae7526c[14]) ? $pbae7526c[14] : array(); $v7dbdc594ea = !empty($pbae7526c[8]) ? $pbae7526c[8] : array(); $v9fb2eada1a = array_merge($pad730ee8, $peae05b1e, $v435812ae71); $v4159504aa3 = array_merge($v306d1e048e, $pce5fe1bb, $v0208307677); $v57a9807e67 = array_merge($pe06b5f32, $pb16e5996, $v84329b08e7); $v90b50cf52d = array_merge($pfc8b9958, $v500e733a7f, $pc2136082); $v86f703e78b = array_merge($v2b0900ac0c, $v76169959a3, $v7dbdc594ea); $pc37695cb = count($v9fb2eada1a); for ($v43dd7d0051 = 0; $v43dd7d0051 < $pc37695cb; $v43dd7d0051++) if (isset($v57a9807e67[$v43dd7d0051])) { $pa32be502 = trim($v57a9807e67[$v43dd7d0051]); $v62cb335f98 = self::getArgumentType($pa32be502); $pa32be502 = self::prepareArgument($pa32be502, $v62cb335f98); $v93756c94b3 = isset($v90b50cf52d[$v43dd7d0051]) ? trim($v90b50cf52d[$v43dd7d0051]) : ""; $v55c04fed81 = self::getArgumentType($v93756c94b3); $v93756c94b3 = self::prepareArgument($v93756c94b3, $v55c04fed81); $pc06f1034[] = array( "match" => $v9fb2eada1a[$v43dd7d0051], "once" => isset($v4159504aa3[$v43dd7d0051]) && strpos($v4159504aa3[$v43dd7d0051], "_once") > 0, "path" => $pa32be502, "path_type" => $v62cb335f98, "project" => $v93756c94b3, "project_type" => $v55c04fed81, ); } } return $pc06f1034; } public static function getFileParams($pf3dc0762, $pacfef7d5 = false, $v08a1062039 = 0, $pf9851a9c = -1) { return self::getParams( self::getFileContents($pf3dc0762), $pacfef7d5, $v08a1062039, $pf9851a9c); } public static function getParams($v6490ea3a15, $pacfef7d5 = false, $v08a1062039 = 0, $pf9851a9c = -1) { $v9b391a5b1f = array(); if ($v6490ea3a15) { self::f0dbc620630($v6490ea3a15); $v0b196f001b = $pacfef7d5 && substr($pacfef7d5, 0, 1) != '$' ? '$' . $pacfef7d5 : $pacfef7d5; $pedde3449 = self::f9312178574($v6490ea3a15, "getParam", $v0b196f001b, $v08a1062039, $pf9851a9c); foreach ($pedde3449 as $v6cd9d4006f) { if (empty($v6cd9d4006f["static"])) { self::f98375c70ac($v6cd9d4006f, 0, $v58b61e02bc, $v9a52216fbf); $v9b391a5b1f[] = array( "match" => isset($v6cd9d4006f["match"]) ? $v6cd9d4006f["match"] : null, "class_obj" => isset($v6cd9d4006f["class_obj"]) ? $v6cd9d4006f["class_obj"] : null, "param" => $v58b61e02bc, "param_type" => $v9a52216fbf, "line" => isset($v6cd9d4006f["line"]) ? $v6cd9d4006f["line"] : null, ); } } } return $v9b391a5b1f; } public static function getFileParamsValues($pf3dc0762, $pacfef7d5 = false, $v08a1062039 = 0, $pf9851a9c = -1) { return self::getParamsValues( self::getFileContents($pf3dc0762), $pacfef7d5, $v08a1062039, $pf9851a9c); } public static function getParamsValues($v6490ea3a15, $pacfef7d5 = false, $v08a1062039 = 0, $pf9851a9c = -1) { $v9b391a5b1f = array(); if ($v6490ea3a15) { self::f0dbc620630($v6490ea3a15); $v0b196f001b = $pacfef7d5 && substr($pacfef7d5, 0, 1) != '$' ? '$' . $pacfef7d5 : $pacfef7d5; $pedde3449 = self::f9312178574($v6490ea3a15, "setParam", $v0b196f001b, $v08a1062039, $pf9851a9c); foreach ($pedde3449 as $v6cd9d4006f) { if (empty($v6cd9d4006f["static"])) { self::f98375c70ac($v6cd9d4006f, 0, $v58b61e02bc, $v9a52216fbf); self::f98375c70ac($v6cd9d4006f, 1, $v67db1bd535, $pc3e857ed); $v9b391a5b1f[] = array( "match" => isset($v6cd9d4006f["match"]) ? $v6cd9d4006f["match"] : null, "class_obj" => isset($v6cd9d4006f["class_obj"]) ? $v6cd9d4006f["class_obj"] : null, "param" => $v58b61e02bc, "param_type" => $v9a52216fbf, "value" => $v67db1bd535, "value_type" => $pc3e857ed, "line" => isset($v6cd9d4006f["line"]) ? $v6cd9d4006f["line"] : null, ); } } } return $v9b391a5b1f; } public static function getFileBlockParams($pf3dc0762) { return self::getBlockParams( self::getFileContents($pf3dc0762) ); } public static function getBlockParams($v6490ea3a15) { $v9b391a5b1f = array(); if ($v6490ea3a15) { self::f0dbc620630($v6490ea3a15); preg_match_all('/\$block_local_variables(\s*)\[([^\]]*)\]/iu', $v6490ea3a15, $pbae7526c, PREG_PATTERN_ORDER); $v9fb2eada1a = !empty($pbae7526c[0]) ? $pbae7526c[0] : array(); $v514eddb30d = !empty($pbae7526c[2]) ? $pbae7526c[2] : array(); $pc37695cb = count($v9fb2eada1a); for ($v43dd7d0051 = 0; $v43dd7d0051 < $pc37695cb; $v43dd7d0051++) { $v58b61e02bc = isset($v514eddb30d[$v43dd7d0051]) ? trim($v514eddb30d[$v43dd7d0051]) : ""; $v9a52216fbf = self::getArgumentType($v58b61e02bc); $v58b61e02bc = self::prepareArgument($v58b61e02bc, $v9a52216fbf); $v9b391a5b1f[] = array( "param" => $v58b61e02bc, "param_type" => $v9a52216fbf, ); } } return $v9b391a5b1f; } public static function getFileRegionBlockParamsValues($pf3dc0762) { return self::getRegionBlockParamsValues( self::getFileContents($pf3dc0762) ); } public static function getRegionBlockParamsValues($v6490ea3a15) { $v9b391a5b1f = array(); if ($v6490ea3a15) { self::f0dbc620630($v6490ea3a15); preg_match_all('/\$region_block_local_variables(\s*)\[([^\]]*)\](\s*)\[([^\]]*)\](\s*)\[([^\]]*)\](\s*)=(\s*)([^;]+);/iu', $v6490ea3a15, $pbae7526c, PREG_OFFSET_CAPTURE); $v9fb2eada1a = !empty($pbae7526c[0]) ? $pbae7526c[0] : array(); if ($v9fb2eada1a) { $v5eba9166ac = !empty($pbae7526c[2]) ? $pbae7526c[2] : array(); $pc91cbd5a = !empty($pbae7526c[4]) ? $pbae7526c[4] : array(); $v514eddb30d = !empty($pbae7526c[6]) ? $pbae7526c[6] : array(); $pb68aa01b = !empty($pbae7526c[9]) ? $pbae7526c[9] : array(); $pf2e4821f = self::getRegionsBlocks($v6490ea3a15); $pc37695cb = count($v9fb2eada1a); for ($v43dd7d0051 = 0; $v43dd7d0051 < $pc37695cb; $v43dd7d0051++) { $v9b9b8653bc = isset($v5eba9166ac[$v43dd7d0051][0]) ? trim($v5eba9166ac[$v43dd7d0051][0]) : ""; $v3017a9dd59 = self::getArgumentType($v9b9b8653bc); $v9b9b8653bc = self::prepareArgument($v9b9b8653bc, $v3017a9dd59); $peebaaf55 = isset($pc91cbd5a[$v43dd7d0051][0]) ? trim($pc91cbd5a[$v43dd7d0051][0]) : ""; $pa7fd620a = self::getArgumentType($peebaaf55); $peebaaf55 = self::prepareArgument($peebaaf55, $pa7fd620a); $v58b61e02bc = isset($v514eddb30d[$v43dd7d0051][0]) ? trim($v514eddb30d[$v43dd7d0051][0]) : ""; $v9a52216fbf = self::getArgumentType($v58b61e02bc); $v58b61e02bc = self::prepareArgument($v58b61e02bc, $v9a52216fbf); $v67db1bd535 = isset($pb68aa01b[$v43dd7d0051][0]) ? trim($pb68aa01b[$v43dd7d0051][0]) : ""; $pc3e857ed = self::getArgumentType($v67db1bd535); $v67db1bd535 = self::prepareArgument($v67db1bd535, $pc3e857ed); $v259d35fa15 = self::mf618223d31a9($v6490ea3a15, $v9fb2eada1a[$v43dd7d0051][1]); $v8a4df75785 = self::mb44c4fa1d7b4($pf2e4821f, $v9b9b8653bc, $v3017a9dd59, $peebaaf55, $pa7fd620a, $v259d35fa15); $v9b391a5b1f[] = array( "match" => $v9fb2eada1a[$v43dd7d0051][0], "region" => $v9b9b8653bc, "region_type" => $v3017a9dd59, "block" => $peebaaf55, "block_type" => $pa7fd620a, "param" => $v58b61e02bc, "param_type" => $v9a52216fbf, "value" => $v67db1bd535, "value_type" => $pc3e857ed, "region_block_index" => $v8a4df75785, "line" => $v259d35fa15, ); } } } return $v9b391a5b1f; } public static function setFileBlockSettingsPropertyValue($pf3dc0762, $v9947e6e9ec, $v1d88a54df5) { $v6490ea3a15 = self::getFileContents($pf3dc0762); $v5c1c342594 = self::setBlockSettingsPropertyValue($v6490ea3a15, $v9947e6e9ec, $v1d88a54df5); if ($v5c1c342594 && file_put_contents($pf3dc0762, $v6490ea3a15) === false) $v5c1c342594 = false; return $v5c1c342594; } public static function setBlockSettingsPropertyValue(&$v6490ea3a15, $v9947e6e9ec, $v1d88a54df5) { return self::setMethodParamsFromContent($v6490ea3a15, $v9947e6e9ec, $v1d88a54df5, "createBlock", false, 0, 2, -1); } public static function getFileCreateBlockParams($pf3dc0762, $pacfef7d5 = false, $v08a1062039 = 0, $pf9851a9c = -1) { return self::getCreateBlockParams( self::getFileContents($pf3dc0762), $pacfef7d5, $v08a1062039, $pf9851a9c); } public static function getCreateBlockParams($v6490ea3a15, $pacfef7d5 = false, $v08a1062039 = 0, $pf9851a9c = -1) { $v9b391a5b1f = array(); self::f0dbc620630($v6490ea3a15); $v0b196f001b = $pacfef7d5 && substr($pacfef7d5, 0, 1) != '$' ? '$' . $pacfef7d5 : $pacfef7d5; $pedde3449 = self::f9312178574($v6490ea3a15, "createBlock", $v0b196f001b, $v08a1062039, $pf9851a9c); foreach ($pedde3449 as $v6cd9d4006f) { if (empty($v6cd9d4006f["static"])) { self::f98375c70ac($v6cd9d4006f, 0, $pc8b88eb4, $v3ee11d6af6); self::f98375c70ac($v6cd9d4006f, 1, $peebaaf55, $pa7fd620a); self::f98375c70ac($v6cd9d4006f, 2, $pc01d97db, $pedd4e25d); $v9b391a5b1f[] = array( "match" => isset($v6cd9d4006f["match"]) ? $v6cd9d4006f["match"] : null, "class_obj" => isset($v6cd9d4006f["class_obj"]) ? $v6cd9d4006f["class_obj"] : null, "module" => $pc8b88eb4, "module_type" => $v3ee11d6af6, "block" => $peebaaf55, "block_type" => $pa7fd620a, "block_settings" => $pc01d97db, "block_settings_type" => $pedd4e25d, "line" => isset($v6cd9d4006f["line"]) ? $v6cd9d4006f["line"] : null, ); } } return $v9b391a5b1f; } public static function getFileIncludeJoinPoints($pf3dc0762, $pacfef7d5 = false, $v08a1062039 = 0, $pf9851a9c = -1) { return self::getIncludeJoinPoints( self::getFileContents($pf3dc0762), $pacfef7d5, $v08a1062039, $pf9851a9c); } public static function getIncludeJoinPoints($v6490ea3a15, $pacfef7d5 = false, $v08a1062039 = 0, $pf9851a9c = -1) { $pf615c15a = array(); self::f0dbc620630($v6490ea3a15); $v0b196f001b = $pacfef7d5 && substr($pacfef7d5, 0, 1) != '$' ? '$' . $pacfef7d5 : $pacfef7d5; $pedde3449 = self::f9312178574($v6490ea3a15, array("includeJoinPoint", "includeStatusJoinPoint"), $v0b196f001b, $v08a1062039, $pf9851a9c); foreach ($pedde3449 as $v6cd9d4006f) { if (empty($v6cd9d4006f["static"])) { self::f98375c70ac($v6cd9d4006f, 0, $v34bca6a112, $v50e99cdef4); self::f98375c70ac($v6cd9d4006f, 1, $v77784c4ecd, $v09f1e60981); self::f98375c70ac($v6cd9d4006f, 2, $v53c74ba347, $v1b806aaa51); $pf615c15a[] = array( "match" => isset($v6cd9d4006f["match"]) ? $v6cd9d4006f["match"] : null, "class_obj" => isset($v6cd9d4006f["class_obj"]) ? $v6cd9d4006f["class_obj"] : null, "method" => isset($v6cd9d4006f["method"]) ? $v6cd9d4006f["method"] : null, "method_type" => "string", "join_point_name" => $v34bca6a112, "join_point_name_type" => $v50e99cdef4, "join_point_settings" => $v77784c4ecd, "join_point_settings_type" => $v09f1e60981, "join_point_description" => $v53c74ba347, "join_point_description_type" => $v1b806aaa51, "line" => isset($v6cd9d4006f["line"]) ? $v6cd9d4006f["line"] : null, ); } } return $pf615c15a; } public static function getFileAddBlockJoinPoints($pf3dc0762, $pacfef7d5 = false, $v08a1062039 = 0, $pf9851a9c = -1) { return self::getAddBlockJoinPoints( self::getFileContents($pf3dc0762), $pacfef7d5, $v08a1062039, $pf9851a9c); } public static function getAddBlockJoinPoints($v6490ea3a15, $pacfef7d5 = false, $v08a1062039 = 0, $pf9851a9c = -1) { $pf615c15a = array(); self::f0dbc620630($v6490ea3a15); $v0b196f001b = $pacfef7d5 && substr($pacfef7d5, 0, 1) != '$' ? '$' . $pacfef7d5 : $pacfef7d5; $pedde3449 = self::f9312178574($v6490ea3a15, "addBlockJoinPoint", $v0b196f001b, $v08a1062039, $pf9851a9c); foreach ($pedde3449 as $v6cd9d4006f) { if (empty($v6cd9d4006f["static"])) { self::f98375c70ac($v6cd9d4006f, 0, $peebaaf55, $pa7fd620a); self::f98375c70ac($v6cd9d4006f, 1, $v34bca6a112, $v50e99cdef4); self::f98375c70ac($v6cd9d4006f, 2, $v77784c4ecd, $v09f1e60981); $pf615c15a[] = array( "match" => isset($v6cd9d4006f["match"]) ? $v6cd9d4006f["match"] : null, "class_obj" => isset($v6cd9d4006f["class_obj"]) ? $v6cd9d4006f["class_obj"] : null, "method" => isset($v6cd9d4006f["method"]) ? $v6cd9d4006f["method"] : null, "method_type" => "string", "block" => $peebaaf55, "block_type" => $pa7fd620a, "join_point_name" => $v34bca6a112, "join_point_name_type" => $v50e99cdef4, "join_point_settings" => $v77784c4ecd, "join_point_settings_type" => $v09f1e60981, "line" => isset($v6cd9d4006f["line"]) ? $v6cd9d4006f["line"] : null, ); } } return $pf615c15a; } public static function getFileAddRegionBlockJoinPoints($pf3dc0762, $pacfef7d5 = false, $v08a1062039 = 0, $pf9851a9c = -1) { return self::getAddRegionBlockJoinPoints( self::getFileContents($pf3dc0762), $pacfef7d5, $v08a1062039, $pf9851a9c); } public static function getAddRegionBlockJoinPoints($v6490ea3a15, $pacfef7d5 = false, $v08a1062039 = 0, $pf9851a9c = -1) { $pf615c15a = array(); self::f0dbc620630($v6490ea3a15); $v0b196f001b = $pacfef7d5 && substr($pacfef7d5, 0, 1) != '$' ? '$' . $pacfef7d5 : $pacfef7d5; $pedde3449 = self::f9312178574($v6490ea3a15, "addRegionBlockJoinPoint", $v0b196f001b, $v08a1062039, $pf9851a9c); if ($pedde3449) { $pf2e4821f = self::getRegionsBlocks($v6490ea3a15); foreach ($pedde3449 as $v6cd9d4006f) { if (empty($v6cd9d4006f["static"])) { self::f98375c70ac($v6cd9d4006f, 0, $v9b9b8653bc, $v3017a9dd59); self::f98375c70ac($v6cd9d4006f, 1, $peebaaf55, $pa7fd620a); self::f98375c70ac($v6cd9d4006f, 2, $v34bca6a112, $v50e99cdef4); self::f98375c70ac($v6cd9d4006f, 3, $v77784c4ecd, $v09f1e60981); $v8a4df75785 = self::mb44c4fa1d7b4($pf2e4821f, $v9b9b8653bc, $v3017a9dd59, $peebaaf55, $pa7fd620a, isset($v6cd9d4006f["line"]) ? $v6cd9d4006f["line"] : null); $pf615c15a[] = array( "match" => isset($v6cd9d4006f["match"]) ? $v6cd9d4006f["match"] : null, "class_obj" => isset($v6cd9d4006f["class_obj"]) ? $v6cd9d4006f["class_obj"] : null, "method" => isset($v6cd9d4006f["method"]) ? $v6cd9d4006f["method"] : null, "method_type" => "string", "region" => $v9b9b8653bc, "region_type" => $v3017a9dd59, "block" => $peebaaf55, "block_type" => $pa7fd620a, "join_point_name" => $v34bca6a112, "join_point_name_type" => $v50e99cdef4, "join_point_settings" => $v77784c4ecd, "join_point_settings_type" => $v09f1e60981, "region_block_index" => $v8a4df75785, "line" => isset($v6cd9d4006f["line"]) ? $v6cd9d4006f["line"] : null, ); } } } return $pf615c15a; } public static function getFileBlockLocalJoinPoints($pf3dc0762) { return self::getBlockLocalJoinPoints( self::getFileContents($pf3dc0762) ); } public static function getBlockLocalJoinPoints($v6490ea3a15) { $pf615c15a = array(); if ($v6490ea3a15) { self::f0dbc620630($v6490ea3a15); preg_match_all('/\$block_local_join_points(\s*)\[([^\]]*)\](\s*)\[([^\]]*)\]/iu', $v6490ea3a15, $pbae7526c, PREG_OFFSET_CAPTURE); $v9fb2eada1a = !empty($pbae7526c[0]) ? $pbae7526c[0] : array(); $v9158f5ed68 = !empty($pbae7526c[2]) ? $pbae7526c[2] : array(); $pd162e32e = !empty($pbae7526c[4]) ? $pbae7526c[4] : array(); $pc37695cb = count($v9fb2eada1a); for ($v43dd7d0051 = 0; $v43dd7d0051 < $pc37695cb; $v43dd7d0051++) { $peebaaf55 = isset($v9158f5ed68[$v43dd7d0051][0]) ? trim($v9158f5ed68[$v43dd7d0051][0]) : ""; $pa7fd620a = self::getArgumentType($peebaaf55); $peebaaf55 = self::prepareArgument($peebaaf55, $pa7fd620a); $pbd1bc7b0 = isset($v9158f5ed68[$v43dd7d0051][1]) ? $v9158f5ed68[$v43dd7d0051][1] : null; self::f9bfd754e94($v6490ea3a15, $peebaaf55, $pa7fd620a, $pbd1bc7b0); $v34bca6a112 = $pd162e32e[$v43dd7d0051][0] ? trim($pd162e32e[$v43dd7d0051][0]) : ""; $v50e99cdef4 = self::getArgumentType($v34bca6a112); $v34bca6a112 = self::prepareArgument($v34bca6a112, $v50e99cdef4); $pf615c15a[] = array( "block" => $peebaaf55, "block_type" => $pa7fd620a, "join_point_name" => $v34bca6a112, "join_point_name_type" => $v50e99cdef4, ); } } return $pf615c15a; } public static function getFileAddSequentialLogicalActivities($pf3dc0762, $pacfef7d5 = false, $v08a1062039 = 0, $pf9851a9c = -1) { return self::getAddSequentialLogicalActivities( self::getFileContents($pf3dc0762), $pacfef7d5, $v08a1062039, $pf9851a9c); } public static function getAddSequentialLogicalActivities($v6490ea3a15, $pacfef7d5 = false, $v08a1062039 = 0, $pf9851a9c = -1) { $v9b391a5b1f = array(); self::f0dbc620630($v6490ea3a15); $v0b196f001b = $pacfef7d5 && substr($pacfef7d5, 0, 1) != '$' ? '$' . $pacfef7d5 : $pacfef7d5; $pedde3449 = self::f9312178574($v6490ea3a15, "addSequentialLogicalActivities", $v0b196f001b, $v08a1062039, $pf9851a9c); foreach ($pedde3449 as $v6cd9d4006f) { if (empty($v6cd9d4006f["static"])) { self::f98375c70ac($v6cd9d4006f, 0, $v0b7214ee9f, $v3b407454d8); $v9b391a5b1f[] = array( "match" => isset($v6cd9d4006f["match"]) ? $v6cd9d4006f["match"] : null, "class_obj" => isset($v6cd9d4006f["class_obj"]) ? $v6cd9d4006f["class_obj"] : null, "sla_settings" => $v0b7214ee9f, "sla_settings_type" => $v3b407454d8, "line" => isset($v6cd9d4006f["line"]) ? $v6cd9d4006f["line"] : null, ); } } return $v9b391a5b1f; } public static function getFilePageProperties($pf3dc0762, $pacfef7d5 = false, $v08a1062039 = 0, $pf9851a9c = -1) { return self::getPageProperties( self::getFileContents($pf3dc0762), $pacfef7d5, $v08a1062039, $pf9851a9c); } public static function getPageProperties($v6490ea3a15, $pacfef7d5 = false, $v08a1062039 = 0, $pf9851a9c = -1) { $v9073377656 = array(); $v3ae55a9a2e = new ReflectionClass("CMSPagePropertyLayer"); $pb2bb35e9 = $v3ae55a9a2e->getMethods(); $v62222c88b4 = array(); foreach ($pb2bb35e9 as $v4dab304881) { $v603bd47baf = $v4dab304881->getName(); if (substr($v603bd47baf, 0, 3) == "set") { $v9b391a5b1f = $v4dab304881->getParameters(); $v943c52a786 = isset($v9b391a5b1f[0]) ? $v9b391a5b1f[0] : null; $v67ccb03f4c = $v943c52a786 ? $v943c52a786->getName() : ""; $pd6bf10d2 = $v943c52a786 && $v943c52a786->isOptional() ? $v943c52a786->getDefaultValue() : null; $v9bfae076b1 = is_string($pd6bf10d2) ? "string" : ""; $v62222c88b4[$v603bd47baf] = array($v67ccb03f4c, $pd6bf10d2, $v9bfae076b1); } } self::f0dbc620630($v6490ea3a15); $v0b196f001b = $pacfef7d5 && substr($pacfef7d5, 0, 1) != '$' ? '$' . $pacfef7d5 : $pacfef7d5; $pedde3449 = self::f9312178574($v6490ea3a15, array_keys($v62222c88b4), $v0b196f001b, $v08a1062039, $pf9851a9c); foreach ($pedde3449 as $v6cd9d4006f) { if (empty($v6cd9d4006f["static"])) { self::f98375c70ac($v6cd9d4006f, 0, $v463ddec21a, $pdf75fa1d); $pe9716498 = ""; $v69096357e9 = ""; $peded7a79 = ""; if (!empty($v6cd9d4006f["method"])) foreach ($v62222c88b4 as $v603bd47baf => $v75ec87b4c6) if ($v603bd47baf == $v6cd9d4006f["method"]) { $pe9716498 = $v75ec87b4c6[0]; $v69096357e9 = $v75ec87b4c6[1]; $peded7a79 = $v75ec87b4c6[2]; break; } if ($pe9716498) $v9073377656[] = array( "match" => isset($v6cd9d4006f["match"]) ? $v6cd9d4006f["match"] : null, "class_obj" => isset($v6cd9d4006f["class_obj"]) ? $v6cd9d4006f["class_obj"] : null, "method" => isset($v6cd9d4006f["method"]) ? $v6cd9d4006f["method"] : null, "method_type" => "string", "prop_name" => $pe9716498, "prop_value" => $v463ddec21a, "prop_value_type" => $pdf75fa1d, "prop_default_value" => $v69096357e9, "prop_default_value_type" => $peded7a79, "line" => isset($v6cd9d4006f["line"]) ? $v6cd9d4006f["line"] : null, ); } } return $v9073377656; } public static function getFileAddEntities($pf3dc0762, $pacfef7d5 = false, $v08a1062039 = 0, $pf9851a9c = -1) { return self::getAddEntities( self::getFileContents($pf3dc0762), $pacfef7d5, $v08a1062039, $pf9851a9c); } public static function getAddEntities($v6490ea3a15, $pacfef7d5 = false, $v08a1062039 = 0, $pf9851a9c = -1) { $v5ec1fba56e = array(); self::f0dbc620630($v6490ea3a15); $v0b196f001b = $pacfef7d5 && substr($pacfef7d5, 0, 1) != '$' ? '$' . $pacfef7d5 : $pacfef7d5; $pedde3449 = self::f9312178574($v6490ea3a15, "addEntity", $v0b196f001b, $v08a1062039, $pf9851a9c); foreach ($pedde3449 as $v6cd9d4006f) { if (empty($v6cd9d4006f["static"])) { self::f98375c70ac($v6cd9d4006f, 0, $pfefc55de, $v7ff9c4606a); self::f98375c70ac($v6cd9d4006f, 1, $v0d484b37bf, $pd979c353); $v5ec1fba56e[] = array( "match" => isset($v6cd9d4006f["match"]) ? $v6cd9d4006f["match"] : null, "class_obj" => isset($v6cd9d4006f["class_obj"]) ? $v6cd9d4006f["class_obj"] : null, "method" => isset($v6cd9d4006f["method"]) ? $v6cd9d4006f["method"] : null, "method_type" => "string", "entity_code" => $pfefc55de, "entity_code_type" => $v7ff9c4606a, "entity_params" => $v0d484b37bf, "entity_params_type" => $pd979c353, "line" => isset($v6cd9d4006f["line"]) ? $v6cd9d4006f["line"] : null, ); } } return $v5ec1fba56e; } public static function getFileAddTemplates($pf3dc0762, $pacfef7d5 = false, $v08a1062039 = 0, $pf9851a9c = -1) { return self::getAddTemplates( self::getFileContents($pf3dc0762), $pacfef7d5, $v08a1062039, $pf9851a9c); } public static function getAddTemplates($v6490ea3a15, $pacfef7d5 = false, $v08a1062039 = 0, $pf9851a9c = -1) { $v94d48fb72f = array(); self::f0dbc620630($v6490ea3a15); $v0b196f001b = $pacfef7d5 && substr($pacfef7d5, 0, 1) != '$' ? '$' . $pacfef7d5 : $pacfef7d5; $pedde3449 = self::f9312178574($v6490ea3a15, "addTemplate", $v0b196f001b, $v08a1062039, $pf9851a9c); foreach ($pedde3449 as $v6cd9d4006f) { if (empty($v6cd9d4006f["static"])) { self::f98375c70ac($v6cd9d4006f, 0, $v01c84b1653, $v23ee8665c0); self::f98375c70ac($v6cd9d4006f, 1, $v9e3513bc0e, $pc34fdd94); $v94d48fb72f[] = array( "match" => isset($v6cd9d4006f["match"]) ? $v6cd9d4006f["match"] : null, "class_obj" => isset($v6cd9d4006f["class_obj"]) ? $v6cd9d4006f["class_obj"] : null, "method" => isset($v6cd9d4006f["method"]) ? $v6cd9d4006f["method"] : null, "method_type" => "string", "template_code" => $v01c84b1653, "template_code_type" => $v23ee8665c0, "template_params" => $v9e3513bc0e, "template_params_type" => $pc34fdd94, "line" => isset($v6cd9d4006f["line"]) ? $v6cd9d4006f["line"] : null, ); } } return $v94d48fb72f; } private static function f0dbc620630(&$v6490ea3a15) { $v6490ea3a15 = PHPCodePrintingHandler::getCodeWithoutComments($v6490ea3a15); } private static function mb44c4fa1d7b4($pf2e4821f, $v9b9b8653bc, $v3017a9dd59, $peebaaf55, $pa7fd620a, $v259d35fa15) { $v8a4df75785 = 0; if ($pf2e4821f) foreach ($pf2e4821f as $pd06bdde3) { $v63b47ad460 = isset($pd06bdde3["region"]) ? $pd06bdde3["region"] : null; $pddd1aca4 = isset($pd06bdde3["region_type"]) ? $pd06bdde3["region_type"] : null; $v0cdeaecf90 = isset($pd06bdde3["block"]) ? $pd06bdde3["block"] : null; $v8f48f8d963 = isset($pd06bdde3["block_type"]) ? $pd06bdde3["block_type"] : null; if ($v63b47ad460 == $v9b9b8653bc && $pddd1aca4 == $v3017a9dd59 && $v0cdeaecf90 == $peebaaf55 && $v8f48f8d963 == $pa7fd620a) { if (isset($pd06bdde3["line"]) && $pd06bdde3["line"] > $v259d35fa15) return $v8a4df75785; $v8a4df75785++; } } return $v8a4df75785; } private static function mf618223d31a9($v6490ea3a15, $pac65f06f) { $v259d35fa15 = 1; $pbd1bc7b0 = -1; do { $pbd1bc7b0 = strpos($v6490ea3a15, "\n", $pbd1bc7b0 + 1); if ($pbd1bc7b0 > $pac65f06f) break; $v259d35fa15++; } while ($pbd1bc7b0 !== false); return $v259d35fa15; } private static function f98375c70ac($v6cd9d4006f, $v3e480d07ee, &$pa6209df1, &$v7f2aac9119) { $pa6209df1 = $v7f2aac9119 = null; if ($v6cd9d4006f && !empty($v6cd9d4006f["params"])) { $v58b61e02bc = $v6cd9d4006f["params"][$v3e480d07ee]; if (isset($v58b61e02bc["type"]) && $v58b61e02bc["type"] == "variable") { $pa6209df1 = isset($v58b61e02bc["referenced_value"]) ? $v58b61e02bc["referenced_value"] : null; $v7f2aac9119 = isset($v58b61e02bc["referenced_type"]) ? $v58b61e02bc["referenced_type"] : null; } else { $pa6209df1 = isset($v58b61e02bc["value"]) ? $v58b61e02bc["value"] : null; $v7f2aac9119 = isset($v58b61e02bc["type"]) ? $v58b61e02bc["type"] : null; } } } public static function setMethodParamsFromContent(&$v6490ea3a15, $v9947e6e9ec, $v1d88a54df5, $v28b9855350, $v0b196f001b = false, $pb0ae70c0 = 0, $v578470a077 = 0, $pf9851a9c = -1) { $v5c1c342594 = false; $v9947e6e9ec = preg_replace("/\/+/", "/", $v9947e6e9ec); $v9947e6e9ec = preg_replace("/^[\s\/]*/", "", $v9947e6e9ec); $v9947e6e9ec = preg_replace("/[\s\/]*$/", "", $v9947e6e9ec); if ($v9947e6e9ec) { $v74411a89da = '<? $aux = ' . var_export($v1d88a54df5, true) . '; ?>'; $v04a43f9b8a = self::f45be6a1435($v74411a89da); $v643b49a734 = $v04a43f9b8a && !empty($v04a43f9b8a[0]) && strtolower($v04a43f9b8a[0]->getType()) == "expr_assign" && !empty($v04a43f9b8a[0]->var) && isset($v04a43f9b8a[0]->expr) ? $v04a43f9b8a[0]->expr : null; if (is_object($v643b49a734)) { $v6306fea85d = explode("/", $v9947e6e9ec); $v793f92423d = self::f45be6a1435($v6490ea3a15); $v052656e632 = new PHPParserPrettyPrinter(); $v5c1c342594 = self::f997aaa8caa($v052656e632, $v793f92423d, $v6306fea85d, $v643b49a734, "createBlock", false, 0, 2, -1); if ($v5c1c342594) { $pb3fbfea9 = new PhpParser\PrettyPrinter\Standard(); $v6f3e16f956 = $pb3fbfea9->prettyPrint($v793f92423d); if (substr(trim($v6490ea3a15), 0, 2) == "<?" && substr(trim($v6f3e16f956), 0, 2) != "<?") $v6f3e16f956 = "<?php\n" . $v6f3e16f956; if (substr(trim($v6490ea3a15), -2) == "?>" && substr(trim($v6f3e16f956), -2) != "?>") $v6f3e16f956 = trim($v6f3e16f956) . "\n?>"; $pbfc9d574 = new PHPCodeBeautifier(); $v6f3e16f956 = $pbfc9d574->beautifyCode($v6f3e16f956); $v6f3e16f956 = TextSanitizer::replaceEscapedEndLinesInsideOfPHPDoubleQuotesInHtmlCode($v6f3e16f956); $v6490ea3a15 = $v6f3e16f956; } } } return $v5c1c342594; } private static function f9312178574($v6490ea3a15, $v28b9855350, $v0b196f001b = false, $v08a1062039 = 0, $pf9851a9c = -1) { $v793f92423d = self::f45be6a1435($v6490ea3a15); $v052656e632 = new PHPParserPrettyPrinter(); $v052656e632->disableNoIndentToken(); $v9b391a5b1f = self::f2fd3edac74($v052656e632, $v793f92423d, $v28b9855350, $v0b196f001b, $v08a1062039, $pf9851a9c); return $v9b391a5b1f; } private static function f45be6a1435($v6490ea3a15) { $pf1d2e1d9 = new PhpParser\Parser\Php5(new PhpParser\Lexer\Emulative); $v3c085bda5f = new PhpParser\Parser\Php7(new PhpParser\Lexer\Emulative); $v5f04ef1cc1 = new PhpParser\Parser\Multiple(array($pf1d2e1d9, $v3c085bda5f)); $v6490ea3a15 = TextSanitizer::replaceIfNotEscaped('\n', '\\\n', $v6490ea3a15); $v793f92423d = $v5f04ef1cc1->parse($v6490ea3a15); return $v793f92423d; } private static function f2fd3edac74($v052656e632, $v793f92423d, $v28b9855350, $v0b196f001b = false, $v08a1062039 = 0, $pf9851a9c = -1, $v54d2a63d3d = null) { $pedde3449 = array(); $v28b9855350 = is_array($v28b9855350) ? $v28b9855350 : array($v28b9855350); foreach ($v28b9855350 as $pd69fb7d0 => $v603bd47baf) $v28b9855350[$pd69fb7d0] = strtolower($v603bd47baf); $v244867fd7e = $v793f92423d ? count($v793f92423d) : 0; $v54d2a63d3d = $v54d2a63d3d ? $v54d2a63d3d : array(); for ($v43dd7d0051 = 0; $v43dd7d0051 < $v244867fd7e; $v43dd7d0051++) { $v5faa4b8a01 = $v793f92423d[$v43dd7d0051]; $pe83cda0c = strtolower($v5faa4b8a01->getType()); if ($pe83cda0c == "expr_assign") { $v9b35c85277 = $v052656e632->prettyPrintExpr($v5faa4b8a01->var); $v1b1754dafa = self::getArgumentType($v9b35c85277); if ($v1b1754dafa == "variable") $v54d2a63d3d[] = $v5faa4b8a01; } if ($pe83cda0c == "expr_assign" || $pe83cda0c == "expr_assignop_concat" || $pe83cda0c == "expr_assignop_plus" || $pe83cda0c == "expr_assignop_minus") { $v5faa4b8a01 = $v5faa4b8a01->expr; $pe83cda0c = strtolower($v5faa4b8a01->getType()); } else if ($pe83cda0c == "stmt_echo") { $v5faa4b8a01 = isset($v5faa4b8a01->exprs[0]) ? $v5faa4b8a01->exprs[0] : null; $pe83cda0c = $v5faa4b8a01 ? strtolower($v5faa4b8a01->getType()) : ""; } else if ($pe83cda0c == "expr_include") { $v5faa4b8a01 = $v5faa4b8a01->expr; $pe83cda0c = strtolower($v5faa4b8a01->getType()); } $v4f1e63be97 = $v5faa4b8a01->var; if ($v4f1e63be97) { $v1f2fb9ac5f = strtolower($v4f1e63be97->getType()); if ($v1f2fb9ac5f == "expr_methodcall" || $v1f2fb9ac5f == "expr_staticcall" || $v1f2fb9ac5f == "expr_funccall") { $pf72c1d58 = self::f2fd3edac74($v052656e632, array($v4f1e63be97), $v28b9855350, $v0b196f001b, $v08a1062039, $pf9851a9c, $v54d2a63d3d); $pedde3449 = array_merge($pedde3449, $pf72c1d58); if ($v08a1062039 > 0 && $v08a1062039 <= count($pedde3449)) break; } } if ($pe83cda0c == "expr_methodcall" || $pe83cda0c == "expr_staticcall" || $pe83cda0c == "expr_funccall") { $v24b0e52635 = self::f539c98cd94($v052656e632, $v5faa4b8a01); if ($v24b0e52635 && is_string($v24b0e52635) && in_array(strtolower($v24b0e52635), $v28b9855350)) { $v972f1a5c2b = null; if ($v5faa4b8a01->var) $v972f1a5c2b = $v052656e632->prettyPrintExpr($v5faa4b8a01->var); else $v972f1a5c2b = self::f539c98cd94($v052656e632, $v5faa4b8a01->class); if (!$v0b196f001b || $v0b196f001b == $v972f1a5c2b) { $pe896c6c8 = $v5faa4b8a01->args; $v9b391a5b1f = array(); if (is_array($pe896c6c8)) { foreach ($pe896c6c8 as $pd69fb7d0 => $v0f24a53653) { $pa6f25fee = strtolower($v0f24a53653->value->getType()); $v1cfba8c105 = $pa44c1d0e = $pe8072d24 = null; if ($pa6f25fee == "expr_assign" || $pa6f25fee == "expr_assignop_concat" || $pa6f25fee == "expr_assignop_plus" || $pa6f25fee == "expr_assignop_minus") { $v1cfba8c105 = $v0f24a53653->value->var->name; $v0f24a53653->value = $v0f24a53653->value->expr; } if ($v0f24a53653->value->items) { $v67db1bd535 = self::mb2dd5458eea8($v052656e632, $v0f24a53653->value->items); $pc3e857ed = "array"; } else { $v67db1bd535 = $v052656e632->pArg($v0f24a53653); $pc3e857ed = self::getArgumentType($v67db1bd535); $v67db1bd535 = self::prepareArgument($v67db1bd535, $pc3e857ed); if ($pc3e857ed == "variable") { $pa44c1d0e = $v67db1bd535; $pe8072d24 = $pc3e857ed; self::f9f76fee7ea($v052656e632, $v54d2a63d3d, $pa44c1d0e, $pe8072d24); } } $v58b61e02bc = array( "value" => $v67db1bd535, "type" => $pc3e857ed, ); if (isset($pa44c1d0e)) { $v58b61e02bc["referenced_value"] = $pa44c1d0e; $v58b61e02bc["referenced_type"] = $pe8072d24; } if ($v1cfba8c105) $v58b61e02bc["var"] = $v1cfba8c105; $v9b391a5b1f[] = $v58b61e02bc; } } } $v6cd9d4006f = array( "match" => $v052656e632->prettyPrintExpr($v5faa4b8a01), "method" => $v24b0e52635, "params" => $v9b391a5b1f, "line" => $v5faa4b8a01->getAttribute("startLine"), ); if ($v972f1a5c2b) { $v6cd9d4006f["class_obj"] = $v972f1a5c2b; $v6cd9d4006f["static"] = $pe83cda0c == "expr_staticcall"; } $pedde3449[] = $v6cd9d4006f; } } if ($v08a1062039 > 0 && $v08a1062039 <= count($pedde3449)) break; else if ($pf9851a9c <= -1 || $pf9851a9c > 0) { $pcc8d256f = $v5faa4b8a01->stmts ? array($v5faa4b8a01) : array(); if ($pe83cda0c == "stmt_if") { $v45ccdf140a = self::f811b7fcc5c($v5faa4b8a01->cond); if ($v45ccdf140a) $pcc8d256f[] = $v45ccdf140a; if ($v5faa4b8a01->elseifs) { for ($v9d27441e80 = 0, $v22d139870f = count($v5faa4b8a01->elseifs); $v9d27441e80 < $v22d139870f; $v9d27441e80++) { $v45ccdf140a = self::f811b7fcc5c($v5faa4b8a01->elseifs[$v9d27441e80]->cond); if ($v45ccdf140a) $pcc8d256f[] = $v45ccdf140a; } $pcc8d256f = array_merge($pcc8d256f, $v5faa4b8a01->elseifs); } if ($v5faa4b8a01->else->stmts) $pcc8d256f[] = $v5faa4b8a01->else; } else if ($pe83cda0c == "stmt_switch" && $v5faa4b8a01->cases) { $v45ccdf140a = self::f811b7fcc5c($v5faa4b8a01->cond); if ($v45ccdf140a) $pcc8d256f[] = $v45ccdf140a; if ($v5faa4b8a01->cases) for ($v9d27441e80 = 0, $v22d139870f = count($v5faa4b8a01->cases); $v9d27441e80 < $v22d139870f; $v9d27441e80++) { $v45ccdf140a = self::f811b7fcc5c($v5faa4b8a01->cases[$v9d27441e80]->cond); if ($v45ccdf140a) $pcc8d256f[] = $v45ccdf140a; } $pcc8d256f = array_merge($pcc8d256f, $v5faa4b8a01->cases); } else if ($pe83cda0c == "stmt_trycatch" && $v5faa4b8a01->catches) { $pcc8d256f = array_merge($pcc8d256f, $v5faa4b8a01->catches); } else if ($pe83cda0c == "expr_binaryop_concat" && ($v5faa4b8a01->left || $v5faa4b8a01->right)) { $v5faa4b8a01->stmts = array(); if ($v5faa4b8a01->left) $v5faa4b8a01->stmts[] = $v5faa4b8a01->left; if ($v5faa4b8a01->right) $v5faa4b8a01->stmts[] = $v5faa4b8a01->right; $pcc8d256f[] = $v5faa4b8a01; } else if ($pe83cda0c == "expr_methodcall" || $pe83cda0c == "expr_staticcall" || $pe83cda0c == "expr_funccall") { $v24b0e52635 = self::f539c98cd94($v052656e632, $v5faa4b8a01); if ($v24b0e52635 && is_string($v24b0e52635) && !in_array(strtolower($v24b0e52635), $v28b9855350) && $v5faa4b8a01->args) { $v5faa4b8a01->stmts = array(); foreach ($v5faa4b8a01->args as $pea70e132) if ($pea70e132->value) $v5faa4b8a01->stmts[] = $pea70e132->value; $pcc8d256f[] = $v5faa4b8a01; } } if ($pcc8d256f) { $pd062707d = $v08a1062039 > 0 ? $v08a1062039 - count($pedde3449) : 0; $v286f5d635f = $pf9851a9c > 0 ? $pf9851a9c - 1 : $pf9851a9c; $pc37695cb = count($pcc8d256f); for ($v9d27441e80 = 0; $v9d27441e80 < $pc37695cb; $v9d27441e80++) if (!empty($pcc8d256f[$v9d27441e80]->stmts)) { $pf72c1d58 = self::f2fd3edac74($v052656e632, $pcc8d256f[$v9d27441e80]->stmts, $v28b9855350, $v0b196f001b, $pd062707d, $v286f5d635f, $v54d2a63d3d); $pedde3449 = array_merge($pedde3449, $pf72c1d58); $pd062707d = $v08a1062039 > 0 ? $pd062707d - count($pf72c1d58) : 0; if ($v08a1062039 > 0 && $pd062707d <= 0) break; } } } } return $pedde3449; } private static function f811b7fcc5c($v9e394b2939) { $v8927bcb5c6 = null; if ($v9e394b2939) { if (empty($v9e394b2939->stmts)) { $v8927bcb5c6 = new stdClass(); if (!empty($v9e394b2939->expr)) $v8927bcb5c6->stmts = array($v9e394b2939->expr); else $v8927bcb5c6->stmts = array($v9e394b2939); } else $v8927bcb5c6 = $v9e394b2939; } return $v8927bcb5c6; } private static function f997aaa8caa($v052656e632, $v793f92423d, $v6306fea85d, $v643b49a734, $v28b9855350, $v0b196f001b = false, $pb0ae70c0 = 0, $v578470a077 = 0, $pf9851a9c = -1, $v54d2a63d3d = null, $v6beeaf88e6 = false) { $v5c1c342594 = false; $v28b9855350 = is_array($v28b9855350) ? $v28b9855350 : array($v28b9855350); foreach ($v28b9855350 as $pd69fb7d0 => $v603bd47baf) $v28b9855350[$pd69fb7d0] = strtolower($v603bd47baf); $v244867fd7e = $v793f92423d ? count($v793f92423d) : 0; $v54d2a63d3d = $v54d2a63d3d ? $v54d2a63d3d : array(); for ($v43dd7d0051 = 0; $v43dd7d0051 < $v244867fd7e; $v43dd7d0051++) { $v5faa4b8a01 = &$v793f92423d[$v43dd7d0051]; $pe83cda0c = strtolower($v5faa4b8a01->getType()); if ($pe83cda0c == "expr_assign") { $v9b35c85277 = $v052656e632->prettyPrintExpr($v5faa4b8a01->var); $v1b1754dafa = self::getArgumentType($v9b35c85277); if ($v1b1754dafa == "variable") $v54d2a63d3d[] = $v5faa4b8a01; } } for ($v43dd7d0051 = 0; $v43dd7d0051 < $v244867fd7e; $v43dd7d0051++) { $v5faa4b8a01 = &$v793f92423d[$v43dd7d0051]; $pe83cda0c = strtolower($v5faa4b8a01->getType()); if ($pe83cda0c == "expr_assign" || $pe83cda0c == "expr_assignop_concat" || $pe83cda0c == "expr_assignop_plus" || $pe83cda0c == "expr_assignop_minus") { $v5faa4b8a01 = &$v5faa4b8a01->expr; $pe83cda0c = strtolower($v5faa4b8a01->getType()); } else if ($pe83cda0c == "stmt_echo") { $v5faa4b8a01 = &$v5faa4b8a01->exprs[0]; $pe83cda0c = $v5faa4b8a01 ? strtolower($v5faa4b8a01->getType()) : ""; } if ($pe83cda0c == "expr_methodcall" || $pe83cda0c == "expr_staticcall" || $pe83cda0c == "expr_funccall") { $v24b0e52635 = self::f539c98cd94($v052656e632, $v5faa4b8a01); if ($v24b0e52635 && is_string($v24b0e52635) && in_array(strtolower($v24b0e52635), $v28b9855350)) { $v972f1a5c2b = null; if ($v5faa4b8a01->var) $v972f1a5c2b = $v052656e632->prettyPrintExpr($v5faa4b8a01->var); else $v972f1a5c2b = self::f539c98cd94($v052656e632, $v5faa4b8a01->class); if (!$v0b196f001b || $v0b196f001b == $v972f1a5c2b) { if ($pb0ae70c0 <= 0) { $v6beeaf88e6 = true; $pe896c6c8 = $v5faa4b8a01->args; if (is_array($pe896c6c8)) { $v0f24a53653 = isset($pe896c6c8[$v578470a077]) ? $pe896c6c8[$v578470a077] : null; if ($v0f24a53653) { $pa6f25fee = strtolower($v0f24a53653->value->getType()); $v1cfba8c105 = $pa44c1d0e = $pe8072d24 = null; if ($pa6f25fee == "expr_assign" || $pa6f25fee == "expr_assignop_concat" || $pa6f25fee == "expr_assignop_plus" || $pa6f25fee == "expr_assignop_minus") { $v5c1c342594 = self::f33bd26cab1($v052656e632, $v54d2a63d3d, $v6306fea85d, $v643b49a734, $v0f24a53653->value->expr); } else { $v5c1c342594 = self::f33bd26cab1($v052656e632, $v54d2a63d3d, $v6306fea85d, $v643b49a734, $v0f24a53653->value); } if ($v5c1c342594) $v5faa4b8a01->args[$v578470a077] = $v0f24a53653; } } break; } $pb0ae70c0--; } } } if ($v6beeaf88e6) break; else if ($pf9851a9c <= -1 || $pf9851a9c > 0) { $pcc8d256f = $v5faa4b8a01->stmts ? array($v5faa4b8a01) : array(); if ($pe83cda0c == "stmt_if") { if (!empty($v5faa4b8a01->elseifs)) { foreach ($v5faa4b8a01->elseifs as $pd69fb7d0 => $v7c627adb6d) $pcc8d256f[] = &$v5faa4b8a01->elseifs[$pd69fb7d0]; } if (!empty($v5faa4b8a01->else->stmts)) $pcc8d256f[] = &$v5faa4b8a01->else; } else if ($pe83cda0c == "stmt_switch" && !empty($v5faa4b8a01->cases)) { foreach ($v5faa4b8a01->cases as $pd69fb7d0 => $v7c627adb6d) $pcc8d256f[] = &$v5faa4b8a01->cases[$pd69fb7d0]; } else if ($pe83cda0c == "stmt_trycatch" && !empty($v5faa4b8a01->catches)) { foreach ($v5faa4b8a01->catches as $pd69fb7d0 => $v7c627adb6d) $pcc8d256f[] = &$v5faa4b8a01->catches[$pd69fb7d0]; } else if ($pe83cda0c == "expr_binaryop_concat" && (!empty($v5faa4b8a01->left) || !empty($v5faa4b8a01->right))) { $v28e481ecbc = new stdClass(); $v28e481ecbc->stmts = array(); if (!empty($v28e481ecbc->left)) $v28e481ecbc->stmts[] = &$v5faa4b8a01->left; if (!empty($v28e481ecbc->right)) $v28e481ecbc->stmts[] = &$v5faa4b8a01->right; $pcc8d256f[] = $v28e481ecbc; } else if ($pe83cda0c == "expr_methodcall" || $pe83cda0c == "expr_staticcall" || $pe83cda0c == "expr_funccall") { $v24b0e52635 = self::f539c98cd94($v052656e632, $v5faa4b8a01); if ($v24b0e52635 && is_string($v24b0e52635) && !in_array(strtolower($v24b0e52635), $v28b9855350) && !empty($v5faa4b8a01->args)) { $v28e481ecbc = new stdClass(); $v28e481ecbc->stmts = array(); foreach ($v5faa4b8a01->args as $pea70e132) if (!empty($pea70e132->value)) $v28e481ecbc->stmts[] = &$pea70e132->value; $pcc8d256f[] = $v28e481ecbc; } } if ($pcc8d256f) { $v286f5d635f = $pf9851a9c > 0 ? $pf9851a9c - 1 : $pf9851a9c; $pc37695cb = count($pcc8d256f); for ($v9d27441e80 = 0; $v9d27441e80 < $pc37695cb; $v9d27441e80++) if (!empty($pcc8d256f[$v9d27441e80]->stmts)) { $v5c1c342594 = self::f997aaa8caa($v052656e632, $pcc8d256f[$v9d27441e80]->stmts, $v6306fea85d, $v643b49a734, $v28b9855350, $v0b196f001b, $pb0ae70c0, $v578470a077, $v286f5d635f, $v54d2a63d3d, $v6beeaf88e6); if ($v6beeaf88e6) break; } } } } return $v5c1c342594; } private static function f33bd26cab1($v052656e632, &$v54d2a63d3d, $v6306fea85d, $v643b49a734, &$v3d0905c10c) { $v5c1c342594 = false; $v67db1bd535 = $v052656e632->prettyPrintExpr($v3d0905c10c); $pc3e857ed = self::getArgumentType($v67db1bd535); $v67db1bd535 = self::prepareArgument($v67db1bd535, $pc3e857ed); if (!empty($v3d0905c10c->items)) { $v5c1c342594 = self::mff8fad625e0e($v052656e632, $v3d0905c10c->items, $v6306fea85d, $v643b49a734); } else if ($pc3e857ed == "variable") { $v5c1c342594 = self::f0a961fb1f4($v052656e632, $v54d2a63d3d, $v6306fea85d, $v643b49a734, $v67db1bd535, $pc3e857ed); } else if (count($v6306fea85d) == 1 && empty(strlen($v6306fea85d[0]))) { $pec9beadb = $v3d0905c10c->getAttributes(); $v3d0905c10c = $v643b49a734; if ($pec9beadb) foreach ($pec9beadb as $pe5c5e2fe => $v956913c90f) $v3d0905c10c->setAttribute($pe5c5e2fe, $v956913c90f); $v5c1c342594 = true; } return $v5c1c342594; } private static function f539c98cd94($v052656e632, $v6694236c2c) { if (is_object($v6694236c2c)) { if (is_object($v6694236c2c->name) && strtolower($v6694236c2c->name->getType()) == "name") return $v052656e632->pName($v6694236c2c->name); if (is_array($v6694236c2c->parts)) return $v052656e632->pName($v6694236c2c); return $v6694236c2c->name; } return $v6694236c2c; } private static function f9f76fee7ea($v052656e632, $v793f92423d, &$v847e7d0a83, &$v7f2aac9119) { if ($v7f2aac9119 == "variable") { for ($v43dd7d0051 = count($v793f92423d) - 1; $v43dd7d0051 >= 0; $v43dd7d0051--) { $v5faa4b8a01 = $v793f92423d[$v43dd7d0051]; if (strtolower($v5faa4b8a01->getType()) == "expr_assign" && !empty($v5faa4b8a01->var)) { $v956913c90f = $v052656e632->prettyPrintExpr($v5faa4b8a01->var); if ($v956913c90f == '$' . $v847e7d0a83) { if (!empty($v5faa4b8a01->expr->items)) { $v847e7d0a83 = self::mb2dd5458eea8($v052656e632, $v5faa4b8a01->expr->items); $v7f2aac9119 = "array"; } else { $v847e7d0a83 = $v052656e632->prettyPrintExpr($v5faa4b8a01->expr); $v7f2aac9119 = self::getArgumentType($v847e7d0a83); $v847e7d0a83 = self::prepareArgument($v847e7d0a83, $v7f2aac9119); } break; } } } } } private static function f0a961fb1f4($v052656e632, &$v793f92423d, $v6306fea85d, $v643b49a734, $v847e7d0a83, $v7f2aac9119) { $v5c1c342594 = false; if ($v7f2aac9119 == "variable") { $pc37695cb = count($v793f92423d); for ($v43dd7d0051 = 0; $v43dd7d0051 < $pc37695cb; $v43dd7d0051++) { $v5faa4b8a01 = $v793f92423d[$v43dd7d0051]; if (strtolower($v5faa4b8a01->getType()) == "expr_assign" && !empty($v5faa4b8a01->var)) { $v956913c90f = $v052656e632->prettyPrintExpr($v5faa4b8a01->var); if ($v956913c90f == '$' . $v847e7d0a83) { $v67db1bd535 = $v5faa4b8a01->expr; if (count($v6306fea85d) == 1 && empty(strlen($v6306fea85d[0]))) { $pec9beadb = $v67db1bd535->getAttributes(); $v67db1bd535 = $v643b49a734; if ($pec9beadb) foreach ($pec9beadb as $pe5c5e2fe => $v956913c90f) $v67db1bd535->setAttribute($pe5c5e2fe, $v956913c90f); $v5c1c342594 = true; } else if (!empty($v67db1bd535->items) && self::mff8fad625e0e($v052656e632, $v67db1bd535->items, $v6306fea85d, $v643b49a734)) $v5c1c342594 = true; if ($v5c1c342594) $v793f92423d[$v43dd7d0051]->expr = $v67db1bd535; break; } } } } return $v5c1c342594; } private static function f9bfd754e94($v6490ea3a15, &$v847e7d0a83, &$v7f2aac9119, $pd69fb7d0 = null) { if ($v7f2aac9119 == "variable") { if ($pd69fb7d0) $v6490ea3a15 = substr($v6490ea3a15, 0, $pd69fb7d0); preg_match_all('/\$' . preg_quote($v847e7d0a83, "/") . '(\s*)=/u', $v6490ea3a15, $pbae7526c, PREG_OFFSET_CAPTURE); if ($pbae7526c) { $pbae7526c = $pbae7526c[0]; $pbae7526c = $pbae7526c[ count($pbae7526c) - 1 ]; $v327f72fb62 = $pbae7526c[0]; $pbd1bc7b0 = $pbae7526c[1] + strlen($v327f72fb62); $pc37695cb = strlen($v6490ea3a15); if ($v327f72fb62 && $pbd1bc7b0 < $pc37695cb) { $v8f85090cce = $v365d20463c = false; $v67db1bd535 = ""; for ($v43dd7d0051 = $pbd1bc7b0; $v43dd7d0051 < $pc37695cb; $v43dd7d0051++) { $pc288256e = $v6490ea3a15[$v43dd7d0051]; if ($pc288256e == "'" && !$v365d20463c && !TextSanitizer::isCharEscaped($v6490ea3a15, $v43dd7d0051)) $v8f85090cce = !$v8f85090cce; else if ($pc288256e == '"' && !$v8f85090cce && !TextSanitizer::isCharEscaped($v6490ea3a15, $v43dd7d0051)) $v365d20463c = !$v365d20463c; if (!$v8f85090cce && !$v365d20463c && $pc288256e == ";") break; $v67db1bd535 .= $pc288256e; } $v847e7d0a83 = trim($v67db1bd535); $v7f2aac9119 = self::getArgumentType($v847e7d0a83); $v847e7d0a83 = self::prepareArgument($v847e7d0a83, $v7f2aac9119); } } } } private static function mb2dd5458eea8($v052656e632, $pf72c1d58) { $v9073377656 = array(); $pc37695cb = $pf72c1d58 ? count($pf72c1d58) : 0; for ($v43dd7d0051 = 0; $v43dd7d0051 < $pc37695cb; $v43dd7d0051++) { $v342a134247 = $pf72c1d58[$v43dd7d0051]; $pbfa01ed1 = $v342a134247->key; $v67db1bd535 = $v342a134247->value; $v1491940c54 = is_object($pbfa01ed1) ? strtolower($pbfa01ed1->getType()) : null; $pc3e857ed = is_object($v67db1bd535) ? strtolower($v67db1bd535->getType()) : null; if ($v1491940c54) { $pbfa01ed1 = $v052656e632->prettyPrintExpr($pbfa01ed1); $pbfa01ed1 = self::getStmtValueAccordingWithType($pbfa01ed1, $v1491940c54); $v1491940c54 = strtolower($v342a134247->key->getType()); $v1491940c54 = $v1491940c54 == "scalar_string" || $v1491940c54 == "scalar_encapsed" ? "string" : ( $v1491940c54 == "expr_variable" ? "variable" : ( $v1491940c54 == "expr_funccall" ? "function" : ( $v1491940c54 == "expr_methodcall" || $v1491940c54 == "expr_staticcall" ? "method" : ( $v1491940c54 == "expr_array" ? "array" : "" )))); } else $pbfa01ed1 = null; if ($pc3e857ed) { if ($pc3e857ed == "expr_array") $v67db1bd535 = self::mb2dd5458eea8($v052656e632, $v67db1bd535->items); else { $v67db1bd535 = $v052656e632->prettyPrintExpr($v67db1bd535); $v67db1bd535 = self::getStmtValueAccordingWithType($v67db1bd535, $pc3e857ed); } $pc3e857ed = strtolower($pc3e857ed); $pc3e857ed = $pc3e857ed == "scalar_string" || $pc3e857ed == "scalar_encapsed" ? "string" : ( $pc3e857ed == "expr_variable" ? "variable" : ( $pc3e857ed == "expr_funccall" ? "function" : ( $pc3e857ed == "expr_methodcall" || $pc3e857ed == "expr_staticcall" ? "method" : ( $pc3e857ed == "expr_array" ? "array" : "" )))); } else $v67db1bd535 = null; $pb4a546a4 = array( "key" => $pbfa01ed1, "key_type" => isset($pbfa01ed1) ? $v1491940c54 : "null" ); if (is_array($v67db1bd535)) $pb4a546a4["items"] = $v67db1bd535; else { $pb4a546a4["value"] = $v67db1bd535; $pb4a546a4["value_type"] = isset($v67db1bd535) ? $pc3e857ed : "null"; } $v9073377656[] = $pb4a546a4; } return $v9073377656; } private static function mff8fad625e0e($v052656e632, &$pf72c1d58, $v6306fea85d, $v643b49a734) { $v5c1c342594 = false; $v44ceef9eca = isset($v6306fea85d[0]) ? $v6306fea85d[0] : null; $pc37695cb = $pf72c1d58 ? count($pf72c1d58) : 0; for ($v43dd7d0051 = 0; $v43dd7d0051 < $pc37695cb; $v43dd7d0051++) { $v342a134247 = $pf72c1d58[$v43dd7d0051]; $pbfa01ed1 = $v342a134247->key; $v67db1bd535 = $v342a134247->value; $v1491940c54 = is_object($pbfa01ed1) ? strtolower($pbfa01ed1->getType()) : null; $pc3e857ed = is_object($v67db1bd535) ? strtolower($v67db1bd535->getType()) : null; if ($v1491940c54) { $pbfa01ed1 = $v052656e632->prettyPrintExpr($pbfa01ed1); $pbfa01ed1 = self::getStmtValueAccordingWithType($pbfa01ed1, $v1491940c54); $v1491940c54 = strtolower($v342a134247->key->getType()); } else $pbfa01ed1 = null; $pc8464eca = false; if ($pbfa01ed1 && ($v1491940c54 == "scalar_string" || $v1491940c54 == "scalar_encapsed") && $pbfa01ed1 == $v44ceef9eca) $pc8464eca = true; else if (empty($pbfa01ed1) && $v43dd7d0051 == $v44ceef9eca) $pc8464eca = true; if ($pc8464eca && $pc3e857ed) { if (count($v6306fea85d) == 1) { $pec9beadb = $v67db1bd535->getAttributes(); $v67db1bd535 = $v643b49a734; if ($pec9beadb) foreach ($pec9beadb as $pe5c5e2fe => $v956913c90f) $v67db1bd535->setAttribute($pe5c5e2fe, $v956913c90f); $v5c1c342594 = true; } else if ($pc3e857ed == "expr_array") { array_shift($v6306fea85d); if (self::mff8fad625e0e($v052656e632, $v67db1bd535->items, $v6306fea85d, $v643b49a734)) $v5c1c342594 = true; } if ($v5c1c342594) $pf72c1d58[$v43dd7d0051]->value = $v67db1bd535; break; } } return $v5c1c342594; } public static function getStmtValueAccordingWithType($v67db1bd535, $pc3e857ed) { if ($pc3e857ed == "scalar_string" || $pc3e857ed == "scalar_encapsed") { $v34f0a629d3 = substr($v67db1bd535, 0, 1); $v67db1bd535 = substr($v67db1bd535, 1, -1); $v67db1bd535 = TextSanitizer::stripCSlashes($v67db1bd535, $v34f0a629d3); $v67db1bd535 = TextSanitizer::replaceIfNotEscaped('\n', "\n", $v67db1bd535); $v67db1bd535 = TextSanitizer::replaceIfNotEscaped('\t', "\t", $v67db1bd535); if ($v34f0a629d3 == "'") $v67db1bd535 = str_replace('$', '\\$', $v67db1bd535); $v67db1bd535 = preg_replace('/(|[^\\\\])\\\\(\${?[^\w])/u', '$1$2', $v67db1bd535); } else if ($pc3e857ed == "expr_binaryop_concat") { $v4b02eb37e3 = TextSanitizer::mbStrSplit($v67db1bd535); $pc37695cb = count($v4b02eb37e3); $pa456327a = ""; for ($v43dd7d0051 = 0; $v43dd7d0051 < $pc37695cb; $v43dd7d0051++) { $pc288256e = $v4b02eb37e3[$v43dd7d0051]; if (($pc288256e == '"' || $pc288256e == "'") && !TextSanitizer::isMBCharEscaped($v67db1bd535, $v43dd7d0051, $v4b02eb37e3)) { for ($v9d27441e80 = $v43dd7d0051 + 1; $v9d27441e80 < $pc37695cb; $v9d27441e80++) if ($v4b02eb37e3[$v9d27441e80] == $pc288256e && !TextSanitizer::isMBCharEscaped($v67db1bd535, $v9d27441e80, $v4b02eb37e3)) break; $v08d1f6acf0 = implode("", array_slice($v4b02eb37e3, $v43dd7d0051, ($v9d27441e80 + 1) - $v43dd7d0051)); $v08d1f6acf0 = TextSanitizer::replaceIfNotEscaped('\n', "\n", $v08d1f6acf0); $v08d1f6acf0 = TextSanitizer::replaceIfNotEscaped('\t', "\t", $v08d1f6acf0); if ($pc288256e == '"') $v08d1f6acf0 = preg_replace('/(|[^\\\\])\\\\(\${?[^\w])/u', '$1$2', $v08d1f6acf0); $pa456327a .= $v08d1f6acf0; $v43dd7d0051 = $v9d27441e80; } else $pa456327a .= $pc288256e; } $v67db1bd535 = $pa456327a; } return $v67db1bd535; } private static function f7eb9d895e6($v67db1bd535, $pc3e857ed) { if ($pc3e857ed == "scalar_string" || $pc3e857ed == "scalar_encapsed") { $v34f0a629d3 = substr($v67db1bd535, 0, 1); $v67db1bd535 = substr($v67db1bd535, 1, -1); $v67db1bd535 = TextSanitizer::replaceIfNotEscaped('\n', "\n", $v67db1bd535); $v67db1bd535 = TextSanitizer::replaceIfNotEscaped('\t', "\t", $v67db1bd535); $v67db1bd535 = stripslashes($v67db1bd535); $v67db1bd535 = str_replace('$', '\$', $v67db1bd535); if ($v34f0a629d3 == '"') $v67db1bd535 = str_replace('{\$', '{$', $v67db1bd535); } return $v67db1bd535; } public static function getArgumentType($pea70e132) { if (empty($pea70e132) && $pea70e132 !== 0) return ""; $pea70e132 = trim($pea70e132); if (strtolower($pea70e132) == "null" || is_numeric($pea70e132)) return ""; preg_match_all('/^(\$[\w\[\]\$]+)$/u', $pea70e132, $pbae7526c, PREG_PATTERN_ORDER); if (isset($pbae7526c[0][0]) && $pbae7526c[0][0] == $pea70e132) return "variable"; $v34f0a629d3 = substr($pea70e132, 0, 1); if (($v34f0a629d3 == '"' || $v34f0a629d3 == "'") && substr($pea70e132, -1) == $v34f0a629d3) { $pea70e132 = substr($pea70e132, 1, -1); $v7e4b517c18 = 0; do { $pbd1bc7b0 = strpos($pea70e132, $v34f0a629d3, $v7e4b517c18); $v7e4b517c18 = $pbd1bc7b0 + 1; if ($pbd1bc7b0 !== false && !TextSanitizer::isCharEscaped($pea70e132, $pbd1bc7b0)) return ""; } while ($pbd1bc7b0 !== false); return "string"; } return ""; } public static function prepareArgument($pea70e132, $v9439b47442) { if ($v9439b47442 == "string") return self::getStmtValueAccordingWithType($pea70e132, "scalar_string"); return $v9439b47442 == "variable" ? substr($pea70e132, 1) : (!$v9439b47442 && strtolower($pea70e132) == "null" ? null : $pea70e132); } public static function getFileContents($pf3dc0762) { return $pf3dc0762 && file_exists($pf3dc0762) ? file_get_contents($pf3dc0762) : ""; } public static function getVariableValueCode($v498f441296, $v3fb9f41470 = null) { if (!isset($v498f441296)) return $v3fb9f41470 == "string" || $v3fb9f41470 == "date" ? "''" : (!$v3fb9f41470 ? "null" : ""); return $v3fb9f41470 == "variable" && $v498f441296 ? ((substr(trim($v498f441296), 0, 1) != '$' ? '$' : '') . trim($v498f441296)) : ($v3fb9f41470 == "string" || $v3fb9f41470 == "date" ? "\"" . addcslashes($v498f441296, '"') . "\"" : (!$v3fb9f41470 && strlen(trim($v498f441296)) == 0 ? "null" : trim($v498f441296)) ); } } ?>
