<?php
/*
 * Copyright (c) 2007 PHPMyFrameWork - Joao Pinto
 * AUTHOR: Joao Paulo Lopes Pinto -- http://jplpinto.com
 * 
 * The use of this code must be allowed first by the creator Joao Pinto, since this is a private and proprietary code.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS 
 * OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY 
 * AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR 
 * CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL 
 * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, 
 * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER 
 * IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT 
 * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE. IN NO EVENT SHALL 
 * THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN 
 * AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE 
 * OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 */

include_once get_lib("org.phpframework.layer.presentation.cms.CMSLayer"); include_once get_lib("org.phpframework.joinpoint.JoinPointHandler"); class CMSJoinPointLayer { private $v874d5d2d79; private $v48e14a9550; private $pf4c3dc70 = array(); private $v0fa547ce72 = array(); private $v4d109e7412 = array(); private $v4d7a7a929f = null; public function __construct(CMSLayer $v874d5d2d79) { $this->v874d5d2d79 = $v874d5d2d79; $this->v48e14a9550 = new JoinPointHandler( array("EVC" => $this->v874d5d2d79->getEVC()) ); } public function addJoinPoint($v5e813b295b, $pc0e1cfe4) { $this->pf4c3dc70[$v5e813b295b][] = $pc0e1cfe4; } public function addBlockJoinPoint($v29fec2ceaa, $v5e813b295b, $pc0e1cfe4) { $this->v0fa547ce72[$v29fec2ceaa][$v5e813b295b][] = $pc0e1cfe4; } public function getBlockJoinPoints($v29fec2ceaa) { return isset($this->v0fa547ce72[$v29fec2ceaa]) ? $this->v0fa547ce72[$v29fec2ceaa] : null; } public function setBlockJoinPoints($v29fec2ceaa, $v0fa547ce72) { $this->v0fa547ce72[$v29fec2ceaa] = $v0fa547ce72; } public function resetBlockJoinPoints($v29fec2ceaa) { $this->v0fa547ce72[$v29fec2ceaa] = null; } public function addRegionBlockJoinPoint($v9f2c84d2ad, $v29fec2ceaa, $v5e813b295b, $pc0e1cfe4) { $this->v4d109e7412[$v9f2c84d2ad][$v29fec2ceaa][$v5e813b295b][] = $pc0e1cfe4; $this->v4d7a7a929f = $v9f2c84d2ad; } public function getRegionBlockJoinPoints($v9f2c84d2ad, $v29fec2ceaa) { return isset($this->v4d109e7412[$v9f2c84d2ad][$v29fec2ceaa]) ? $this->v4d109e7412[$v9f2c84d2ad][$v29fec2ceaa] : null; } public function setRegionBlockJoinPoints($v9f2c84d2ad, $v29fec2ceaa, $v4d109e7412) { $this->v4d109e7412[$v9f2c84d2ad][$v29fec2ceaa] = $v4d109e7412; } public function resetRegionBlockJoinPoints($v9f2c84d2ad, $v29fec2ceaa) { $this->v4d109e7412[$v9f2c84d2ad][$v29fec2ceaa] = null; $this->v4d7a7a929f = null; } public function includeJoinPoint($v5e813b295b, $v9b391a5b1f, $pd2c744e8 = null) { $pf4c3dc70 = $this->f9f38d57105($v5e813b295b); if ($pf4c3dc70) { foreach ($pf4c3dc70 as $pc0e1cfe4) { $this->v48e14a9550->executeJoinPoint($pc0e1cfe4, $v9b391a5b1f); } } } public function includeStatusJoinPoint($v5e813b295b, $v9b391a5b1f, $pd2c744e8 = null) { $v5c1c342594 = true; $pf4c3dc70 = $this->f9f38d57105($v5e813b295b); if ($pf4c3dc70) { foreach ($pf4c3dc70 as $pc0e1cfe4) { if (!$this->v48e14a9550->executeJoinPoint($pc0e1cfe4, $v9b391a5b1f)) { $v5c1c342594 = false; break; } } } return $v5c1c342594; } private function f9f38d57105($v5e813b295b) { $pf4c3dc70 = array(); if ($v5e813b295b) { $v534d78ed7f = $this->v874d5d2d79->getCMSBlockLayer()->getCurrentBlockId(); $v0fa547ce72 = $v534d78ed7f && isset($this->v0fa547ce72[$v534d78ed7f][$v5e813b295b]) ? $this->v0fa547ce72[$v534d78ed7f][$v5e813b295b] : array(); $v0fa547ce72 = $v0fa547ce72 ? $v0fa547ce72 : array(); $pfccd7ff7 = $v534d78ed7f && $this->v4d7a7a929f && isset($this->v4d109e7412[$this->v4d7a7a929f][$v534d78ed7f][$v5e813b295b]) ? $this->v4d109e7412[$this->v4d7a7a929f][$v534d78ed7f][$v5e813b295b] : array(); $pfccd7ff7 = $pfccd7ff7 ? $pfccd7ff7 : array(); $pf4c3dc70 = !empty($this->pf4c3dc70[$v5e813b295b]) ? $this->pf4c3dc70[$v5e813b295b] : array(); $pf4c3dc70 = array_merge($v0fa547ce72, $pfccd7ff7, $pf4c3dc70); } return $pf4c3dc70; } } ?>
