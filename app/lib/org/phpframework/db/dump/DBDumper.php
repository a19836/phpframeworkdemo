<?php
/*
 * Copyright (c) 2007 PHPMyFrameWork - Joao Pinto
 * AUTHOR: Joao Paulo Lopes Pinto -- http://jplpinto.com
 * 
 * The use of this code must be allowed first by the creator Joao Pinto, since this is a private and proprietary code.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS 
 * OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY 
 * AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR 
 * CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL 
 * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, 
 * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER 
 * IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT 
 * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE. IN NO EVENT SHALL 
 * THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN 
 * AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE 
 * OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 */

include_once get_lib("org.phpframework.db.dump.IDBDumper"); abstract class DBDumper implements IDBDumper { protected $DBDumperHandler = null; public function setDBDumperHandler($v834e515e94) { $this->DBDumperHandler = $v834e515e94; } abstract public function databases($pb67a2609); abstract public function createTable($pba23d78c, $v8c5df8072b, $v11f9d89738 = false); abstract public function createRecordsInsertStmt($v8c5df8072b, $v3dd67d635b); abstract public function getSqlStmtWithLimit($v3c76382d93, $v552b831ecd); abstract public function createStandInTableForView($v03205f9bb8, $v6bc5012fff); abstract public function getTableAttributeProperties($v670a5790dd); abstract public function getTableAttributesPropertiesBitHexFunc($v5e45ec9bb9); abstract public function getTableAttributesPropertiesBlobHexFunc($v5e45ec9bb9); abstract public function createView($pff59654a); abstract public function createTrigger($pff59654a); abstract public function createProcedure($pff59654a); abstract public function createFunction($pff59654a); abstract public function createEvent($pff59654a); abstract public function backupParameters(); abstract public function restoreParameters(); abstract public function startDisableConstraintsAndTriggersStmt($pac4bc40a); abstract public function endDisableConstraintsAndTriggersStmt($pac4bc40a); public static function create($v87e4fe1181, $v834e515e94) { return self::createByDriverClass( get_class($v87e4fe1181), $v834e515e94); } public static function createByDriverClass($v74128956c0, $v834e515e94) { $v446afd1219 = self::isDriverClassValid($v74128956c0); if (!$v446afd1219) throw new Exception("DB dumper method ($v74128956c0) is not allowed!"); $v1335217393 = "{$v74128956c0}Dumper"; return new $v1335217393($v834e515e94); } public static function isValid($v87e4fe1181) { return self::isDriverClassValid( get_class($v87e4fe1181) ); } public static function isDriverClassValid($v74128956c0) { $v1335217393 = "{$v74128956c0}Dumper"; $pf3dc0762 = get_lib("org.phpframework.db.dump.{$v1335217393}"); if (file_exists($pf3dc0762)) { include_once $pf3dc0762; return is_a($v1335217393, "IDBDumper", true); } return false; } public function escapeTableAttributeAlias($v7c3c74d27f) { $v346e1685e3 = $this->DBDumperHandler->getDBDriver()->getAliasEnclosingDelimiters(); return $v346e1685e3[0] . $v7c3c74d27f . $v346e1685e3[1]; } public function escapeTable($v8c5df8072b) { $v346e1685e3 = $this->DBDumperHandler->getDBDriver()->getEnclosingDelimiters(); return $v346e1685e3[0] . $v8c5df8072b . $v346e1685e3[1]; } public function escapeTableAttribute($v5e45ec9bb9, $v8c5df8072b = false) { $v346e1685e3 = $this->DBDumperHandler->getDBDriver()->getEnclosingDelimiters(); return $v8c5df8072b ? $v346e1685e3[0] . $v8c5df8072b . $v346e1685e3[1] . "." . $v346e1685e3[0] . $v5e45ec9bb9 . $v346e1685e3[1] : $v346e1685e3[0] . $v5e45ec9bb9 . $v346e1685e3[1]; } public function getDatabaseHeader($pb67a2609) { return "--".PHP_EOL. "-- Current Database: `$pb67a2609`".PHP_EOL. "--".PHP_EOL.PHP_EOL; } public function lockTable($v8c5df8072b) { $v3c76382d93 = $this->getStartLockTableReadStmt($v8c5df8072b); return $v3c76382d93 ? $this->DBDumperHandler->getDBDriver()->setSQL($v3c76382d93) : false; } public function unlockTable() { $v3c76382d93 = $this->getEndLockTableStmt(); return $v3c76382d93 ? $this->DBDumperHandler->getDBDriver()->setSQL($v3c76382d93) : false; } public function getDropDatabaseStmt($pb67a2609) { $v5d3813882f = $this->DBDumperHandler->getDBDriver()->getOptions(); return self::mb35022410f19( self::mb35022410f19( $this->DBDumperHandler->getDBDriver()->getDropDatabaseStatement($pb67a2609, $v5d3813882f) ) ); } public function getShowTablesStmt($pb67a2609) { $v5d3813882f = $this->DBDumperHandler->getDBDriver()->getOptions(); return self::mb35022410f19( $this->DBDumperHandler->getDBDriver()->getShowTablesStatement($pb67a2609, $v5d3813882f) ); } public function getShowTableColumnsStmt($pc661dc6b, $pb67a2609 = false) { $v5d3813882f = $this->DBDumperHandler->getDBDriver()->getOptions(); return self::mb35022410f19( $this->DBDumperHandler->getDBDriver()->getShowTableColumnsStatement($pc661dc6b, $pb67a2609, $v5d3813882f) ); } public function getShowForeignKeysStmt($pc661dc6b, $pb67a2609 = false) { $v5d3813882f = $this->DBDumperHandler->getDBDriver()->getOptions(); return self::mb35022410f19( $this->DBDumperHandler->getDBDriver()->getShowForeignKeysStatement($pc661dc6b, $pb67a2609, $v5d3813882f) ); } public function getShowCreateTableStmt($pc661dc6b) { $v5d3813882f = $this->DBDumperHandler->getDBDriver()->getOptions(); return self::mb35022410f19( $this->DBDumperHandler->getDBDriver()->getShowCreateTableStatement($pc661dc6b, $v5d3813882f) ); } public function getDropTableStmt($pc661dc6b) { $v5d3813882f = $this->DBDumperHandler->getDBDriver()->getOptions(); return self::mb35022410f19( $this->DBDumperHandler->getDBDriver()->getDropTableCascadeStatement($pc661dc6b, $v5d3813882f) ); } public function getDropTableForeignConstraintStmt($pc661dc6b, $pa28639ac) { $v5d3813882f = $this->DBDumperHandler->getDBDriver()->getOptions(); return self::mb35022410f19( $this->DBDumperHandler->getDBDriver()->getDropTableForeignConstraintStatement($pc661dc6b, $v5d3813882f) ); } public function getStartLockTableWriteStmt($pc661dc6b) { $v5d3813882f = $this->DBDumperHandler->getDBDriver()->getOptions(); return self::mb35022410f19( $this->DBDumperHandler->getDBDriver()->getStartLockTableWriteStatement($pc661dc6b, $v5d3813882f) ); } public function getStartLockTableReadStmt($pc661dc6b) { $v5d3813882f = $this->DBDumperHandler->getDBDriver()->getOptions(); return self::mb35022410f19( $this->DBDumperHandler->getDBDriver()->getStartLockTableReadStatement($pc661dc6b, $v5d3813882f) ); } public function getEndLockTableStmt() { $v5d3813882f = $this->DBDumperHandler->getDBDriver()->getOptions(); return self::mb35022410f19( $this->DBDumperHandler->getDBDriver()->getEndLockTableStatement($v5d3813882f) ); } public function getStartDisableKeysStmt($pc661dc6b) { $v5d3813882f = $this->DBDumperHandler->getDBDriver()->getOptions(); return self::mb35022410f19( $this->DBDumperHandler->getDBDriver()->getStartDisableKeysStatement($pc661dc6b, $v5d3813882f) ); } public function getEndDisableKeysStmt($pc661dc6b) { $v5d3813882f = $this->DBDumperHandler->getDBDriver()->getOptions(); return self::mb35022410f19( $this->DBDumperHandler->getDBDriver()->getEndDisableKeysStatement($pc661dc6b, $v5d3813882f) ); } public function getShowViewsStmt($pb67a2609) { $v5d3813882f = $this->DBDumperHandler->getDBDriver()->getOptions(); return self::mb35022410f19( $this->DBDumperHandler->getDBDriver()->getShowViewsStatement($pb67a2609, $v5d3813882f) ); } public function getShowCreateViewStmt($pa36e00ea) { $v5d3813882f = $this->DBDumperHandler->getDBDriver()->getOptions(); return self::mb35022410f19( $this->DBDumperHandler->getDBDriver()->getShowCreateViewStatement($pa36e00ea, $v5d3813882f) ); } public function getDropViewStmt($pa36e00ea) { $v5d3813882f = $this->DBDumperHandler->getDBDriver()->getOptions(); return self::mb35022410f19( $this->DBDumperHandler->getDBDriver()->getDropViewStatement($pa36e00ea, $v5d3813882f) ); } public function getShowTriggersStmt($pb67a2609) { $v5d3813882f = $this->DBDumperHandler->getDBDriver()->getOptions(); return self::mb35022410f19( $this->DBDumperHandler->getDBDriver()->getShowTriggersStatement($pb67a2609, $v5d3813882f) ); } public function getShowCreateTriggerStmt($v5ed3bce1d1) { $v5d3813882f = $this->DBDumperHandler->getDBDriver()->getOptions(); return self::mb35022410f19( $this->DBDumperHandler->getDBDriver()->getShowCreateTriggerStatement($v5ed3bce1d1, $v5d3813882f) ); } public function getDropTriggerStmt($v5ed3bce1d1) { $v5d3813882f = $this->DBDumperHandler->getDBDriver()->getOptions(); return self::mb35022410f19( $this->DBDumperHandler->getDBDriver()->getDropTriggerStatement($v5ed3bce1d1, $v5d3813882f) ); } public function getShowProceduresStmt($pb67a2609) { $v5d3813882f = $this->DBDumperHandler->getDBDriver()->getOptions(); return self::mb35022410f19( $this->DBDumperHandler->getDBDriver()->getShowProceduresStatement($pb67a2609, $v5d3813882f) ); } public function getShowCreateProcedureStmt($pbda8f16d) { $v5d3813882f = $this->DBDumperHandler->getDBDriver()->getOptions(); return self::mb35022410f19( $this->DBDumperHandler->getDBDriver()->getShowCreateProcedureStatement($pbda8f16d, $v5d3813882f) ); } public function getDropProcedureStmt($pbda8f16d) { $v5d3813882f = $this->DBDumperHandler->getDBDriver()->getOptions(); return self::mb35022410f19( $this->DBDumperHandler->getDBDriver()->getDropProcedureStatement($pbda8f16d, $v5d3813882f) ); } public function getShowFunctionsStmt($pb67a2609) { $v5d3813882f = $this->DBDumperHandler->getDBDriver()->getOptions(); return self::mb35022410f19( $this->DBDumperHandler->getDBDriver()->getShowFunctionsStatement($pb67a2609, $v5d3813882f) ); } public function getShowCreateFunctionStmt($v2f4e66e00a) { $v5d3813882f = $this->DBDumperHandler->getDBDriver()->getOptions(); return self::mb35022410f19( $this->DBDumperHandler->getDBDriver()->getShowCreateFunctionStatement($v2f4e66e00a, $v5d3813882f) ); } public function getDropFunctionStmt($v2f4e66e00a) { $v5d3813882f = $this->DBDumperHandler->getDBDriver()->getOptions(); return self::mb35022410f19( $this->DBDumperHandler->getDBDriver()->getDropFunctionStatement($v2f4e66e00a, $v5d3813882f) ); } public function getShowEventsStmt($pb67a2609) { $v5d3813882f = $this->DBDumperHandler->getDBDriver()->getOptions(); return self::mb35022410f19( $this->DBDumperHandler->getDBDriver()->getShowEventsStatement($pb67a2609, $v5d3813882f) ); } public function getShowCreateEventStmt($v76392c9cad) { $v5d3813882f = $this->DBDumperHandler->getDBDriver()->getOptions(); return self::mb35022410f19( $this->DBDumperHandler->getDBDriver()->getShowCreateEventStatement($v76392c9cad, $v5d3813882f) ); } public function getDropEventStmt($v76392c9cad) { $v5d3813882f = $this->DBDumperHandler->getDBDriver()->getOptions(); return self::mb35022410f19( $this->DBDumperHandler->getDBDriver()->getDropEventStatement($v76392c9cad, $v5d3813882f) ); } public function getSetupTransactionStmt() { $v5d3813882f = $this->DBDumperHandler->getDBDriver()->getOptions(); return self::mb35022410f19( $this->DBDumperHandler->getDBDriver()->getSetupTransactionStatement($v5d3813882f) ); } public function getStartTransactionStmt() { $v5d3813882f = $this->DBDumperHandler->getDBDriver()->getOptions(); return self::mb35022410f19( $this->DBDumperHandler->getDBDriver()->getStartTransactionStatement($v5d3813882f) ); } public function getCommitTransactionStmt() { $v5d3813882f = $this->DBDumperHandler->getDBDriver()->getOptions(); return self::mb35022410f19( $this->DBDumperHandler->getDBDriver()->getCommitTransactionStatement($v5d3813882f) ); } public function getStartDisableAutocommitStmt() { $v5d3813882f = $this->DBDumperHandler->getDBDriver()->getOptions(); return self::mb35022410f19( $this->DBDumperHandler->getDBDriver()->getStartDisableAutocommitStatement($v5d3813882f) ); } public function getEndDisableAutocommitStmt() { $v5d3813882f = $this->DBDumperHandler->getDBDriver()->getOptions(); return self::mb35022410f19( $this->DBDumperHandler->getDBDriver()->getEndDisableAutocommitStatement($v5d3813882f) ); } private static function mb35022410f19($v3c76382d93) { return $v3c76382d93 . ($v3c76382d93 ? PHP_EOL : ""); } } ?>
