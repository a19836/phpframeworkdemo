<?php
/*
 * Copyright (c) 2007 PHPMyFrameWork - Joao Pinto
 * AUTHOR: Joao Paulo Lopes Pinto -- http://jplpinto.com
 * 
 * The use of this code must be allowed first by the creator Joao Pinto, since this is a private and proprietary code.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS 
 * OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY 
 * AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR 
 * CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL 
 * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, 
 * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER 
 * IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT 
 * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE. IN NO EVENT SHALL 
 * THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN 
 * AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE 
 * OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 */
include_once get_lib("org.phpframework.util.text.TextSanitizer"); class PHPCodePrintingHandler { public static function getPHPClassesFromFolder($pdd397f0a) { $pa1c3a9c4 = array(); $v6ee393d9fb = self::mb7248d940f3f($pdd397f0a, false); $pc37695cb = count($v6ee393d9fb); for ($v43dd7d0051 = 0; $v43dd7d0051 < $pc37695cb; $v43dd7d0051++) { $pf3dc0762 = $v6ee393d9fb[$v43dd7d0051]; $pa1c3a9c4[$pf3dc0762] = self::getPHPClassesFromFile($pf3dc0762); } return $pa1c3a9c4; } public static function getPHPClassesFromFolderRecursively($pdd397f0a) { $pa1c3a9c4 = array(); $v6ee393d9fb = self::mb7248d940f3f($pdd397f0a, true); $pc37695cb = count($v6ee393d9fb); for ($v43dd7d0051 = 0; $v43dd7d0051 < $pc37695cb; $v43dd7d0051++) { $pf3dc0762 = $v6ee393d9fb[$v43dd7d0051]; $pa1c3a9c4[$pf3dc0762] = self::getPHPClassesFromFile($pf3dc0762); } return $pa1c3a9c4; } public static function getPHPClassesFromFile($pf3dc0762) { if ($pf3dc0762 && file_exists($pf3dc0762)) { $pf07e7d8a = file_get_contents($pf3dc0762); return self::getPHPClassesFromString($pf07e7d8a); } return array(); } public static function getPHPClassesFromString($pf07e7d8a) { $pd5c67a44 = token_get_all($pf07e7d8a); return self::getPHPClassesFromTokens($pd5c67a44); } public static function getPHPClassesFromTokens($pd5c67a44) { $pedde3449 = array(); $v15f3268002 = count($pd5c67a44); $v683898cc6f = false; $v840f02ee04 = 0; $v5a42d78efb = false; $pfd67dad8 = false; $pe5762321 = $v1efaf06c58 = ""; $pf05ba199 = array(T_INCLUDE, T_INCLUDE_ONCE, T_REQUIRE, T_REQUIRE_ONCE); $v4f98a43d0e = array(T_INCLUDE_ONCE, T_REQUIRE_ONCE); for ($v43dd7d0051 = 1; $v43dd7d0051 < $v15f3268002; $v43dd7d0051++) { if ($pd5c67a44[$v43dd7d0051] == "{" || $pd5c67a44[$v43dd7d0051][0] == T_CURLY_OPEN || $pd5c67a44[$v43dd7d0051][0] == T_DOLLAR_OPEN_CURLY_BRACES) ++$v840f02ee04; else if ($pd5c67a44[$v43dd7d0051] == "}" || $pd5c67a44[$v43dd7d0051][0] == "}") { $v81bf097bb1 = is_array($pd5c67a44[$v43dd7d0051]) && isset($pd5c67a44[$v43dd7d0051][2]) && is_numeric($pd5c67a44[$v43dd7d0051][2]) ? $pd5c67a44[$v43dd7d0051][2] : null; $v67793c1603 = $v43dd7d0051; if (!is_numeric($v81bf097bb1)) { $v9d27441e80 = $v43dd7d0051 - 1; while (true) { $pf39de78a = $v9d27441e80 + 1 < $v15f3268002 ? $pd5c67a44[++$v9d27441e80] : null; if (!isset($pf39de78a)) break; else if (is_array($pf39de78a) && isset($pf39de78a[2]) && is_numeric($pf39de78a[2])) { $v81bf097bb1 = $pf39de78a[2]; break; } } } if ($pfd67dad8 == $v840f02ee04) { $pfd67dad8 = false; if ($pe5762321) { if (!empty($pedde3449[$pe5762321]["methods"])) { $pd69fb7d0 = count($pedde3449[$pe5762321]["methods"]) - 1; $pedde3449[$pe5762321]["methods"][$pd69fb7d0]["end_brackets_line_index"] = $v81bf097bb1; $pedde3449[$pe5762321]["methods"][$pd69fb7d0]["end_brackets_token_index"] = $v67793c1603; $pedde3449[$pe5762321]["methods"][$pd69fb7d0]["end_line_index"] = $v81bf097bb1; $pedde3449[$pe5762321]["methods"][$pd69fb7d0]["end_token_index"] = $v67793c1603; } } else { $pd69fb7d0 = !empty($pedde3449[0]["methods"]) ? count($pedde3449[0]["methods"]) - 1 : 0; $pedde3449[0]["methods"][$pd69fb7d0]["end_brackets_line_index"] = $v81bf097bb1; $pedde3449[0]["methods"][$pd69fb7d0]["end_brackets_token_index"] = $v67793c1603; $pedde3449[0]["methods"][$pd69fb7d0]["end_line_index"] = $v81bf097bb1; $pedde3449[0]["methods"][$pd69fb7d0]["end_token_index"] = $v67793c1603; } } if ($v5a42d78efb == $v840f02ee04 && $pe5762321) { $v5a42d78efb = false; $pedde3449[$pe5762321]["end_brackets_line_index"] = $v81bf097bb1; $pedde3449[$pe5762321]["end_brackets_token_index"] = $v67793c1603; $pedde3449[$pe5762321]["end_line_index"] = $v81bf097bb1; $pedde3449[$pe5762321]["end_token_index"] = $v67793c1603; $pe5762321 = ""; } --$v840f02ee04; } else if (!$v5a42d78efb && !$pfd67dad8 && ($pd5c67a44[$v43dd7d0051][0] == T_CLASS || $pd5c67a44[$v43dd7d0051][0] == T_INTERFACE)) { $v4c704b9c94 = array(); $v1335217393 = ""; $pe5762321 = ""; $v81bf097bb1 = $pd5c67a44[$v43dd7d0051][2]; $v889d613135 = $pd5c67a44[$v43dd7d0051][0] == T_INTERFACE; $pa0d4d0cd = false; $v683898cc6f = $v03bba28cad = $pdcd745cf = false; $v0cbc774ce7 = $v588b83a503 = 0; $v04d9192f04 = $v43dd7d0051; $v9d27441e80 = $v43dd7d0051 - 1; while (true) { $pf39de78a = $v9d27441e80 - 1 >= 0 ? $pd5c67a44[--$v9d27441e80] : null; if (!is_array($pf39de78a)) break; else if ($pf39de78a[0] == T_ABSTRACT) { $pa0d4d0cd = true; $v81bf097bb1 = $pf39de78a[2]; $v04d9192f04 = $v9d27441e80; break; } else if ($pf39de78a[0] != T_COMMENT) break; } while (true) { $pf39de78a = $v43dd7d0051 + 1 < $v15f3268002 ? $pd5c67a44[++$v43dd7d0051] : null; if (!isset($pf39de78a)) break; else if ($pf39de78a == "{" || $pf39de78a[0] == T_CURLY_OPEN || $pf39de78a[0] == T_DOLLAR_OPEN_CURLY_BRACES) { --$v43dd7d0051; break; } else if (!is_array($pf39de78a)) break; else if ($pf39de78a[0] == T_STRING) $v1335217393 .= $pf39de78a[1]; else if ($pf39de78a[0] != T_WHITESPACE) { --$v43dd7d0051; break; } } if (!empty($v1335217393)) { $pe5762321 = self::prepareClassNameWithNameSpace($v1335217393, $v1efaf06c58); $v4c704b9c94 = array( "name" => $v1335217393, "start_line_index" => $v81bf097bb1, "start_token_index" => $v04d9192f04, "interface" => $v889d613135, "abstract" => $pa0d4d0cd, "namespace" => $v1efaf06c58, ); self::f92ff3e277d($pd5c67a44, $v04d9192f04, $v4c704b9c94); while (true) { $pf39de78a = $v43dd7d0051 + 1 < $v15f3268002 ? $pd5c67a44[++$v43dd7d0051] : null; if (!isset($pf39de78a)) break; else if ($pf39de78a == "{" || $pf39de78a[0] == T_CURLY_OPEN || $pf39de78a[0] == T_DOLLAR_OPEN_CURLY_BRACES) { --$v43dd7d0051; break; } else if (!is_array($pf39de78a) && $pf39de78a != ",") break; else if ($pf39de78a[0] == T_EXTENDS) { $v03bba28cad = true; $pdcd745cf = false; $v0cbc774ce7 = 0; } else if ($pf39de78a[0] == T_IMPLEMENTS) { $v03bba28cad = false; $pdcd745cf = true; $v588b83a503 = 0; } else if ( ($v03bba28cad || $pdcd745cf) && ($pf39de78a == "," || (is_array($pf39de78a) && $pf39de78a[1] == ","))) { if ($v03bba28cad) $v0cbc774ce7++; else $v588b83a503++; } else if ( ($v03bba28cad || $pdcd745cf) && ($pf39de78a[0] == T_STRING || $pf39de78a[0] == T_NS_SEPARATOR)) { $v3fb9f41470 = $v03bba28cad ? "extends" : "implements"; $v164fb8d517 = $v03bba28cad ? $v0cbc774ce7 : $v588b83a503; if (!empty($v4c704b9c94[$v3fb9f41470][$v164fb8d517])) $v4c704b9c94[$v3fb9f41470][$v164fb8d517] .= $pf39de78a[1]; else $v4c704b9c94[$v3fb9f41470][$v164fb8d517] = $pf39de78a[1]; } } } while (true) { $pf39de78a = $v43dd7d0051 + 1 < $v15f3268002 ? $pd5c67a44[++$v43dd7d0051] : null; if (!isset($pf39de78a)) break; else if ($pf39de78a == "{" || $pf39de78a[0] == T_CURLY_OPEN || $pf39de78a[0] == T_DOLLAR_OPEN_CURLY_BRACES) { if (!empty($pe5762321)) { $v4c704b9c94["start_brackets_line_index"] = isset($pd5c67a44[$v43dd7d0051][2]) && is_numeric($pd5c67a44[$v43dd7d0051][2]) ? $pd5c67a44[$v43dd7d0051][2] : (isset($pd5c67a44[$v43dd7d0051 + 1][2]) ? $pd5c67a44[$v43dd7d0051 + 1][2] : null); $v4c704b9c94["start_brackets_token_index"] = $v43dd7d0051; } ++$v840f02ee04; $v5a42d78efb = $v840f02ee04; break; } } if (!empty($pe5762321)) $pedde3449[$pe5762321] = $v4c704b9c94; } else if (!$v5a42d78efb && !$pfd67dad8 && $pd5c67a44[$v43dd7d0051][0] == T_NAMESPACE) { $v1efaf06c58 = ""; while (true) { $pf39de78a = $v43dd7d0051 + 1 < $v15f3268002 ? $pd5c67a44[++$v43dd7d0051] : null; if (!isset($pf39de78a)) break; else if ($pf39de78a == ";") break; $v1efaf06c58 .= is_array($pf39de78a) ? $pf39de78a[1] : $pf39de78a; } $v1efaf06c58 = trim($v1efaf06c58); if ($v1efaf06c58) $pedde3449[0]["namespaces"][] = $v1efaf06c58; } else if (!$v5a42d78efb && !$pfd67dad8 && in_array($pd5c67a44[$v43dd7d0051][0], $pf05ba199)) { $pc24afc88 = ""; $v41d9b98d46 = $pd5c67a44[$v43dd7d0051][0]; while (true) { $pf39de78a = $v43dd7d0051 + 1 < $v15f3268002 ? $pd5c67a44[++$v43dd7d0051] : null; if (!isset($pf39de78a)) break; else if ($pf39de78a == ";") break; $pc24afc88 .= is_array($pf39de78a) ? $pf39de78a[1] : $pf39de78a; } $pc24afc88 = trim($pc24afc88); if ($pc24afc88) $pedde3449[0]["includes"][] = array($pc24afc88, in_array($v41d9b98d46, $v4f98a43d0e)); } else if (!$v5a42d78efb && !$pfd67dad8 && $pd5c67a44[$v43dd7d0051][0] == T_USE) { $pd8c1f951 = $pf66e5016 = ""; $v9ec84cb847 = false; while (true) { $pf39de78a = $v43dd7d0051 + 1 < $v15f3268002 ? $pd5c67a44[++$v43dd7d0051] : null; if (!isset($pf39de78a)) break; else if ($pf39de78a == ";") break; else if ($pf39de78a[0] == T_AS) $v9ec84cb847 = true; else { $pc288256e = is_array($pf39de78a) ? $pf39de78a[1] : $pf39de78a; if ($v9ec84cb847) $pf66e5016 .= $pc288256e; else $pd8c1f951 .= $pc288256e; } } $pd8c1f951 = trim($pd8c1f951); $pf66e5016 = trim($pf66e5016); if ($pd8c1f951) $pedde3449[0]["uses"][$pd8c1f951] = $pf66e5016; } else if (!$pfd67dad8 && $pd5c67a44[$v43dd7d0051][0] == T_FUNCTION) { $v683898cc6f = true; } else if (!$pfd67dad8 && $v683898cc6f && $pd5c67a44[$v43dd7d0051][0] == T_STRING) { $v683898cc6f = false; if ($v840f02ee04 <= 0) $pe5762321 = ""; $v603bd47baf = $pd5c67a44[$v43dd7d0051][1]; $v81bf097bb1 = $pd5c67a44[$v43dd7d0051][2]; $v6cd9d4006f = array(); $v3fb9f41470 = false; $pa0d4d0cd = false; $v912f41d02b = false; $v9b20880672 = $v43dd7d0051; $v9d27441e80 = $v43dd7d0051 - 1; while (true) { $pf39de78a = $v9d27441e80 - 1 >= 0 ? $pd5c67a44[--$v9d27441e80] : null; if (!is_array($pf39de78a)) break; else if ($pf39de78a[0] == T_PUBLIC) { $v3fb9f41470 = "public"; $v81bf097bb1 = $pf39de78a[2]; $v9b20880672 = $v9d27441e80; } else if ($pf39de78a[0] == T_PRIVATE) { $v3fb9f41470 = "private"; $v81bf097bb1 = $pf39de78a[2]; $v9b20880672 = $v9d27441e80; } else if ($pf39de78a[0] == T_PROTECTED) { $v3fb9f41470 = "protected"; $v81bf097bb1 = $pf39de78a[2]; $v9b20880672 = $v9d27441e80; } else if ($pf39de78a[0] == T_FUNCTION) { $v81bf097bb1 = $pf39de78a[2]; $v9b20880672 = $v9d27441e80; } else if ($pf39de78a[0] == T_STATIC) { $v912f41d02b = true; $v81bf097bb1 = $pf39de78a[2]; $v9b20880672 = $v9d27441e80; } else if ($pf39de78a[0] == T_ABSTRACT) { $pa0d4d0cd = true; $v81bf097bb1 = $pf39de78a[2]; $v9b20880672 = $v9d27441e80; } else if ($pf39de78a[0] != T_WHITESPACE) break; } if ($v603bd47baf == "__construct" && !empty($pe5762321)) $v3fb9f41470 = "construct"; else $v3fb9f41470 = $v3fb9f41470 ? $v3fb9f41470 : "public"; $v6cd9d4006f = array( "name" => $v603bd47baf, "start_line_index" => $v81bf097bb1, "start_token_index" => $v9b20880672, "type" => $v3fb9f41470, "abstract" => $pa0d4d0cd, "static" => $v912f41d02b, ); self::f92ff3e277d($pd5c67a44, $v9b20880672, $v6cd9d4006f); $pdccf64a6 = array(); $pe86fd716 = $v3e2ea7c182 = $pb5eb5004 = $v3159b6f77b = false; while (true) { $pf39de78a = $v43dd7d0051 + 1 < $v15f3268002 ? $pd5c67a44[++$v43dd7d0051] : null; if (!isset($pf39de78a)) break; else if ($pf39de78a == "(") { $pe86fd716 = true; $v6cd9d4006f["start_args_token_index"] = $v43dd7d0051; } else if ($pf39de78a == ")" || empty($pf39de78a)) { $v6cd9d4006f["end_args_token_index"] = $v43dd7d0051; break; } else if ($pf39de78a == ";") { --$v43dd7d0051; break; } else if ($pe86fd716) { if ($pf39de78a[0] == T_VARIABLE) { $v3159b6f77b = false; $v3e2ea7c182 = $pf39de78a[1]; $v9d27441e80 = $v43dd7d0051; while (true) { $pf39de78a = $v9d27441e80 - 1 >= 0 ? $pd5c67a44[--$v9d27441e80] : null; if (!isset($pf39de78a) || $pf39de78a == "," || $pf39de78a == ")") break; else if ($pf39de78a == "&") { $v3e2ea7c182 = "&" . $v3e2ea7c182; break; } } if (trim($pb5eb5004)) $v3e2ea7c182 = trim($pb5eb5004) . " " . $v3e2ea7c182; $pdccf64a6[ $v3e2ea7c182 ] = null; } else if ($v3e2ea7c182) { if ($pf39de78a == "=") { $v3159b6f77b = true; $pdccf64a6[ $v3e2ea7c182 ] = ""; } else if ($v3159b6f77b) { $v531324e895 = 0; $v15f6545050 = ""; do { $v15f6545050 .= is_array($pf39de78a) ? $pf39de78a[1] : $pf39de78a; $pf39de78a = $v43dd7d0051 + 1 < $v15f3268002 ? $pd5c67a44[++$v43dd7d0051] : null; if (!isset($pf39de78a)) break; else if ($pf39de78a == "(") $v531324e895++; elseif ($pf39de78a == ")") { $v531324e895--; if ($v531324e895 == 0) { $v15f6545050 .= ")"; ++$v43dd7d0051; } } if ($v531324e895 <= 0 && ($pf39de78a == "," || $pf39de78a == ")")) break; } while(true); $pdccf64a6[ $v3e2ea7c182 ] = trim($v15f6545050); $v3e2ea7c182 = false; $pb5eb5004 = false; $v3159b6f77b = false; --$v43dd7d0051; } else if ($pf39de78a == ",") { $v3e2ea7c182 = false; $pb5eb5004 = false; $v3159b6f77b = false; } } else if ($pf39de78a[0] == T_NS_SEPARATOR || $pf39de78a[0] == T_STRING || strlen($pf39de78a[1])) { $pb5eb5004 .= $pf39de78a[1]; } } } if (!empty($pdccf64a6)) $v6cd9d4006f["arguments"] = $pdccf64a6; $v7863949b94 = $v81bf097bb1; while (true) { $pf39de78a = $v43dd7d0051 + 1 < $v15f3268002 ? $pd5c67a44[++$v43dd7d0051] : null; if (is_array($pf39de78a)) $v7863949b94 = $pf39de78a[2]; if (!isset($pf39de78a)) break; else if ($pf39de78a == "{" || $pf39de78a[0] == T_CURLY_OPEN || $pf39de78a[0] == T_DOLLAR_OPEN_CURLY_BRACES) { $v6cd9d4006f["start_brackets_line_index"] = is_numeric($pd5c67a44[$v43dd7d0051][2]) ? $pd5c67a44[$v43dd7d0051][2] : $pd5c67a44[$v43dd7d0051 + 1][2]; $v6cd9d4006f["start_brackets_token_index"] = $v43dd7d0051; ++$v840f02ee04; $pfd67dad8 = $v840f02ee04; break; } else if ($pf39de78a == ";") { $v6cd9d4006f["start_brackets_line_index"] = $v7863949b94; $v6cd9d4006f["start_brackets_token_index"] = $v43dd7d0051; $v6cd9d4006f["end_brackets_line_index"] = $v7863949b94; $v6cd9d4006f["end_brackets_token_index"] = $v43dd7d0051; $v6cd9d4006f["end_line_index"] = $v7863949b94; $v6cd9d4006f["end_token_index"] = $v43dd7d0051; break; } } if (!empty($pe5762321)) $pedde3449[$pe5762321]["methods"][] = $v6cd9d4006f; else { if ($v1efaf06c58) $v6cd9d4006f["namespace"] = $v1efaf06c58; $pedde3449[0]["methods"][] = $v6cd9d4006f; } } } return $pedde3449; } public static function prepareClassNameWithNameSpace($v1335217393, $v1efaf06c58 = "") { return ($v1efaf06c58 ? (substr($v1efaf06c58, 0, 1) == "\\" ? "" : "\\") . $v1efaf06c58 . "\\" : "") . $v1335217393; } public static function decoupleClassNameWithNameSpace($v1335217393) { $v5e813b295b = $v1335217393; $v1efaf06c58 = ""; if (strpos($v1335217393, "\\") !== false) { $pbd1bc7b0 = strrpos($v1335217393, "\\"); $v5e813b295b = substr($v1335217393, $pbd1bc7b0 + 1); $v1efaf06c58 = substr($v1335217393, 0, $pbd1bc7b0); } return array("class_name" => $v1335217393, "namespace" => $v1efaf06c58, "name" => $v5e813b295b); } private static function f92ff3e277d($pd5c67a44, $pd69fb7d0, &$v972f1a5c2b) { $pcc2fe66c = array(); $v454a8d0d34 = array(); $v543ee0db2e = null; $v65aeb0a5b0 = null; $pcdd9a718 = isset($pd5c67a44[$pd69fb7d0]) && is_array($pd5c67a44[$pd69fb7d0]) ? $pd5c67a44[$pd69fb7d0][2] : null; $v9b2e1caffe = isset($pd5c67a44[$pd69fb7d0]) && is_array($pd5c67a44[$pd69fb7d0]) ? $pd69fb7d0 : null; while (true) { $pf39de78a = $pd69fb7d0 >= 0 ? $pd5c67a44[--$pd69fb7d0] : null; if (is_array($pf39de78a) && ($pf39de78a[0] == T_COMMENT || $pf39de78a[0] == T_DOC_COMMENT || $pf39de78a[0] == T_WHITESPACE)) { if ($pf39de78a[0] == T_COMMENT) { if (!isset($v543ee0db2e)) { $pcdd9a718 = $pf39de78a[2] + substr_count($pf39de78a[1], "\n"); $v9b2e1caffe = $pd69fb7d0; } $pcc2fe66c[] = trim($pf39de78a[1]); $v543ee0db2e = $pf39de78a[2]; $v65aeb0a5b0 = $pd69fb7d0; } else if ($pf39de78a[0] == T_DOC_COMMENT) { if (!isset($v543ee0db2e)) { $pcdd9a718 = $pf39de78a[2] + substr_count($pf39de78a[1], "\n"); $v9b2e1caffe = $pd69fb7d0; } $v454a8d0d34[] = trim($pf39de78a[1]); $v543ee0db2e = $pf39de78a[2]; $v65aeb0a5b0 = $pd69fb7d0; } else if (!isset($v543ee0db2e)) { $pcdd9a718 = $pf39de78a[2]; $v9b2e1caffe = $pd69fb7d0; } } else break; } if (!empty($pcc2fe66c)) $v972f1a5c2b["comments"] = array_reverse($pcc2fe66c); if (!empty($v454a8d0d34)) $v972f1a5c2b["doc_comments"] = array_reverse($v454a8d0d34); if (isset($v543ee0db2e)) { $v972f1a5c2b["start_comments_line_index"] = $v543ee0db2e; $v972f1a5c2b["start_comments_token_index"] = $v65aeb0a5b0; $v972f1a5c2b["end_comments_line_index"] = $pcdd9a718; $v972f1a5c2b["end_comments_token_index"] = $v9b2e1caffe; } } public static function getClassFromFile($pf3dc0762, $v1335217393) { $v1335217393 = $v1335217393 ? trim($v1335217393) : $v1335217393; if ($v1335217393) { $pfb662071 = self::getPHPClassesFromFile($pf3dc0762); return self::getClassFromPHPClasses($pfb662071, $v1335217393); } return null; } public static function getClassFromPHPClasses($pa1c3a9c4, $v1335217393) { $v1335217393 = $v1335217393 ? trim($v1335217393) : $v1335217393; if (is_array($pa1c3a9c4) && $v1335217393) { $v1335217393 = strtolower($v1335217393); $v1335217393 = (strpos($v1335217393, "\\") !== false && substr($v1335217393, 0, 1) != "\\" ? "\\" : "") . $v1335217393; foreach ($pa1c3a9c4 as $pe04f136f => $v9a8b7dc209) if (strtolower($pe04f136f) == $v1335217393) return $v9a8b7dc209; } return null; } public static function searchClassFromPHPClasses($pa1c3a9c4, $v1335217393) { $v1335217393 = $v1335217393 ? trim($v1335217393) : $v1335217393; if (is_array($pa1c3a9c4) && $v1335217393) { $v1335217393 = strtolower($v1335217393); $v1335217393 = (strpos($v1335217393, "\\") !== false && substr($v1335217393, 0, 1) != "\\" ? "\\" : "") . $v1335217393; foreach ($pa1c3a9c4 as $pe04f136f => $v9a8b7dc209) if (strtolower(substr($pe04f136f, - strlen($v1335217393))) == $v1335217393) return $v9a8b7dc209; } return null; } public static function getClassPathFromClassName($pf3dc0762, $v1335217393) { $pfb662071 = self::getPHPClassesFromFile($pf3dc0762); $v9a8b7dc209 = self::getClassFromPHPClasses($pfb662071, $v1335217393); if ($v9a8b7dc209) return $v1335217393; if (is_array($pfb662071)) { $v1335217393 = strtolower($v1335217393); foreach ($pfb662071 as $pe04f136f => $v9a8b7dc209) if (isset($v9a8b7dc209["name"]) && strtolower($v9a8b7dc209["name"]) == $v1335217393) return $pe04f136f; } return null; } public static function getClassOfFile($pf3dc0762) { if ($pf3dc0762 && file_exists($pf3dc0762)) { $v1335217393 = basename(pathinfo($pf3dc0762, PATHINFO_FILENAME)); $pfb662071 = self::getPHPClassesFromFile($pf3dc0762); $v9a8b7dc209 = self::getClassFromPHPClasses($pfb662071, $v1335217393); if ($v9a8b7dc209) return $v9a8b7dc209; if (is_array($pfb662071)) { $v1335217393 = strtolower($v1335217393); foreach ($pfb662071 as $pe04f136f => $v9a8b7dc209) if (isset($v9a8b7dc209["name"]) && strtolower($v9a8b7dc209["name"]) == $v1335217393) return $v9a8b7dc209; } } return null; } public static function getClassPropertyFromFile($pf3dc0762, $v1335217393, $pe9716498) { $pef349725 = self::getClassPropertiesFromFile($pf3dc0762, $v1335217393); $pe9716498 = $pe9716498 ? strtolower(trim($pe9716498)) : false; if ($pef349725) foreach ($pef349725 as $v1654ac0a73) if (isset($v1654ac0a73["name"]) && strtolower($v1654ac0a73["name"]) == $pe9716498) return $v1654ac0a73; return null; } public static function getFunctionFromFile($pf3dc0762, $v24b0e52635, $v1335217393 = 0) { if ($pf3dc0762 && file_exists($pf3dc0762)) { $v6490ea3a15 = file_get_contents($pf3dc0762); return self::getFunctionFromString($v6490ea3a15, $v24b0e52635, $v1335217393); } return null; } public static function getFunctionFromString($v6490ea3a15, $v24b0e52635, $v1335217393 = 0) { $v24b0e52635 = $v24b0e52635 ? strtolower(trim($v24b0e52635)) : false; $v1335217393 = $v1335217393 ? trim($v1335217393) : $v1335217393; if ($v6490ea3a15 && $v24b0e52635) { $pfb662071 = self::getPHPClassesFromString($v6490ea3a15); if (!$v1335217393) $pedde3449 = isset($pfb662071[0]["methods"]) ? $pfb662071[0]["methods"] : null; else { $v9a8b7dc209 = self::getClassFromPHPClasses($pfb662071, $v1335217393); $pedde3449 = $v9a8b7dc209 && isset($v9a8b7dc209["methods"]) ? $v9a8b7dc209["methods"] : null; } if ($pedde3449) { $pc37695cb = count($pedde3449); for ($v43dd7d0051 = 0; $v43dd7d0051 < $pc37695cb; $v43dd7d0051++) if (isset($pedde3449[$v43dd7d0051]["name"]) && strtolower($pedde3449[$v43dd7d0051]["name"]) == $v24b0e52635) return $pedde3449[$v43dd7d0051]; } } return null; } public static function getNamespacesFromFile($pf3dc0762) { $pa1c3a9c4 = self::getPHPClassesFromFile($pf3dc0762); return isset($pa1c3a9c4[0]["namespaces"]) ? $pa1c3a9c4[0]["namespaces"] : null; } public static function getUsesFromFile($pf3dc0762) { $pa1c3a9c4 = self::getPHPClassesFromFile($pf3dc0762); return isset($pa1c3a9c4[0]["uses"]) ? $pa1c3a9c4[0]["uses"] : null; } public static function getIncludesFromFile($pf3dc0762) { $pa1c3a9c4 = self::getPHPClassesFromFile($pf3dc0762); return isset($pa1c3a9c4[0]["includes"]) ? $pa1c3a9c4[0]["includes"] : null; } private static function f248f2aacee($pf3dc0762, $v659b062f0b) { $pe8fca4d2 = array(); if ($pf3dc0762 && file_exists($pf3dc0762) && $v659b062f0b) { $v659b062f0b = is_array($v659b062f0b) ? $v659b062f0b : array($v659b062f0b); $v6490ea3a15 = file_get_contents($pf3dc0762); $pd5c67a44 = token_get_all($v6490ea3a15); $v15f3268002 = count($pd5c67a44); $v840f02ee04 = 0; for ($v43dd7d0051 = 1; $v43dd7d0051 < $v15f3268002; $v43dd7d0051++) { if ($pd5c67a44[$v43dd7d0051] == "{" || $pd5c67a44[$v43dd7d0051][0] == T_CURLY_OPEN || $pd5c67a44[$v43dd7d0051][0] == T_DOLLAR_OPEN_CURLY_BRACES) ++$v840f02ee04; else if ($pd5c67a44[$v43dd7d0051] == "}" || $pd5c67a44[$v43dd7d0051][0] == "}") --$v840f02ee04; else if ($v840f02ee04 <= 0 && in_array($pd5c67a44[$v43dd7d0051][0], $v659b062f0b)) { $v8b5a0a437b = ""; $pbe84ad7d = $pd5c67a44[$v43dd7d0051][0]; while (true) { $pf39de78a = $v43dd7d0051 + 1 < $v15f3268002 ? $pd5c67a44[++$v43dd7d0051] : null; if (!isset($pf39de78a)) break; else if ($pf39de78a == ";") break; $v8b5a0a437b .= is_array($pf39de78a) ? $pf39de78a[1] : $pf39de78a; } $v8b5a0a437b = trim($v8b5a0a437b); if ($v8b5a0a437b) $pe8fca4d2[] = array($v8b5a0a437b, $pbe84ad7d); } } } return $pe8fca4d2; } public static function getClassPropertiesFromFile($pf3dc0762, $v1335217393) { if ($pf3dc0762 && file_exists($pf3dc0762)) { $v6490ea3a15 = file_get_contents($pf3dc0762); return self::getClassPropertiesFromString($v6490ea3a15, $v1335217393); } return array(); } public static function getClassPropertiesFromString($v6490ea3a15, $v1335217393) { $pef349725 = array(); $pfb662071 = self::getPHPClassesFromString($v6490ea3a15); $v9a8b7dc209 = self::getClassFromPHPClasses($pfb662071, $v1335217393); if ($v9a8b7dc209) { $pd5c67a44 = token_get_all($v6490ea3a15); $v15f3268002 = count($pd5c67a44); $v1f87ad3c11 = isset($v9a8b7dc209["start_brackets_token_index"]) && is_numeric($v9a8b7dc209["start_brackets_token_index"]) ? $v9a8b7dc209["start_brackets_token_index"] : 0; $paad1120d = isset($v9a8b7dc209["end_brackets_token_index"]) && is_numeric($v9a8b7dc209["end_brackets_token_index"]) ? $v9a8b7dc209["end_brackets_token_index"] : $v15f3268002; $v12239b6473 = array(); $v200f2e70ed = $v1f87ad3c11 + 1; $pc37695cb = !empty($v9a8b7dc209["methods"]) ? count($v9a8b7dc209["methods"]) : 0; for ($v43dd7d0051 = 0; $v43dd7d0051 < $pc37695cb; $v43dd7d0051++) { $v2009438127 = isset($v9a8b7dc209["methods"][$v43dd7d0051]["start_comments_token_index"]) && is_numeric($v9a8b7dc209["methods"][$v43dd7d0051]["start_comments_token_index"]) ? $v9a8b7dc209["methods"][$v43dd7d0051]["start_comments_token_index"] : ( isset($v9a8b7dc209["methods"][$v43dd7d0051]["start_token_index"]) ? $v9a8b7dc209["methods"][$v43dd7d0051]["start_token_index"] : null ); $v12239b6473[] = array($v200f2e70ed, $v2009438127 - 1); $v200f2e70ed = $v9a8b7dc209["methods"][$v43dd7d0051]["end_token_index"] + 1; } $v12239b6473[] = array($v200f2e70ed, $paad1120d - 1); foreach ($v12239b6473 as $v297f456509) { $v200f2e70ed = $v297f456509[0]; $pae3a350f = $v297f456509[1]; $v840f02ee04 = 0; $pf9ccbfa3 = array(T_VAR, T_PUBLIC, T_PRIVATE, T_PROTECTED, T_CONST, T_STATIC, T_ABSTRACT); for ($v43dd7d0051 = $v200f2e70ed; $v43dd7d0051 <= $pae3a350f; $v43dd7d0051++) { if ($pd5c67a44[$v43dd7d0051] == "{" || $pd5c67a44[$v43dd7d0051][0] == T_CURLY_OPEN || $pd5c67a44[$v43dd7d0051][0] == T_DOLLAR_OPEN_CURLY_BRACES) ++$v840f02ee04; else if ($pd5c67a44[$v43dd7d0051] == "}" || $pd5c67a44[$v43dd7d0051][0] == "}") --$v840f02ee04; else if ($v840f02ee04 <= 0 && in_array($pd5c67a44[$v43dd7d0051][0], $pf9ccbfa3)) { $pa0b7941a = $pd5c67a44[$v43dd7d0051][0] == T_CONST; $static = $pd5c67a44[$v43dd7d0051][0] == T_STATIC; $v84363e718a = $pd5c67a44[$v43dd7d0051][0] == T_PRIVATE; $v1074acb702 = $pd5c67a44[$v43dd7d0051][0] == T_PUBLIC; $v65dbc4d629 = $pd5c67a44[$v43dd7d0051][0] == T_PROTECTED; $pa0d4d0cd = $pd5c67a44[$v43dd7d0051][0] == T_ABSTRACT; $v1cfba8c105 = ""; $pa6209df1 = null; $pf1666660 = $pd5c67a44[$v43dd7d0051][2]; $v5a06d2b040 = $v43dd7d0051; while(true) { $pf39de78a = $v43dd7d0051 + 1 < $v15f3268002 ? $pd5c67a44[++$v43dd7d0051] : null; if (!isset($pf39de78a)) break; else if ($pf39de78a == ";") { --$v43dd7d0051; break; } else if ($pf39de78a[0] == T_VARIABLE || ($pa0b7941a && $pf39de78a[0] == T_STRING)) { $v1cfba8c105 = $pf39de78a[1]; break; } else if (!in_array($pf39de78a[0], $pf9ccbfa3) && $pf39de78a[0] != T_WHITESPACE) break; else if ($pf39de78a[0] == T_CONST) $pa0b7941a = true; else if ($pf39de78a[0] == T_STATIC) $static = true; else if ($pf39de78a[0] == T_ABSTRACT) $pa0d4d0cd = true; else if ($pf39de78a[0] == T_PRIVATE) $v84363e718a = true; else if ($pf39de78a[0] == T_PUBLIC) $v1074acb702 = true; else if ($pf39de78a[0] == T_PROTECTED) $v65dbc4d629 = true; } $v1cfba8c105 = trim($v1cfba8c105); if ($v1cfba8c105) { $v1cfba8c105 = $v1cfba8c105[0] == '$' ? substr($v1cfba8c105, 1) : $v1cfba8c105; $v594f0a1b05 = false; $v4d922f2ae8 = $pf1666660; while(true) { $pf39de78a = $v43dd7d0051 + 1 < $v15f3268002 ? $pd5c67a44[++$v43dd7d0051] : null; if (is_array($pf39de78a)) $v4d922f2ae8 = $pf39de78a[2]; if (!isset($pf39de78a)) break; else if ($pf39de78a == ";") { $pa89a63c3 = $v4d922f2ae8; $pd933b89f = $v43dd7d0051; break; } else if ($pf39de78a == "=" || $pf39de78a[1] == "=") $v594f0a1b05 = true; else if ($v594f0a1b05) $pa6209df1 .= is_array($pf39de78a) ? $pf39de78a[1] : $pf39de78a; } $pa6209df1 = trim($pa6209df1); $v79e3beff16 = substr($pa6209df1, 0, 1); $v97ebe20f21 = $pa6209df1 && ($v79e3beff16 == '"' || $v79e3beff16 == "'") && substr($pa6209df1, -1) == $v79e3beff16 ? "string" : ""; $v1654ac0a73 = array( "name" => $v1cfba8c105, "type" => $v84363e718a ? "private" : ($v65dbc4d629 ? "protected" : "public"), "value" => $pa6209df1, "var_type" => $v97ebe20f21, "static" => $static, "abstract" => $pa0d4d0cd, "const" => $pa0b7941a, "start_line_index" => $pf1666660, "start_token_index" => $v5a06d2b040, "end_line_index" => $pa89a63c3, "end_token_index" => $pd933b89f, ); self::f92ff3e277d($pd5c67a44, $v5a06d2b040, $v1654ac0a73); $pef349725[] = $v1654ac0a73; } } } } } return $pef349725; } public static function getFunctionCodeFromFile($pf3dc0762, $v24b0e52635, $v1335217393 = 0, $v6bb91cc8e1 = false) { if ($pf3dc0762 && file_exists($pf3dc0762)) { $v6490ea3a15 = file_get_contents($pf3dc0762); return self::getFunctionCodeFromString($v6490ea3a15, $v24b0e52635, $v1335217393, $v6bb91cc8e1); } return false; } public static function getFunctionCodeFromString($v6490ea3a15, $v24b0e52635, $v1335217393 = 0, $v6bb91cc8e1 = false) { $v1b08a89324 = self::getFunctionFromString($v6490ea3a15, $v24b0e52635, $v1335217393); if ($v1b08a89324) { $pd5c67a44 = token_get_all($v6490ea3a15); $v15f3268002 = count($pd5c67a44); $pf61813e3 = ""; if (isset($v1b08a89324["start_brackets_token_index"]) && isset($v1b08a89324["end_brackets_token_index"]) && is_numeric($v1b08a89324["start_brackets_token_index"]) && is_numeric($v1b08a89324["end_brackets_token_index"])) for ($v43dd7d0051 = $v1b08a89324["start_brackets_token_index"] + 1; $v43dd7d0051 < $v1b08a89324["end_brackets_token_index"]; $v43dd7d0051++) $pf61813e3 .= is_array($pd5c67a44[$v43dd7d0051]) ? $pd5c67a44[$v43dd7d0051][1] : $pd5c67a44[$v43dd7d0051]; if (!$v6bb91cc8e1) { $pf61813e3 = trim($pf61813e3); $pf61813e3 = str_replace("\r\n", "\n", $pf61813e3); $pf61813e3 = str_replace("\n\t", "\n", $pf61813e3); if ($v1335217393) $pf61813e3 = str_replace("\n\t", "\n", $pf61813e3); } return $pf61813e3; } return false; } public static function getCodeWithoutCommentsFromFile($pf3dc0762) { if ($pf3dc0762 && file_exists($pf3dc0762)) { $v067674f4e4 = file_get_contents($pf3dc0762); return self::getCodeWithoutComments($v067674f4e4); } } public static function getCodeWithoutComments($v067674f4e4) { if ($v067674f4e4 && (strpos($v067674f4e4, "//") !== false || strpos($v067674f4e4, "/*") !== false)) { $pf4e3c708 = ''; $pc330f663 = array(T_COMMENT); if (defined('T_DOC_COMMENT')) $pc330f663[] = T_DOC_COMMENT; if (defined('T_ML_COMMENT')) $pc330f663[] = T_ML_COMMENT; $pd5c67a44 = token_get_all($v067674f4e4); foreach ($pd5c67a44 as $pf39de78a) { if (is_array($pf39de78a)) { if (in_array($pf39de78a[0], $pc330f663)) continue 1; $pf39de78a = $pf39de78a[1]; } $pf4e3c708 .= $pf39de78a; } return $pf4e3c708; } return $v067674f4e4; } public static function renameClassFromFile($pf3dc0762, $paad2cff0, $v60b931bd87) { if ($pf3dc0762 && file_exists($pf3dc0762) && $paad2cff0 && $v60b931bd87 && $paad2cff0 != $v60b931bd87) { $v9a8b7dc209 = self::getClassFromFile($pf3dc0762, $paad2cff0); $pfab8e06f = self::decoupleClassNameWithNameSpace($v60b931bd87); $paff7c992 = $v9a8b7dc209; $paff7c992["name"] = isset($pfab8e06f["name"]) ? $pfab8e06f["name"] : null; $paff7c992["namespace"] = isset($pfab8e06f["namespace"]) ? $pfab8e06f["namespace"] : null; $paff7c992["comments"] = null; return self::editClassFromFile($pf3dc0762, $v9a8b7dc209, $paff7c992); } return false; } public static function renameFunctionFromFile($pf3dc0762, $v20323953f5, $pc73ce845, $v1335217393 = 0) { if ($pf3dc0762 && file_exists($pf3dc0762) && $v20323953f5 && $pc73ce845 && $v20323953f5 != $pc73ce845) { $v1b08a89324 = self::getFunctionFromFile($pf3dc0762, $v20323953f5, $v1335217393); $pc26d3031 = $v1b08a89324; $pc26d3031["name"] = $pc73ce845; $pc26d3031["comments"] = null; return self::editFunctionFromFile($pf3dc0762, $v1b08a89324, $pc26d3031, $v1335217393); } return false; } public static function editClassFromFile($pf3dc0762, $pd73bf2ca, $paff7c992) { if (!empty($paff7c992["name"])) { $paad2cff0 = isset($pd73bf2ca["name"]) ? $pd73bf2ca["name"] : null; $pa075d57f = isset($pd73bf2ca["namespace"]) ? $pd73bf2ca["namespace"] : null; $v9a404f2017 = self::prepareClassNameWithNameSpace($paad2cff0, $pa075d57f); $v9a8b7dc209 = self::getClassFromFile($pf3dc0762, $v9a404f2017); if ($v9a8b7dc209) { $v6490ea3a15 = file_get_contents($pf3dc0762); $pd5c67a44 = token_get_all($v6490ea3a15); $v15f3268002 = count($pd5c67a44); if (isset($v9a8b7dc209["start_token_index"]) && isset($v9a8b7dc209["start_brackets_token_index"]) && is_numeric($v9a8b7dc209["start_token_index"]) && is_numeric($v9a8b7dc209["start_brackets_token_index"])) { $v6f3e16f956 = ""; for ($v43dd7d0051 = 0; $v43dd7d0051 < $v9a8b7dc209["start_token_index"]; $v43dd7d0051++) $v6f3e16f956 .= is_array($pd5c67a44[$v43dd7d0051]) ? $pd5c67a44[$v43dd7d0051][1] : $pd5c67a44[$v43dd7d0051]; $v8d77400f0a = isset($paff7c992["namespace"]) ? $paff7c992["namespace"] : null; $v6824ec2eb2 = isset($paff7c992["includes"]) ? $paff7c992["includes"] : null; $v01cce60b16 = isset($paff7c992["uses"]) ? $paff7c992["uses"] : null; $paff7c992["namespace"] = null; $paff7c992["includes"] = null; $paff7c992["uses"] = null; $v6f3e16f956 .= self::getClassString($paff7c992) . " "; for ($v43dd7d0051 = $v9a8b7dc209["start_brackets_token_index"]; $v43dd7d0051 < $v15f3268002; $v43dd7d0051++) $v6f3e16f956 .= is_array($pd5c67a44[$v43dd7d0051]) ? $pd5c67a44[$v43dd7d0051][1] : $pd5c67a44[$v43dd7d0051]; if ($v6f3e16f956 == $v6490ea3a15 || file_put_contents($pf3dc0762, $v6f3e16f956) !== false) { $v5c1c342594 = true; $paff7c992["namespace"] = $v8d77400f0a; if ($pa075d57f != $paff7c992["namespace"] && ($pa075d57f || $paff7c992["namespace"])) $v5c1c342594 = self::replaceNamespaceFromFile($pf3dc0762, $pa075d57f, $paff7c992["namespace"]); if ($v5c1c342594 && ($v6824ec2eb2 || $v01cce60b16)) { $v255a19c282 = ""; if ($v6824ec2eb2) foreach ($v6824ec2eb2 as $pc24afc88) if (is_array($pc24afc88) && trim($pc24afc88[0])) $v255a19c282 .= "include" . ($pc24afc88[1] ? "_once" : "") . " " . $pc24afc88[0] . ";\n"; else if (!is_array($pc24afc88) && trim($pc24afc88)) $v255a19c282 .= "include_once $pc24afc88;\n"; if ($v01cce60b16) foreach ($v01cce60b16 as $v1578057dc9 => $v7c3c74d27f) if (trim($v1578057dc9)) $v255a19c282 .= "use $v1578057dc9" . (trim($v7c3c74d27f) ? " as $v7c3c74d27f" : "") . ";\n"; $v5c1c342594 = self::addCodeToBeginOfFileOrAfterFirstNamespace($pf3dc0762, $v255a19c282); } if ($v5c1c342594 && isset($paff7c992["code"])) { $v60b931bd87 = self::prepareClassNameWithNameSpace($paff7c992["name"], $paff7c992["namespace"]); $v5c1c342594 = self::removeClassPropertiesFromFile($pf3dc0762, $v60b931bd87) && self::addClassPropertiesToFile($pf3dc0762, $v60b931bd87, $paff7c992["code"]); } if (!$v5c1c342594) file_put_contents($pf3dc0762, $v6490ea3a15); return $v5c1c342594; } } } } return false; } public static function editFunctionFromFile($pf3dc0762, $v64350cfaab, $pc26d3031, $v1335217393 = 0) { $v20323953f5 = isset($v64350cfaab["name"]) ? strtolower(trim($v64350cfaab["name"])) : ""; if ($v20323953f5 && !empty($pc26d3031["name"])) { $v1b08a89324 = self::getFunctionFromFile($pf3dc0762, $v20323953f5, $v1335217393); if ($v1b08a89324) { $v6490ea3a15 = file_get_contents($pf3dc0762); $pd5c67a44 = token_get_all($v6490ea3a15); $v15f3268002 = count($pd5c67a44); if (isset($v1b08a89324["start_token_index"]) && isset($v1b08a89324["start_brackets_token_index"]) && is_numeric($v1b08a89324["start_token_index"]) && is_numeric($v1b08a89324["start_brackets_token_index"])) { $v6f3e16f956 = ""; for ($v43dd7d0051 = 0; $v43dd7d0051 < $v1b08a89324["start_token_index"]; $v43dd7d0051++) $v6f3e16f956 .= is_array($pd5c67a44[$v43dd7d0051]) ? $pd5c67a44[$v43dd7d0051][1] : $pd5c67a44[$v43dd7d0051]; $v037504d419 = $pd5c67a44[ $v1b08a89324["start_brackets_token_index"] ] == ";"; $v6f3e16f956 .= trim( self::getFunctionString($pc26d3031, $v1335217393) ) . ($v037504d419 ? "" : " "); for ($v43dd7d0051 = $v1b08a89324["start_brackets_token_index"]; $v43dd7d0051 < $v15f3268002; $v43dd7d0051++) $v6f3e16f956 .= is_array($pd5c67a44[$v43dd7d0051]) ? $pd5c67a44[$v43dd7d0051][1] : $pd5c67a44[$v43dd7d0051]; if ($v6f3e16f956 == $v6490ea3a15 || file_put_contents($pf3dc0762, $v6f3e16f956) !== false) { $v5c1c342594 = true; if (isset($pc26d3031["code"])) $v5c1c342594 = self::replaceFunctionCodeFromFile($pf3dc0762, $pc26d3031["name"], $pc26d3031["code"], $v1335217393); if (!$v5c1c342594) file_put_contents($pf3dc0762, $v6490ea3a15); return $v5c1c342594; } } } } return false; } public static function editClassCommentsFromFile($pf3dc0762, $v1335217393, $pcc2fe66c) { $v9a8b7dc209 = self::getClassFromFile($pf3dc0762, $v1335217393); $v446afd1219 = $v9a8b7dc209 && ( (isset($v9a8b7dc209["start_comments_token_index"]) && isset($v9a8b7dc209["end_comments_token_index"]) && is_numeric($v9a8b7dc209["start_comments_token_index"]) && is_numeric($v9a8b7dc209["end_comments_token_index"])) || (isset($v9a8b7dc209["start_token_index"]) && is_numeric($v9a8b7dc209["start_token_index"])) ); if ($v446afd1219) { $v6490ea3a15 = file_get_contents($pf3dc0762); $pd5c67a44 = token_get_all($v6490ea3a15); $v15f3268002 = count($pd5c67a44); if (is_numeric($v9a8b7dc209["start_comments_token_index"]) && is_numeric($v9a8b7dc209["end_comments_token_index"])) { $pa9848378 = $v9a8b7dc209["start_comments_token_index"]; $v9e2590bf90 = $v9a8b7dc209["end_comments_token_index"] + 1; } else $pa9848378 = $v9e2590bf90 = $v9a8b7dc209["start_token_index"]; $v6f3e16f956 = ""; for ($v43dd7d0051 = 0; $v43dd7d0051 < $pa9848378; $v43dd7d0051++) $v6f3e16f956 .= is_array($pd5c67a44[$v43dd7d0051]) ? $pd5c67a44[$v43dd7d0051][1] : $pd5c67a44[$v43dd7d0051]; $pcc2fe66c = trim($pcc2fe66c); if ($pcc2fe66c) $v6f3e16f956 .= $pcc2fe66c ? $pcc2fe66c . "\n" : ""; else $v6f3e16f956 = rtrim($v6f3e16f956) . "\n\n"; for ($v43dd7d0051 = $v9e2590bf90; $v43dd7d0051 < $v15f3268002; $v43dd7d0051++) $v6f3e16f956 .= is_array($pd5c67a44[$v43dd7d0051]) ? $pd5c67a44[$v43dd7d0051][1] : $pd5c67a44[$v43dd7d0051]; return $v6f3e16f956 == $v6490ea3a15 || file_put_contents($pf3dc0762, $v6f3e16f956) !== false; } return false; } public static function editFunctionCommentsFromFile($pf3dc0762, $v24b0e52635, $pcc2fe66c, $v1335217393 = 0) { $v1b08a89324 = self::getFunctionFromFile($pf3dc0762, $v24b0e52635, $v1335217393); $v446afd1219 = $v1b08a89324 && ( (isset($v1b08a89324["start_comments_token_index"]) && isset($v1b08a89324["end_comments_token_index"]) && is_numeric($v1b08a89324["start_comments_token_index"]) && is_numeric($v1b08a89324["end_comments_token_index"])) || (isset($v1b08a89324["start_token_index"]) && is_numeric($v1b08a89324["start_token_index"])) ); if ($v446afd1219) { $v6490ea3a15 = file_get_contents($pf3dc0762); $pd5c67a44 = token_get_all($v6490ea3a15); $v15f3268002 = count($pd5c67a44); $v77cb07b555 = ""; if (is_numeric($v1b08a89324["start_comments_token_index"]) && is_numeric($v1b08a89324["end_comments_token_index"])) { $pa9848378 = $v1b08a89324["start_comments_token_index"]; $v9e2590bf90 = $v1b08a89324["end_comments_token_index"] + 1; } else { $pa9848378 = $v9e2590bf90 = $v1b08a89324["start_token_index"]; $v77cb07b555 = $v1335217393 ? "\t" : ""; } $v6f3e16f956 = ""; for ($v43dd7d0051 = 0; $v43dd7d0051 < $pa9848378; $v43dd7d0051++) $v6f3e16f956 .= is_array($pd5c67a44[$v43dd7d0051]) ? $pd5c67a44[$v43dd7d0051][1] : $pd5c67a44[$v43dd7d0051]; $pcc2fe66c = trim($pcc2fe66c); if ($pcc2fe66c) $v6f3e16f956 .= ($v1335217393 ? str_replace("\n", "\n\t", $pcc2fe66c) : $pcc2fe66c) . "\n$v77cb07b555"; else $v6f3e16f956 = rtrim($v6f3e16f956) . ($v1335217393 ? "\n\t\n\t" : "\n\n"); for ($v43dd7d0051 = $v9e2590bf90; $v43dd7d0051 < $v15f3268002; $v43dd7d0051++) $v6f3e16f956 .= is_array($pd5c67a44[$v43dd7d0051]) ? $pd5c67a44[$v43dd7d0051][1] : $pd5c67a44[$v43dd7d0051]; return $v6f3e16f956 == $v6490ea3a15 || file_put_contents($pf3dc0762, $v6f3e16f956) !== false; } return false; } public static function removeNamespacesFromFile($pf3dc0762) { return self::f41040128ff($pf3dc0762, T_NAMESPACE); } public static function removeUsesFromFile($pf3dc0762) { return self::f41040128ff($pf3dc0762, T_USE); } public static function removeIncludesFromFile($pf3dc0762) { $v659b062f0b = array(T_INCLUDE, T_INCLUDE_ONCE, T_REQUIRE, T_REQUIRE_ONCE); return self::f41040128ff($pf3dc0762, $v659b062f0b); } private static function f41040128ff($pf3dc0762, $v659b062f0b) { if ($pf3dc0762 && file_exists($pf3dc0762) && $v659b062f0b) { $v659b062f0b = is_array($v659b062f0b) ? $v659b062f0b : array($v659b062f0b); $v6490ea3a15 = file_get_contents($pf3dc0762); $pd5c67a44 = token_get_all($v6490ea3a15); $v15f3268002 = count($pd5c67a44); $v840f02ee04 = 0; $v6f3e16f956 = ""; for ($v43dd7d0051 = 0; $v43dd7d0051 < $v15f3268002; $v43dd7d0051++) { $v6f3e16f956 .= is_array($pd5c67a44[$v43dd7d0051]) ? $pd5c67a44[$v43dd7d0051][1] : $pd5c67a44[$v43dd7d0051]; if ($pd5c67a44[$v43dd7d0051] == "{" || $pd5c67a44[$v43dd7d0051][0] == T_CURLY_OPEN || $pd5c67a44[$v43dd7d0051][0] == T_DOLLAR_OPEN_CURLY_BRACES) ++$v840f02ee04; else if ($pd5c67a44[$v43dd7d0051] == "}" || $pd5c67a44[$v43dd7d0051][0] == "}") --$v840f02ee04; else if ($v840f02ee04 <= 0 && in_array($pd5c67a44[$v43dd7d0051][0], $v659b062f0b)) { $v6f3e16f956 = preg_replace("/\s*" . $pd5c67a44[$v43dd7d0051][1] . "$/", "", $v6f3e16f956); while (true) { $pf39de78a = $v43dd7d0051 + 1 < $v15f3268002 ? $pd5c67a44[++$v43dd7d0051] : null; if (!isset($pf39de78a)) break; else if ($pf39de78a == ";") break; } } } return $v6f3e16f956 == $v6490ea3a15 || file_put_contents($pf3dc0762, $v6f3e16f956) !== false; } } public static function removeNamespaceFromFile($pf3dc0762, $v1efaf06c58) { return self::f2ec523b793($pf3dc0762, T_NAMESPACE, $v1efaf06c58); } public static function removeUseFromFile($pf3dc0762, $v1578057dc9) { return self::f2ec523b793($pf3dc0762, T_USE, $v1578057dc9); } public static function removeIncludeFromFile($pf3dc0762, $pc24afc88) { $v659b062f0b = array(T_INCLUDE, T_INCLUDE_ONCE, T_REQUIRE, T_REQUIRE_ONCE); return self::f2ec523b793($pf3dc0762, $v659b062f0b, $pc24afc88); } private static function f2ec523b793($pf3dc0762, $v659b062f0b, $pd1728212) { if ($pf3dc0762 && file_exists($pf3dc0762) && $v659b062f0b) { $v659b062f0b = is_array($v659b062f0b) ? $v659b062f0b : array($v659b062f0b); $v6490ea3a15 = file_get_contents($pf3dc0762); $pd5c67a44 = token_get_all($v6490ea3a15); $v15f3268002 = count($pd5c67a44); $v840f02ee04 = 0; $v6f3e16f956 = ""; for ($v43dd7d0051 = 0; $v43dd7d0051 < $v15f3268002; $v43dd7d0051++) { $v6f3e16f956 .= is_array($pd5c67a44[$v43dd7d0051]) ? $pd5c67a44[$v43dd7d0051][1] : $pd5c67a44[$v43dd7d0051]; if ($pd5c67a44[$v43dd7d0051] == "{" || $pd5c67a44[$v43dd7d0051][0] == T_CURLY_OPEN || $pd5c67a44[$v43dd7d0051][0] == T_DOLLAR_OPEN_CURLY_BRACES) ++$v840f02ee04; else if ($pd5c67a44[$v43dd7d0051] == "}" || $pd5c67a44[$v43dd7d0051][0] == "}") --$v840f02ee04; else if ($v840f02ee04 <= 0 && in_array($pd5c67a44[$v43dd7d0051][0], $v659b062f0b)) { $v9d27441e80 = $v43dd7d0051; $v049e0541e2 = ""; while (true) { $pf39de78a = $v9d27441e80 + 1 < $v15f3268002 ? $pd5c67a44[++$v9d27441e80] : null; if (!isset($pf39de78a)) break; else if ($pf39de78a == ";") break; else $v049e0541e2 .= is_array($pf39de78a) ? $pf39de78a[1] : $pf39de78a; } if (trim($v049e0541e2) == trim($pd1728212)) { $v6f3e16f956 = preg_replace("/\s*" . $pd5c67a44[$v43dd7d0051][1] . "$/", "", $v6f3e16f956); $v43dd7d0051 = $v9d27441e80; } } } return $v6f3e16f956 == $v6490ea3a15 || file_put_contents($pf3dc0762, $v6f3e16f956) !== false; } } public static function removeClassPropertiesFromFile($pf3dc0762, $v1335217393) { if (!file_exists($pf3dc0762)) return true; $pef349725 = self::getClassPropertiesFromFile($pf3dc0762, $v1335217393); if (!$pef349725 && file_exists($pf3dc0762)) { $v9a8b7dc209 = self::getClassFromFile($pf3dc0762, $v1335217393); return !empty($v9a8b7dc209); } $v6490ea3a15 = file_get_contents($pf3dc0762); $pd5c67a44 = token_get_all($v6490ea3a15); $v15f3268002 = count($pd5c67a44); $v12239b6473 = array(); $v200f2e70ed = 0; $pc37695cb = count($pef349725); for ($v43dd7d0051 = 0; $v43dd7d0051 < $pc37695cb; $v43dd7d0051++) { $v2009438127 = isset($pef349725[$v43dd7d0051]["start_comments_token_index"]) && is_numeric($pef349725[$v43dd7d0051]["start_comments_token_index"]) ? $pef349725[$v43dd7d0051]["start_comments_token_index"] : ( isset($pef349725[$v43dd7d0051]["start_token_index"]) ? $pef349725[$v43dd7d0051]["start_token_index"] : null ); $v9d27441e80 = $v2009438127; while(true) { $pf39de78a = $v9d27441e80 - 1 >= 0 ? $pd5c67a44[--$v9d27441e80] : null; if (!isset($pf39de78a)) break; else if ($pf39de78a[0] == T_WHITESPACE) $v2009438127 = $v9d27441e80; else break; } $v12239b6473[] = array($v200f2e70ed, $v2009438127 - 1); $v200f2e70ed = $pef349725[$v43dd7d0051]["end_token_index"] + 1; } $v12239b6473[] = array($v200f2e70ed, $v15f3268002 - 1); $v6f3e16f956 = ""; foreach ($v12239b6473 as $v297f456509) { $v200f2e70ed = $v297f456509[0]; $pae3a350f = $v297f456509[1]; for ($v43dd7d0051 = $v200f2e70ed; $v43dd7d0051 <= $pae3a350f; $v43dd7d0051++) $v6f3e16f956 .= is_array($pd5c67a44[$v43dd7d0051]) ? $pd5c67a44[$v43dd7d0051][1] : $pd5c67a44[$v43dd7d0051]; } return $v6f3e16f956 == $v6490ea3a15 || file_put_contents($pf3dc0762, $v6f3e16f956) !== false; } public static function removeClassFromFile($pf3dc0762, $v1335217393) { if (!file_exists($pf3dc0762)) return true; $v9a8b7dc209 = self::getClassFromFile($pf3dc0762, $v1335217393); if (!$v9a8b7dc209 && file_exists($pf3dc0762)) return true; $v6490ea3a15 = file_get_contents($pf3dc0762); $pd5c67a44 = token_get_all($v6490ea3a15); $v15f3268002 = count($pd5c67a44); $v200f2e70ed = isset($v9a8b7dc209["start_comments_token_index"]) && is_numeric($v9a8b7dc209["start_comments_token_index"]) ? $v9a8b7dc209["start_comments_token_index"] : ( isset($v9a8b7dc209["start_token_index"]) ? $v9a8b7dc209["start_token_index"] : null ); $pae3a350f = isset($v9a8b7dc209["end_token_index"]) && is_numeric($v9a8b7dc209["end_token_index"]) ? $v9a8b7dc209["end_token_index"] : $v15f3268002; $v43dd7d0051 = $v200f2e70ed; while(true) { $pf39de78a = $v43dd7d0051 - 1 >= 0 ? $pd5c67a44[--$v43dd7d0051] : null; if (!isset($pf39de78a)) break; else if ($pf39de78a[0] == T_WHITESPACE) $v200f2e70ed = $v43dd7d0051; else break; } $v6f3e16f956 = ""; for ($v43dd7d0051 = 0; $v43dd7d0051 < $v200f2e70ed; $v43dd7d0051++) $v6f3e16f956 .= is_array($pd5c67a44[$v43dd7d0051]) ? $pd5c67a44[$v43dd7d0051][1] : $pd5c67a44[$v43dd7d0051]; for ($v43dd7d0051 = $pae3a350f + 1; $v43dd7d0051 < $v15f3268002; $v43dd7d0051++) $v6f3e16f956 .= is_array($pd5c67a44[$v43dd7d0051]) ? $pd5c67a44[$v43dd7d0051][1] : $pd5c67a44[$v43dd7d0051]; return $v6f3e16f956 == $v6490ea3a15 || file_put_contents($pf3dc0762, $v6f3e16f956) !== false; } public static function removeFunctionFromFile($pf3dc0762, $v24b0e52635, $v1335217393 = 0) { if (!file_exists($pf3dc0762)) return true; $v1b08a89324 = self::getFunctionFromFile($pf3dc0762, $v24b0e52635, $v1335217393); if (!$v1b08a89324 && file_exists($pf3dc0762)) return true; $v6490ea3a15 = file_get_contents($pf3dc0762); $pd5c67a44 = token_get_all($v6490ea3a15); $v15f3268002 = count($pd5c67a44); $v200f2e70ed = isset($v1b08a89324["start_comments_token_index"]) && is_numeric($v1b08a89324["start_comments_token_index"]) ? $v1b08a89324["start_comments_token_index"] : ( isset($v1b08a89324["start_token_index"]) ? $v1b08a89324["start_token_index"] : null ); $pae3a350f = isset($v1b08a89324["end_token_index"]) && is_numeric($v1b08a89324["end_token_index"]) ? $v1b08a89324["end_token_index"] : $v15f3268002; $v43dd7d0051 = $v200f2e70ed; while(true) { $pf39de78a = $v43dd7d0051 - 1 >= 0 ? $pd5c67a44[--$v43dd7d0051] : null; if (!isset($pf39de78a)) break; else if ($pf39de78a[0] == T_WHITESPACE) $v200f2e70ed = $v43dd7d0051; else break; } $v6f3e16f956 = ""; for ($v43dd7d0051 = 0; $v43dd7d0051 < $v200f2e70ed; $v43dd7d0051++) $v6f3e16f956 .= is_array($pd5c67a44[$v43dd7d0051]) ? $pd5c67a44[$v43dd7d0051][1] : $pd5c67a44[$v43dd7d0051]; for ($v43dd7d0051 = $pae3a350f + 1; $v43dd7d0051 < $v15f3268002; $v43dd7d0051++) $v6f3e16f956 .= is_array($pd5c67a44[$v43dd7d0051]) ? $pd5c67a44[$v43dd7d0051][1] : $pd5c67a44[$v43dd7d0051]; return $v6f3e16f956 == $v6490ea3a15 || file_put_contents($pf3dc0762, $v6f3e16f956) !== false; } public static function replaceFunctionCodeFromFile($pf3dc0762, $v24b0e52635, $v067674f4e4, $v1335217393 = 0) { $v1b08a89324 = self::getFunctionFromFile($pf3dc0762, $v24b0e52635, $v1335217393); if ($v1b08a89324 && isset($v1b08a89324["start_brackets_token_index"]) && isset($v1b08a89324["end_brackets_token_index"]) && is_numeric($v1b08a89324["start_brackets_token_index"]) && is_numeric($v1b08a89324["end_brackets_token_index"])) { $v6490ea3a15 = file_get_contents($pf3dc0762); $pd5c67a44 = token_get_all($v6490ea3a15); $v15f3268002 = count($pd5c67a44); $v6f3e16f956 = ""; for ($v43dd7d0051 = 0; $v43dd7d0051 <= $v1b08a89324["start_brackets_token_index"]; $v43dd7d0051++) $v6f3e16f956 .= is_array($pd5c67a44[$v43dd7d0051]) ? $pd5c67a44[$v43dd7d0051][1] : $pd5c67a44[$v43dd7d0051]; $v067674f4e4 = $v067674f4e4 ? trim($v067674f4e4) : ""; $pf39de78a = $pd5c67a44[ $v1b08a89324["start_brackets_token_index"] ]; $v037504d419 = $pf39de78a == ";"; if ($v067674f4e4 || !$v037504d419) { if ($v037504d419) $v6f3e16f956 = substr($v6f3e16f956, 0, -1) . " {"; $v067674f4e4 = $v1335217393 ? "\n\t\t" . str_replace("\n", "\n\t\t", $v067674f4e4) : "\n\t" . str_replace("\n", "\n\t", $v067674f4e4); $v6f3e16f956 .= $v067674f4e4 ? $v067674f4e4 . "\n" . ($v1335217393 ? "\t" : "") : ""; if ($v037504d419) $v6f3e16f956 .= "}"; } $pfc1b78ae = $v1b08a89324["end_brackets_token_index"] + ($v067674f4e4 && $v037504d419 ? 1 : 0); for ($v43dd7d0051 = $pfc1b78ae; $v43dd7d0051 < $v15f3268002; $v43dd7d0051++) $v6f3e16f956 .= is_array($pd5c67a44[$v43dd7d0051]) ? $pd5c67a44[$v43dd7d0051][1] : $pd5c67a44[$v43dd7d0051]; return $v6f3e16f956 == $v6490ea3a15 || file_put_contents($pf3dc0762, $v6f3e16f956) !== false; } return false; } public static function replaceNamespaceFromFile($pf3dc0762, $pced38d5a, $v8d77400f0a) { if ($pf3dc0762 && file_exists($pf3dc0762)) { if ($pced38d5a && substr($pced38d5a, 0, 1) == "\\") $pced38d5a = substr($pced38d5a, 1); if ($v8d77400f0a && substr($v8d77400f0a, 0, 1) == "\\") $v8d77400f0a = substr($v8d77400f0a, 1); if ($pced38d5a && $v8d77400f0a) { $v6490ea3a15 = file_get_contents($pf3dc0762); $v6490ea3a15 = str_ireplace("namespace $pced38d5a;", "namespace $v8d77400f0a;", $v6490ea3a15); return file_put_contents($pf3dc0762, $v6490ea3a15) > 0; } else if ($pced38d5a) return self::removeNamespaceFromFile($pf3dc0762, $pced38d5a); else if ($v8d77400f0a) return self::addCodeToBeginOfFile($pf3dc0762, "namespace $v8d77400f0a;\n"); } return false; } public static function addNamespacesToFile($pf3dc0762, $v1480702cf7) { if ($pf3dc0762 && file_exists($pf3dc0762) && $v1480702cf7) { $v067674f4e4 = ""; foreach ($v1480702cf7 as $v1efaf06c58) if (trim($v1efaf06c58)) { $v1efaf06c58 = trim($v1efaf06c58); $v1efaf06c58 = substr($v1efaf06c58, 0, 1) == "\\" ? substr($v1efaf06c58, 1) : $v1efaf06c58; $v067674f4e4 .= "namespace $v1efaf06c58;\n"; } return self::addCodeToBeginOfFile($pf3dc0762, $v067674f4e4); } return false; } public static function addUsesToFile($pf3dc0762, $v7fe521c48d) { if ($v7fe521c48d) { $v067674f4e4 = ""; foreach ($v7fe521c48d as $v1578057dc9 => $v7c3c74d27f) if (trim($v1578057dc9)) $v067674f4e4 .= "use $v1578057dc9" . (trim($v7c3c74d27f) ? " as $v7c3c74d27f" : "") . ";\n"; return self::addCodeToBeginOfFile($pf3dc0762, $v067674f4e4); } return false; } public static function addIncludesToFile($pf3dc0762, $pc06f1034) { if ($pc06f1034) { $v067674f4e4 = ""; foreach ($pc06f1034 as $pc24afc88) if (is_array($pc24afc88) && trim($pc24afc88[0])) $v067674f4e4 .= "include" . ($pc24afc88[1] ? "_once" : "") . " " . $pc24afc88[0] . ";\n"; else if (!is_array($pc24afc88) && trim($pc24afc88)) $v067674f4e4 .= "include_once $pc24afc88;\n"; return self::addCodeToBeginOfFile($pf3dc0762, $v067674f4e4); } return false; } public static function addCodeToBeginOfFile($pf3dc0762, $v067674f4e4) { if ($pf3dc0762 && file_exists($pf3dc0762) && $v067674f4e4) { $v6490ea3a15 = file_get_contents($pf3dc0762); $v6490ea3a15 = str_replace("\r\n", "\n", $v6490ea3a15); $v6f3e16f956 = "<?php\n$v067674f4e4?>\n" . trim($v6490ea3a15); $v6f3e16f956 = str_replace(array("?>\n<?php", "?>\n<?"), "", $v6f3e16f956); $v6f3e16f956 = str_replace("\n\n\n", "\n\n", str_replace("\t\n", "\n", $v6f3e16f956)); return file_put_contents($pf3dc0762, $v6f3e16f956) > 0; } return false; } public static function addCodeToBeginOfFileOrAfterFirstNamespace($pf3dc0762, $v067674f4e4) { if ($pf3dc0762 && file_exists($pf3dc0762) && $v067674f4e4) { $v1480702cf7 = self::getNamespacesFromFile($pf3dc0762); if ($v1480702cf7) { $v6490ea3a15 = file_get_contents($pf3dc0762); $v6490ea3a15 = str_replace("\r\n", "\n", $v6490ea3a15); $v083d8b31b2 = stripos($v6490ea3a15, "namespace "); if (!is_numeric($v083d8b31b2)) $v083d8b31b2 = stripos($v6490ea3a15, "namespace"); $v083d8b31b2 = strpos($v6490ea3a15, ";", $v083d8b31b2); if (is_numeric($v083d8b31b2)) { $v083d8b31b2++; $v6f3e16f956 = substr($v6490ea3a15, 0, $v083d8b31b2) . "\n\n" . $v067674f4e4 . substr($v6490ea3a15, $v083d8b31b2); $v6f3e16f956 = str_replace("\n\n\n", "\n\n", str_replace("\t\n", "\n", $v6f3e16f956)); return file_put_contents($pf3dc0762, $v6f3e16f956) > 0; } } else return self::addCodeToBeginOfFile($pf3dc0762, $v067674f4e4); } return false; } public static function addClassToFile($pf3dc0762, $pb543f4d4) { $v1335217393 = isset($pb543f4d4["name"]) ? trim($pb543f4d4["name"]) : ""; if ($pf3dc0762 && $v1335217393) { $v327f72fb62 = self::getClassString($pb543f4d4); $v067674f4e4 = isset($pb543f4d4["code"]) ? $pb543f4d4["code"] : null; $v067674f4e4 = $v067674f4e4 ? "\t" . str_replace("\n", "\n\t", $v067674f4e4) : ""; $v327f72fb62 .= " {\n$v067674f4e4\n}\n"; if (file_exists($pf3dc0762)) { $v6490ea3a15 = file_get_contents($pf3dc0762); $v6490ea3a15 = str_replace("\r\n", "\n", $v6490ea3a15); $pbd1bc7b0 = strrpos($v6490ea3a15, "?>"); if ($pbd1bc7b0 !== false) $v6490ea3a15 = substr($v6490ea3a15, 0, $pbd1bc7b0) . "\n\n$v327f72fb62" . substr($v6490ea3a15, $pbd1bc7b0); else $v6490ea3a15 .= (empty($v6490ea3a15) ? "<?php" : "\n") . "\n$v327f72fb62?>"; } else $v6490ea3a15 = "<?php\n$v327f72fb62?>"; $v6490ea3a15 = str_replace("\n\n\n", "\n\n", str_replace("\t\n", "\n", $v6490ea3a15)); return file_put_contents($pf3dc0762, $v6490ea3a15) > 0; } return false; } public static function addClassPropertiesToFile($pf3dc0762, $v1335217393, $v067674f4e4) { if (!trim($v067674f4e4)) return true; $v9a8b7dc209 = self::getClassFromFile($pf3dc0762, $v1335217393); if ($v9a8b7dc209 && isset($v9a8b7dc209["start_brackets_token_index"]) && is_numeric($v9a8b7dc209["start_brackets_token_index"])) { $v6490ea3a15 = file_get_contents($pf3dc0762); $pd5c67a44 = token_get_all($v6490ea3a15); $v15f3268002 = count($pd5c67a44); $v6f3e16f956 = ""; for ($v43dd7d0051 = 0; $v43dd7d0051 <= $v9a8b7dc209["start_brackets_token_index"]; $v43dd7d0051++) $v6f3e16f956 .= is_array($pd5c67a44[$v43dd7d0051]) ? $pd5c67a44[$v43dd7d0051][1] : $pd5c67a44[$v43dd7d0051]; $v067674f4e4 = trim($v067674f4e4); $v6f3e16f956 .= "\n\t" . str_replace("\n", "\n\t", $v067674f4e4) . "\n\t"; for ($v43dd7d0051 = $v9a8b7dc209["start_brackets_token_index"] + 1; $v43dd7d0051 < $v15f3268002; $v43dd7d0051++) $v6f3e16f956 .= is_array($pd5c67a44[$v43dd7d0051]) ? $pd5c67a44[$v43dd7d0051][1] : $pd5c67a44[$v43dd7d0051]; return $v6f3e16f956 == $v6490ea3a15 || file_put_contents($pf3dc0762, $v6f3e16f956) !== false; } return false; } public static function addFunctionToFile($pf3dc0762, $pb1b5d206, $v1335217393 = 0) { $v24b0e52635 = isset($pb1b5d206["name"]) ? trim($pb1b5d206["name"]) : ""; if ($v24b0e52635) { $v6490ea3a15 = file_exists($pf3dc0762) ? file_get_contents($pf3dc0762) : ""; $v6f3e16f956 = ""; $v067674f4e4 = isset($pb1b5d206["code"]) ? $pb1b5d206["code"] : null; $v067674f4e4 = $v067674f4e4 ? ($v1335217393 ? "\t\t" . str_replace("\n", "\n\t\t", $v067674f4e4) : "\t" . str_replace("\n", "\n\t", $v067674f4e4)) : ""; $v327f72fb62 = ($v1335217393 ? "\t" : "") . "\n" . self::getFunctionString($pb1b5d206, $v1335217393); $v327f72fb62 .= " {\n$v067674f4e4\n" . ($v1335217393 ? "\t" : "") . "}\n"; if ($v1335217393) { $v9a8b7dc209 = self::getClassFromFile($pf3dc0762, $v1335217393); if ($v9a8b7dc209 && isset($v9a8b7dc209["end_brackets_token_index"]) && is_numeric($v9a8b7dc209["end_brackets_token_index"])) { $pd5c67a44 = token_get_all($v6490ea3a15); $v15f3268002 = count($pd5c67a44); for ($v43dd7d0051 = 0; $v43dd7d0051 < $v9a8b7dc209["end_brackets_token_index"]; $v43dd7d0051++) $v6f3e16f956 .= is_array($pd5c67a44[$v43dd7d0051]) ? $pd5c67a44[$v43dd7d0051][1] : $pd5c67a44[$v43dd7d0051]; $v6f3e16f956 .= $v327f72fb62; for ($v43dd7d0051 = $v9a8b7dc209["end_brackets_token_index"]; $v43dd7d0051 < $v15f3268002; $v43dd7d0051++) $v6f3e16f956 .= is_array($pd5c67a44[$v43dd7d0051]) ? $pd5c67a44[$v43dd7d0051][1] : $pd5c67a44[$v43dd7d0051]; } } else { $v6f3e16f956 = $v6490ea3a15; if ($v6f3e16f956) { $pbd1bc7b0 = strrpos($v6f3e16f956, "?>"); if ($pbd1bc7b0 !== false) $v6f3e16f956 = substr($v6f3e16f956, 0, $pbd1bc7b0) . $v327f72fb62 . substr($v6f3e16f956, $pbd1bc7b0); else $v6f3e16f956 .= (strpos($v6f3e16f956, "<?") === false ? "<?php" : "") . "$v327f72fb62?>"; } else $v6f3e16f956 = "<?php$v327f72fb62?>"; } return $v6f3e16f956 == $v6490ea3a15 || file_put_contents($pf3dc0762, $v6f3e16f956) !== false; } return false; } public static function getClassString($pb543f4d4) { $v5e813b295b = isset($pb543f4d4["name"]) ? trim($pb543f4d4["name"]) : ""; $v5fa5abe933 = isset($pb543f4d4["hidden"]) ? $pb543f4d4["hidden"] : null; $v889d613135 = isset($pb543f4d4["interface"]) ? $pb543f4d4["interface"] : null; $pa0d4d0cd = isset($pb543f4d4["abstract"]) ? $pb543f4d4["abstract"] : null; $v99ac1f1816 = isset($pb543f4d4["extends"]) ? $pb543f4d4["extends"] : null; $v7284e8bc5a = isset($pb543f4d4["implements"]) ? $pb543f4d4["implements"] : null; $v1efaf06c58 = isset($pb543f4d4["namespace"]) ? $pb543f4d4["namespace"] : null; $v7fe521c48d = isset($pb543f4d4["uses"]) ? $pb543f4d4["uses"] : null; $pc06f1034 = isset($pb543f4d4["includes"]) ? $pb543f4d4["includes"] : null; $pcc2fe66c = isset($pb543f4d4["comments"]) ? trim($pb543f4d4["comments"]) : ""; $v99ac1f1816 = !$v99ac1f1816 || is_array($v99ac1f1816) ? $v99ac1f1816 : array($v99ac1f1816); $v7284e8bc5a = !$v7284e8bc5a || is_array($v7284e8bc5a) ? $v7284e8bc5a : array($v7284e8bc5a); $pc06f1034 = !$pc06f1034 || is_array($pc06f1034) ? $pc06f1034 : array($pc06f1034); $v327f72fb62 = ""; if ($v1efaf06c58) $v327f72fb62 .= "namespace $v1efaf06c58;\n\n"; if ($pc06f1034) { foreach ($pc06f1034 as $pc24afc88) if (is_array($pc24afc88) && trim($pc24afc88[0])) $v327f72fb62 .= "include" . ($pc24afc88[1] ? "_once" : "") . " " . $pc24afc88[0] . ";\n"; else if (!is_array($pc24afc88) && trim($pc24afc88)) $v327f72fb62 .= "include_once $pc24afc88;\n"; $v327f72fb62 .= "\n"; } if ($v7fe521c48d) { foreach ($v7fe521c48d as $v1578057dc9 => $v7c3c74d27f) if (trim($v1578057dc9)) $v327f72fb62 .= "use $v1578057dc9" . (trim($v7c3c74d27f) ? " as $v7c3c74d27f" : "") . ";\n"; $v327f72fb62 .= "\n"; } if ($pcc2fe66c) $pcc2fe66c = preg_replace("/@hidden(\s|$)/", "", $pcc2fe66c); if ($v5fa5abe933) { if ($pcc2fe66c) { if (strpos($pcc2fe66c, "/*") !== false) { if (preg_match("/(\s*)(\/\*+)(\s*\n\s*)/", $pcc2fe66c)) $pcc2fe66c = preg_replace("/(\s*)(\/\*+)(\s*\n\s*)/", "$1$2$3* @hidden$3", $pcc2fe66c, 1); else $pcc2fe66c = preg_replace("/(\s*)(\/\*+)/", "$1$2\n$1* @hidden\n$1", $pcc2fe66c, 1); } else $pcc2fe66c = "@hidden\n" . $pcc2fe66c; } else $pcc2fe66c = "/**\n * @hidden\n */"; } if ($pcc2fe66c) $v327f72fb62 .= (substr($pcc2fe66c, 0, 2) != "/*" ? "/**\n * " . str_replace("\n", "\n * ", $pcc2fe66c) . "\n */" : $pcc2fe66c) . "\n"; $v327f72fb62 .= ($pa0d4d0cd ? "abstract " : "") . ($v889d613135 ? "interface" : "class") . " $v5e813b295b"; if ($v99ac1f1816) $v327f72fb62 .= " extends " . implode(", ", $v99ac1f1816); if ($v7284e8bc5a) $v327f72fb62 .= " implements " . implode(", ", $v7284e8bc5a); return $v327f72fb62; } public static function getFunctionString($pb1b5d206, $v1335217393 = false) { $v5e813b295b = isset($pb1b5d206["name"]) ? trim($pb1b5d206["name"]) : ""; $v5fa5abe933 = isset($pb1b5d206["hidden"]) ? $pb1b5d206["hidden"] : null; $v3fb9f41470 = isset($pb1b5d206["type"]) ? $pb1b5d206["type"] : null; $pa0d4d0cd = isset($pb1b5d206["abstract"]) ? $pb1b5d206["abstract"] : null; $static = isset($pb1b5d206["static"]) ? $pb1b5d206["static"] : null; $v86066462c3 = isset($pb1b5d206["arguments"]) ? $pb1b5d206["arguments"] : null; $pcc2fe66c = isset($pb1b5d206["comments"]) ? trim($pb1b5d206["comments"]) : ""; if (is_array($v86066462c3)) { $pf3b79f6d = ""; foreach ($v86066462c3 as $v3e2ea7c182 => $v15f6545050) { if ($v3e2ea7c182) { $v3e2ea7c182 = trim($v3e2ea7c182); $pfe04dc98 = strrpos($v3e2ea7c182, " "); $v1d9a927808 = $pfe04dc98 !== false ? substr($v3e2ea7c182, 0, $pfe04dc98) : ""; $v3e2ea7c182 = $pfe04dc98 !== false ? substr($v3e2ea7c182, $pfe04dc98 + 1) : $v3e2ea7c182; $v3e2ea7c182 = substr($v3e2ea7c182, 0, 1) == '$' ? $v3e2ea7c182 : ( substr($v3e2ea7c182, 0, 1) == '&' ? ( substr($v3e2ea7c182, 1, 1) == '$' ? $v3e2ea7c182 : "&\$" . substr($v3e2ea7c182, 1) ) : "\$$v3e2ea7c182" ); $pf3b79f6d .= ($pf3b79f6d ? ", " : "") . ($v1d9a927808 ? "$v1d9a927808 " : "") . $v3e2ea7c182 . (isset($v15f6545050) ? " = $v15f6545050" : ""); } } } $pdcf670f6 = $v1335217393 ? "\t" : ""; $v327f72fb62 = ""; if ($pcc2fe66c) $pcc2fe66c = preg_replace("/@hidden(\s|$)/", "", $pcc2fe66c); if ($v5fa5abe933) { if ($pcc2fe66c) { if (strpos($pcc2fe66c, "/*") !== false) { if (preg_match("/(\s*)(\/\*+)(\s*\n\s*)/", $pcc2fe66c)) $pcc2fe66c = preg_replace("/(\s*)(\/\*+)(\s*\n\s*)/", "$1$2$3* @hidden$3", $pcc2fe66c, 1); else $pcc2fe66c = preg_replace("/(\s*)(\/\*+)/", "$1$2\n$1* @hidden\n$1", $pcc2fe66c, 1); } else $pcc2fe66c = "@hidden\n" . $pcc2fe66c; } else $pcc2fe66c = "/**\n * @hidden\n */"; } if ($pcc2fe66c) { if (substr($pcc2fe66c, 0, 2) != "/*") $v327f72fb62 .= "$pdcf670f6/**\n$pdcf670f6 * " . str_replace("\n", "\n$pdcf670f6 * ", $pcc2fe66c) . "\n$pdcf670f6 */\n"; else $v327f72fb62 .= $pdcf670f6 . str_replace("\n", "\n$pdcf670f6", $pcc2fe66c) . "\n"; } if ($v1335217393) { $v3fb9f41470 = !$v3fb9f41470 && $v1335217393 ? "public" : strtolower($v3fb9f41470); $v327f72fb62 .= $pdcf670f6 . trim(strtolower($v3fb9f41470) . ($pa0d4d0cd ? " abstract" : "") . ($static ? " static" : "") . " function $v5e813b295b ($pf3b79f6d)"); } else $v327f72fb62 .= $pdcf670f6 . trim("function $v5e813b295b ($pf3b79f6d)"); return $v327f72fb62; } public static function getClassPropertyString($v1e2647db7e) { $v327f72fb62 = ""; $v5e813b295b = isset($v1e2647db7e["name"]) ? trim($v1e2647db7e["name"]) : ""; if ($v5e813b295b) { $v3fb9f41470 = !empty($v1e2647db7e["type"]) ? $v1e2647db7e["type"] : "public"; $v3fb9f41470 = !empty($v1e2647db7e["const"]) ? "const" : $v3fb9f41470; $static = !empty($v1e2647db7e["static"]) ? " static" : ""; $v7f2aac9119 = isset($v1e2647db7e["var_type"]) ? $v1e2647db7e["var_type"] : null; $v67db1bd535 = isset($v1e2647db7e["value"]) ? $v1e2647db7e["value"] : null; $pcc2fe66c = isset($v1e2647db7e["comments"]) ? trim($v1e2647db7e["comments"]) : ""; $v5e813b295b = $v3fb9f41470 == "const" ? $v5e813b295b : "\$$v5e813b295b"; $v67db1bd535 = $v7f2aac9119 == "string" ? '"' . addcslashes($v67db1bd535, '"') . '"' : $v67db1bd535; if ($pcc2fe66c) { if (substr($pcc2fe66c, 0, 2) != "/*") $v327f72fb62 .= "$pdcf670f6/**\n$pdcf670f6 * " . str_replace("\n", "\n$pdcf670f6 * ", $pcc2fe66c) . "\n$pdcf670f6 */\n"; else $v327f72fb62 .= $pdcf670f6 . str_replace("\n", "\n$pdcf670f6", $pcc2fe66c) . "\n"; } $v327f72fb62 .= "$v3fb9f41470$static $v5e813b295b" . (strlen($v67db1bd535) ? " = $v67db1bd535" : "") . ";"; } return $v327f72fb62; } private static function mb7248d940f3f($pa32be502, $v3dae97c5c8 = false) { $v6ee393d9fb = array(); if (is_dir($pa32be502) && ($v89d33f4133 = opendir($pa32be502)) ) { while( ($v7dffdb5a5b = readdir($v89d33f4133)) !== false) if($v7dffdb5a5b != "." && $v7dffdb5a5b != "..") { $pf3dc0762 = $pa32be502 . "/" . $v7dffdb5a5b; if (is_dir($pf3dc0762)) { $v2cd5d67337 = self::mb7248d940f3f($pf3dc0762, $v3dae97c5c8); $v6ee393d9fb = array_merge($v6ee393d9fb, $v2cd5d67337); } else { $v6bfcc44e7b = pathinfo($pf3dc0762, PATHINFO_EXTENSION); if ($v6bfcc44e7b == "php") $v6ee393d9fb[] = str_replace("//", "/", $pf3dc0762); } } closedir($v89d33f4133); } return $v6ee393d9fb; } } ?>
