<?xml version="1.0" encoding="UTF-8"?>
<widget>
	<label>Template Region Param</label>
	<tag>region-param</tag>
	<settings>
		<create_widget_class>TemplateRegionParamWidget</create_widget_class>
	</settings>
	<menu_widget></menu_widget>
	<template_widget><![CDATA[
		<pre></pre>
	]]></template_widget>
	<properties></properties>
	<menu_css><![CDATA[
		.layout-ui-editor > .menu-widgets .menu-widget.menu-widget-region-param:before,
		  body > .menu-widget.menu-widget-region-param.ui-draggable-dragging:before {
			background-image:url('#widget_webroot_url#region_param.svg');
		}
		
		.layout-ui-editor > .template-widgets > .widget-header.widget-header-region-param .options .props,
		   .layout-ui-editor > .template-widgets > .widget-header.widget-header-region-param .options .toggle {
			display:none !important;
		}
		
		.layout-ui-editor > .menu-settings.menu-settings-region-param .settings-id,
		   .layout-ui-editor > .menu-settings.menu-settings-region-param .settings-classes,
		   .layout-ui-editor > .menu-settings.menu-settings-region-param .settings-properties,
		   .layout-ui-editor > .menu-settings.menu-settings-region-param .settings-general,
		   .layout-ui-editor > .menu-settings.menu-settings-region-param .settings-dimension,
		   .layout-ui-editor > .menu-settings.menu-settings-region-param .settings-typography,
		   .layout-ui-editor > .menu-settings.menu-settings-region-param .settings-decorations,
		   .layout-ui-editor > .menu-settings.menu-settings-region-param .settings-extra {
			display:none;
		}
		
		.layout-ui-editor > .menu-layers .group.group-region-param > ul {
			display:none !important;
		}
	]]></menu_css>
	<template_css><![CDATA[
		.template-widget.template-widget-region-param {
			margin:5px !important; /* !important is bc of the css when .borders is active */
			padding:5px !important; /* !important is bc of the css when .borders is active */
			border:1px outset #20b727 !important; /* !important is bc of the css when .borders is active */
			background-image:none !important; /* !important is bc of the css when .borders is active */
			border-radius:5px;
			background:#333;
			color:#20b727;
			vertical-align:middle;
			display:block;
			word-break:break-all;
		}
		body > .droppable.borders .template-widget.template-widget-region-param:before {
			content:"";
			border:0;
			display:none;
		}
		
		.template-widget.template-widget-region-param > pre {
			margin:0 !important; /* !important is bc of the css when .borders is active */
			padding:0 !important; /* !important is bc of the css when .borders is active */
			border:0 !important; /* !important is bc of the css when .borders is active */
			background-image:none !important; /* !important is bc of the css when .borders is active */
			display:block;
			color:inherit;
			font-size:inherit;
			font-family:inherit;
			overflow:auto;
		}
		.template-widget.template-widget-region-param > pre::-webkit-scrollbar {
			height:7px;
		}
		body > .droppable.borders .template-widget.template-widget-region-param > pre:before {
			content:"";
			border:0;
			display:none;
		}
	]]></template_css>
	<menu_js><![CDATA[
		function TemplateRegionParamWidget(ui_creator, menu_widget) {
			var me = this;
			var obj_php_widget = new PHPWidget(ui_creator, menu_widget);
			
			me.init = function() {
				obj_php_widget.init();
				
				menu_widget.removeAttr("data-on-parse-template-widget-html-func");
				
				menu_widget.attr({
					"data-on-create-template-widget-func": ui_creator.obj_var_name + ".menu_widgets_objs['region-param'].onCreateTemplateWidget",
				});
			};
			
			me.onCreateTemplateWidget = function(widget, html_element) {
				var value = prompt("What is the new region name?");
				value = value ? value : "...";
				
				if (!html_element)
					html_element = document.createComment('? echo $EVC->getCMSLayer()->getCMSTemplateLayer()->getParam("' + value + '"); ?');
				
				obj_php_widget.onCreateTemplateWidget(widget, html_element);
			};
		}
	]]></menu_js>
</widget>
