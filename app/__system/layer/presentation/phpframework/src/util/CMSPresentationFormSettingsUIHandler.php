<?php
/*
 * Copyright (c) 2007 PHPMyFrameWork - Joao Pinto
 * AUTHOR: Joao Paulo Lopes Pinto -- http://jplpinto.com
 * 
 * The use of this code must be allowed first by the creator Joao Pinto, since this is a private and proprietary code.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS 
 * OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY 
 * AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR 
 * CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL 
 * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, 
 * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER 
 * IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT 
 * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE. IN NO EVENT SHALL 
 * THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN 
 * AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE 
 * OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 */

include_once get_lib("org.phpframework.workflow.WorkFlowTaskHandler"); include_once get_lib("org.phpframework.util.HashCode"); include_once get_lib("org.phpframework.util.web.html.HtmlFormHandler"); include_once get_lib("org.phpframework.phpscript.PHPUICodeExpressionHandler"); include_once $EVC->getUtilPath("WorkFlowBeansFileHandler"); include_once $EVC->getUtilPath("WorkFlowDataAccessHandler"); include_once $EVC->getUtilPath("WorkFlowDBHandler"); include_once $EVC->getUtilPath("CMSPresentationLayerHandler"); class CMSPresentationFormSettingsUIHandler { public static $editable_input_types = array("text", "password", "file", "search", "url", "email", "tel", "number", "range", "date", "month", "week", "time", "datetime", "datetime-local", "color", "hidden", "checkbox", "radio", "select", "textarea"); public static function getFormSettings($v3d55458bcd, $v5039a77f9d, $pdb9e96e6, $v4bf8d90f04, $pfce4d1b3, $v8ffce2a791, $pa0462a8e, $pa32be502, $v9ac2ae8b4d, $v4c8e54c3e3, $pab752e34, $pb09c0b5b, $v872f5b4dbb, $v8b13fa2358, $v3fb9f41470, $v9a4a47d31e, $v30857f7eca, $pbf12ce85 = false, $v44886b3092 = "", $v516837ee42 = false, $pef34936b = false, &$pb39a0a9c = array()) { $v30d38c7973 = null; $pa32be502 = str_replace("../", "", $pa32be502); if ($pa32be502) { $pb512d021 = new WorkFlowBeansFileHandler($v5039a77f9d . $pa0462a8e, $v3d55458bcd); $v188b4f5fa6 = $pb512d021->getEVCBeanObject($v8ffce2a791, $pa32be502); if ($v188b4f5fa6) { $pfaf08f23 = new PHPVariablesFileHandler(array($v3d55458bcd, $v188b4f5fa6->getConfigPath("pre_init_config"))); $pfaf08f23->startUserGlobalVariables(); $v094d1a2778 = new WorkFlowDataAccessHandler(); if ($v3fb9f41470 == "diagram") { $v5e053dece2 = WorkFlowTasksFileHandler::getDBDiagramTaskFilePath($pdb9e96e6, "db_diagram", $v872f5b4dbb); $v094d1a2778->setTasksFilePath($v5e053dece2); } else { if (!$v9ac2ae8b4d) { $v9ac2ae8b4d = WorkFlowBeansFileHandler::getLayerDBDriverProps($v3d55458bcd, $v5039a77f9d, $v188b4f5fa6->getPresentationLayer(), $v872f5b4dbb); $v9ac2ae8b4d = $v9ac2ae8b4d ? $v9ac2ae8b4d[1] : null; } if ($v9ac2ae8b4d) { $v660b5296f8 = new WorkFlowDBHandler($v5039a77f9d, $v3d55458bcd); $v1d696dbd12 = $v660b5296f8->getUpdateTaskDBDiagram($v9ac2ae8b4d, $v872f5b4dbb); $v094d1a2778->setTasks($v1d696dbd12); } } $pac4bc40a = $v094d1a2778->getTasksAsTables(); if ($v9a4a47d31e) foreach ($v9a4a47d31e as $v8c5df8072b => $v566db8f5a9) $v9a4a47d31e[$v8c5df8072b] = strtolower(str_replace(array("-", " "), "_", $v566db8f5a9)); $v806a006822 = array(); if (is_array($v30857f7eca) && $v30857f7eca) { $v64e98269be = array("callbusinesslogic", "callibatisquery", "callhibernatemethod", "getquerydata", "setquerydata"); $pecad7cca = new WorkFlowTaskHandler($v4bf8d90f04, $pfce4d1b3); $pecad7cca->setCacheRootPath(LAYER_CACHE_PATH); $pecad7cca->setAllowedTaskTags($v64e98269be); $pecad7cca->initWorkFlowTasks(); $pae434d3a = array(); $peecef390 = ""; $v3f9d6e1a69 = array(); $v74a3339c59 = self::mb42faf610de9($v188b4f5fa6); foreach ($v30857f7eca as $v8c5df8072b => $v717becaad5) { MyArray::arrKeysToLowerCase($v717becaad5, true); $v08ba0e224b = WorkFlowDBHandler::getTableTaskRealNameFromTasks($pac4bc40a, $v8c5df8072b); $pfdbbc383 = $v717becaad5["attributes"]; if ($pfdbbc383) { $pfdbbc383 = array_flip($pfdbbc383); self::prepareAttributesSettingsWithRealAttributeNames($pfdbbc383, $pac4bc40a, $v8c5df8072b); $pfdbbc383 = array_flip($pfdbbc383); } else $pfdbbc383 = $pac4bc40a[$v08ba0e224b] ? array_keys($pac4bc40a[$v08ba0e224b]) : null; if ($pfdbbc383) { $pb3f8356a = $v717becaad5["panel_type"]; $v768b231eba = $v717becaad5["panel_id"]; $v94682778e5 = $v717becaad5["panel_class"]; $v7f7bf6bca2 = $v717becaad5["panel_previous_html"]; $v1bec2e4b9e = $v717becaad5["panel_next_html"]; $pdd058476 = $v717becaad5["form_type"]; $v8710ac8f3f = $v717becaad5["brokers"]; $v9195465250 = $v717becaad5["actions"]; $paf1bc6f6 = $v717becaad5["conditions"]; $v442e28b3c7 = $v717becaad5["table_parent"]; $pabde73f0 = $v717becaad5["pagination"]; $pabde73f0 = $pabde73f0 ? $pabde73f0 : array(); $v9deec980f6 = $v8710ac8f3f["get_all"]; $v15f3268002 = $v8710ac8f3f["count"]; $v053b63d4d5 = $v8710ac8f3f["get"]; $v4cb12d6d8e = $v8710ac8f3f["insert"]; $v6e99d5dea0 = $v8710ac8f3f["update"]; $v870662249d = $v8710ac8f3f["update_pks"]; $v74cb39e604 = $v8710ac8f3f["delete"]; $v69f1629ff2 = $v8710ac8f3f["relationships"]; $v566db8f5a9 = $v9a4a47d31e[$v8c5df8072b]; $pd98df87c = self::getParsedTableName($v566db8f5a9 ? $v566db8f5a9 : $v8c5df8072b); $v2f0e633d4c = self::getName($pd98df87c); $pd7bfd6f7 = self::getPlural($pd98df87c); $peecef390 .= !$pbf12ce85 ? self::f03e13e4ef7($v9195465250, $v44886b3092 . $peecef390, $pb3f8356a, $pabde73f0) : ""; if ($pdd058476 != "ptl") $pb39a0a9c = self::f54a4aa0d45($v9195465250, $pb39a0a9c); $pe2f18119 = array(); foreach ($pac4bc40a[$v08ba0e224b] as $v5e45ec9bb9 => $v1b0cfa478b) if ($v1b0cfa478b["primary_key"]) $pe2f18119[] = $v5e45ec9bb9; $pe54f8a0f = array(); foreach ($pac4bc40a[$v08ba0e224b] as $v5e45ec9bb9 => $v1b0cfa478b) if ($v1b0cfa478b["primary_key"] && WorkFlowDataAccessHandler::isAutoIncrementedAttribute($v1b0cfa478b)) $pe54f8a0f[] = $v5e45ec9bb9; if ($pb3f8356a == "multiple_form" && !is_numeric($pabde73f0["rows_per_page"])) $pabde73f0["rows_per_page"] = 1; $v19429f8570 = $pabde73f0["rows_per_page"] ? $pabde73f0["rows_per_page"] : 100; $v9f3ec7f561 = !$pabde73f0 || $pabde73f0["active"]; $pd81f7df7 = self::f6f4cf79bef($pac4bc40a, $v8c5df8072b, $v9a4a47d31e, $pe2f18119); $v1ccd95046e = array(); $v3103ca799e = false; $pa8b4b2c5 = $pb3f8356a == "list_table" || $pb3f8356a == "list_form"; if ($v9195465250["multiple_insert_update"] || $v9195465250["multiple_insert"] || $v9195465250["multiple_update"] || $v9195465250["multiple_delete"] || $v9195465250["single_insert"] || $v9195465250["single_update"] || $v9195465250["single_delete"]) self::f672d3edb88($pfdbbc383, $pe2f18119, $v9195465250); $pd094f67a = array(); $pc4de8526 = array(); $v96882ae93d = array(); if ($pef34936b) foreach ($pef34936b as $v76032145ee) if ($v76032145ee["user_type_id"] && $v76032145ee["user_type_id"] != UserUtil::PUBLIC_USER_TYPE_ID) { if ($v76032145ee["activity_id"] == UserUtil::ACCESS_ACTIVITY_ID) $pd094f67a[] = $v76032145ee; else if ($v76032145ee["activity_id"] == UserUtil::WRITE_ACTIVITY_ID) $pc4de8526[] = $v76032145ee; else if ($v76032145ee["activity_id"] == UserUtil::DELETE_ACTIVITY_ID) $v96882ae93d[] = $v76032145ee; } if ($pd094f67a) { $v1ccd95046e[] = array( "result_var_name" => "has_access_permission", "action_type" => "check_logged_user_permissions", "condition_type" => "execute_always", "condition_value" => "", "action_value" => array( "all_permissions_checked" => 0, "entity_path" => "\"\" . \$entity_path . \"\"", "logged_user_id" => "\"\" . \$GLOBALS[\"logged_user_id\"] . \"\"", "users_perms" => $pd094f67a ) ); $v1ccd95046e[] = array( "result_var_name" => "", "action_type" => "alert_msg_and_stop", "condition_type" => "execute_if_not_var", "condition_value" => "has_access_permission", "action_value" => array( "message" => "Access Denied!!!", ) ); } self::prepareAttributeAvailableValues($v1ccd95046e, $v9195465250["attributes_settings"], $v74a3339c59, $v30857f7eca, $pac4bc40a, $v8c5df8072b, $v8710ac8f3f, $v4c8e54c3e3, $pab752e34, $pb09c0b5b, $v872f5b4dbb, $v8b13fa2358, $v3fb9f41470); if ($pa8b4b2c5 || $pbf12ce85) { $pd9468bf4 = $v9195465250["multiple_insert_update"] && !$v9195465250["multiple_insert_update"]["action_type"]; $pd034645f = $v9195465250["multiple_insert"] && !$v9195465250["multiple_insert"]["action_type"]; $v6d74d31ea3 = $v9195465250["multiple_update"] && !$v9195465250["multiple_update"]["action_type"]; $v00cddbe644 = $v9195465250["multiple_delete"] && !$v9195465250["multiple_delete"]["action_type"]; if ($pd9468bf4 || $pd034645f || $v6d74d31ea3 || $v00cddbe644) { $v3bfe69f387 = array(); $pe63707fc = $pcf16d5d9 = $v71361a0925 = false; if ($pbf12ce85) $v3bfe69f387[] = array( "result_var_name" => "data", "action_type" => "variable", "condition_type" => "execute_always", "condition_value" => "", "action_value" => "#_POST[$pd98df87c]#" ); if ($pc4de8526 && ($pd034645f || $pd9468bf4 || $v6d74d31ea3) && ($v4cb12d6d8e || $v6e99d5dea0 || $v74a3339c59)) $v3bfe69f387[] = array( "result_var_name" => "has_write_permission", "action_type" => "check_logged_user_permissions", "condition_type" => "execute_if_condition", "condition_value" => "\\\$_POST", "action_value" => array( "all_permissions_checked" => 0, "entity_path" => "\"\" . \$entity_path . \"\"", "logged_user_id" => "\"\" . \$GLOBALS[\"logged_user_id\"] . \"\"", "users_perms" => $pc4de8526 ) ); if (($pd034645f || $pd9468bf4) && ($v4cb12d6d8e || $v74a3339c59)) { $v2d8e0db2f6 = array(); $v124472d124 = array(); $v6e03bea0b0 = array(); $pe63707fc = true; $v3bfe69f387[] = array( "result_var_name" => "insert_status", "action_type" => "variable", "condition_type" => "execute_always", "condition_value" => "", "action_value" => "\"\" . (\$_POST[\"{$pd98df87c}_add" . ($pd9468bf4 ? "_save" : "") . "\"] && \$_POST[\"multiple_insert_selection\"][\"$pd98df87c\"] ? 1 : 0) . \"\"" ); if ($pc4de8526) $v3bfe69f387[] = array( "result_var_name" => "insert_status", "action_type" => "variable", "condition_type" => "execute_if_not_var", "condition_value" => "has_write_permission", "action_value" => "0" ); if (!$v4cb12d6d8e || !$v4cb12d6d8e["brokers_layer_type"]) { $ped0a6251 = array(); foreach ($pfdbbc383 as $v1b0cfa478b) if (!in_array($v1b0cfa478b, $pe54f8a0f)) $ped0a6251[] = array("column" => $v1b0cfa478b, "value" => '#' . $pd98df87c . '[' . $v1b0cfa478b . ']#'); $v4cb12d6d8e = array( "brokers_layer_type" => "insert", "dal_broker" => $v4c8e54c3e3, "db_driver" => $v872f5b4dbb, "db_type" => $v3fb9f41470, "table" => $v8c5df8072b, "attributes" => $ped0a6251 ); } else { self::mbe068676c484($v8c5df8072b, $pd98df87c, $v4cb12d6d8e, '$_POST'); self::me9970753b3ec($v4cb12d6d8e); } self::prepareBrokerSettings($v4cb12d6d8e, $pab752e34, $pb09c0b5b, $v872f5b4dbb, $v8b13fa2358, $pac4bc40a); $v067674f4e4 = self::f0dec7450c7($pac4bc40a, $v8c5df8072b, $pd98df87c, $pfdbbc383, $v4cb12d6d8e, $pecad7cca); if ($v067674f4e4) $v6e03bea0b0[] = array( "result_var_name" => "", "action_type" => "code", "condition_type" => "execute_always", "condition_value" => "", "action_value" => $v067674f4e4 ); $v6e03bea0b0[] = array( "result_var_name" => $pd98df87c . "_status", "action_type" => $v4cb12d6d8e["brokers_layer_type"], "condition_type" => "execute_always", "condition_value" => "", "action_value" => $v4cb12d6d8e ); $v4e9e6cbc72 = null; $v067674f4e4 = self::mcfcf1f6200e9($pd98df87c, $v4cb12d6d8e, $pe54f8a0f, $pecad7cca, $pab752e34, $pb09c0b5b, $v872f5b4dbb, $v8b13fa2358, $v4e9e6cbc72); if ($v067674f4e4) { if ($v4e9e6cbc72) $v6e03bea0b0[] = array( "result_var_name" => $v4e9e6cbc72, "action_type" => "variable", "condition_type" => "execute_always", "condition_value" => "", "action_value" => '$' . $v4e9e6cbc72 ); $v6e03bea0b0[] = array( "result_var_name" => "", "action_type" => "code", "condition_type" => "execute_if_var", "condition_value" => $pd98df87c . "_status", "action_value" => $v067674f4e4 ); } $v6e03bea0b0[] = array( "result_var_name" => "insert_status", "action_type" => "string", "condition_type" => "execute_if_not_var", "condition_value" => $pd98df87c . "_status", "action_value" => "0" ); if ($pbf12ce85) $v6e03bea0b0[] = array( "result_var_name" => "", "action_type" => "code", "condition_type" => "execute_always", "condition_value" => "", "action_value" => "'<?
\$data[\"\$row_index\"] = \$$pd98df87c;
\$data[\"\$row_index\"][\"{$pd98df87c}_status\"] = \${$pd98df87c}_status;
?>'" ); $v124472d124[] = array( "result_var_name" => $pd98df87c, "action_type" => "variable", "condition_type" => "execute_always", "condition_value" => "", "action_value" => "#_POST[\"$pd98df87c\"][\\\$row_index]#" ); $v124472d124[] = array( "result_var_name" => "", "action_type" => "group", "condition_type" => "execute_if_var", "condition_value" => $pd98df87c, "action_value" => array( "group_name" => "", "actions" => $v6e03bea0b0 ) ); $v2d8e0db2f6[] = array( "result_var_name" => "", "action_type" => "loop", "condition_type" => "execute_always", "condition_value" => "", "action_value" => array( "records_variable_name" => "\$_POST[\"multiple_insert_selection\"][\"$pd98df87c\"]", "records_start_index" => "", "records_end_index" => "", "array_item_key_variable_name" => "row_index", "array_item_value_variable_name" => "", "actions" => $v124472d124 ) ); $v2d8e0db2f6[] = array( "result_var_name" => $pd98df87c . "_status", "action_type" => "string", "condition_type" => "execute_always", "condition_value" => "", "action_value" => "#insert_status#" ); $v3bfe69f387[] = array( "result_var_name" => "", "action_type" => "group", "condition_type" => "execute_if_condition", "condition_value" => ($pc4de8526 ? "\\\$has_write_permission && " : "") . "\\\$_POST[\"{$pd98df87c}_add" . ($pd9468bf4 ? "_save" : "") . "\"] && \\\$_POST[\"multiple_insert_selection\"][\"$pd98df87c\"]", "action_value" => array( "group_name" => "", "actions" => $v2d8e0db2f6 ) ); } if ($v6d74d31ea3 || $pd9468bf4 || $v00cddbe644) { $paa5b12b3 = array(); $v124472d124 = array(); $v124472d124[] = array( "result_var_name" => $pd98df87c, "action_type" => "variable", "condition_type" => "execute_always", "condition_value" => "", "action_value" => "#_POST[\"$pd98df87c\"][\\\$row_index]#" ); if (($v6d74d31ea3 || $pd9468bf4) && ($v6e99d5dea0 || $v74a3339c59)) { $v6e03bea0b0 = array(); $pcf16d5d9 = true; $v3bfe69f387[] = array( "result_var_name" => "update_status", "action_type" => "variable", "condition_type" => "execute_always", "condition_value" => "", "action_value" => "\"\" . (\$_POST[\"{$pd98df87c}" . ($pd9468bf4 ? "_add" : "") . "_save\"] && \$_POST[\"multiple_selection\"][\"$pd98df87c\"] ? 1 : 0) . \"\"" ); if ($pc4de8526) $v3bfe69f387[] = array( "result_var_name" => "update_status", "action_type" => "variable", "condition_type" => "execute_if_not_var", "condition_value" => "has_write_permission", "action_value" => "0" ); if (!$v6e99d5dea0 || !$v6e99d5dea0["brokers_layer_type"]) { $ped0a6251 = array(); foreach ($pfdbbc383 as $v1b0cfa478b) if (!in_array($v1b0cfa478b, $pe54f8a0f)) $ped0a6251[] = array("column" => $v1b0cfa478b, "value" => '#' . $pd98df87c . '[' . $v1b0cfa478b . ']#'); $pa96c9a0d = array(); foreach ($pe2f18119 as $v597dd8d456) $pa96c9a0d[] = array("column" => $v597dd8d456, "value" => '#' . $pd98df87c . '[' . $v597dd8d456 . ']#'); $v6e99d5dea0 = array( "brokers_layer_type" => "update", "dal_broker" => $v4c8e54c3e3, "db_driver" => $v872f5b4dbb, "db_type" => $v3fb9f41470, "table" => $v8c5df8072b, "attributes" => $ped0a6251, "conditions" => $pa96c9a0d ); } else { self::mbe068676c484($v8c5df8072b, $pd98df87c, $v6e99d5dea0, '$_POST'); self::me9970753b3ec($v6e99d5dea0); } if (!$v870662249d || !$v870662249d["brokers_layer_type"]) { $ped0a6251 = array(); foreach ($pe2f18119 as $v597dd8d456) $ped0a6251[] = array("column" => $v597dd8d456, "value" => '#' . $pd98df87c . '[new_' . $v597dd8d456 . ']#'); $pa96c9a0d = array(); foreach ($pe2f18119 as $v597dd8d456) $pa96c9a0d[] = array("column" => $v597dd8d456, "value" => '#' . $pd98df87c . '[old_' . $v597dd8d456 . ']#'); $v870662249d = array( "brokers_layer_type" => "update", "dal_broker" => $v4c8e54c3e3, "db_driver" => $v872f5b4dbb, "db_type" => $v3fb9f41470, "table" => $v8c5df8072b, "attributes" => $ped0a6251, "conditions" => $pa96c9a0d ); } else { self::mbe068676c484($v8c5df8072b, $pd98df87c, $v870662249d, '$_POST'); self::me9970753b3ec($v870662249d); } self::prepareBrokerSettings($v6e99d5dea0, $pab752e34, $pb09c0b5b, $v872f5b4dbb, $v8b13fa2358, $pac4bc40a); self::prepareBrokerSettings($v870662249d, $pab752e34, $pb09c0b5b, $v872f5b4dbb, $v8b13fa2358, $pac4bc40a); $v067674f4e4 = self::f8494219158($pac4bc40a, $v8c5df8072b, $pd98df87c, $pfdbbc383, $pe2f18119, $v6e99d5dea0, $pecad7cca); if ($v067674f4e4) $v6e03bea0b0[] = array( "result_var_name" => "", "action_type" => "code", "condition_type" => "execute_always", "condition_value" => "", "action_value" => $v067674f4e4 ); $pee844da2 = '\\$_POST["' . $pd98df87c . '_save_pks"]'; foreach ($pe2f18119 as $v597dd8d456) $pee844da2 .= ' && \\$' . $pd98df87c . '["old_' . $v597dd8d456 . '"] && \\$' . $pd98df87c . '["new_' . $v597dd8d456 . '"]'; $v6e03bea0b0[] = array( "result_var_name" => $pd98df87c . "_status", "action_type" => $v870662249d["brokers_layer_type"], "condition_type" => "execute_if_condition", "condition_value" => $pee844da2, "action_value" => $v870662249d ); $pee844da2 = '(!\\$_POST["' . $pd98df87c . '_save_pks"] || \\$' . $pd98df87c . '_status)'; foreach ($pe2f18119 as $v597dd8d456) $pee844da2 .= ' && \\$' . $pd98df87c . '["' . $v597dd8d456 . '"]'; $v6e03bea0b0[] = array( "result_var_name" => $pd98df87c . "_status", "action_type" => $v6e99d5dea0["brokers_layer_type"], "condition_type" => "execute_if_condition", "condition_value" => $pee844da2, "action_value" => $v6e99d5dea0 ); $v6e03bea0b0[] = array( "result_var_name" => "update_status", "action_type" => "string", "condition_type" => "execute_if_not_var", "condition_value" => $pd98df87c . "_status", "action_value" => "0" ); if ($pbf12ce85) $v6e03bea0b0[] = array( "result_var_name" => "", "action_type" => "code", "condition_type" => "execute_always", "condition_value" => "", "action_value" => "'<?
\$data[\"\$row_index\"] = \$$pd98df87c;
\$data[\"\$row_index\"][\"{$pd98df87c}_status\"] = \${$pd98df87c}_status;
?>'" ); $v124472d124[] = array( "result_var_name" => "", "action_type" => "group", "condition_type" => "execute_if_condition", "condition_value" => "\\\$_POST[\"{$pd98df87c}" . ($pd9468bf4 ? "_add" : "") . "_save\"] && \\\${$pd98df87c}", "action_value" => array( "group_name" => "", "actions" => $v6e03bea0b0 ) ); } if ($v00cddbe644 && ($v74cb39e604 || $v74a3339c59)) { $v6e03bea0b0 = array(); $v71361a0925 = true; if ($v96882ae93d) $v3bfe69f387[] = array( "result_var_name" => "has_delete_permission", "action_type" => "check_logged_user_permissions", "condition_type" => "execute_if_condition", "condition_value" => "\\\$_POST", "action_value" => array( "all_permissions_checked" => 0, "entity_path" => "\"\" . \$entity_path . \"\"", "logged_user_id" => "\"\" . \$GLOBALS[\"logged_user_id\"] . \"\"", "users_perms" => $v96882ae93d ) ); $v3bfe69f387[] = array( "result_var_name" => "delete_status", "action_type" => "variable", "condition_type" => "execute_always", "condition_value" => "", "action_value" => "\"\" . (\$_POST[\"{$pd98df87c}_delete\"] && \$_POST[\"multiple_selection\"][\"$pd98df87c\"] ? 1 : 0) . \"\"" ); if ($v96882ae93d) $v3bfe69f387[] = array( "result_var_name" => "delete_status", "action_type" => "variable", "condition_type" => "execute_if_not_var", "condition_value" => "has_delete_permission", "action_value" => "0" ); if (!$v74cb39e604 || !$v74cb39e604["brokers_layer_type"]) { $pa96c9a0d = array(); foreach ($pe2f18119 as $v597dd8d456) $pa96c9a0d[] = array("column" => $v597dd8d456, "value" => '#' . $pd98df87c . '[' . $v597dd8d456 . ']#'); $v74cb39e604 = array( "brokers_layer_type" => "delete", "dal_broker" => $v4c8e54c3e3, "db_driver" => $v872f5b4dbb, "db_type" => $v3fb9f41470, "table" => $v8c5df8072b, "conditions" => $pa96c9a0d ); } else { self::mbe068676c484($v8c5df8072b, $pd98df87c, $v74cb39e604, '$_POST'); self::me9970753b3ec($v74cb39e604); } self::prepareBrokerSettings($v74cb39e604, $pab752e34, $pb09c0b5b, $v872f5b4dbb, $v8b13fa2358, $pac4bc40a); $v067674f4e4 = self::mfd4c6040039e($pd98df87c, $pe2f18119); if ($v067674f4e4) $v6e03bea0b0[] = array( "result_var_name" => "", "action_type" => "code", "condition_type" => "execute_always", "condition_value" => "", "action_value" => $v067674f4e4 ); $pee844da2 = ''; foreach ($pe2f18119 as $v597dd8d456) $pee844da2 .= ($pee844da2 ? ' && ' : '') . '\\$' . $pd98df87c . '["' . $v597dd8d456 . '"]'; $v6e03bea0b0[] = array( "result_var_name" => $pd98df87c . "_status", "action_type" => $v74cb39e604["brokers_layer_type"], "condition_type" => "execute_if_condition", "condition_value" => $pee844da2, "action_value" => $v74cb39e604 ); $v6e03bea0b0[] = array( "result_var_name" => "delete_status", "action_type" => "string", "condition_type" => "execute_if_not_var", "condition_value" => $pd98df87c . "_status", "action_value" => "0" ); if ($pbf12ce85) $v6e03bea0b0[] = array( "result_var_name" => "", "action_type" => "code", "condition_type" => "execute_always", "condition_value" => "", "action_value" => "'<?
\$data[\"\$row_index\"] = \$$pd98df87c;
\$data[\"\$row_index\"][\"{$pd98df87c}_status\"] = \${$pd98df87c}_status;
?>'" ); $v124472d124[] = array( "result_var_name" => "", "action_type" => "group", "condition_type" => "execute_if_condition", "condition_value" => "\\\$_POST[\"{$pd98df87c}_delete\"] && \\\${$pd98df87c}", "action_value" => array( "group_name" => "", "actions" => $v6e03bea0b0 ) ); } if ($pcf16d5d9 || $v71361a0925) { $paa5b12b3[] = array( "result_var_name" => "", "action_type" => "loop", "condition_type" => "execute_always", "condition_value" => "", "action_value" => array( "records_variable_name" => "\$_POST[\"multiple_selection\"][\"$pd98df87c\"]", "records_start_index" => "", "records_end_index" => "", "array_item_key_variable_name" => "row_index", "array_item_value_variable_name" => "", "actions" => $v124472d124 ) ); $v9e394b2939 = $pcf16d5d9 ? "(!\\\$_POST[\"{$pd98df87c}" . ($pd9468bf4 ? "_add" : "") . "_save\"] || \\\$update_status)" : ""; $v9e394b2939 .= $v71361a0925 ? ($v9e394b2939 ? " && " : "") . "(!\\\$_POST[\"{$pd98df87c}_delete\"] || \\\$delete_status)" : ""; if ($v9e394b2939) { $paa5b12b3[] = array( "result_var_name" => $pd98df87c . "_status", "action_type" => "string", "condition_type" => "execute_if_condition", "condition_value" => $v9e394b2939, "action_value" => "1" ); $paa5b12b3[] = array( "result_var_name" => $pd98df87c . "_status", "action_type" => "string", "condition_type" => "execute_if_not_condition", "condition_value" => $v9e394b2939, "action_value" => "0" ); } else $paa5b12b3[] = array( "result_var_name" => $pd98df87c . "_status", "action_type" => "string", "condition_type" => "execute_always", "condition_value" => "", "action_value" => "0" ); $v9e394b2939 = "("; if ($pc4de8526) $v9e394b2939 .= "(\\\$has_write_permission && \\\$_POST[\"{$pd98df87c}" . ($pd9468bf4 ? "_add" : "") . "_save\"])"; else $v9e394b2939 .= "\\\$_POST[\"{$pd98df87c}" . ($pd9468bf4 ? "_add" : "") . "_save\"]"; if ($v96882ae93d) $v9e394b2939 .= " || (\\\$has_delete_permission && \\\$_POST[\"{$pd98df87c}_delete\"])"; else $v9e394b2939 .= " || \\\$_POST[\"{$pd98df87c}_delete\"]"; $v9e394b2939 .= ") && \\\$_POST[\"multiple_selection\"][\"$pd98df87c\"]"; $v3bfe69f387[] = array( "result_var_name" => "", "action_type" => "group", "condition_type" => "execute_if_condition", "condition_value" => $v9e394b2939, "action_value" => array( "group_name" => "", "actions" => $paa5b12b3 ) ); } } if (!$pbf12ce85) { if ($pe63707fc && $pd034645f && !$pd9468bf4) { $v6d3990173e = $v9195465250["multiple_insert"]; $v256e3a39a7 = $v6d3990173e["ok_msg_type"] ? $v6d3990173e["ok_msg_type"] : "alert"; $v256e3a39a7 .= $v256e3a39a7 == "alert" ? "_msg" : "_ok_msg"; if ($v6d3990173e["ok_msg_redirect_url"]) $v256e3a39a7 .= "_and_redirect"; $v3bfe69f387[] = array( "result_var_name" => "", "action_type" => $v256e3a39a7, "condition_type" => "execute_if_condition", "condition_value" => "\\\$_POST[\"{$pd98df87c}_add\"] && \\\$insert_status" . ($pc4de8526 ? " && \\\$has_write_permission" : ""), "action_value" => array( "message" => $v6d3990173e["ok_msg_message"] ? $v6d3990173e["ok_msg_message"] : "New $v2f0e633d4c inserted successfully.", "redirect_url" => $v6d3990173e["ok_msg_redirect_url"] ) ); $v256e3a39a7 = $v6d3990173e["error_msg_type"] ? $v6d3990173e["error_msg_type"] : "alert"; $v256e3a39a7 .= $v256e3a39a7 == "alert" ? "_msg" : "_error_msg"; if ($v6d3990173e["error_msg_redirect_url"]) $v256e3a39a7 .= "_and_redirect"; if ($pc4de8526) $v3bfe69f387[] = array( "result_var_name" => "", "action_type" => $v256e3a39a7, "condition_type" => "execute_if_condition", "condition_value" => "\\\$_POST[\"{$pd98df87c}_add\"] && !\\\$has_write_permission", "action_value" => array( "message" => "Error: You do NOT have permission to insert $v2f0e633d4c items!", "redirect_url" => $v6d3990173e["error_msg_redirect_url"] ) ); $v3bfe69f387[] = array( "result_var_name" => "", "action_type" => $v256e3a39a7, "condition_type" => "execute_if_condition", "condition_value" => "\\\$_POST[\"{$pd98df87c}_add\"] && !\\\$insert_status" . ($pc4de8526 ? " && \\\$has_write_permission" : ""), "action_value" => array( "message" => $v6d3990173e["error_msg_message"] ? $v6d3990173e["error_msg_message"] : "Error: $v2f0e633d4c was not inserted!", "redirect_url" => $v6d3990173e["error_msg_redirect_url"] ) ); } else if ($pcf16d5d9 && $v6d74d31ea3 && !$pd9468bf4) { $v6d3990173e = $v9195465250["multiple_update"]; $v256e3a39a7 = $v6d3990173e["ok_msg_type"] ? $v6d3990173e["ok_msg_type"] : "alert"; $v256e3a39a7 .= $v256e3a39a7 == "alert" ? "_msg" : "_ok_msg"; if ($v6d3990173e["ok_msg_redirect_url"]) $v256e3a39a7 .= "_and_redirect"; $v3bfe69f387[] = array( "result_var_name" => "", "action_type" => $v256e3a39a7, "condition_type" => "execute_if_condition", "condition_value" => "\\\$_POST[\"{$pd98df87c}_save\"] && \\\$update_status" . ($pc4de8526 ? " && \\\$has_write_permission" : ""), "action_value" => array( "message" => $v6d3990173e["ok_msg_message"] ? $v6d3990173e["ok_msg_message"] : "$v2f0e633d4c saved successfully.", "redirect_url" => $v6d3990173e["ok_msg_redirect_url"] ) ); $v256e3a39a7 = $v6d3990173e["error_msg_type"] ? $v6d3990173e["error_msg_type"] : "alert"; $v256e3a39a7 .= $v256e3a39a7 == "alert" ? "_msg" : "_error_msg"; if ($v6d3990173e["error_msg_redirect_url"]) $v256e3a39a7 .= "_and_redirect"; if ($pc4de8526) $v3bfe69f387[] = array( "result_var_name" => "", "action_type" => $v256e3a39a7, "condition_type" => "execute_if_condition", "condition_value" => "\\\$_POST[\"{$pd98df87c}_save\"] && !\\\$has_write_permission", "action_value" => array( "message" => "Error: You do NOT have permission to save $v2f0e633d4c items!", "redirect_url" => $v6d3990173e["error_msg_redirect_url"] ) ); $v3bfe69f387[] = array( "result_var_name" => "", "action_type" => $v256e3a39a7, "condition_type" => "execute_if_condition", "condition_value" => "\\\$_POST[\"{$pd98df87c}_save\"] && !\\\$update_status" . ($pc4de8526 ? " && \\\$has_write_permission" : ""), "action_value" => array( "message" => $v6d3990173e["error_msg_message"] ? $v6d3990173e["error_msg_message"] : "Error: $v2f0e633d4c was not saved!", "redirect_url" => $v6d3990173e["error_msg_redirect_url"] ) ); } else if ($pcf16d5d9 && $pd9468bf4) { $v6d3990173e = $pd9468bf4 ? $v9195465250["multiple_insert_update"] : $v9195465250["multiple_update"]; $v256e3a39a7 = $v6d3990173e["ok_msg_type"] ? $v6d3990173e["ok_msg_type"] : "alert"; $v256e3a39a7 .= $v256e3a39a7 == "alert" ? "_msg" : "_ok_msg"; if ($v6d3990173e["ok_msg_redirect_url"]) $v256e3a39a7 .= "_and_redirect"; $v3bfe69f387[] = array( "result_var_name" => "", "action_type" => $v256e3a39a7, "condition_type" => "execute_if_condition", "condition_value" => "\\\$_POST[\"{$pd98df87c}_add_save\"] && (\\\$_POST[\"multiple_selection\"][\"$pd98df87c\"] || \\\$_POST[\"multiple_insert_selection\"][\"$pd98df87c\"]) && (!\\\$_POST[\"multiple_selection\"][\"$pd98df87c\"] || \\\$update_status) && (!\\\$_POST[\"multiple_insert_selection\"][\"$pd98df87c\"] || \\\$insert_status)" . ($pc4de8526 ? " && \\\$has_write_permission" : ""), "action_value" => array( "message" => $v6d3990173e["ok_msg_message"] ? $v6d3990173e["ok_msg_message"] : "$v2f0e633d4c saved successfully.", "redirect_url" => $v6d3990173e["ok_msg_redirect_url"] ) ); $v256e3a39a7 = $v6d3990173e["error_msg_type"] ? $v6d3990173e["error_msg_type"] : "alert"; $v256e3a39a7 .= $v256e3a39a7 == "alert" ? "_msg" : "_error_msg"; if ($v6d3990173e["error_msg_redirect_url"]) $v256e3a39a7 .= "_and_redirect"; if ($pc4de8526) $v3bfe69f387[] = array( "result_var_name" => "", "action_type" => $v256e3a39a7, "condition_type" => "execute_if_condition", "condition_value" => "\\\$_POST[\"{$pd98df87c}_add_save\"] && !\\\$has_write_permission", "action_value" => array( "message" => "Error: You do NOT have permission to save $v2f0e633d4c items!", "redirect_url" => $v6d3990173e["error_msg_redirect_url"] ) ); $v3bfe69f387[] = array( "result_var_name" => "", "action_type" => $v256e3a39a7, "condition_type" => "execute_if_condition", "condition_value" => "\\\$_POST[\"{$pd98df87c}_add_save\"] && (\\\$_POST[\"multiple_selection\"][\"$pd98df87c\"] || \\\$_POST[\"multiple_insert_selection\"][\"$pd98df87c\"]) && (!\\\$_POST[\"multiple_selection\"][\"$pd98df87c\"] || !\\\$update_status) && (!\\\$_POST[\"multiple_insert_selection\"][\"$pd98df87c\"] || !\\\$insert_status)" . ($pc4de8526 ? " && \\\$has_write_permission" : ""), "action_value" => array( "message" => $v6d3990173e["error_msg_message"] ? $v6d3990173e["error_msg_message"] : "Error: $v2f0e633d4c was not saved!", "redirect_url" => $v6d3990173e["error_msg_redirect_url"] ) ); } if ($v71361a0925 && $v00cddbe644) { $v6d3990173e = $v9195465250["multiple_delete"]; $v256e3a39a7 = $v6d3990173e["ok_msg_type"] ? $v6d3990173e["ok_msg_type"] : "alert"; $v256e3a39a7 .= $v256e3a39a7 == "alert" ? "_msg" : "_ok_msg"; if ($v6d3990173e["ok_msg_redirect_url"]) $v256e3a39a7 .= "_and_redirect"; $v3bfe69f387[] = array( "result_var_name" => "", "action_type" => $v256e3a39a7, "condition_type" => "execute_if_condition", "condition_value" => "\\\$_POST[\"$pd98df87c" . "_delete\"] && \\\$_POST[\"multiple_selection\"][\"$pd98df87c\"] && \\\$delete_status" . ($v96882ae93d ? " && \\\$has_delete_permission" : ""), "action_value" => array( "message" => $v6d3990173e["ok_msg_message"] ? $v6d3990173e["ok_msg_message"] : "$v2f0e633d4c deleted successfully.", "redirect_url" => $v6d3990173e["ok_msg_redirect_url"] ) ); $v256e3a39a7 = $v6d3990173e["error_msg_type"] ? $v6d3990173e["error_msg_type"] : "alert"; $v256e3a39a7 .= $v256e3a39a7 == "alert" ? "_msg" : "_error_msg"; if ($v6d3990173e["error_msg_redirect_url"]) $v256e3a39a7 .= "_and_redirect"; if ($v96882ae93d) $v3bfe69f387[] = array( "result_var_name" => "", "action_type" => $v256e3a39a7, "condition_type" => "execute_if_condition", "condition_value" => "\\\$_POST[\"{$pd98df87c}_delete\"] && !\\\$has_delete_permission", "action_value" => array( "message" => "Error: You do NOT have permission to delete $v2f0e633d4c items!", "redirect_url" => $v6d3990173e["error_msg_redirect_url"] ) ); $v3bfe69f387[] = array( "result_var_name" => "", "action_type" => $v256e3a39a7, "condition_type" => "execute_if_condition", "condition_value" => "\\\$_POST[\"$pd98df87c" . "_delete\"] && \\\$_POST[\"multiple_selection\"][\"$pd98df87c\"] && !\\\$delete_status" . ($v96882ae93d ? " && \\\$has_delete_permission" : ""), "action_value" => array( "message" => $v6d3990173e["error_msg_message"] ? $v6d3990173e["error_msg_message"] : "Error: $v2f0e633d4c was not deleted!", "redirect_url" => $v6d3990173e["error_msg_redirect_url"] ) ); } if ($pd034645f || $v6d74d31ea3 || $pd9468bf4 || $v00cddbe644) { $v1cab1cc36a = $pd9468bf4 ? $v9195465250["multiple_insert_update"] : ($v6d74d31ea3 ? $v9195465250["multiple_update"] : $v9195465250["multiple_insert"]); $v6715b024f9 = $v9195465250["multiple_delete"]; $v256e3a39a7 = $v1cab1cc36a["ok_msg_type"]; if (!$v256e3a39a7) { if ($v1cab1cc36a["error_msg_type"]) $v256e3a39a7 = $v1cab1cc36a["error_msg_type"]; else if ($v6715b024f9["ok_msg_type"]) $v256e3a39a7 = $v6715b024f9["ok_msg_type"]; else if ($v6715b024f9["error_msg_type"]) $v256e3a39a7 = $v6715b024f9["error_msg_type"]; } $v256e3a39a7 = $v6d3990173e["error_msg_type"] ? $v6d3990173e["error_msg_type"] : "alert"; $v256e3a39a7 .= $v256e3a39a7 == "alert" ? "_msg" : "_error_msg"; $v9e394b2939 = ""; if ($pd9468bf4) $v9e394b2939 = "(\\\$_POST[\"{$pd98df87c}_add_save\"] && !\\\$_POST[\"multiple_selection\"][\"$pd98df87c\"] && !\\\$_POST[\"multiple_insert_selection\"][\"$pd98df87c\"])"; else if ($v6d74d31ea3) $v9e394b2939 = "(\\\$_POST[\"{$pd98df87c}_save\"] && !\\\$_POST[\"multiple_selection\"][\"$pd98df87c\"])"; else if ($pd034645f) $v9e394b2939 = "(\\\$_POST[\"{$pd98df87c}_add\"] && !\\\$_POST[\"multiple_insert_selection\"][\"$pd98df87c\"])"; if ($v00cddbe644) $v9e394b2939 .= ($v9e394b2939 ? " || " : "") . "(\\\$_POST[\"$pd98df87c" . "_delete\"] && !\\\$_POST[\"multiple_selection\"][\"$pd98df87c\"])"; $v3bfe69f387[] = array( "result_var_name" => "", "action_type" => $v256e3a39a7, "condition_type" => "execute_if_condition", "condition_value" => $v9e394b2939, "action_value" => array( "message" => "Please select some items first!", ) ); } } if ($pe63707fc || $pcf16d5d9 || $v71361a0925) $v1ccd95046e[] = array( "result_var_name" => "", "action_type" => "group", "condition_type" => "execute_if_condition", "condition_value" => "\\\$_POST[\"$pd98df87c\"]", "action_value" => array( "group_name" => "", "actions" => $v3bfe69f387 ) ); } if ($v9deec980f6 || $v74a3339c59) { if ($pa8b4b2c5 && (!$v9deec980f6 || !$v9deec980f6["brokers_layer_type"])) { $ped0a6251 = array(); foreach ($pfdbbc383 as $v1b0cfa478b) $ped0a6251[] = array("column" => $v1b0cfa478b); $v3c76382d93 = DB::buildDefaultTableFindRelationshipSQL($v8c5df8072b, array( "keys" => self::me35a62138a27($pac4bc40a, $v8c5df8072b, $v442e28b3c7), "attributes" => $ped0a6251, "conditions" => $paf1bc6f6, )); self::me9970753b3ec($v3c76382d93); $v9deec980f6 = array( "brokers_layer_type" => "select", "dal_broker" => $v4c8e54c3e3, "db_driver" => $v872f5b4dbb, "db_type" => $v3fb9f41470, "sql" => $v3c76382d93, ); if ($v9f3ec7f561) { $v9deec980f6["options_type"] = "array"; $v9deec980f6["options"] = array( "start" => "#" . $pd7bfd6f7 . "_parameters[options][start]#", "limit" => "#" . $pd7bfd6f7 . "_parameters[options][limit]#", ); } } else if ($v9deec980f6) { if ($v9f3ec7f561) { $v9acf40c110 = $pabde73f0; $v9acf40c110["start_row"] = "#" . $pd7bfd6f7 . "_parameters[options][start]#"; $v9acf40c110["rows_per_page"] = "#" . $pd7bfd6f7 . "_parameters[options][limit]#"; self::mb47ebce07865($pd7bfd6f7, $v9deec980f6, $v9acf40c110); } if ($paf1bc6f6) self::addConditionsToBrokerSettings($v9deec980f6, $paf1bc6f6, $v442e28b3c7); } if ($v9deec980f6) { self::prepareBrokerSettings($v9deec980f6, $pab752e34, $pb09c0b5b, $v872f5b4dbb, $v8b13fa2358, $pac4bc40a); if ($v9f3ec7f561) { $v3103ca799e = true; if (!$v15f3268002 || !$v15f3268002["brokers_layer_type"]) { $v3c76382d93 = DB::buildDefaultTableCountRelationshipSQL($v8c5df8072b, array( "keys" => self::me35a62138a27($pac4bc40a, $v8c5df8072b, $v442e28b3c7), "conditions" => $paf1bc6f6, )); self::me9970753b3ec($v3c76382d93); $v15f3268002 = array( "brokers_layer_type" => "select", "dal_broker" => $v4c8e54c3e3, "db_driver" => $v872f5b4dbb, "db_type" => $v3fb9f41470, "sql" => $v3c76382d93, ); } else { if ($paf1bc6f6) self::addConditionsToBrokerSettings($v15f3268002, $paf1bc6f6, $v442e28b3c7); } self::prepareBrokerSettings($v15f3268002, $pab752e34, $pb09c0b5b, $v872f5b4dbb, $v8b13fa2358, $pac4bc40a); $v1ccd95046e[] = array( "result_var_name" => $pd7bfd6f7 . "_current_page", "action_type" => "variable", "condition_type" => "execute_always", "condition_value" => "", "action_value" => '$_GET["' . $pd7bfd6f7 . '_current_page"]' ); $v1ccd95046e[] = array( "result_var_name" => $pd7bfd6f7 . "_pagination_start", "action_type" => "callobjectmethod", "condition_type" => "execute_always", "condition_value" => "", "action_description" => "", "action_value" => array( "method_obj" => "PaginationHandler", "method_name" => "getStartValue", "method_static" => 1, "method_args" => array('$_GET["' . $pd7bfd6f7 . '_current_page"]', $v19429f8570) ) ); $v1ccd95046e[] = array( "result_var_name" => $pd7bfd6f7 . "_parameters", "action_type" => "array", "condition_type" => "execute_always", "condition_value" => "", "action_value" => array( "options" => array( "limit" => $v19429f8570, "start" => "#" . $pd7bfd6f7 . "_pagination_start#" ) ) ); $v1ccd95046e[] = array( "result_var_name" => $pd7bfd6f7 . "_rows_per_page", "action_type" => "variable", "condition_type" => "execute_always", "condition_value" => "", "action_value" => "#" . $pd7bfd6f7 . "_parameters[options][limit]#" ); $v1ccd95046e[] = array( "result_var_name" => $pd7bfd6f7 . "_count", "action_type" => $v15f3268002["brokers_layer_type"], "condition_type" => "execute_always", "condition_value" => '', "action_value" => $v15f3268002 ); if ($v15f3268002["brokers_layer_type"] == "select" || $v15f3268002["brokers_layer_type"] == "callibatisquery" || $v15f3268002["brokers_layer_type"] == "getquerydata" || ( $v15f3268002["brokers_layer_type"] == "callhibernatemethod" && ( ($v15f3268002["service_method"] == "callQuery" && $v15f3268002["sma_query_type"] == "select") || $v15f3268002["service_method"] == "callSelect" ) ) ) $v1ccd95046e[] = array( "result_var_name" => $pd7bfd6f7 . "_count", "action_type" => "variable", "condition_type" => "execute_if_var", "condition_value" => $pd7bfd6f7 . "_count", "action_value" => "#" . $pd7bfd6f7 . "_count[0][total]#" ); } $v1ccd95046e[] = array( "result_var_name" => $pd7bfd6f7, "action_type" => $v9deec980f6["brokers_layer_type"], "condition_type" => "execute_always", "condition_value" => '', "action_value" => $v9deec980f6 ); if ($v9deec980f6["brokers_layer_type"] == "callhibernatemethod" && $v9deec980f6["service_method"] == "find") { $v067674f4e4 = self::f58aba253ab($pd7bfd6f7); $v1ccd95046e[] = array( "result_var_name" => "", "action_type" => "code", "condition_type" => "execute_always", "condition_value" => "", "action_value" => $v067674f4e4 ); } $v067674f4e4 = self::f1a0f95fcd7($pac4bc40a, $v8c5df8072b, $pd7bfd6f7, $pfdbbc383); if ($v067674f4e4) $v1ccd95046e[] = array( "result_var_name" => "", "action_type" => "code", "condition_type" => "execute_if_var", "condition_value" => $pd7bfd6f7, "action_value" => $v067674f4e4 ); } } if (!$pbf12ce85 && $pa8b4b2c5) { $v7c8ff7f955 = "list-items" . ($v94682778e5 ? " $v94682778e5" : ""); if ($pb3f8356a == "list_table") { if ($pdd058476 == "ptl") $v1ccd95046e[] = array( "result_var_name" => $v516837ee42 ? $v516837ee42 . "[]" : ($pbf12ce85 ? $pd7bfd6f7 . "_list_html" : ""), "action_type" => "html", "condition_type" => "execute_always", "condition_value" => "", "action_value" => array( "ptl" => array( "code" => self::f7bbfd622d1($pac4bc40a, $v8c5df8072b, $pd98df87c, $v2f0e633d4c, $pd7bfd6f7, $pfdbbc383, $pe2f18119, $pe54f8a0f, $pd81f7df7, $v9195465250, $peecef390, $pabde73f0, $v7c8ff7f955, $v768b231eba), ) ) ); else $v1ccd95046e[] = array( "result_var_name" => $v516837ee42 ? $v516837ee42 . "[]" : ($pbf12ce85 ? $pd7bfd6f7 . "_list_html" : ""), "action_type" => "html", "condition_type" => "execute_always", "condition_value" => "", "action_value" => self::f196855e92f($pac4bc40a, $v8c5df8072b, $pd98df87c, $v2f0e633d4c, $pd7bfd6f7, $pfdbbc383, $pe2f18119, $pe54f8a0f, $pd81f7df7, $v9195465250, $peecef390, $pabde73f0, $v7c8ff7f955, $v768b231eba) ); } else { if ($pdd058476 == "ptl") $v1ccd95046e[] = array( "result_var_name" => $v516837ee42 ? $v516837ee42 . "[]" : ($pbf12ce85 ? $pd7bfd6f7 . "_list_html" : ""), "action_type" => "html", "condition_type" => "execute_always", "condition_value" => "", "action_value" => array( "ptl" => array( "code" => self::f5eb7ed3d12($pac4bc40a, $v8c5df8072b, $pd98df87c, $v2f0e633d4c, $pd7bfd6f7, $pfdbbc383, $pe2f18119, $pe54f8a0f, $pd81f7df7, $v9195465250, $peecef390, $pabde73f0, $v7c8ff7f955, $v768b231eba), ) ) ); else $v1ccd95046e[] = array( "result_var_name" => $v516837ee42 ? $v516837ee42 . "[]" : ($pbf12ce85 ? $pd7bfd6f7 . "_list_html" : ""), "action_type" => "html", "condition_type" => "execute_always", "condition_value" => "", "action_value" => self::mec0957c1c7ad($pac4bc40a, $v8c5df8072b, $pd98df87c, $v2f0e633d4c, $pd7bfd6f7, $pfdbbc383, $pe2f18119, $pe54f8a0f, $pd81f7df7, $v9195465250, $peecef390, $pabde73f0, $v7c8ff7f955, $v768b231eba) ); } $v1ccd95046e[] = array( "result_var_name" => $v516837ee42 ? $v516837ee42 . "[]" : ($pbf12ce85 ? $pd7bfd6f7 . "_empty_message" : ""), "action_type" => "code", "condition_type" => "execute_if_not_var", "condition_value" => $pd7bfd6f7, "action_value" => '"<div class=\"error\">There are no ' . self::getName($pd7bfd6f7) . '...</div>"' ); } } if ($pb3f8356a == "multiple_form" || $pb3f8356a == "single_form" || $pbf12ce85) { $v003495805d = ($v4cb12d6d8e || ($v9195465250["single_insert"] && $v74a3339c59)) && !$v9195465250["single_insert"]["action_type"] && !$v9195465250["multiple_insert"] && !$v9195465250["multiple_insert_update"]; $v78fe946022 = ($v6e99d5dea0 || ($v9195465250["single_update"] && $v74a3339c59)) && !$v9195465250["single_update"]["action_type"] && !$v9195465250["multiple_update"] && !$v9195465250["multiple_insert_update"]; $v3628a140b9 = ($v74cb39e604 || ($v9195465250["single_delete"] && $v74a3339c59)) && !$v9195465250["single_delete"]["action_type"] && (!$v9195465250["multiple_delete"] || !$pbf12ce85); if ($v003495805d || $v78fe946022 || $v3628a140b9) { $v1ccd95046e[] = array( "result_var_name" => $pd98df87c, "action_type" => "variable", "condition_type" => "execute_always", "condition_value" => "", "action_value" => '#_POST[' . $pd98df87c . ']#' ); if ($pbf12ce85) $v1ccd95046e[] = array( "result_var_name" => "data", "action_type" => "variable", "condition_type" => "execute_always", "condition_value" => "", "action_value" => "#$pd98df87c#" ); if ($pc4de8526 && ($v003495805d || $v78fe946022)) $v1ccd95046e[] = array( "result_var_name" => "has_write_permission", "action_type" => "check_logged_user_permissions", "condition_type" => "execute_if_condition", "condition_value" => "\\\$_POST", "action_value" => array( "all_permissions_checked" => 0, "entity_path" => "\"\" . \$entity_path . \"\"", "logged_user_id" => "\"\" . \$GLOBALS[\"logged_user_id\"] . \"\"", "users_perms" => $pc4de8526 ) ); if ($v96882ae93d && $v3628a140b9) $v1ccd95046e[] = array( "result_var_name" => "has_delete_permission", "action_type" => "check_logged_user_permissions", "condition_type" => "execute_if_condition", "condition_value" => "\\\$_POST", "action_value" => array( "all_permissions_checked" => 0, "entity_path" => "\"\" . \$entity_path . \"\"", "logged_user_id" => "\"\" . \$GLOBALS[\"logged_user_id\"] . \"\"", "users_perms" => $v96882ae93d ) ); if ($v003495805d) { $v6d3990173e = $v9195465250["single_insert"]; $v6e03bea0b0 = array(); if (!$v4cb12d6d8e || !$v4cb12d6d8e["brokers_layer_type"]) { $ped0a6251 = array(); foreach ($pfdbbc383 as $v1b0cfa478b) if (!in_array($v1b0cfa478b, $pe54f8a0f)) $ped0a6251[] = array("column" => $v1b0cfa478b, "value" => '#' . $pd98df87c . '[' . $v1b0cfa478b . ']#'); $v4cb12d6d8e = array( "brokers_layer_type" => "insert", "dal_broker" => $v4c8e54c3e3, "db_driver" => $v872f5b4dbb, "db_type" => $v3fb9f41470, "table" => $v8c5df8072b, "attributes" => $ped0a6251 ); } else self::mbe068676c484($v8c5df8072b, $pd98df87c, $v4cb12d6d8e, '$_POST'); self::prepareBrokerSettings($v4cb12d6d8e, $pab752e34, $pb09c0b5b, $v872f5b4dbb, $v8b13fa2358, $pac4bc40a); $v067674f4e4 = self::f0dec7450c7($pac4bc40a, $v8c5df8072b, $pd98df87c, $pfdbbc383, $v4cb12d6d8e, $pecad7cca); if ($v067674f4e4) $v6e03bea0b0[] = array( "result_var_name" => "", "action_type" => "code", "condition_type" => "execute_always", "condition_value" => "", "action_value" => $v067674f4e4 ); $v6e03bea0b0[] = array( "result_var_name" => $pd98df87c . "_status", "action_type" => $v4cb12d6d8e["brokers_layer_type"], "condition_type" => "execute_always", "condition_value" => "", "action_value" => $v4cb12d6d8e ); $v4e9e6cbc72 = null; $v067674f4e4 = self::mcfcf1f6200e9($pd98df87c, $v4cb12d6d8e, $pe54f8a0f, $pecad7cca, $pab752e34, $pb09c0b5b, $v872f5b4dbb, $v8b13fa2358, $v4e9e6cbc72, true); if ($v067674f4e4) { if ($v4e9e6cbc72) $v6e03bea0b0[] = array( "result_var_name" => $v4e9e6cbc72, "action_type" => "variable", "condition_type" => "execute_always", "condition_value" => "", "action_value" => '$' . $v4e9e6cbc72 ); $v6e03bea0b0[] = array( "result_var_name" => "", "action_type" => "code", "condition_type" => "execute_if_var", "condition_value" => $pd98df87c . "_status", "action_value" => $v067674f4e4 ); } if (!$pbf12ce85) { $v256e3a39a7 = $v6d3990173e["ok_msg_type"] ? $v6d3990173e["ok_msg_type"] : "alert"; $v256e3a39a7 .= $v256e3a39a7 == "alert" ? "_msg" : "_ok_msg"; if ($v6d3990173e["ok_msg_redirect_url"]) $v256e3a39a7 .= "_and_redirect"; $v6e03bea0b0[] = array( "result_var_name" => "", "action_type" => $v256e3a39a7, "condition_type" => "execute_if_var", "condition_value" => $pd98df87c . "_status", "action_value" => array( "message" => $v6d3990173e["ok_msg_message"] ? $v6d3990173e["ok_msg_message"] : "New $v2f0e633d4c inserted successfully.", "redirect_url" => self::f255f43e683($v6d3990173e["ok_msg_redirect_url"], $pd98df87c, $pe2f18119, $pe54f8a0f, $v4cb12d6d8e) ) ); $v256e3a39a7 = $v6d3990173e["error_msg_type"] ? $v6d3990173e["error_msg_type"] : "alert"; $v256e3a39a7 .= $v256e3a39a7 == "alert" ? "_msg" : "_error_msg"; if ($v6d3990173e["error_msg_redirect_url"]) $v256e3a39a7 .= "_and_redirect"; $v2cf6e7314c = $v256e3a39a7; $pfebb7fff = self::f255f43e683($v6d3990173e["error_msg_redirect_url"], $pd98df87c, $pe2f18119, $pe54f8a0f, $v4cb12d6d8e); $v6e03bea0b0[] = array( "result_var_name" => "", "action_type" => $v2cf6e7314c, "condition_type" => "execute_if_not_var", "condition_value" => $pd98df87c . "_status", "action_value" => array( "message" => $v6d3990173e["error_msg_message"] ? $v6d3990173e["error_msg_message"] : "Error: $v2f0e633d4c was not inserted!", "redirect_url" => $pfebb7fff ) ); } else $v6e03bea0b0[] = array( "result_var_name" => "", "action_type" => "code", "condition_type" => "execute_always", "condition_value" => "", "action_value" => "'<?
\$data = \${$pd98df87c};
\$data[\"{$pd98df87c}_status\"] = \${$pd98df87c}_status;
?>'" ); $v1ccd95046e[] = array( "result_var_name" => "", "action_type" => "group", "condition_type" => "execute_if_condition", "condition_value" => "\\\$_POST[\"{$pd98df87c}_add\"]" . ($pc4de8526 ? " && \\\$has_write_permission" : ""), "action_value" => array( "group_name" => "", "actions" => $v6e03bea0b0 ) ); if (!$pbf12ce85 && $pc4de8526) $v1ccd95046e[] = array( "result_var_name" => "", "action_type" => $v2cf6e7314c, "condition_type" => "execute_if_condition", "condition_value" => "\\\$_POST[\"{$pd98df87c}_add\"] && !\\\$has_write_permission", "action_value" => array( "message" => "Error: You do NOT have permission to insert this $v2f0e633d4c!", "redirect_url" => $pfebb7fff ) ); } if ($v78fe946022) { $v6d3990173e = $v9195465250["single_update"]; $v6e03bea0b0 = array(); if (!$v6e99d5dea0 || !$v6e99d5dea0["brokers_layer_type"]) { $ped0a6251 = array(); foreach ($pfdbbc383 as $v1b0cfa478b) if (!in_array($v1b0cfa478b, $pe54f8a0f)) $ped0a6251[] = array("column" => $v1b0cfa478b, "value" => '#' . $pd98df87c . '[' . $v1b0cfa478b . ']#'); $pa96c9a0d = array(); foreach ($pe2f18119 as $v597dd8d456) $pa96c9a0d[] = array("column" => $v597dd8d456, "value" => '#' . $pd98df87c . '[' . $v597dd8d456 . ']#'); $v6e99d5dea0 = array( "brokers_layer_type" => "update", "dal_broker" => $v4c8e54c3e3, "db_driver" => $v872f5b4dbb, "db_type" => $v3fb9f41470, "table" => $v8c5df8072b, "attributes" => $ped0a6251, "conditions" => $pa96c9a0d ); } else self::mbe068676c484($v8c5df8072b, $pd98df87c, $v6e99d5dea0, '$_POST'); if (!$v870662249d || !$v870662249d["brokers_layer_type"]) { $ped0a6251 = array(); foreach ($pe2f18119 as $v597dd8d456) $ped0a6251[] = array("column" => $v597dd8d456, "value" => '#' . $pd98df87c . '[new_' . $v597dd8d456 . ']#'); $pa96c9a0d = array(); foreach ($pe2f18119 as $v597dd8d456) $pa96c9a0d[] = array("column" => $v597dd8d456, "value" => '#' . $pd98df87c . '[old_' . $v597dd8d456 . ']#'); $v870662249d = array( "brokers_layer_type" => "update", "dal_broker" => $v4c8e54c3e3, "db_driver" => $v872f5b4dbb, "db_type" => $v3fb9f41470, "table" => $v8c5df8072b, "attributes" => $ped0a6251, "conditions" => $pa96c9a0d ); } else self::mbe068676c484($v8c5df8072b, $pd98df87c, $v870662249d, '$_POST'); self::prepareBrokerSettings($v6e99d5dea0, $pab752e34, $pb09c0b5b, $v872f5b4dbb, $v8b13fa2358, $pac4bc40a); self::prepareBrokerSettings($v870662249d, $pab752e34, $pb09c0b5b, $v872f5b4dbb, $v8b13fa2358, $pac4bc40a); $v067674f4e4 = self::f8494219158($pac4bc40a, $v8c5df8072b, $pd98df87c, $pfdbbc383, $pe2f18119, $v6e99d5dea0, $pecad7cca); if ($v067674f4e4) $v6e03bea0b0[] = array( "result_var_name" => "", "action_type" => "code", "condition_type" => "execute_always", "condition_value" => "", "action_value" => $v067674f4e4 ); $pee844da2 = '\\$_POST["' . $pd98df87c . '_save_pks"]'; foreach ($pe2f18119 as $v597dd8d456) $pee844da2 .= ' && \\$' . $pd98df87c . '["old_' . $v597dd8d456 . '"] && \\$' . $pd98df87c . '["new_' . $v597dd8d456 . '"]'; $v6e03bea0b0[] = array( "result_var_name" => $pd98df87c . "_status", "action_type" => $v870662249d["brokers_layer_type"], "condition_type" => "execute_if_condition", "condition_value" => $pee844da2, "action_value" => $v870662249d ); $pee844da2 = '(!\\$_POST["' . $pd98df87c . '_save_pks"] || \\$' . $pd98df87c . '_status)'; foreach ($pe2f18119 as $v597dd8d456) $pee844da2 .= ' && \\$' . $pd98df87c . '["' . $v597dd8d456 . '"]'; $v6e03bea0b0[] = array( "result_var_name" => $pd98df87c . "_status", "action_type" => $v6e99d5dea0["brokers_layer_type"], "condition_type" => "execute_if_condition", "condition_value" => $pee844da2, "action_value" => $v6e99d5dea0 ); if (!$pbf12ce85) { $v256e3a39a7 = $v6d3990173e["ok_msg_type"] ? $v6d3990173e["ok_msg_type"] : "alert"; $v256e3a39a7 .= $v256e3a39a7 == "alert" ? "_msg" : "_ok_msg"; if ($v6d3990173e["ok_msg_redirect_url"]) $v256e3a39a7 .= "_and_redirect"; $v6e03bea0b0[] = array( "result_var_name" => "", "action_type" => $v256e3a39a7, "condition_type" => "execute_if_var", "condition_value" => $pd98df87c . "_status", "action_value" => array( "message" => $v6d3990173e["ok_msg_message"] ? $v6d3990173e["ok_msg_message"] : "$v2f0e633d4c saved successfully.", "redirect_url" => self::f2a59cb0442($v6d3990173e["ok_msg_redirect_url"], $pd98df87c, $pe2f18119, true) ) ); $v256e3a39a7 = $v6d3990173e["error_msg_type"] ? $v6d3990173e["error_msg_type"] : "alert"; $v256e3a39a7 .= $v256e3a39a7 == "alert" ? "_msg" : "_error_msg"; if ($v6d3990173e["error_msg_redirect_url"]) $v256e3a39a7 .= "_and_redirect"; $pd951664b = $v256e3a39a7; $paa8f6e5f = self::f2a59cb0442($v6d3990173e["error_msg_redirect_url"], $pd98df87c, $pe2f18119, false); $v6e03bea0b0[] = array( "result_var_name" => "", "action_type" => $pd951664b, "condition_type" => "execute_if_not_var", "condition_value" => $pd98df87c . "_status", "action_value" => array( "message" => $v6d3990173e["error_msg_message"] ? $v6d3990173e["error_msg_message"] : "Error: $v2f0e633d4c was not saved!", "redirect_url" => $paa8f6e5f ) ); } else $v6e03bea0b0[] = array( "result_var_name" => "", "action_type" => "code", "condition_type" => "execute_always", "condition_value" => "", "action_value" => "'<?
\$data = \${$pd98df87c};
\$data[\"{$pd98df87c}_status\"] = \${$pd98df87c}_status;
?>'" ); $v1ccd95046e[] = array( "result_var_name" => "", "action_type" => "group", "condition_type" => "execute_if_condition", "condition_value" => "\\\$_POST[\"{$pd98df87c}_save\"]" . ($pc4de8526 ? " && \\\$has_write_permission" : ""), "action_value" => array( "group_name" => "", "actions" => $v6e03bea0b0 ) ); if (!$pbf12ce85 && $pc4de8526) $v1ccd95046e[] = array( "result_var_name" => "", "action_type" => $pd951664b, "condition_type" => "execute_if_condition", "condition_value" => "\\\$_POST[\"{$pd98df87c}_save\"] && !\\\$has_write_permission", "action_value" => array( "message" => "Error: You do NOT have permission to update this $v2f0e633d4c!", "redirect_url" => $paa8f6e5f ) ); } if ($v3628a140b9) { $v6d3990173e = $v9195465250["single_delete"]; $v6e03bea0b0 = array(); if (!$v74cb39e604 || !$v74cb39e604["brokers_layer_type"]) { $pa96c9a0d = array(); foreach ($pe2f18119 as $v597dd8d456) $pa96c9a0d[] = array("column" => $v597dd8d456, "value" => '#' . $pd98df87c . '[' . $v597dd8d456 . ']#'); $v74cb39e604 = array( "brokers_layer_type" => "delete", "dal_broker" => $v4c8e54c3e3, "db_driver" => $v872f5b4dbb, "db_type" => $v3fb9f41470, "table" => $v8c5df8072b, "conditions" => $pa96c9a0d ); } else self::mbe068676c484($v8c5df8072b, $pd98df87c, $v74cb39e604, '$_POST'); self::prepareBrokerSettings($v74cb39e604, $pab752e34, $pb09c0b5b, $v872f5b4dbb, $v8b13fa2358, $pac4bc40a); $v067674f4e4 = self::mfd4c6040039e($pd98df87c, $pe2f18119); if ($v067674f4e4) $v6e03bea0b0[] = array( "result_var_name" => "", "action_type" => "code", "condition_type" => "execute_always", "condition_value" => "", "action_value" => $v067674f4e4 ); $pee844da2 = ''; foreach ($pe2f18119 as $v597dd8d456) $pee844da2 .= ($pee844da2 ? ' && ' : '') . '\\$' . $pd98df87c . '["' . $v597dd8d456 . '"]'; $v6e03bea0b0[] = array( "result_var_name" => $pd98df87c . "_status", "action_type" => $v74cb39e604["brokers_layer_type"], "condition_type" => "execute_if_condition", "condition_value" => $pee844da2, "action_value" => $v74cb39e604 ); $v067674f4e4 = self::ma50ef2590cf8($pd98df87c, $pe2f18119); if ($v067674f4e4) $v6e03bea0b0[] = array( "result_var_name" => "", "action_type" => "code", "condition_type" => "execute_if_var", "condition_value" => $pd98df87c . "_status", "action_value" => $v067674f4e4 ); if (!$pbf12ce85) { $v256e3a39a7 = $v6d3990173e["ok_msg_type"] ? $v6d3990173e["ok_msg_type"] : "alert"; $v256e3a39a7 .= $v256e3a39a7 == "alert" ? "_msg" : "_ok_msg"; if ($v6d3990173e["ok_msg_redirect_url"]) $v256e3a39a7 .= "_and_redirect"; $v6e03bea0b0[] = array( "result_var_name" => "", "action_type" => $v256e3a39a7, "condition_type" => "execute_if_var", "condition_value" => $pd98df87c . "_status", "action_value" => array( "message" => $v6d3990173e["ok_msg_message"] ? $v6d3990173e["ok_msg_message"] : "$v2f0e633d4c deleted successfully.", "redirect_url" => self::f6d476eceae($v6d3990173e["ok_msg_redirect_url"], $pd98df87c, $pe2f18119) ) ); $v256e3a39a7 = $v6d3990173e["error_msg_type"] ? $v6d3990173e["error_msg_type"] : "alert"; $v256e3a39a7 .= $v256e3a39a7 == "alert" ? "_msg" : "_error_msg"; if ($v6d3990173e["error_msg_redirect_url"]) $v256e3a39a7 .= "_and_redirect"; $pafdafb80 = $v256e3a39a7; $pc4528355 = self::f6d476eceae($v6d3990173e["error_msg_redirect_url"], $pd98df87c, $pe2f18119); $v6e03bea0b0[] = array( "result_var_name" => "", "action_type" => $pafdafb80, "condition_type" => "execute_if_not_var", "condition_value" => $pd98df87c . "_status", "action_value" => array( "message" => $v6d3990173e["error_msg_message"] ? $v6d3990173e["error_msg_message"] : "Error: $v2f0e633d4c was not deleted!", "redirect_url" => $pc4528355 ) ); } else $v6e03bea0b0[] = array( "result_var_name" => "", "action_type" => "code", "condition_type" => "execute_always", "condition_value" => "", "action_value" => "'<?
\$data[\"{$pd98df87c}_status\"] = \${$pd98df87c}_status;
?>'" ); $v1ccd95046e[] = array( "result_var_name" => "", "action_type" => "group", "condition_type" => "execute_if_condition", "condition_value" => "\\\$_POST[\"{$pd98df87c}_delete\"]" . ($v96882ae93d ? " && \\\$has_delete_permission" : ""), "action_value" => array( "group_name" => "", "actions" => $v6e03bea0b0 ) ); if (!$pbf12ce85 && $v96882ae93d) $v1ccd95046e[] = array( "result_var_name" => "", "action_type" => $pafdafb80, "condition_type" => "execute_if_condition", "condition_value" => "\\\$_POST[\"{$pd98df87c}_delete\"] && !\\\$has_delete_permission", "action_value" => array( "message" => "Error: You do NOT have permission to delete this $v2f0e633d4c!", "redirect_url" => $pc4528355 ) ); } } $v2c7ef52a87 = 0; if ($pb3f8356a == "multiple_form") { if ($v9deec980f6 || $v74a3339c59) { $v8ed660d4a1 = $pd7bfd6f7 . "_record_index"; if (!$v9deec980f6 || !$v9deec980f6["brokers_layer_type"]) { $ped0a6251 = array(); foreach ($pfdbbc383 as $v1b0cfa478b) $ped0a6251[] = array("column" => $v1b0cfa478b); $v3c76382d93 = DB::buildDefaultTableFindRelationshipSQL($v8c5df8072b, array( "keys" => self::me35a62138a27($pac4bc40a, $v8c5df8072b, $v442e28b3c7), "attributes" => $ped0a6251, "conditions" => $paf1bc6f6, )); self::me9970753b3ec($v3c76382d93); $v9deec980f6 = array( "brokers_layer_type" => "select", "dal_broker" => $v4c8e54c3e3, "db_driver" => $v872f5b4dbb, "db_type" => $v3fb9f41470, "sql" => $v3c76382d93, "options_type" => "array", "options" => array( "start" => "#$v8ed660d4a1#", "limit" => "1", ), ); } else { $v9acf40c110 = $pabde73f0; $v9acf40c110["start_row"] = '$_GET["' . $v8ed660d4a1 . '"]'; $v9acf40c110["rows_per_page"] = 1; self::mb47ebce07865($pd7bfd6f7, $v9deec980f6, $v9acf40c110); if ($paf1bc6f6) self::addConditionsToBrokerSettings($v9deec980f6, $paf1bc6f6, $v442e28b3c7); } $v1ccd95046e[] = array( "result_var_name" => $v8ed660d4a1, "action_type" => "variable", "condition_type" => "execute_always", "condition_value" => '', "action_value" => "\"\" . (\$_GET[\"$v8ed660d4a1\"] > $v2c7ef52a87 ? \$_GET[\"$v8ed660d4a1\"] : $v2c7ef52a87) . \"\"" ); self::prepareBrokerSettings($v9deec980f6, $pab752e34, $pb09c0b5b, $v872f5b4dbb, $v8b13fa2358, $pac4bc40a); $v1ccd95046e[] = array( "result_var_name" => $pd7bfd6f7, "action_type" => $v9deec980f6["brokers_layer_type"], "condition_type" => "execute_always", "condition_value" => '', "action_value" => $v9deec980f6 ); if ($v9deec980f6["brokers_layer_type"] == "callhibernatemethod" && $v9deec980f6["service_method"] == "find") { $v067674f4e4 = self::f58aba253ab($pd7bfd6f7); $v1ccd95046e[] = array( "result_var_name" => "", "action_type" => "code", "condition_type" => "execute_always", "condition_value" => "", "action_value" => $v067674f4e4 ); } $v1ccd95046e[] = array( "result_var_name" => $pd98df87c, "action_type" => "return_specific_record", "condition_type" => "execute_always", "condition_value" => "", "action_value" => array( "records_variable_name" => $pd7bfd6f7, "index_variable_name" => 0 ) ); $v067674f4e4 = self::mec94a53cc185($pac4bc40a, $v8c5df8072b, $pd98df87c, $pfdbbc383); if ($v067674f4e4) $v1ccd95046e[] = array( "result_var_name" => "", "action_type" => "code", "condition_type" => "execute_if_var", "condition_value" => $pd98df87c, "action_value" => $v067674f4e4 ); if (!$v15f3268002 || !$v15f3268002["brokers_layer_type"]) { $v3c76382d93 = DB::buildDefaultTableCountRelationshipSQL($v8c5df8072b, array( "keys" => self::me35a62138a27($pac4bc40a, $v8c5df8072b, $v442e28b3c7), "conditions" => $paf1bc6f6, )); self::me9970753b3ec($v3c76382d93); $v15f3268002 = array( "brokers_layer_type" => "select", "dal_broker" => $v4c8e54c3e3, "db_driver" => $v872f5b4dbb, "db_type" => $v3fb9f41470, "sql" => $v3c76382d93, ); } else { if ($paf1bc6f6) self::addConditionsToBrokerSettings($v15f3268002, $paf1bc6f6, $v442e28b3c7); } self::prepareBrokerSettings($v15f3268002, $pab752e34, $pb09c0b5b, $v872f5b4dbb, $v8b13fa2358, $pac4bc40a); $v1ccd95046e[] = array( "result_var_name" => $pd7bfd6f7 . "_count", "action_type" => $v15f3268002["brokers_layer_type"], "condition_type" => "execute_always", "condition_value" => '', "action_value" => $v15f3268002 ); if ($v15f3268002["brokers_layer_type"] == "select" || $v15f3268002["brokers_layer_type"] == "callibatisquery" || $v15f3268002["brokers_layer_type"] == "getquerydata" || ( $v15f3268002["brokers_layer_type"] == "callhibernatemethod" && ( ($v15f3268002["service_method"] == "callQuery" && $v15f3268002["sma_query_type"] == "select") || $v15f3268002["service_method"] == "callSelect" ) ) ) $v1ccd95046e[] = array( "result_var_name" => $pd7bfd6f7 . "_count", "action_type" => "variable", "condition_type" => "execute_if_var", "condition_value" => $pd7bfd6f7 . "_count", "action_value" => "#" . $pd7bfd6f7 . "_count[0][total]#" ); } } else if ($v053b63d4d5 || $v74a3339c59) { $pd9c7fa54 = (!$v053b63d4d5 || !$v053b63d4d5["brokers_layer_type"]) && $pb3f8356a == "single_form" && (($v6e99d5dea0 || $v74cb39e604) || $v9195465250["get"]); if ($pd9c7fa54) { $ped0a6251 = array(); foreach ($pfdbbc383 as $v1b0cfa478b) $ped0a6251[] = array("column" => $v1b0cfa478b); $pa96c9a0d = $paf1bc6f6 ? $paf1bc6f6 : array(); foreach ($pe2f18119 as $v597dd8d456) { $v7959970a41 = false; if ($paf1bc6f6) foreach ($paf1bc6f6 as $pd69fb7d0 => $v9e394b2939) { $v0b9a4b86a0 = $v9e394b2939["column"]; $v0b9a4b86a0 = $v9e394b2939["table"] ? preg_replace("/^" . $v9e394b2939["table"] . "\./", "", $v0b9a4b86a0) : $v0b9a4b86a0; if (strtolower($v0b9a4b86a0) == strtolower($v597dd8d456)) { $pa96c9a0d[$pd69fb7d0] = array("column" => $v597dd8d456, "value" => $v9e394b2939["value"]); $v7959970a41 = true; break; } } if (!$v7959970a41) $pa96c9a0d[] = array("column" => $v597dd8d456, "value" => '#_GET[' . $v597dd8d456 . ']#'); } $v053b63d4d5 = array( "brokers_layer_type" => "select", "dal_broker" => $v4c8e54c3e3, "db_driver" => $v872f5b4dbb, "db_type" => $v3fb9f41470, "table" => $v8c5df8072b, "attributes" => $ped0a6251, "conditions" => $pa96c9a0d ); } else if ($v053b63d4d5) { self::me9970753b3ec($v053b63d4d5); if ($paf1bc6f6) self::addConditionsToGetBrokerSettings($v053b63d4d5, $paf1bc6f6); } if ($v053b63d4d5) { self::prepareBrokerSettings($v053b63d4d5, $pab752e34, $pb09c0b5b, $v872f5b4dbb, $v8b13fa2358, $pac4bc40a); $v1ccd95046e[] = array( "result_var_name" => $pd98df87c, "action_type" => $v053b63d4d5["brokers_layer_type"], "condition_type" => "execute_if_condition", "condition_value" => "\\\$_GET[\"" . implode("\"] && \\\$_GET[\"", $pe2f18119) . "\"]", "action_value" => $v053b63d4d5 ); if ($v053b63d4d5["brokers_layer_type"] == "callhibernatemethod" && ( $v053b63d4d5["service_method"] == "findById" || ($v053b63d4d5["service_method"] == "callQuery" && $v053b63d4d5["sma_query_type"] == "select") || $v053b63d4d5["service_method"] == "callSelect" )) { $v067674f4e4 = self::mc08d0548215f($pd98df87c); $v1ccd95046e[] = array( "result_var_name" => "", "action_type" => "code", "condition_type" => "execute_always", "condition_value" => "", "action_value" => $v067674f4e4 ); } else if ($v053b63d4d5["brokers_layer_type"] == "select" || $v053b63d4d5["brokers_layer_type"] == "callibatisquery" || $v053b63d4d5["brokers_layer_type"] == "getquerydata") $v1ccd95046e[] = array( "result_var_name" => $pd98df87c, "action_type" => "return_specific_record", "condition_type" => "execute_always", "condition_value" => "", "action_value" => array( "records_variable_name" => $pd98df87c, "index_variable_name" => 0 ) ); $v067674f4e4 = self::mec94a53cc185($pac4bc40a, $v8c5df8072b, $pd98df87c, $pfdbbc383); if ($v067674f4e4) $v1ccd95046e[] = array( "result_var_name" => "", "action_type" => "code", "condition_type" => "execute_if_var", "condition_value" => $pd98df87c, "action_value" => $v067674f4e4 ); } else if ((!$v053b63d4d5 || !$v053b63d4d5["brokers_layer_type"]) && $pb3f8356a == "single_form" && $v4cb12d6d8e && !$v6e99d5dea0 && !$v74cb39e604 && !$v9195465250["get"]) { $v067674f4e4 = self::f10b11f1bb8($pac4bc40a, $v8c5df8072b, $pfdbbc383); if ($v067674f4e4) $v1ccd95046e[] = array( "result_var_name" => $pd98df87c, "action_type" => "code", "condition_type" => "execute_if_not_var", "condition_value" => $pd98df87c, "action_value" => $v067674f4e4 ); } } if (!$pbf12ce85) { if ($pb3f8356a == "multiple_form") { $v3dad7bd9b0 = $v6e99d5dea0 || $v9195465250["single_update"] || $v74cb39e604 || $v9195465250["single_delete"] ? "edit-item" : "view-item"; if ($pdd058476 == "ptl") { $v067674f4e4 = self::f6a52c38c42($pac4bc40a, $v8c5df8072b, $pd98df87c, $v2f0e633d4c, $pfdbbc383, $pe2f18119, $pe54f8a0f, $pd81f7df7, $v9195465250, $peecef390, $v4cb12d6d8e, $v6e99d5dea0, $v74cb39e604, $v3dad7bd9b0, $v94682778e5, $v768b231eba); if ($v067674f4e4) $v1ccd95046e[] = array( "result_var_name" => $v516837ee42 ? $v516837ee42 . "[]" : "", "action_type" => "html", "condition_type" => "execute_always", "condition_value" => "", "action_value" => array( "ptl" => array( "code" => $v067674f4e4, ) ) ); } else { $v067674f4e4 = self::f54b3ad0754($pac4bc40a, $v8c5df8072b, $pd98df87c, $v2f0e633d4c, $pfdbbc383, $pe2f18119, $pe54f8a0f, $pd81f7df7, $v9195465250, $peecef390, $v4cb12d6d8e, $v6e99d5dea0, $v74cb39e604, $v3dad7bd9b0, $v94682778e5, $v768b231eba); if ($v067674f4e4) $v1ccd95046e[] = array( "result_var_name" => $v516837ee42 ? $v516837ee42 . "[]" : "", "action_type" => "html", "condition_type" => "execute_always", "condition_value" => "", "action_value" => $v067674f4e4 ); } $v1ccd95046e[] = array( "result_var_name" => $v516837ee42 ? $v516837ee42 . "[]" : "", "action_type" => "code", "condition_type" => "execute_if_not_var", "condition_value" => $pd98df87c, "action_value" => '"<div class=\"error\">' . $v2f0e633d4c . ' not found!</div>"' ); if ($pdd058476 == "ptl") $v1ccd95046e[] = array( "result_var_name" => $v516837ee42 ? $v516837ee42 . "[]" : "", "action_type" => "html", "condition_type" => "execute_if_var", "condition_value" => $pd98df87c, "action_value" => array( "ptl" => array( "code" => self::f07006271c9($pac4bc40a, $v8c5df8072b, $pd98df87c, $v2f0e633d4c, $pfdbbc383, $pe2f18119, $pe54f8a0f, $pd81f7df7, $v9195465250, $v4cb12d6d8e, $v6e99d5dea0, $v74cb39e604, $v3dad7bd9b0, $v94682778e5, $v768b231eba), ) ) ); else $v1ccd95046e[] = array( "result_var_name" => $v516837ee42 ? $v516837ee42 . "[]" : "", "action_type" => "html", "condition_type" => "execute_if_var", "condition_value" => $pd98df87c, "action_value" => self::f9a328022e6($pac4bc40a, $v8c5df8072b, $pd98df87c, $v2f0e633d4c, $pfdbbc383, $pe2f18119, $pe54f8a0f, $pd81f7df7, $v9195465250, $v4cb12d6d8e, $v6e99d5dea0, $v74cb39e604, $v3dad7bd9b0, $v94682778e5, $v768b231eba) ); $v33751cd2d7 = $pabde73f0["on_click_js_func"]; if ($v33751cd2d7) { $v91916c28b6 = "return $v33751cd2d7('{$pd7bfd6f7}_record_index', '<ptl:echo \\\$input[\"{$pd7bfd6f7}_record_index\"] &gt; $v2c7ef52a87 ? \\\$input[\"{$pd7bfd6f7}_record_index\"] - 1 : $v2c7ef52a87/>', 'prev', '$v768b231eba', this);"; $pa064f9ec = "return $v33751cd2d7('{$pd7bfd6f7}_record_index', '<ptl:echo (\\\$input[\"{$pd7bfd6f7}_record_index\"] + 1)/>', 'next', '$v768b231eba', this);"; } else { $v91916c28b6 = "return loadPageWithNewNavigation('{$pd7bfd6f7}_record_index', '<ptl:echo \\\$input[\"{$pd7bfd6f7}_record_index\"] &gt; $v2c7ef52a87 ? \\\$input[\"{$pd7bfd6f7}_record_index\"] - 1 : $v2c7ef52a87/>');"; $pa064f9ec = "return loadPageWithNewNavigation('{$pd7bfd6f7}_record_index', '<ptl:echo (\\\$input[\"{$pd7bfd6f7}_record_index\"] + 1)/>');"; } $v1ccd95046e[] = array( "result_var_name" => $v516837ee42 ? $v516837ee42 . "[]" : "", "action_type" => "html", "condition_type" => "execute_always", "condition_value" => "", "action_value" => array( "ptl" => array( "code" => "
<div class=\"buttons pagination-buttons\">
	<div class=\"button\">
		<input type=\"button\" <ptl:echo \\\$input[\"{$pd7bfd6f7}_record_index\"] &gt; $v2c7ef52a87 ? '' : 'class=\"button-hidden\"'/> value=\"Go to Previous Record\" onClick=\"$v91916c28b6\" />
	</div>
	<div class=\"button\">
		<input type=\"button\" <ptl:echo \\\$input[\"{$pd7bfd6f7}_record_index\"] + 1 &gt;= \\\$input['{$pd7bfd6f7}_count'] ? 'class=\"button-hidden\"' : '' /> value=\"Go to Next Record\" onClick=\"$pa064f9ec\" />
	</div>
</div>", ) ) ); } else if ($pb3f8356a == "single_form") { $v942eaa0cf0 = $v4cb12d6d8e || $v9195465250["single_insert"]; $v3dad7bd9b0 = $v6e99d5dea0 || $v9195465250["single_update"] || $v74cb39e604 || $v9195465250["single_delete"] ? "edit-item" : ($v942eaa0cf0 ? "add-item" : "view-item"); $v3dad7bd9b0 = trim("$v3dad7bd9b0 $v94682778e5"); if (!$v942eaa0cf0) $v1ccd95046e[] = array( "result_var_name" => $v516837ee42 ? $v516837ee42 . "[]" : "", "action_type" => "code", "condition_type" => "execute_if_not_var", "condition_value" => $pd98df87c, "action_value" => '"<div class=\"error\">' . $v2f0e633d4c . ' not found!</div>"' ); if ($pdd058476 == "ptl") $v1ccd95046e[] = array( "result_var_name" => $v516837ee42 ? $v516837ee42 . "[]" : "", "action_type" => "html", "condition_type" => $v942eaa0cf0 ? "execute_always" : "execute_if_var", "condition_value" => $v942eaa0cf0 ? "" : $pd98df87c, "action_value" => array( "ptl" => array( "code" => self::mf71b3b86a66d($pac4bc40a, $v8c5df8072b, $pd98df87c, $v2f0e633d4c, $pfdbbc383, $pe2f18119, $pe54f8a0f, $pd81f7df7, $v9195465250, $v4cb12d6d8e, $v6e99d5dea0, $v74cb39e604, $v3dad7bd9b0, $v768b231eba), ) ) ); else $v1ccd95046e[] = array( "result_var_name" => $v516837ee42 ? $v516837ee42 . "[]" : "", "action_type" => "html", "condition_type" => $v942eaa0cf0 ? "execute_always" : "execute_if_var", "condition_value" => $v942eaa0cf0 ? "" : $pd98df87c, "action_value" => self::f596452a821($pac4bc40a, $v8c5df8072b, $pd98df87c, $v2f0e633d4c, $pfdbbc383, $pe2f18119, $pe54f8a0f, $pd81f7df7, $v9195465250, $v4cb12d6d8e, $v6e99d5dea0, $v74cb39e604, $v3dad7bd9b0, $v768b231eba) ); } } } if ($v7f7bf6bca2) { $pf7d8e0a7 = array( "result_var_name" => $v516837ee42 ? $v516837ee42 . "[]" : "", "action_type" => "html", "condition_type" => "execute_always", "condition_value" => "", "action_value" => array( "ptl" => array( "code" => $v7f7bf6bca2 ) ) ); array_unshift($v1ccd95046e, $pf7d8e0a7); } if ($v1bec2e4b9e) $v1ccd95046e[] = array( "result_var_name" => $v516837ee42 ? $v516837ee42 . "[]" : "", "action_type" => "html", "condition_type" => "execute_always", "condition_value" => "", "action_value" => array( "ptl" => array( "code" => $v1bec2e4b9e ) ) ); if ($v3103ca799e) { $v0fe39a7bc1 = array( "result_var_name" => "", "action_type" => "include_file", "condition_type" => "execute_always", "condition_value" => "", "action_value" => array( "path" => 'LIB_PATH . "org/phpframework/util/web/html/pagination/PaginationHandler.php"', "once" => 1, ), ); array_unshift($v1ccd95046e, $v0fe39a7bc1); } if ($pbf12ce85) $v3f9d6e1a69[$v8c5df8072b] = self::getActionsSettingsVars($v1ccd95046e, $pd98df87c); $pae434d3a = array_merge($pae434d3a, $v1ccd95046e); } } if ($v3f9d6e1a69) { $v067674f4e4 = "'<?\n\$res = array(\n"; foreach ($v3f9d6e1a69 as $v8c5df8072b => $v761f4d757f) { $v566db8f5a9 = $v9a4a47d31e[$v8c5df8072b]; $pd98df87c = self::getParsedTableName($v566db8f5a9 ? $v566db8f5a9 : $v8c5df8072b); $v067674f4e4 .= "\t\"$pd98df87c\" => " . self::printActionsSettingsVars($v761f4d757f, "\t\t"); } $v067674f4e4 .= ");\necho json_encode(\$res);\n?>'"; $pae434d3a[] = array( "result_var_name" => "", "action_type" => "code", "condition_type" => "execute_always", "condition_value" => "", "action_value" => $v067674f4e4 ); } $v30d38c7973 = array( "actions" => $pae434d3a, "css" => $pbf12ce85 ? "" : ".field-hidden, .button-hidden {display:none;}", "js" => $peecef390, ); } $pfaf08f23->endUserGlobalVariables(); } } return $v30d38c7973; } public static function prepareAttributesSettingsWithRealAttributeNames(&$v563137f0b5, $pac4bc40a, $v8c5df8072b) { if ($v563137f0b5) { $pfdbbc383 = WorkFlowDBHandler::getTableFromTables($pac4bc40a, $v8c5df8072b); if ($pfdbbc383) { $v8401a3cfd4 = array(); foreach ($v563137f0b5 as $v7162e23723 => $v7d359dda50) { $pbcd4e150 = null; if (!isset($pfdbbc383[$v7162e23723])) { $v9bc59d9c66 = strtolower($v7162e23723); foreach ($pfdbbc383 as $v5e45ec9bb9 => $v1b0cfa478b) if (strtolower($v5e45ec9bb9) == $v9bc59d9c66) { $pbcd4e150 = $v5e45ec9bb9; break; } } if ($pbcd4e150) $v8401a3cfd4[$pbcd4e150] = $v7d359dda50; else $v8401a3cfd4[$v7162e23723] = $v7d359dda50; } $v563137f0b5 = $v8401a3cfd4; } } } public static function prepareAttributeAvailableValues(&$v1ccd95046e, &$v563137f0b5, $v74a3339c59, $v30857f7eca, $pac4bc40a, $v8c5df8072b, $v8710ac8f3f, $v4c8e54c3e3, $pab752e34, $pb09c0b5b, $v872f5b4dbb, $v8b13fa2358, $v3fb9f41470) { if ($v563137f0b5) { self::prepareAttributesSettingsWithRealAttributeNames($v563137f0b5, $pac4bc40a, $v8c5df8072b); foreach ($v563137f0b5 as $v7162e23723 => $v7d359dda50) { $v7d359dda50["link"] = trim($v7d359dda50["link"]); if (strlen($v7d359dda50["link"])) { $v7d359dda50["href"] = $v7d359dda50["link"]; $v7d359dda50["type"] = "link"; unset($v7d359dda50["link"]); $v563137f0b5[$v7162e23723] = $v7d359dda50; } $v9ffade7673 = array(); $v1cfba8c105 = ""; if ($v7d359dda50["list_type"] == "from_db" && $v7d359dda50["db_table"] && $v7d359dda50["db_attribute_label"]) { $v9d7547e4d6 = $v7d359dda50["db_table"]; $pcfa88533 = $v7d359dda50["db_attribute_label"]; $pa5bf6b39 = $v7d359dda50["db_attribute_fk"]; $pb35aef54 = array_key_exists("db_driver", $v7d359dda50) ? $v7d359dda50["db_driver"] : $v872f5b4dbb; $pc27e06a4 = array_key_exists("include_db_driver", $v7d359dda50) ? $v7d359dda50["include_db_driver"] : ($pb35aef54 && $pb35aef54 != $v872f5b4dbb ? true : $v8b13fa2358); $v9d44f52d01 = array_key_exists("db_type", $v7d359dda50) ? $v7d359dda50["db_type"] : $v3fb9f41470; if (!$pa5bf6b39) $pa5bf6b39 = self::mc49983541bff($pac4bc40a, $v8c5df8072b, $v7162e23723, $v9d7547e4d6); if ($pa5bf6b39) { $v63967fdd7c = trim($v7d359dda50["href"]); if (strlen($v63967fdd7c) && stripos($v63967fdd7c, "javascript:") !== 0) { $pc2defd39 = "$pa5bf6b39=#$v7162e23723#"; $v7959970a41 = stripos($v63967fdd7c, "&$pc2defd39") !== false || stripos($v63967fdd7c, "?$pc2defd39") !== false; if (!$v7959970a41) { $v63967fdd7c .= (strpos($v63967fdd7c, "?") !== false ? "&" : "?") . $pc2defd39; $v563137f0b5[$v7162e23723]["href"] = $v63967fdd7c; } } $pdf001ab4 = $v30857f7eca[$v9d7547e4d6]["brokers"]; if (!$pdf001ab4["get_all"]) $pdf001ab4 = $v30857f7eca[$v8c5df8072b]["brokers"]["other"][$v9d7547e4d6]; $v9deec980f6 = $pdf001ab4["get_all"]; if ($v9deec980f6 || $v74a3339c59) { if (!$v9deec980f6) { $v9deec980f6 = array( "brokers_layer_type" => "select", "dal_broker" => $v4c8e54c3e3, "db_driver" => $pb35aef54, "db_type" => $v9d44f52d01, "table" => $v9d7547e4d6, "attributes" => array( array("column" => $pa5bf6b39), array("column" => $pcfa88533), ), ); } self::prepareBrokerSettings($v9deec980f6, $pab752e34, $pb09c0b5b, $pb35aef54, $pc27e06a4, $pac4bc40a); $v1cfba8c105 = str_replace(array(" ", "-"), "_", self::getParsedTableName( strtolower($v9d7547e4d6 . "_" . $pa5bf6b39 . "_" . $pcfa88533 . "_available_values") )); $v9ffade7673[] = array( "result_var_name" => $v1cfba8c105, "action_type" => $v9deec980f6["brokers_layer_type"], "condition_type" => "execute_always", "condition_value" => "", "action_value" => $v9deec980f6 ); $v9ffade7673[] = array( "result_var_name" => $v1cfba8c105, "action_type" => "code", "condition_type" => "execute_always", "condition_value" => "", "action_value" => "'<?
\$avs = array();
if (\${$v1cfba8c105})
    foreach (\${$v1cfba8c105} as \$av)
        \$avs[ \$av[\"{$pa5bf6b39}\"] ] = \$av[\"{$pcfa88533}\"];

return \$avs;
?>'" ); } } } else if ($v7d359dda50["list_type"] == "manual" && $v7d359dda50["manual_list"]) { $v1cfba8c105 = str_replace(array(" ", "-"), "_", self::getParsedTableName( strtolower($v8c5df8072b . "_" . $v7162e23723 . "_manual_available_values") )); $v82176a7c77 = $v7d359dda50["manual_list"]; if ($v82176a7c77["value"] || $v82176a7c77["label"]) $v82176a7c77 = array($v82176a7c77); $v067674f4e4 = ''; foreach ($v82176a7c77 as $v342a134247) { $pc3e857ed = PHPUICodeExpressionHandler::getValueType($v342a134247["value"], array("empty_string_type" => "string", "non_set_type" => "string")); $v67db1bd535 = PHPUICodeExpressionHandler::getArgumentCode($v342a134247["value"], $pc3e857ed); $pc5fc8b02 = PHPUICodeExpressionHandler::getValueType($v342a134247["label"], array("empty_string_type" => "string", "non_set_type" => "string")); $v9acc88059e = PHPUICodeExpressionHandler::getArgumentCode($v342a134247["label"], $pc5fc8b02); $v067674f4e4 .= ($v067674f4e4 ? ', ' : '') . $v67db1bd535 . ' => ' . $v9acc88059e; } $v067674f4e4 = $v067674f4e4 ? "array($v067674f4e4);" : ""; if ($v067674f4e4) $v9ffade7673[] = array( "result_var_name" => $v1cfba8c105, "action_type" => "code", "condition_type" => "execute_always", "condition_value" => "", "action_value" => "'<?
return $v067674f4e4;
?>'" ); } if ($v9ffade7673 && $v1cfba8c105) { $v563137f0b5[$v7162e23723]["available_values"] = $v1cfba8c105; $v563137f0b5[$v7162e23723]["options"] = $v1cfba8c105; $v563137f0b5[$v7162e23723]["options_javascript_variable_name"] = $v1cfba8c105; $v9ffade7673[] = array( "result_var_name" => "", "action_type" => "html", "condition_type" => "execute_always", "condition_value" => "", "action_value" => array( "ptl" => array( "code" => "<script>
var $v1cfba8c105 = <ptl:echo json_encode(\\\$$v1cfba8c105) />;
</script>", ) ) ); $v1ccd95046e[] = array( "result_var_name" => "", "action_type" => "group", "condition_type" => "execute_always", "condition_value" => "", "action_value" => array( "group_name" => "", "actions" => $v9ffade7673 ) ); } } } } private function mc49983541bff($pac4bc40a, $v8c5df8072b, $v7162e23723, $v8ee2bfecdc) { $ped0a6251 = WorkFlowDBHandler::getTableFromTables($pac4bc40a, $v8c5df8072b); $v1b0cfa478b = $ped0a6251[$v7162e23723]; $pfe6103e2 = null; $pe82a6ac1 = strtolower($v8ee2bfecdc); if ($v1b0cfa478b["fk"]) foreach ($v1b0cfa478b["fk"] as $pa7c14731) if (strtolower($pa7c14731["table"]) == $pe82a6ac1) { $pfe6103e2 = $pa7c14731["attribute"]; break; } $v65f81ba9af = WorkFlowDBHandler::getTableFromTables($pac4bc40a, $v8ee2bfecdc); if (!$pfe6103e2 && $v65f81ba9af[$v7162e23723]) $pfe6103e2 = $v7162e23723; return $pfe6103e2; } private function me35a62138a27($pac4bc40a, $v8c5df8072b, $v442e28b3c7) { $v9994512d98 = array(); if ($v442e28b3c7) { $v2ee72186a7 = strtolower($v8c5df8072b); $v9ae15a1085 = strtolower($v442e28b3c7); $pbec62cc6 = WorkFlowDBHandler::getTableFromTables($pac4bc40a, $v8c5df8072b); $pc45eb5eb = WorkFlowDBHandler::getTableFromTables($pac4bc40a, $v442e28b3c7); if ($pc45eb5eb) foreach ($pc45eb5eb as $v5e45ec9bb9 => $v1b0cfa478b) if ($v1b0cfa478b["fk"]) foreach ($v1b0cfa478b["fk"] as $pa7c14731) if (strtolower($pa7c14731["table"]) == $v2ee72186a7) $v9994512d98[] = array( "ptable" => $v8c5df8072b, "pcolumn" => $pa7c14731["attribute"], "ftable" => $v442e28b3c7, "fcolumn" => $v5e45ec9bb9, ); if (empty($v9994512d98) && $pbec62cc6) foreach ($pbec62cc6 as $v5e45ec9bb9 => $v1b0cfa478b) if ($v1b0cfa478b["fk"]) foreach ($v1b0cfa478b["fk"] as $pa7c14731) if (strtolower($pa7c14731["table"]) == $v9ae15a1085) $v9994512d98[] = array( "ptable" => $v8c5df8072b, "pcolumn" => $v5e45ec9bb9, "ftable" => $v442e28b3c7, "fcolumn" => $pa7c14731["attribute"], ); } return $v9994512d98; } public static function convertFormSettingsToJavascriptSettings($v30d38c7973) { if ($v30d38c7973) foreach ($v30d38c7973 as $pe5c5e2fe => $v30857f7eca) if ($pe5c5e2fe == "actions" && is_array($v30857f7eca)) foreach ($v30857f7eca as $pd69fb7d0 => $peeff7b55) if ($peeff7b55["action_type"] == "array" && is_array($peeff7b55["action_value"])) $v30d38c7973[$pe5c5e2fe][$pd69fb7d0]["action_value"] = self::convertFormSettingsArrayToJavascriptSettings($peeff7b55["action_value"]); else if ($peeff7b55["action_type"] == "html") { $pcf8113cc = $peeff7b55["action_value"]; $v30d38c7973[$pe5c5e2fe][$pd69fb7d0]["action_value"] = array( "form_settings_data_type" => "array", "form_settings_data" => self::convertFormSettingsArrayToJavascriptSettings($pcf8113cc), ); } else if ($peeff7b55["action_type"] == "code") { $pcf8113cc = $peeff7b55["action_value"]; if (substr($pcf8113cc, 0, 1) == '"' && substr($pcf8113cc, -1) == '"' && !preg_match('/^"(.*)([^\\\\])"(.*)"$/', str_replace("\n", "", $pcf8113cc))) { $pcf8113cc = substr($pcf8113cc, 1, -1); $pcf8113cc = stripcslashes($pcf8113cc); $v30d38c7973[$pe5c5e2fe][$pd69fb7d0]["action_value"] = $pcf8113cc; } if (substr($pcf8113cc, 0, 1) == "'" && substr($pcf8113cc, -1) == "'" && !preg_match("/^'(.*)([^\\\\])'(.*)'$/", str_replace("\n", "", $pcf8113cc))) { $pcf8113cc = substr($pcf8113cc, 1, -1); $pcf8113cc = TextSanitizer::replaceIfNotEscaped('$', '\\$', $pcf8113cc); $pcf8113cc = TextSanitizer::stripCSlashes($pcf8113cc, "'"); $v30d38c7973[$pe5c5e2fe][$pd69fb7d0]["action_value"] = $pcf8113cc; } } else if (($peeff7b55["action_type"] == "group" || $peeff7b55["action_type"] == "loop") && $peeff7b55["action_value"]["actions"]) $v30d38c7973[$pe5c5e2fe][$pd69fb7d0]["action_value"] = self::convertFormSettingsToJavascriptSettings($peeff7b55["action_value"]); else if ($peeff7b55["action_type"] == "callfunction" && $peeff7b55["action_value"]["func_args"]) $v30d38c7973[$pe5c5e2fe][$pd69fb7d0]["action_value"]["func_args"] = self::convertFormSettingsArrayToJavascriptSettings($peeff7b55["action_value"]["func_args"]); else if ($peeff7b55["action_type"] == "callobjectmethod" && $peeff7b55["action_value"]["method_args"]) $v30d38c7973[$pe5c5e2fe][$pd69fb7d0]["action_value"]["method_args"] = self::convertFormSettingsArrayToJavascriptSettings($peeff7b55["action_value"]["method_args"]); else if ($peeff7b55["action_type"] == "select" && $peeff7b55["action_value"]["options"]) $v30d38c7973[$pe5c5e2fe][$pd69fb7d0]["action_value"]["options"] = self::convertFormSettingsArrayToJavascriptSettings($peeff7b55["action_value"]["options"]); return $v30d38c7973; } public static function convertFormSettingsArrayToJavascriptSettings($pfb662071) { $pc6b0e8a3 = array(); if (is_array($pfb662071)) foreach ($pfb662071 as $pe5c5e2fe => $v956913c90f) if (is_array($v956913c90f)) $pc6b0e8a3[] = array( "key" => $pe5c5e2fe, "key_type" => is_numeric($pe5c5e2fe) ? "" : "string", "items" => self::convertFormSettingsArrayToJavascriptSettings($v956913c90f) ); else { $v14c7480fa2 = is_numeric($v956913c90f) || (substr($v956913c90f, 0, 1) == '"' && substr($v956913c90f, -1) == '"' && preg_match('/^"(.*)([^\\\\])"(.*)"$/', str_replace("\n", "", $v956913c90f))); $v14c7480fa2 = $v14c7480fa2 || (substr($v956913c90f, 0, 1) == "'" && substr($v956913c90f, -1) == "'" && preg_match("/^'(.*)([^\\\\])'(.*)'$/", str_replace("\n", "", $v956913c90f))); $pc6b0e8a3[] = array( "key" => $pe5c5e2fe, "key_type" => is_numeric($pe5c5e2fe) ? "" : "string", "value" => $v956913c90f, "value_type" => $v14c7480fa2 ? "" : (substr($v956913c90f, 0, 1) == '$' ? "variable" : "string"), ); } return $pc6b0e8a3; } private static function f255f43e683($v959a588da6, $pd98df87c, $pe2f18119, $pe54f8a0f, $v4cb12d6d8e) { $v796de67b44 = ''; if ($v4cb12d6d8e["brokers_layer_type"] == "callhibernatemethod") { $v06b02390ee = $v4cb12d6d8e["sma_ids"]; if ($v06b02390ee) foreach ($pe2f18119 as $v597dd8d456) $v796de67b44 .= ($v796de67b44 ? '&' : '') . $v597dd8d456 . '=' . '#' . $v06b02390ee . '[' . $v597dd8d456 . ']#'; } else foreach ($pe2f18119 as $v597dd8d456) { $pc4202532 = in_array($v597dd8d456, $pe54f8a0f); $v796de67b44 .= ($v796de67b44 ? '&' : '') . $v597dd8d456 . '=' . ($pc4202532 ? '#' . $pd98df87c . '_status#' : '#' . $pd98df87c . '[' . $v597dd8d456 . ']#'); } if ($v796de67b44) $v959a588da6 .= (strpos($v959a588da6, "?") !== false ? "&" : "?") . $v796de67b44; return $v959a588da6; } private static function f2a59cb0442($v959a588da6, $pd98df87c, $pe2f18119, $v2285031c9e) { $v796de67b44 = ''; foreach ($pe2f18119 as $v597dd8d456) $v796de67b44 .= ($v796de67b44 ? '&' : '') . $v597dd8d456 . '=' . '#' . $pd98df87c . '[' . ($v2285031c9e ? '' : 'orig_') . $v597dd8d456 . ']#'; if ($v796de67b44) $v959a588da6 .= (strpos($v959a588da6, "?") !== false ? "&" : "?") . $v796de67b44; return $v959a588da6; } private static function f6d476eceae($v959a588da6, $pd98df87c, $pe2f18119) { return self::f2a59cb0442($v959a588da6, $pd98df87c, $pe2f18119, true); } private static function f672d3edb88(&$pfdbbc383, $pe2f18119, &$v9195465250) { if ($pe2f18119) foreach ($pe2f18119 as $v597dd8d456) if (!in_array($v597dd8d456, $pfdbbc383)) { $pfdbbc383[] = $v597dd8d456; if (!isset($v9195465250["attributes_settings"][$v597dd8d456])) $v9195465250["attributes_settings"][$v597dd8d456]["type"] = "hidden"; } } private static function f0dec7450c7($pac4bc40a, $v8c5df8072b, $pd98df87c, $pfdbbc383, $v4cb12d6d8e, $pecad7cca) { $v067674f4e4 = ""; $ped0a6251 = WorkFlowDBHandler::getTableFromTables($pac4bc40a, $v8c5df8072b); $v88bb618d40 = $v4cb12d6d8e["brokers_layer_type"]; $v46a413bcd9 = self::ma6e68fd43fa2($v4cb12d6d8e); $v74d327ce31 = self::f2fb0b84ed2($v4cb12d6d8e); $v99242dea8e = '$' . $pd98df87c; foreach ($pfdbbc383 as $v5e45ec9bb9) { $v1b0cfa478b = $ped0a6251[$v5e45ec9bb9]; $v9abfb1e31c = !isset($v1b0cfa478b["null"]) || $v1b0cfa478b["null"]; if ($v46a413bcd9 && $v1b0cfa478b["primary_key"] && WorkFlowDataAccessHandler::isAutoIncrementedAttribute($v1b0cfa478b)) { $v067674f4e4 .= self::md2839901f6a8($v8c5df8072b, $pd98df87c, $v5e45ec9bb9, $v1b0cfa478b, $v4cb12d6d8e, $pecad7cca); } else if ($v9abfb1e31c && (ObjTypeHandler::isDBTypeNumeric($v1b0cfa478b["type"]) || ObjTypeHandler::isPHPTypeNumeric($v1b0cfa478b["type"]) || ObjTypeHandler::isDBTypeDate($v1b0cfa478b["type"]))) { if ($v74d327ce31) $v067674f4e4 .= 'if (!strlen(trim(' . $v99242dea8e . '["' . $v5e45ec9bb9 . '"]))) ' . $v99242dea8e . '["' . $v5e45ec9bb9 . '"] = ' . (strlen($v1b0cfa478b["default"]) ? '"' . $v1b0cfa478b["default"] . '"' : (ObjTypeHandler::isDBTypeDate($v1b0cfa478b["type"]) ? 'null' : '"DEFAULT"')) . ';' . "\n"; else $v067674f4e4 .= 'if (!strlen(trim(' . $v99242dea8e . '["' . $v5e45ec9bb9 . '"]))) ' . $v99242dea8e . '["' . $v5e45ec9bb9 . '"] = null;' . "\n"; } else if ($v74d327ce31 && (ObjTypeHandler::isDBTypeNumeric($v1b0cfa478b["type"]) || ObjTypeHandler::isPHPTypeNumeric($v1b0cfa478b["type"]))) { if ($v1b0cfa478b["primary_key"]) $v067674f4e4 .= 'if (!is_numeric(' . $v99242dea8e . '["' . $v5e45ec9bb9 . '"])) ' . $v99242dea8e . '["' . $v5e45ec9bb9 . '"] = "null";' . "\n"; else $v067674f4e4 .= 'if (!strlen(trim(' . $v99242dea8e . '["' . $v5e45ec9bb9 . '"]))) ' . $v99242dea8e . '["' . $v5e45ec9bb9 . '"] = ' . (strlen($v1b0cfa478b["default"]) ? '"' . $v1b0cfa478b["default"] . '"' : '"DEFAULT"') . ';' . "\n"; } else if ($v88bb618d40 == "callbusinesslogic" && (ObjTypeHandler::isDBTypeNumeric($v1b0cfa478b["type"]) || ObjTypeHandler::isPHPTypeNumeric($v1b0cfa478b["type"]) || ObjTypeHandler::isDBTypeBoolean($v1b0cfa478b["type"]))) { $v067674f4e4 .= 'if (array_key_exists("' . $v5e45ec9bb9 . '", ' . $v99242dea8e . ') && !is_numeric(' . $v99242dea8e . '["' . $v5e45ec9bb9 . '"])) ' . $v99242dea8e . '["' . $v5e45ec9bb9 . '"] = ' . (strlen($v1b0cfa478b["default"]) ? '"' . $v1b0cfa478b["default"] . '"' : 'null') . ';' . "\n"; } } return $v067674f4e4 ? "'<?\n" . $v067674f4e4 . "?>'" : null; } private static function md2839901f6a8($v8c5df8072b, $pd98df87c, $v5e45ec9bb9, $v1b0cfa478b, $v4cb12d6d8e, $pecad7cca) { $v88bb618d40 = $v4cb12d6d8e["brokers_layer_type"]; $v539082ff30 = null; if ($v88bb618d40 == "callibatisquery" && $v4cb12d6d8e["service_type"] == "insert") $v539082ff30 = $v4cb12d6d8e["parameters"]; else if ($v88bb618d40 == "getquerydata" || $v88bb618d40 == "setquerydata") $v539082ff30 = $v4cb12d6d8e["sql"]; else if ($v88bb618d40 == "callhibernatemethod" && ($v4cb12d6d8e["service_method"] == "getData" || $v4cb12d6d8e["service_method"] == "setData")) $v539082ff30 = $v4cb12d6d8e["sma_sql"]; else if ($v88bb618d40 == "insert") $v539082ff30 = $v4cb12d6d8e["attributes"]; else if ($v88bb618d40 == "callhibernatemethod" && ($v4cb12d6d8e["service_method"] == "insert" || $v4cb12d6d8e["service_method"] == "callInsert")) $v539082ff30 = $v4cb12d6d8e["sma_data"]; else if ($v88bb618d40 == "callhibernatemethod" && $v4cb12d6d8e["service_method"] == "callQuery" && $v4cb12d6d8e["sma_query_type"] == "insert") $v539082ff30 = $v4cb12d6d8e["sma_data"]; $v7959970a41 = false; if ($v539082ff30) { if (is_array($v539082ff30)) { foreach ($v539082ff30 as $v342a134247) { if (array_key_exists("column", $v342a134247) && $v342a134247["column"] == $v5e45ec9bb9) { $v7959970a41 = true; break; } else if (array_key_exists("value", $v342a134247) && $v342a134247["value_type"] == "string" && $v342a134247["value"] == "#{$pd98df87c}[$v5e45ec9bb9]#") { $v7959970a41 = true; break; } } } else { $pa8db77e3 = DB::convertDefaultSQLToObject($v539082ff30); if ($pa8db77e3["type"] == "insert" && $pa8db77e3["attributes"]) foreach ($pa8db77e3["attributes"] as $v1b0cfa478b) if ($v1b0cfa478b["column"] == $v5e45ec9bb9) { $v7959970a41 = true; break; } } } if ($v7959970a41) { $pc839a6ca = null; if ($v88bb618d40 == "insert") $pc839a6ca = '$EVC->getBroker(' . ($v4cb12d6d8e["dal_broker"] ? '"' . $v4cb12d6d8e["dal_broker"] . '"' : '') . ');'; else if (trim($v4cb12d6d8e["method_obj"])) { $pb537c4d4 = trim($v4cb12d6d8e["method_obj"]); $pc839a6ca = substr($pb537c4d4, 0, 1) == '$' ? $pb537c4d4 : '$' . $pb537c4d4; } if ($pc839a6ca) { $v99242dea8e = '$' . $pd98df87c; $v5d3813882f = self::me27f08e0aa1a($pecad7cca, $v4cb12d6d8e); $v5d3813882f = $v5d3813882f ? str_replace("\n", "\n\t", $v5d3813882f) : "null"; return 'if (!strlen(trim(' . $v99242dea8e . '["' . $v5e45ec9bb9 . '"]))) 
	' . $v99242dea8e . '["' . $v5e45ec9bb9 . '"] = ' . $pc839a6ca . '->findObjectsColumnMax("' . $v8c5df8072b . '", "' . $v5e45ec9bb9 . '", ' . addcslashes($v5d3813882f, "'") . ');' . "\n"; } } return ""; } private static function ma6e68fd43fa2($v8710ac8f3f) { $v88bb618d40 = $v8710ac8f3f["brokers_layer_type"]; if ($v88bb618d40 == "callibatisquery" && $v8710ac8f3f["service_type"] == "insert") return true; else if ($v88bb618d40 == "insert") return true; else if ($v88bb618d40 == "getquerydata" || $v88bb618d40 == "setquerydata") return preg_match("/^insert\s+/i", trim($v8710ac8f3f["sql"])); else if ($v88bb618d40 == "callhibernatemethod" && ($v8710ac8f3f["service_method"] == "getData" || $v8710ac8f3f["service_method"] == "setData")) return preg_match("/^insert\s+/i", trim($v8710ac8f3f["sma_sql"])); else if ($v88bb618d40 == "callhibernatemethod" && ($v8710ac8f3f["service_method"] == "insert" || $v8710ac8f3f["service_method"] == "callInsert")) return true; else if ($v88bb618d40 == "callhibernatemethod" && $v8710ac8f3f["service_method"] == "callQuery" && $v8710ac8f3f["sma_query_type"] == "insert") return true; return false; } private static function f2fb0b84ed2($v8710ac8f3f) { return in_array($v8710ac8f3f["brokers_layer_type"], array("callibatisquery", "callhibernatemethod", "getquerydata", "setquerydata", "insert", "update", "delete", "select", "procedure")); } private static function f8494219158($pac4bc40a, $v8c5df8072b, $pd98df87c, $pfdbbc383, $pe2f18119, $v6e99d5dea0, $pecad7cca) { $v067674f4e4 = self::f0dec7450c7($pac4bc40a, $v8c5df8072b, $pd98df87c, $pfdbbc383, $v6e99d5dea0, $pecad7cca); if ($pe2f18119) { $v99242dea8e = '$' . $pd98df87c; $v067674f4e4 = $v067674f4e4 ? substr($v067674f4e4, 0, -3) . "\n" : "'<?\n"; foreach ($pe2f18119 as $v597dd8d456) $v067674f4e4 .= 'if (isset(' . $v99242dea8e . '["orig_' . $v597dd8d456 . '"]) && isset(' . $v99242dea8e . '["' . $v597dd8d456 . '"]) && ' . $v99242dea8e . '["orig_' . $v597dd8d456 . '"] != ' . $v99242dea8e . '["' . $v597dd8d456 . '"]) $_POST["' . $pd98df87c . '_save_pks"] = true;' . "\n"; $v067674f4e4 .= "\n"; foreach ($pe2f18119 as $v597dd8d456) $v067674f4e4 .= 'if (isset(' . $v99242dea8e . '["orig_' . $v597dd8d456 . '"]) && !isset(' . $v99242dea8e . '["' . $v597dd8d456 . '"])) ' . $v99242dea8e . '["' . $v597dd8d456 . '"] = ' . $v99242dea8e . '["orig_' . $v597dd8d456 . '"];' . "\n"; $v067674f4e4 .= "\n" . 'if ($_POST["' . $pd98df87c . '_save_pks"]) {' . "\n"; foreach ($pe2f18119 as $v597dd8d456) $v067674f4e4 .= "\t" . $v99242dea8e . '["old_' . $v597dd8d456 . '"] = isset(' . $v99242dea8e . '["orig_' . $v597dd8d456 . '"]) ? ' . $v99242dea8e . '["orig_' . $v597dd8d456 . '"] : ' . $v99242dea8e . '["' . $v597dd8d456 . '"];' . "\n" . "\t" . $v99242dea8e . '["new_' . $v597dd8d456 . '"] = ' . $v99242dea8e . '["' . $v597dd8d456 . '"];' . "\n"; $v067674f4e4 .= "}\n?>'"; } return $v067674f4e4; } private static function mfd4c6040039e($pd98df87c, $pe2f18119) { $v067674f4e4 = ""; $v99242dea8e = '$' . $pd98df87c; foreach ($pe2f18119 as $v597dd8d456) $v067674f4e4 .= 'if (isset(' . $v99242dea8e . '["orig_' . $v597dd8d456 . '"])) ' . $v99242dea8e . '["' . $v597dd8d456 . '"] = ' . $v99242dea8e . '["orig_' . $v597dd8d456 . '"];' . "\n"; return $v067674f4e4 ? "'<?\n" . $v067674f4e4 . "?>'" : null; } private static function ma50ef2590cf8($pd98df87c, $pe2f18119) { $v067674f4e4 = 'unset($' . $pd98df87c . ');' . "\n"; foreach ($pe2f18119 as $v597dd8d456) $v067674f4e4 .= 'unset($_GET["' . $v597dd8d456 . '"]);' . "\n"; return $v067674f4e4 ? "'<?\n" . $v067674f4e4 . "?>'" : null; } private static function mcfcf1f6200e9($pd98df87c, $v4cb12d6d8e, $pe54f8a0f, $pecad7cca, $pab752e34, $pb09c0b5b, $v872f5b4dbb, $v8b13fa2358, &$v4e9e6cbc72 = null, $v7ac3b13d79 = false) { $v067674f4e4 = ""; if ($pe54f8a0f) { $v99242dea8e = '$' . $pd98df87c; if ($v4cb12d6d8e["brokers_layer_type"] == "callhibernatemethod" && $v4cb12d6d8e["service_method"] == "insert") { $v0dd1ae6fbd = $v4cb12d6d8e["sma_ids"]; foreach ($pe54f8a0f as $v597dd8d456) $v067674f4e4 .= "\n" . $v99242dea8e . '["' . $v597dd8d456 . '"] = $' . $v0dd1ae6fbd . '["' . $v597dd8d456 . '"];'; $v067674f4e4 .= "\n"; if ($v7ac3b13d79) { foreach ($pe54f8a0f as $v597dd8d456) $v067674f4e4 .= "\n" . '$_GET["' . $v597dd8d456 . '"] = ' . $v99242dea8e . '["' . $v597dd8d456 . '"];'; $v067674f4e4 .= "\n"; } } else { if ($v4cb12d6d8e["brokers_layer_type"] == "insert") { $v7b319cc2cc = ""; $pacb7cdbe = $pb09c0b5b ? $pab752e34 : null; $pa0886eb1 = $v8b13fa2358 ? ($v4cb12d6d8e["db_driver"] ? $v4cb12d6d8e["db_driver"] : $v872f5b4dbb) : null; if ($pacb7cdbe || $pa0886eb1) { $v7b319cc2cc = "array("; $v7b319cc2cc .= $pa0886eb1 ? '"db_driver" => "' . $pa0886eb1 . '"' : ''; $v7b319cc2cc .= $pacb7cdbe ? ($pa0886eb1 ? ', ' : '') . '"db_broker" => "' . $pacb7cdbe . '"' : ''; $v7b319cc2cc .= ")"; } $v067674f4e4 .= '$' . $pd98df87c . '_status = $EVC->getBroker(' . ($v4cb12d6d8e["dal_broker"] ? '"' . $v4cb12d6d8e["dal_broker"] . '"' : '') . ')->getInsertedId(' . $v7b319cc2cc . ');' . "\n"; } else if (self::ma6e68fd43fa2($v4cb12d6d8e)) { $pb537c4d4 = trim($v4cb12d6d8e["method_obj"]); if ($pb537c4d4) { $pb537c4d4 = substr($pb537c4d4, 0, 1) == '$' ? $pb537c4d4 : '$' . $pb537c4d4; $v5d3813882f = self::me27f08e0aa1a($pecad7cca, $v4cb12d6d8e); $v067674f4e4 .= '$' . $pd98df87c . '_status = ' . $pb537c4d4 . '->getInsertedId(' . addcslashes($v5d3813882f, "'") . ');' . "\n"; if (substr($pb537c4d4, 0, 6) != '$EVC->') $v4e9e6cbc72 = substr($pb537c4d4, 1); } } foreach ($pe54f8a0f as $v597dd8d456) $v067674f4e4 .= "\n" . $v99242dea8e . '["' . $v597dd8d456 . '"] = $' . $pd98df87c . '_status;'; $v067674f4e4 .= "\n"; if ($v7ac3b13d79) { foreach ($pe54f8a0f as $v597dd8d456) $v067674f4e4 .= "\n" . '$_GET["' . $v597dd8d456 . '"] = $' . $pd98df87c . '_status;'; $v067674f4e4 .= "\n"; } } } return $v067674f4e4 ? "'<?\n" . $v067674f4e4 . "?>'" : null; } private static function f10b11f1bb8($pac4bc40a, $v8c5df8072b, $pfdbbc383) { $v067674f4e4 = "return array("; $ped0a6251 = WorkFlowDBHandler::getTableFromTables($pac4bc40a, $v8c5df8072b); foreach ($pfdbbc383 as $v5e45ec9bb9) $v067674f4e4 .= "\n\t" . '"' . $v5e45ec9bb9 . '" => $_GET["' . $v5e45ec9bb9 . '"],'; $v067674f4e4 .= "\n);\n"; return $v067674f4e4 ? "'<?\n" . $v067674f4e4 . "?>'" : null; } private static function mec94a53cc185($pac4bc40a, $v8c5df8072b, $pd98df87c, $pfdbbc383) { $v067674f4e4 = ""; $ped0a6251 = WorkFlowDBHandler::getTableFromTables($pac4bc40a, $v8c5df8072b); foreach ($pfdbbc383 as $v5e45ec9bb9) { $v1b0cfa478b = $ped0a6251[$v5e45ec9bb9]; if (ObjTypeHandler::isDBTypeDate($v1b0cfa478b["type"])) $v067674f4e4 .= 'if ($' . $pd98df87c . '["' . $v5e45ec9bb9 . '"] == "0000-00-00 00:00:00" || $' . $pd98df87c . '["' . $v5e45ec9bb9 . '"] == "0000-00-00") $' . $pd98df87c . '["' . $v5e45ec9bb9 . '"] = "";' . "\n"; } return $v067674f4e4 ? "'<?\n" . $v067674f4e4 . "?>'" : null; } private static function f1a0f95fcd7($pac4bc40a, $v8c5df8072b, $pd7bfd6f7, $pfdbbc383) { $ped0a6251 = WorkFlowDBHandler::getTableFromTables($pac4bc40a, $v8c5df8072b); $v0f707090f0 = array(); foreach ($pfdbbc383 as $v5e45ec9bb9) { $v1b0cfa478b = $ped0a6251[$v5e45ec9bb9]; if (ObjTypeHandler::isDBTypeDate($v1b0cfa478b["type"])) $v0f707090f0[] = $v5e45ec9bb9; } if ($v0f707090f0) { $v067674f4e4 = "'<?\n" . 'if (is_array($' . $pd7bfd6f7 . '))' . "\n" . '	foreach ($' . $pd7bfd6f7 . ' as $k => &$v) {' . "\n"; foreach ($v0f707090f0 as $v5e45ec9bb9) $v067674f4e4 .= '		if ($v["' . $v5e45ec9bb9 . '"] == "0000-00-00 00:00:00" || $v["' . $v5e45ec9bb9 . '"] == "0000-00-00") $v["' . $v5e45ec9bb9 . '"] = "";' . "\n"; $v067674f4e4 .= "	}\n?>'"; return $v067674f4e4; } return null; } private static function f58aba253ab($pd7bfd6f7) { return ""; return "'<?\n" . 'if ($' . $pd7bfd6f7 . ') {' . "\n" . '	$hbn_object_name = array_keys($' . $pd7bfd6f7 . '[0]);' . "\n" . '	$hbn_object_name = $hbn_object_name[0];' . "\n" . "	\n" . '	$items = array();' . "\n" . '	$t = count($' . $pd7bfd6f7 . ')' . "\n" . "	\n" . '	for ($i = 0; $i < $t; $i++)' . "\n" . '		$items[] = $' . $pd7bfd6f7 . '[$i][$hbn_object_name];' . "\n" . "	\n" . '	$' . $pd7bfd6f7 . ' = $items;' . "\n" . "}\n" . "\n?>'"; } private static function mc08d0548215f($pd98df87c) { return ""; return "'<?\n" . 'if ($' . $pd98df87c . ') {' . "\n" . '	$hbn_object_name = array_keys($' . $pd98df87c . ');' . "\n" . '	$hbn_object_name = $hbn_object_name[0];' . "\n" . '	$' . $pd98df87c . ' = $' . $pd98df87c . '[$hbn_object_name];' . "\n" . "}\n" . "\n?>'"; } private static function f9a328022e6($pac4bc40a, $v8c5df8072b, $pd98df87c, $v2f0e633d4c, $pfdbbc383, $pe2f18119, $pe54f8a0f, $pd81f7df7, $v9195465250, $v4cb12d6d8e, $v6e99d5dea0, $v74cb39e604, $v3dad7bd9b0 = "", $v94682778e5 = "", $v768b231eba = "") { $pff5830e4 = trim("$v3dad7bd9b0 $v94682778e5"); $v769013ef25 = $v9195465250; unset($v769013ef25["single_insert"]); $v30d38c7973 = self::f596452a821($pac4bc40a, $v8c5df8072b, $pd98df87c, $v2f0e633d4c, $pfdbbc383, $pe2f18119, $pe54f8a0f, $pd81f7df7, $v769013ef25, null, $v6e99d5dea0, $v74cb39e604, $pff5830e4, $v768b231eba); return $v30d38c7973; } private static function f07006271c9($pac4bc40a, $v8c5df8072b, $pd98df87c, $v2f0e633d4c, $pfdbbc383, $pe2f18119, $pe54f8a0f, $pd81f7df7, $v9195465250, $v4cb12d6d8e, $v6e99d5dea0, $v74cb39e604, $v3dad7bd9b0 = "", $v94682778e5 = "", $v768b231eba = "") { $pff5830e4 = trim("$v3dad7bd9b0 $v94682778e5"); $v769013ef25 = $v9195465250; unset($v769013ef25["single_insert"]); $v067674f4e4 = self::mf71b3b86a66d($pac4bc40a, $v8c5df8072b, $pd98df87c, $v2f0e633d4c, $pfdbbc383, $pe2f18119, $pe54f8a0f, $pd81f7df7, $v769013ef25, null, $v6e99d5dea0, $v74cb39e604, $pff5830e4, $v768b231eba); return $v067674f4e4; } private static function f54b3ad0754($pac4bc40a, $v8c5df8072b, $pd98df87c, $v2f0e633d4c, $pfdbbc383, $pe2f18119, $pe54f8a0f, $pd81f7df7, $v9195465250, &$peecef390, $v4cb12d6d8e, $v6e99d5dea0, $v74cb39e604, $v3dad7bd9b0 = "", $v94682778e5 = "", $v768b231eba = "") { if ($v4cb12d6d8e || $v9195465250["single_insert"]) { $pfb80a61e = 'addMultipleFormNewItem(this)'; $pff1806f2 = "insert"; $pf6af6e67 = $pd98df87c . "_add"; $v29e16a56c0 = "Add"; $pb033e699 = $v9195465250["single_insert"]; $v4edb9d8be1 = self::mddd8e42f4121($pff1806f2, $pf6af6e67, $v29e16a56c0, $pb033e699, $pd98df87c, $v2f0e633d4c, $v768b231eba, $pfb80a61e); $v6390ae2db3 = self::ma3f9a355f537($pac4bc40a, $v8c5df8072b, $pd98df87c, $v2f0e633d4c, $pfdbbc383, $pe2f18119, $pe54f8a0f, $pd81f7df7, $v9195465250, $v4cb12d6d8e, $v6e99d5dea0, $v74cb39e604, $v3dad7bd9b0, $v94682778e5, $v768b231eba); $v67079be353 = HashCode::getHashCodePositive($v768b231eba); $peecef390 .= "\n" . self::f1596b25a68("{$pd98df87c}_multiple_form_{$v67079be353}_before_insert_html", $v6390ae2db3[0]); $peecef390 .= "\n" . self::f1596b25a68("{$pd98df87c}_multiple_form_{$v67079be353}_after_insert_html", $v6390ae2db3[1]); $peecef390 .= "\n"; return array( "form_containers" => array( array( "container" => array( "class" => "buttons add-button", "previous_html" => '<a href="javascript:void(0);"' . $v4edb9d8be1 . '><span class="icon add"></span> Add ' . $v2f0e633d4c . '</a>' ) ) ) ); } return null; } private static function f6a52c38c42($pac4bc40a, $v8c5df8072b, $pd98df87c, $v2f0e633d4c, $pfdbbc383, $pe2f18119, $pe54f8a0f, $pd81f7df7, $v9195465250, &$peecef390, $v4cb12d6d8e, $v6e99d5dea0, $v74cb39e604, $v3dad7bd9b0 = "", $v94682778e5 = "", $v768b231eba = "") { if ($v4cb12d6d8e || $v9195465250["single_insert"]) { $v30d38c7973 = self::f54b3ad0754($pac4bc40a, $v8c5df8072b, $pd98df87c, $v2f0e633d4c, $pfdbbc383, $pe2f18119, $pe54f8a0f, $pd81f7df7, $v9195465250, $peecef390, $v4cb12d6d8e, $v6e99d5dea0, $v74cb39e604, $v3dad7bd9b0, $v94682778e5, $v768b231eba); $v30d38c7973["parse_values"] = false; $pf8ed4912 = HtmlFormHandler::createHtmlForm($v30d38c7973); return $pf8ed4912; } return null; } private static function ma3f9a355f537($pac4bc40a, $v8c5df8072b, $pd98df87c, $v2f0e633d4c, $pfdbbc383, $pe2f18119, $pe54f8a0f, $pd81f7df7, $v9195465250, $v4cb12d6d8e, $v6e99d5dea0, $v74cb39e604, $v3dad7bd9b0, $v94682778e5, $v768b231eba) { $pbf469330 = $v9195465250; unset($pbf469330["links"]); unset($pbf469330["single_update"]); unset($pbf469330["single_delete"]); $v769013ef25 = $v9195465250; unset($v769013ef25["single_insert"]); $v55d2af88fe = self::f596452a821($pac4bc40a, $v8c5df8072b, $pd98df87c, $v2f0e633d4c, $pfdbbc383, $pe2f18119, $pe54f8a0f, $pd81f7df7, $pbf469330, $v4cb12d6d8e, null, null, trim("add-item multiple-form $v94682778e5"), $v768b231eba); $v3b3c256e78 = self::f596452a821($pac4bc40a, $v8c5df8072b, $pd98df87c, $v2f0e633d4c, $pfdbbc383, $pe2f18119, $pe54f8a0f, $pd81f7df7, $v769013ef25, null, $v6e99d5dea0, $v74cb39e604, trim("$v3dad7bd9b0 $v94682778e5"), $v768b231eba); $v72b89d9af2 = ''; $v37c5c0e60b = ''; $v55d2af88fe["parse_values"] = $v3b3c256e78["parse_values"] = false; $v72b89d9af2 = HtmlFormHandler::createHtmlForm($v55d2af88fe); $v37c5c0e60b = HtmlFormHandler::createHtmlForm($v3b3c256e78); $v72b89d9af2 = str_replace('onClick="return executeSingleAction(this, onInsert);"', 'onClick="return executeSingleAction(this, onMultipleFormSingleInsert);"', $v72b89d9af2); foreach ($pfdbbc383 as $v5e45ec9bb9) { $v72b89d9af2 = str_replace("#{$pd98df87c}[$v5e45ec9bb9]#", '', $v72b89d9af2); $v37c5c0e60b = str_replace("#{$pd98df87c}[$v5e45ec9bb9]#", "#$v5e45ec9bb9#", str_replace("=\"#{$pd98df87c}[$v5e45ec9bb9]#\"", '=""', $v37c5c0e60b)); } return array($v72b89d9af2, $v37c5c0e60b); } private static function f596452a821($pac4bc40a, $v8c5df8072b, $pd98df87c, $v2f0e633d4c, $pfdbbc383, $pe2f18119, $pe54f8a0f, $pd81f7df7, $v9195465250, $v4cb12d6d8e, $v6e99d5dea0, $v74cb39e604, $v94682778e5 = "", $v768b231eba = "") { $v3e3a84080a = $v4cb12d6d8e || $v9195465250["single_insert"]; $pb0b5cc75 = $v6e99d5dea0 || $v9195465250["single_update"]; $v80efa55503 = $v74cb39e604 || $v9195465250["single_delete"]; $v86e5d83e26 = self::f68c8abfc9e($pac4bc40a, $v8c5df8072b, $pd98df87c, $pfdbbc383, $pe2f18119, $pe54f8a0f, $v9195465250, $v3e3a84080a, $pb0b5cc75, $v80efa55503); $pc10e884e = $v3e3a84080a || $pb0b5cc75 || $v80efa55503; $pf142110d = array(); if ($v4cb12d6d8e || $v9195465250["single_insert"]) $pf142110d[] = self::f420eefd19f("insert", $pd98df87c . "_add", "Add", $v9195465250["single_insert"], $pd98df87c, $v2f0e633d4c, $v768b231eba); if ($v6e99d5dea0 || $v9195465250["single_update"]) $pf142110d[] = self::f420eefd19f("update", $pd98df87c . "_save", "Save", $v9195465250["single_update"], $pd98df87c, $v2f0e633d4c, $v768b231eba); if ($v74cb39e604 || $v9195465250["single_delete"]) { $v6d3990173e = $v9195465250["single_delete"]; if (!isset($v6d3990173e["confirmation_message"])) { if ($pd81f7df7) { $v6d3990173e["confirmation_message"] .= "You are about to delete this $v2f0e633d4c.\nNote that this $v2f0e633d4c may have some dependencies/children in the following table(s):"; for ($v43dd7d0051 = 0; $v43dd7d0051 < count($pd81f7df7); $v43dd7d0051++) $v6d3990173e["confirmation_message"] .= "\n- " + self::getName($pd81f7df7[$v43dd7d0051]); $v6d3990173e["confirmation_message"] .= "\n\nYou should delete the correspondent dependencies/children first, and only then delete this $v2f0e633d4c.\n\nAre you sure that you wish to proceed with this $v2f0e633d4c deletion (before delete it's dependencies)?"; } else $v6d3990173e["confirmation_message"] = "Do you wish to delete this $v2f0e633d4c?"; } $pf142110d[] = self::f420eefd19f("delete", $pd98df87c . "_delete", "Delete", $v6d3990173e, $pd98df87c, $v2f0e633d4c, $v768b231eba); } $v5ed3bcae90 = array(); if ($v9195465250["links"]) foreach ($v9195465250["links"] as $pdeee6a59) { $ped0a6251 = WorkFlowDBHandler::getTableFromTables($pac4bc40a, $v8c5df8072b); self::md82e09e85352($pdeee6a59, $pd98df87c, $ped0a6251, $pe2f18119, false, false, false, false); $v5ed3bcae90[] = array( "field" => array( "class" => "link link-$pd98df87c " . $pdeee6a59["class"], "input" => array( "type" => "link", "value" => $pdeee6a59["value"] ? $pdeee6a59["value"] : $pdeee6a59["title"], "href" => $pdeee6a59["url"], "target" => $pdeee6a59["target"], "title" => $pdeee6a59["title"], "extra_attributes" => $pdeee6a59["extra_attributes"], "previous_html" => $pdeee6a59["previous_html"], "next_html" => $pdeee6a59["next_html"], ) ) ); } $pc5d3a026 = array(); if ($v86e5d83e26) $pc5d3a026[] = array( "container" => array( "class" => "fields-container", "previous_html" => "", "next_html" => "", "elements" => $v86e5d83e26 ) ); if ($pf142110d) $pc5d3a026[] = array( "container" => array( "class" => "buttons", "elements" => $pf142110d ) ); if ($v5ed3bcae90) $pc5d3a026[] = array( "container" => array( "class" => "links", "elements" => $v5ed3bcae90 ) ); $v90cd343a76 = "form_" . rand(0, 10000); return array( "with_form" => $pc10e884e, "form_id" => $v90cd343a76, "form_method" => "post", "form_class" => "", "form_on_submit" => "", "form_action" => "", "form_type" => "horizontal", "form_containers" => array( array( "container" => array( "id" => $v768b231eba, "class" => 'form-' . str_replace(array("_", " "), "-", self::getParsedTableName($pd98df87c)) . ' ' . $v94682778e5, "previous_html" => "", "next_html" => "", "elements" => $pc5d3a026 ) ) ), "form_css" => "", "form_js" => $pc10e884e ? 'if (typeof MyJSLib != "undefined") { MyJSLib.FormHandler.initForm( $("#' . $v90cd343a76 . '")[0] ) }' : '' ); } private static function mf71b3b86a66d($pac4bc40a, $v8c5df8072b, $pd98df87c, $v2f0e633d4c, $pfdbbc383, $pe2f18119, $pe54f8a0f, $pd81f7df7, $v9195465250, $v4cb12d6d8e, $v6e99d5dea0, $v74cb39e604, $v94682778e5 = "", $v768b231eba = "") { $v067674f4e4 = ''; $pc10e884e = $v4cb12d6d8e || $v6e99d5dea0 || $v74cb39e604 || $v9195465250["single_insert"] || $v9195465250["single_update"] || $v9195465250["single_delete"]; $ped0a6251 = WorkFlowDBHandler::getTableFromTables($pac4bc40a, $v8c5df8072b); if ($pc10e884e) { $v90cd343a76 = "form_" . rand(0, 10000); $v067674f4e4 .= '<form id="' . $v90cd343a76 . '" method="post" onSubmit="return (typeof MyJSLib == \'undefined\' || MyJSLib.FormHandler.formCheck(this));" enctype="multipart/form-data">'; } $v067674f4e4 .= '<div class="form-' . str_replace(array("_", " "), "-", self::getParsedTableName($pd98df87c)) . ' ' . $v94682778e5 . '"' . ($v768b231eba ? ' id="' . $v768b231eba . '"' : '') . '>
		<div class="fields-container">'; $v3e3a84080a = $v4cb12d6d8e || $v9195465250["single_insert"]; $pb0b5cc75 = $v6e99d5dea0 || $v9195465250["single_update"]; $v80efa55503 = $v74cb39e604 || $v9195465250["single_delete"]; $v6634cfd0ad = $v3e3a84080a || $pb0b5cc75; foreach ($pfdbbc383 as $v5e45ec9bb9) { $pd152184b = $v9195465250["attributes_settings"][$v5e45ec9bb9]; $pb65331d8 = in_array($v5e45ec9bb9, $pe2f18119); $pc4202532 = in_array($v5e45ec9bb9, $pe54f8a0f); if ($v3e3a84080a && !$pb0b5cc75 && !$v80efa55503 && $pc4202532) continue 1; $v067674f4e4 .= self::mc5b9f92cc184($pd98df87c, $v5e45ec9bb9, $ped0a6251, $pd152184b, $pe2f18119, $pb65331d8, $pc4202532, $v6634cfd0ad, $v80efa55503, $v9195465250["single_update"]["action_type"] == "ajax_on_blur"); } $v067674f4e4 .= '</div>'; if ($pc10e884e) { $v067674f4e4 .= '<div class="buttons">'; if ($v4cb12d6d8e || $v9195465250["single_insert"]) $v067674f4e4 .= self::mb09249aa54b5("insert", $pd98df87c . "_add", "Add", $v9195465250["single_insert"], $pd98df87c, $v2f0e633d4c, $v768b231eba); if ($v6e99d5dea0 || $v9195465250["single_update"]) $v067674f4e4 .= self::mb09249aa54b5("update", $pd98df87c . "_save", "Save", $v9195465250["single_update"], $pd98df87c, $v2f0e633d4c, $v768b231eba); if ($v74cb39e604 || $v9195465250["single_delete"]) { $v6d3990173e = $v9195465250["single_delete"]; if (!isset($v6d3990173e["confirmation_message"])) { if ($pd81f7df7) { $v6d3990173e["confirmation_message"] .= "You are about to delete this $v2f0e633d4c.\nNote that this $v2f0e633d4c may have some dependencies/children in the following table(s):"; for ($v43dd7d0051 = 0; $v43dd7d0051 < count($pd81f7df7); $v43dd7d0051++) $v6d3990173e["confirmation_message"] .= "\n- " + self::getName($pd81f7df7[$v43dd7d0051]); $v6d3990173e["confirmation_message"] .= "\n\nYou should delete the correspondent dependencies/children first, and only then delete this $v2f0e633d4c.\n\nAre you sure that you wish to proceed with this $v2f0e633d4c deletion (before delete it's dependencies)?"; } else $v6d3990173e["confirmation_message"] = "Do you wish to delete this $v2f0e633d4c?"; } $v067674f4e4 .= self::mb09249aa54b5("delete", $pd98df87c . "_delete", "Delete", $v6d3990173e, $pd98df87c, $v2f0e633d4c, $v768b231eba); } $v067674f4e4 .= '</div>'; } if ($v9195465250["links"]) $v067674f4e4 .= '<div class="links">' . self::f390027ee9c($v9195465250["links"], $pd98df87c, $ped0a6251, $pe2f18119) . '</div>'; $v067674f4e4 .= '</div>'; if ($pc10e884e) $v067674f4e4 .= '</form>
			<script>if (typeof MyJSLib != "undefined") { MyJSLib.FormHandler.initForm( $("#' . $v90cd343a76 . '")[0] ) }</script>'; return $v067674f4e4; } private static function f420eefd19f($v3dc990bc10, $v3ad42a02b0, $v470e0f2f95, $v6d3990173e, $pd98df87c, $v2f0e633d4c, $v768b231eba, $pbf2a75a9 = false) { $pbf12ce85 = substr($v6d3990173e["action_type"], 0, 5) == "ajax_"; $v9c308fefaf = str_replace(array(" ", "_"), "-", $v3dc990bc10); if ($pbf12ce85) { if ($pbf2a75a9) { $v15a78445b6 = $v3dc990bc10 == "insert_update" ? ', onMultipleInsertUpdate' : ($v3dc990bc10 == "insert" ? ', onMultipleInsert' : ($v3dc990bc10 == "update" ? ', onMultipleUpdate' : ($v3dc990bc10 == "delete" ? ', onMultipleDelete' : ''))); $pfb80a61e = 'return executeMultipleActions(this' . $v15a78445b6 . ');'; } else { $v15a78445b6 = $v3dc990bc10 == "insert" ? ', onInsert' : ($v3dc990bc10 == "update" ? ', onUpdate' : ($v3dc990bc10 == "delete" ? ', onDelete' : '')); $pfb80a61e = 'return executeSingleAction(this' . $v15a78445b6 . ');'; } $paf762455 = self::mb8630b308ea4($v3dc990bc10, $v3ad42a02b0, $v470e0f2f95, $v6d3990173e, $pd98df87c, $v2f0e633d4c, $v768b231eba, $pfb80a61e); unset($paf762455["data-confirmation"]); unset($paf762455["data-confirmation-message"]); return array( "field" => array( "class" => "button button-" . $v9c308fefaf . " button-" . $v9c308fefaf . "-$pd98df87c", "input" => array( "type" => "button", "name" => $v3ad42a02b0, "value" => $v470e0f2f95, "confirmation" => !empty($v6d3990173e["confirmation_message"]), "confirmation_message" => $v6d3990173e["confirmation_message"], "extra_attributes" => $paf762455, ) ) ); } return array( "field" => array( "class" => "button button-" . $v9c308fefaf . " button-" . $v9c308fefaf . "-$pd98df87c", "input" => array( "type" => "submit", "name" => $v3ad42a02b0, "value" => $v470e0f2f95, "confirmation" => !empty($v6d3990173e["confirmation_message"]), "confirmation_message" => $v6d3990173e["confirmation_message"], ) ) ); } private static function mb09249aa54b5($v3dc990bc10, $v3ad42a02b0, $v470e0f2f95, $v6d3990173e, $pd98df87c, $v2f0e633d4c, $v768b231eba, $pbf2a75a9 = false) { $pdd07809e = self::f420eefd19f($v3dc990bc10, $v3ad42a02b0, $v470e0f2f95, $v6d3990173e, $pd98df87c, $v2f0e633d4c, $v768b231eba, $pbf2a75a9); $pfc216969 = new HtmlFormHandler(array("parse_values" => false)); return $pfc216969->getFieldInputHtml($pdd07809e["field"]); } private static function mb8630b308ea4($v3dc990bc10, $v3ad42a02b0, $v470e0f2f95, $v6d3990173e, $pd98df87c, $v2f0e633d4c, $v768b231eba, $pfb80a61e = false) { $paf762455 = array(); $paf762455[] = array("name" => "data-panel-id-hash", "value" => HashCode::getHashCodePositive($v768b231eba)); if ($pfb80a61e) $paf762455[] = array("name" => "onClick", "value" => $pfb80a61e); if ($v6d3990173e["confirmation_message"]) { $paf762455[] = array("name" => "data-confirmation", "value" => 1); $paf762455[] = array("name" => "data-confirmation-message", "value" => $v6d3990173e["confirmation_message"]); } $paf762455[] = array("name" => "data-table-name", "value" => $pd98df87c); $paf762455[] = array("name" => "data-button-name", "value" => $v3ad42a02b0); $paf762455[] = array("name" => "data-button-type", "value" => $v3dc990bc10); $pbf12ce85 = substr($v6d3990173e["action_type"], 0, 5) == "ajax_"; if ($pbf12ce85) { $v99dbacc000 = $v470e0f2f95 . (strtolower($v470e0f2f95) == "add" ? "e" : ""); if ($v6d3990173e["ajax_url"]) $paf762455[] = array("name" => "data-url", "value" => $v6d3990173e["ajax_url"]); if (!$v6d3990173e["ok_msg_message"]) $v6d3990173e["ok_msg_message"] = $v2f0e633d4c . ' ' . strtolower($v99dbacc000) . 'd successfully!'; if (!$v6d3990173e["error_msg_message"]) $v6d3990173e["error_msg_message"] = 'Error: ' . $v2f0e633d4c . ' ' . strtolower($v99dbacc000) . 'd unsuccessfully!'; $paf762455[] = array("name" => "data-ok-msg-message", "value" => $v6d3990173e["ok_msg_message"]); $paf762455[] = array("name" => "data-error-msg-message", "value" => $v6d3990173e["error_msg_message"]); if ($v6d3990173e["ok_msg_redirect_url"]) $paf762455[] = array("name" => "data-ok-msg-redirect-url", "value" => $v6d3990173e["ok_msg_redirect_url"]); if ($v6d3990173e["error_msg_redirect_url"]) $paf762455[] = array("name" => "data-error-msg-redirect-url", "value" => $v6d3990173e["error_msg_redirect_url"]); } return $paf762455; } private static function mddd8e42f4121($v3dc990bc10, $v3ad42a02b0, $v470e0f2f95, $v6d3990173e, $pd98df87c, $v2f0e633d4c, $v768b231eba, $pfb80a61e = false) { $paf762455 = self::mb8630b308ea4($v3dc990bc10, $v3ad42a02b0, $v470e0f2f95, $v6d3990173e, $pd98df87c, $v2f0e633d4c, $v768b231eba, $pfb80a61e); $v067674f4e4 = ''; foreach ($paf762455 as $v3b973c28e2) $v067674f4e4 .= ' ' . $v3b973c28e2["name"] . '="' . addcslashes($v3b973c28e2["value"], '"') . '"'; return $v067674f4e4; } private static function mc5b9f92cc184($pd98df87c, $v5e45ec9bb9, $ped0a6251, $pd152184b, $pe2f18119, $pb65331d8, $pc4202532, $v6634cfd0ad, $v80efa55503, $pf0fd3b95 = false) { $v781520fbd8 = $ped0a6251[$v5e45ec9bb9]; $v8ddbc583e8 = self::mb654958877c6($pd98df87c, $v5e45ec9bb9, $ped0a6251, $pd152184b, $pe2f18119, $pb65331d8, $pc4202532, $v6634cfd0ad, $v80efa55503, $v5a911d8233, $pf0fd3b95); return '<div class="field field-' . strtolower(str_replace(" ", "-", $v781520fbd8["type"])) . " " . $v5e45ec9bb9 . ($pb65331d8 ? " is-pk" : "") . ($pc4202532 ? " is-pk-auto-increment" : "") . " field-" . $v5a911d8233 . ($pd152184b["class"] ? " " . self::ma3887fc6bbbb($pd152184b["class"]) : "") . '">
			' . self::f5b773892e7($v5e45ec9bb9, $pd152184b) . '
			' . $v8ddbc583e8 . '
			</div>'; } private static function f5b773892e7($v5e45ec9bb9, $pd152184b) { return self::ma3887fc6bbbb($pd152184b["label_previous_html"]) . '<label' . ($pd152184b["label_class"] ? ' class="' . self::ma3887fc6bbbb($pd152184b["label_class"]) . '"' : '') . '>' . (strlen($pd152184b["label_value"]) ? self::ma3887fc6bbbb($pd152184b["label_value"]) : self::getName($v5e45ec9bb9)) . ': </label>' . self::ma3887fc6bbbb($pd152184b["label_next_html"]); } private static function ma3887fc6bbbb($pd6a929b7) { if ($pd6a929b7) { $pe3bfb0b9 = PHPUICodeExpressionHandler::getValueType($pd6a929b7, array("empty_string_type" => "string", "non_set_type" => "string")); if (empty($pe3bfb0b9)) return '<ptl:echo ' . $pd6a929b7 . ' />'; } return $pd6a929b7; } private static function mb654958877c6($pd98df87c, $v5e45ec9bb9, $ped0a6251, $pd152184b, $pe2f18119, $pb65331d8, $pc4202532, $v6634cfd0ad, $v80efa55503, &$v5a911d8233 = null, $pf0fd3b95 = false) { $v781520fbd8 = $ped0a6251[$v5e45ec9bb9]; $pb494e708 = self::f19d90c9add($pd98df87c, $v781520fbd8, $v5a911d8233, array("ajax_on_blur" => $pf0fd3b95)); if ($pd152184b["type"]) $v5a911d8233 = $pd152184b["type"]; $v067674f4e4 = self::ma3887fc6bbbb($pd152184b["input_previous_html"]); $v90963767ae = strlen($pd152184b["input_value"]) ? self::ma3887fc6bbbb($pd152184b["input_value"]) : '<ptl:echo str_replace(\'"\', \'&quot;\', (\\$input[' . $pd98df87c . '][' . $v5e45ec9bb9 . '] )) />'; $v4ef49e289c = $pd98df87c . '[' . $v5e45ec9bb9 . ']'; $v2513d90238 = $pd152184b["input_class"] ? ' class="' . self::ma3887fc6bbbb($pd152184b["input_class"]) . '"' : ''; $pc15c8e4e = $v90963767ae; if ($pd152184b["available_values"]) { $v90963767ae = '
			<ptl:var:av_exists false/>
			<ptl:var:var_aux \\$input[' . $pd98df87c . '][' . $v5e45ec9bb9 . '] />'; if (is_array($pd152184b["available_values"])) $v90963767ae .= '<ptl:var:avs ' . str_replace(" => ", " =&gt; ", str_replace("\n", "", var_export($pd152184b["available_values"], true))) . ' />'; else $v90963767ae .= '<ptl:var:avs \\$input[' . $pd152184b["available_values"] . ']/>'; $v90963767ae .= '
			<ptl:if is_array(\\$avs) />
				<ptl:foreach \\$avs k v>
					<ptl:if \\$k == \\$var_aux>
						<ptl:echo \\$v/>
						<ptl:var:av_exists true/>
						<ptl:break/>
					</ptl:if>
				</ptl:foreach>
			</ptl:if>
			<ptl:if !\\$av_exists>
				<ptl:echo \\$var_aux/>
			</ptl:if>'; } if ($v5a911d8233 == "hidden") $v067674f4e4 .= '<input' . $v2513d90238 . ' type="hidden" name="' . $v4ef49e289c . '" value="' . $pc15c8e4e . '" />'; else if (!$v6634cfd0ad) { if ($v5a911d8233 == "link") { $v067674f4e4 .= '<a class="field-value' . ($pd152184b["input_class"] ? " " . self::ma3887fc6bbbb($pd152184b["input_class"]) : "") . '" href="' . self::f9149542f9f($pd152184b["href"], $pd98df87c, $ped0a6251, $pe2f18119, false, false, true) . '"' . ($pd152184b["target"] ? ' target="' . self::ma3887fc6bbbb($pd152184b["target"]) . '"' : "") . '>' . $v90963767ae . '</a>'; } else { if (!$pd152184b["type"]) $v5a911d8233 = "label"; $pfc216969 = new HtmlFormHandler(array("parse_values" => false)); $v067674f4e4 .= $pfc216969->getFieldInputHtml(array( "input" => array( "type" => $v5a911d8233, "class" => self::f8ddab88b24($pd152184b["input_class"], "field-value", true) . " " . $pd152184b["input_class"], "value" => $v90963767ae, ) )); } if ($v80efa55503 && $pb65331d8) $v067674f4e4 .= '<input' . $v2513d90238 . ' type="hidden" name="' . $v4ef49e289c . '" value="' . $pc15c8e4e . '" />'; } else if ($pc4202532) { $v5a911d8233 = "label"; $v067674f4e4 .= '<span class="field-value' . ($pd152184b["input_class"] ? " " . self::ma3887fc6bbbb($pd152184b["input_class"]) : "") . '">' . $pc15c8e4e . '</span>
			<input' . $v2513d90238 . ' type="hidden" name="' . $v4ef49e289c . '" value="' . $pc15c8e4e . '" />'; } else { if ($pb65331d8 && ($v5a911d8233 != "hidden" || $pd152184b["options"])) $v067674f4e4 .= '<input' . $v2513d90238 . ' type="hidden" name="' . $pd98df87c . '[orig_' . $v5e45ec9bb9 . ']" value="' . $pc15c8e4e . '" />'; if ($pd152184b["options"] && !$pd152184b["type"]) $v5a911d8233 = "select"; if ($v5a911d8233 == "textarea") $v067674f4e4 .= '<textarea' . $v2513d90238 . ' name="' . $v4ef49e289c . '"' . $pb494e708 . '>' . $pc15c8e4e . '</textarea>'; else if ($v5a911d8233 == "select") { $v067674f4e4 .= '<select' . $v2513d90238 . ' name="' . $v4ef49e289c . '"' . $pb494e708; if ($pd152184b["options"]) { if ($pd152184b["options_javascript_variable_name"]) $v067674f4e4 .= ' data-options-javascript-variable-name="' . $pd152184b["options_javascript_variable_name"] . '"'; $v067674f4e4 .= '>'; if (is_array($pd152184b["options"])) foreach($pd152184b["options"] as $pe5c5e2fe => $v956913c90f) $v067674f4e4 .= '<option value="' . $pe5c5e2fe . '"<ptl:echo ("' . $pe5c5e2fe . '" == \\$input[' . $pd98df87c . '][' . $v5e45ec9bb9 . '] ? " selected" : "")/>>' . $v956913c90f . '</option>'; else { $v1cfba8c105 = $pd152184b["options"]; $v067674f4e4 .= '<ptl:if is_array(\\$input[' . $v1cfba8c105 . '])>
									<ptl:foreach \\$input[' . $v1cfba8c105 . '] k v>
										<option value="<ptl:echo str_replace(\'"\', \'&quot;\', \\$k) />"<ptl:echo (\\$k == \\$input[' . $pd98df87c . '][' . $v5e45ec9bb9 . '] ? " selected" : "")/>><ptl:echo \\$v/></option>
									</ptl:foreach>
								</ptl:if>'; } } else $v067674f4e4 .= '>'; $v067674f4e4 .= '</select>'; } else if ($v5a911d8233 == "checkbox" || $v5a911d8233 == "radio") { if (is_array($pd152184b["options"])) { $pc37695cb = count($pd152184b["options"]); foreach($pd152184b["options"] as $pe5c5e2fe => $v956913c90f) { if ($pc37695cb > 1) $v067674f4e4 .= '<div' . $v2513d90238 . '><label>' . $v956913c90f . '</label><input type="' . $v5a911d8233 . '" name="' . $v4ef49e289c . '" value="' . $pe5c5e2fe . '" <ptl:echo (\\$input[' . $pd98df87c . '][' . $v5e45ec9bb9 . '] == "' . $pe5c5e2fe . '" ? "checked" : "")' . $pb494e708 . ' /></div>'; else $v067674f4e4 .= '<input' . $v2513d90238 . ' type="' . $v5a911d8233 . '" name="' . $v4ef49e289c . '" value="' . $pe5c5e2fe . '" <ptl:echo (\\$input[' . $pd98df87c . '][' . $v5e45ec9bb9 . '] == "' . $pe5c5e2fe . '" ? "checked" : "") />' . $pb494e708 . ' />'; } } else if ($pd152184b["options"]) { $v1cfba8c105 = $pd152184b["options"]; $v067674f4e4 .= '<ptl:if is_array(\\$input[' . $v1cfba8c105 . '])>
								<ptl:var:t count(\\$input[' . $v1cfba8c105 . ']) />
								
								<ptl:foreach \\$input[' . $v1cfba8c105 . '] k v>
									<ptl:if \\$t &gt; 1>
										<div' . $v2513d90238 . '>
											<label><ptl:echo \\$v/></label>
											<input type="' . $v5a911d8233 . '" name="' . $v4ef49e289c . '" value="<ptl:echo str_replace(\'"\', \'&quot;\', \\$k) />" <ptl:echo (\\$k == \\$input[' . $pd98df87c . '][' . $v5e45ec9bb9 . '] ? "checked" : "")/>' . $pb494e708 . ' />
										</div>
									<ptl:else>
										<input' . $v2513d90238 . ' type="' . $v5a911d8233 . '" name="' . $v4ef49e289c . '" value="<ptl:echo str_replace(\'"\', \'&quot;\', \\$k) />" <ptl:echo (\\$k == \\$input[' . $pd98df87c . '][' . $v5e45ec9bb9 . '] ? "checked" : "")/>' . $pb494e708 . ' />
									</ptl:if>
								</ptl:foreach>
							</ptl:if>'; } else $v067674f4e4 .= '<input' . $v2513d90238 . ' type="' . $v5a911d8233 . '" name="' . $v4ef49e289c . '" value="1" <ptl:echo (\\$input[' . $pd98df87c . '][' . $v5e45ec9bb9 . '] == 1 ? "checked" : "") />' . $pb494e708 . ' />'; } else if (!in_array($v5a911d8233, self::$editable_input_types)) { $v067674f4e4 .= '<input type="hidden" name="' . $v4ef49e289c . '" value="' . $pc15c8e4e . '" />'; $pfc216969 = new HtmlFormHandler(array("parse_values" => false)); $v067674f4e4 .= $pfc216969->getFieldInputHtml(array( "input" => array( "type" => $v5a911d8233, "class" => self::f8ddab88b24($pd152184b["input_class"], "field-value", true) . " " . $v2513d90238, "value" => $v90963767ae, ) )); } else $v067674f4e4 .= '<input' . $v2513d90238 . ' type="' . $v5a911d8233 . '" name="' . $v4ef49e289c . '" value="' . $pc15c8e4e . '"' . ($v5a911d8233 != "hidden" ? $pb494e708 : '') . ' />'; } $v067674f4e4 .= self::ma3887fc6bbbb($pd152184b["input_next_html"]); return $v067674f4e4; } private static function f390027ee9c($v5ed3bcae90, $pd98df87c, $ped0a6251, $pe2f18119) { $v067674f4e4 = ''; if ($v5ed3bcae90) { foreach ($v5ed3bcae90 as $pdeee6a59) { self::md82e09e85352($pdeee6a59, $pd98df87c, $ped0a6251, $pe2f18119, false, false, true, false); $v63967fdd7c = $pdeee6a59["url"] ? ' href="' . self::ma3887fc6bbbb($pdeee6a59["url"]) . '"' : ''; $pb8c0935b = $pdeee6a59["title"] ? ' title="' . self::ma3887fc6bbbb($pdeee6a59["title"]) . '"' : ''; $v6aafc8f2c4 = $pdeee6a59["target"] ? ' target="' . self::ma3887fc6bbbb($pdeee6a59["target"]) . '"' : ''; $paf762455 = ""; if ($pdeee6a59["extra_attributes"]) { if(is_array($pdeee6a59["extra_attributes"])) foreach ($pdeee6a59["extra_attributes"] as $v1b08a89324) if ($v1b08a89324["name"]) $paf762455 .= ' ' . self::ma3887fc6bbbb($v1b08a89324["name"]) . '="' . self::ma3887fc6bbbb($v1b08a89324["value"]) . '"'; else $paf762455 .= ' ' . self::ma3887fc6bbbb($pdeee6a59["extra_attributes"]); } $v067674f4e4 .= '<div class="link link-' . $pd98df87c . ' ' . self::ma3887fc6bbbb($pdeee6a59["class"]) . '">' . self::ma3887fc6bbbb($pdeee6a59["previous_html"]) . '<a' . $v63967fdd7c . $pb8c0935b . $v6aafc8f2c4 . $paf762455 . '>' . self::ma3887fc6bbbb($pdeee6a59["value"] ? $pdeee6a59["value"] : $pdeee6a59["title"]) . '</a>' . self::ma3887fc6bbbb($pdeee6a59["next_html"]) . '</div>'; } } return $v067674f4e4; } private static function f196855e92f($pac4bc40a, $v8c5df8072b, $pd98df87c, $v2f0e633d4c, $pd7bfd6f7, $pfdbbc383, $pe2f18119, $pe54f8a0f, $pd81f7df7, $v9195465250, &$peecef390, $pabde73f0 = false, $v94682778e5 = "", $v768b231eba = "") { $pb0b5cc75 = $v9195465250["single_update"] || $v9195465250["multiple_update"] || $v9195465250["multiple_insert_update"]; $v80efa55503 = $v9195465250["single_delete"] || $v9195465250["multiple_delete"]; $v7868010f1c = $v9195465250["multiple_insert_update"] || $v9195465250["multiple_insert"] || $v9195465250["multiple_update"] || $v9195465250["multiple_delete"]; $pa34e4896 = substr($v9195465250["multiple_insert_update"]["action_type"], 0, 5) != "ajax_" || substr($v9195465250["multiple_insert"]["action_type"], 0, 5) != "ajax_" || substr($v9195465250["multiple_update"]["action_type"], 0, 5) != "ajax_" || substr($v9195465250["multiple_delete"]["action_type"], 0, 5) != "ajax_"; $v86e5d83e26 = self::f68c8abfc9e($pac4bc40a, $v8c5df8072b, $pd98df87c, $pfdbbc383, $pe2f18119, $pe54f8a0f, $v9195465250, false, $pb0b5cc75, $v80efa55503, true); if ($v9195465250["multiple_insert_update"] || $v9195465250["multiple_insert"] || $v9195465250["single_insert"] || $v9195465250["single_update"] || $v9195465250["single_delete"]) { $v5d170b1de6 = array( "field" => array( "class" => 'actions', ) ); if ($v9195465250["multiple_insert_update"] || $v9195465250["multiple_insert"] || $v9195465250["single_insert"]) { $pfb80a61e = 'addNewItem(this)'; $pff1806f2 = $v9195465250["multiple_insert_update"] ? "insert_update" : "insert"; $pf6af6e67 = $v9195465250["multiple_insert_update"] ? $pd98df87c . "_add_save" : $pd98df87c . "_add"; $v29e16a56c0 = $v9195465250["multiple_insert_update"] ? "Save" : "Add"; $pb033e699 = $v9195465250["multiple_insert_update"] ? $v9195465250["multiple_insert_update"] : ($v9195465250["multiple_insert"] ? $v9195465250["multiple_insert"] : $v9195465250["single_insert"]); $v4edb9d8be1 = self::mddd8e42f4121($pff1806f2, $pf6af6e67, $v29e16a56c0, $pb033e699, $pd98df87c, $v2f0e633d4c, $v768b231eba, $pfb80a61e); $v5d170b1de6["field"]["label"] = array( "previous_html" => '<span class="icon add"' . $v4edb9d8be1 . '></span>', ); } $v6e80ef79f6 = $v9195465250["single_delete"]; if ($v6e80ef79f6 && !isset($v6e80ef79f6["confirmation_message"])) { if ($pd81f7df7) { $v6e80ef79f6["confirmation_message"] .= "You are about to delete this $v2f0e633d4c.\nNote that this $v2f0e633d4c may have some dependencies/children in the following table(s):"; for ($v43dd7d0051 = 0; $v43dd7d0051 < count($pd81f7df7); $v43dd7d0051++) $v6e80ef79f6["confirmation_message"] .= "\n- " + self::getName($pd81f7df7[$v43dd7d0051]); $v6e80ef79f6["confirmation_message"] .= "\n\nYou should delete the correspondent dependencies/children first, and only then delete this $v2f0e633d4c.\n\nAre you sure that you wish to proceed with this $v2f0e633d4c deletion (before delete it's dependencies)?"; } else $v6e80ef79f6["confirmation_message"] = "Do you wish to delete this $v2f0e633d4c?"; } if ($v9195465250["single_update"]) { $paf762455 = self::mb8630b308ea4("update", $pd98df87c . "_save", "Save", $v9195465250["single_update"], $pd98df87c, $v2f0e633d4c, $v768b231eba, 'executeSingleAction(this, onUpdate)'); $pe9f4d689 = self::mddd8e42f4121("delete", $pd98df87c . "_delete", "Delete", $v6e80ef79f6, $pd98df87c, $v2f0e633d4c, $v768b231eba, 'executeSingleAction(this, onDelete)'); $v5d170b1de6["field"]["input"] = array( "type" => "label", "class" => "icon save", "extra_attributes" => $paf762455, "previous_html" => ($v9195465250["single_delete"] ? '<span class="icon delete"' . $pe9f4d689 . '></span>' : null), ); } else if ($v9195465250["single_delete"]) { $paf762455 = self::mb8630b308ea4("delete", $pd98df87c . "_delete", "Delete", $v6e80ef79f6, $pd98df87c, $v2f0e633d4c, $v768b231eba, 'executeSingleAction(this, onDelete)'); $v5d170b1de6["field"]["input"] = array( "type" => "label", "class" => "icon delete", "extra_attributes" => $paf762455, ); } $v86e5d83e26[] = $v5d170b1de6; } if ($v9195465250["links"]) foreach ($v9195465250["links"] as $pdeee6a59) { $ped0a6251 = WorkFlowDBHandler::getTableFromTables($pac4bc40a, $v8c5df8072b); self::md82e09e85352($pdeee6a59, $pd98df87c, $ped0a6251, $pe2f18119, true, false, false, false); $v86e5d83e26[] = array( "field" => array( "class" => "link link-$pd98df87c " . $pdeee6a59["class"], "input" => array( "type" => "link", "value" => $pdeee6a59["value"] ? $pdeee6a59["value"] : $pdeee6a59["title"], "href" => $pdeee6a59["url"], "target" => $pdeee6a59["target"], "title" => $pdeee6a59["title"], "extra_attributes" => $pdeee6a59["extra_attributes"], "previous_html" => $pdeee6a59["previous_html"], "next_html" => $pdeee6a59["next_html"], ) ) ); } if ($v9195465250["single_insert"] || $v9195465250["multiple_insert"] || $v9195465250["multiple_insert_update"]) { $v6390ae2db3 = self::f0689db3241($pac4bc40a, $v8c5df8072b, $pd98df87c, $v2f0e633d4c, $v768b231eba, $pfdbbc383, $pe2f18119, $pe54f8a0f, $v9195465250, $v86e5d83e26); $v67079be353 = HashCode::getHashCodePositive($v768b231eba); $peecef390 .= "\n" . self::f1596b25a68("{$pd98df87c}_table_{$v67079be353}_before_insert_html", $v6390ae2db3[0]); $peecef390 .= "\n" . self::f1596b25a68("{$pd98df87c}_table_{$v67079be353}_after_insert_html", $v6390ae2db3[1]); $peecef390 .= "\n"; } $pf142110d = array(); if ($v9195465250["multiple_insert_update"]) $pf142110d[] = self::f420eefd19f("insert_update", $pd98df87c . "_add_save", "Save", $v9195465250["multiple_insert_update"], $pd98df87c, $v2f0e633d4c, $v768b231eba, true); else if ($v9195465250["multiple_insert"]) $pf142110d[] = self::f420eefd19f("insert", $pd98df87c . "_add", "Add", $v9195465250["multiple_insert"], $pd98df87c, $v2f0e633d4c, $v768b231eba, true); else if ($v9195465250["multiple_update"]) $pf142110d[] = self::f420eefd19f("update", $pd98df87c . "_save", "Save", $v9195465250["multiple_update"], $pd98df87c, $v2f0e633d4c, $v768b231eba, true); if ($v9195465250["multiple_delete"]) { $v6d3990173e = $v9195465250["multiple_delete"]; if (!isset($v6d3990173e["confirmation_message"])) { $v40c1606d7e = self::getName($pd7bfd6f7); if ($pd81f7df7) { $v6d3990173e["confirmation_message"] .= "You are about to delete multiples $v40c1606d7e.\nNote that these $v40c1606d7e may have some dependencies/children in the following table(s):"; for ($v43dd7d0051 = 0; $v43dd7d0051 < count($pd81f7df7); $v43dd7d0051++) $v6d3990173e["confirmation_message"] .= "\n- " + self::getName($pd81f7df7[$v43dd7d0051]); $v6d3990173e["confirmation_message"] .= "\n\nYou should delete the correspondent dependencies/children first, and only then delete these $v40c1606d7e.\n\nAre you sure that you wish to proceed with this $v40c1606d7e deletion (before delete it's dependencies)?"; } else $v6d3990173e["confirmation_message"] = "Do you wish to delete multiples $v40c1606d7e?"; } $pf142110d[] = self::f420eefd19f("delete", $pd98df87c . "_delete", "Delete", $v6d3990173e, $pd98df87c, $v2f0e633d4c, $v768b231eba, true); } $v9f3ec7f561 = !$pabde73f0 || $pabde73f0["active"]; if ($v9f3ec7f561) { $v31d72616e1 = array( "container" => array( "class" => "top-pagination", "elements" => array( array( "pagination" => array( "pagination_template" => "bootstrap1", "rows_per_page" => "#" . $pd7bfd6f7 . "_rows_per_page#", "page_number" => "#" . $pd7bfd6f7 . "_current_page#", "max_num_of_shown_pages" => "20", "total_rows" => "#" . $pd7bfd6f7 . "_count#", "page_attr_name" => $pd7bfd6f7 . "_current_page", "on_click_js_func" => $pabde73f0 ? $pabde73f0["on_click_js_func"] : null ) ) ) ) ); $pb65b81dc = $v31d72616e1; $pb65b81dc["container"]["class"] = "bottom-pagination"; } $pc5d3a026 = array(); if ($v9f3ec7f561) $pc5d3a026[] = $v31d72616e1; $pc5d3a026[] = array( "container" => array( "class" => "list-container", "previous_html" => "", "next_html" => "", "elements" => array( 0 => array( "table" => array( "table_class" => "list-table", "default_input_data" => "#" . $pd7bfd6f7 . "#", "elements" => $v86e5d83e26 ) ) ) ) ); if ($v9f3ec7f561) $pc5d3a026[] = $pb65b81dc; if ($pf142110d) $pc5d3a026[] = array( "container" => array( "class" => "buttons", "elements" => $pf142110d ) ); $v90cd343a76 = "form_" . rand(0, 10000); return array( "with_form" => $v7868010f1c, "form_id" => $v90cd343a76, "form_method" => "post", "form_class" => "", "form_on_submit" => $pa34e4896 ? "" : "return false", "form_action" => "", "form_type" => "", "form_containers" => array( array( "container" => array( "id" => $v768b231eba, "class" => 'list-' . str_replace(array("_", " "), "-", self::getParsedTableName($pd7bfd6f7)) . ' ' . $v94682778e5, "previous_html" => "", "next_html" => "", "elements" => $pc5d3a026 ) ) ), "form_css" => "", "form_js" => $v7868010f1c ? 'if (typeof MyJSLib != "undefined") { MyJSLib.FormHandler.initForm( $("#' . $v90cd343a76 . '")[0] ) }' : '' ); } private static function f7bbfd622d1($pac4bc40a, $v8c5df8072b, $pd98df87c, $v2f0e633d4c, $pd7bfd6f7, $pfdbbc383, $pe2f18119, $pe54f8a0f, $pd81f7df7, $v9195465250, &$peecef390, $pabde73f0 = false, $v94682778e5 = "", $v768b231eba = "") { $pc10e884e = $v9195465250["multiple_insert_update"] || $v9195465250["multiple_insert"] || $v9195465250["single_insert"] || $v9195465250["single_update"] || $v9195465250["single_delete"]; $ped0a6251 = WorkFlowDBHandler::getTableFromTables($pac4bc40a, $v8c5df8072b); $v6634cfd0ad = $v9195465250["single_update"] || $v9195465250["multiple_update"] || $v9195465250["multiple_insert_update"]; $v80efa55503 = $v9195465250["single_delete"] || $v9195465250["multiple_delete"]; $pbf2a75a9 = $v9195465250["multiple_insert_update"] || $v9195465250["multiple_insert"] || $v9195465250["multiple_update"] || $v9195465250["multiple_delete"]; $v7868010f1c = $pbf2a75a9; $pa34e4896 = substr($v9195465250["multiple_insert_update"]["action_type"], 0, 5) != "ajax_" || substr($v9195465250["multiple_insert"]["action_type"], 0, 5) != "ajax_" || substr($v9195465250["multiple_update"]["action_type"], 0, 5) != "ajax_" || substr($v9195465250["multiple_delete"]["action_type"], 0, 5) != "ajax_"; $v9f3ec7f561 = !$pabde73f0 || $pabde73f0["active"]; if ($v9f3ec7f561) $pd00687a7 = '
		<ptl:var:PaginationLayout new PaginationLayout(\$input["' . $pd7bfd6f7 . '_count"], \$input["' . $pd7bfd6f7 . '_rows_per_page"], array("' . $pd7bfd6f7 . '_current_page" =&gt; \$input["' . $pd7bfd6f7 . '_current_page"]), "' . $pd7bfd6f7 . '_current_page"' . ($pabde73f0 && $pabde73f0["on_click_js_func"] ? ', "' . $pabde73f0["on_click_js_func"] . '"' : '') . ') />
		<ptl:var:PaginationLayout-&gt;show_x_pages_at_once 20 />
		<ptl:var:pagination_data \$PaginationLayout-&gt;data />
		<ptl:var:pagination_data["style"] "bootstrap1" />
		<ptl:echo \$PaginationLayout-&gt;designWithStyle(1, \$pagination_data) />'; $v067674f4e4 = ''; if ($v7868010f1c) { $v90cd343a76 = "form_" . rand(0, 10000); $v02a69d4e0f = '(typeof MyJSLib == \'undefined\' || MyJSLib.FormHandler.formCheck(this))'; $v067674f4e4 .= '<form id="' . $v90cd343a76 . '" method="post" class="form-horizontal" onSubmit="' . ($pa34e4896 ? 'return ' . $v02a69d4e0f : $v02a69d4e0f . ';return false') . ';' . '" enctype="multipart/form-data">'; } $v067674f4e4 .= '
<div class="list-' . str_replace(array("_", " "), "-", self::getParsedTableName($pd7bfd6f7)) . ' ' . $v94682778e5 . '"' . ($v768b231eba ? ' id="' . $v768b231eba . '"' : '') . '>
	' . ($v9f3ec7f561 ? '<div class="top-pagination">' . $pd00687a7 . '</div>' : '') . '
	<div class="list-container">
		<table class="list-table">
			<thead>
				<tr>'; if ($pbf2a75a9) $v067674f4e4 .= '<th class="multiple-selection"></th>'; foreach ($pfdbbc383 as $v5e45ec9bb9) { $pd152184b = $v9195465250["attributes_settings"][$v5e45ec9bb9]; $v067674f4e4 .= '<th class="' . $v5e45ec9bb9 . ($pd152184b["label_class"] ? ' ' . self::ma3887fc6bbbb($pd152184b["label_class"]) : '') . '">' . self::ma3887fc6bbbb($pd152184b["label_previous_html"]) . (strlen($pd152184b["label_value"]) ? self::ma3887fc6bbbb($pd152184b["label_value"]) : self::getName($v5e45ec9bb9)) . self::ma3887fc6bbbb($pd152184b["label_next_html"]) . '</th>'; } if ($pc10e884e) { $v067674f4e4 .= '<th class="actions">'; if ($v9195465250["single_insert"] || $v9195465250["multiple_insert"] || $v9195465250["multiple_insert_update"]) { $pfb80a61e = 'addNewItem(this)'; $pff1806f2 = $v9195465250["multiple_insert_update"] ? "insert_update" : "insert"; $pf6af6e67 = $v9195465250["multiple_insert_update"] ? $pd98df87c . "_add_save" : $pd98df87c . "_add"; $v29e16a56c0 = $v9195465250["multiple_insert_update"] ? "Save" : "Add"; $pb033e699 = $v9195465250["multiple_insert_update"] ? $v9195465250["multiple_insert_update"] : ($v9195465250["multiple_insert"] ? $v9195465250["multiple_insert"] : $v9195465250["single_insert"]); $v4edb9d8be1 = self::mddd8e42f4121($pff1806f2, $pf6af6e67, $v29e16a56c0, $pb033e699, $pd98df87c, $v2f0e633d4c, $v768b231eba, $pfb80a61e); $v067674f4e4 .= '<span class="icon add"' . $v4edb9d8be1 . '></span>'; $v6390ae2db3 = self::maa96eb997e95($pac4bc40a, $v8c5df8072b, $pd98df87c, $v2f0e633d4c, $pd7bfd6f7, $v768b231eba, $pfdbbc383, $pe2f18119, $pe54f8a0f, $v9195465250); $v67079be353 = HashCode::getHashCodePositive($v768b231eba); $peecef390 .= "\n" . self::f1596b25a68("{$pd98df87c}_table_{$v67079be353}_before_insert_html", $v6390ae2db3[0], true); $peecef390 .= "\n" . self::f1596b25a68("{$pd98df87c}_table_{$v67079be353}_after_insert_html", $v6390ae2db3[1], true); $peecef390 .= "\n"; } $v067674f4e4 .= '</th>'; } if ($v9195465250["links"]) $v067674f4e4 .= '<th class="links"></th>'; $v067674f4e4 .= '</tr>
			</thead>
			<tbody>
				<ptl:if is_array(\\$input[' . $pd7bfd6f7 . '])>
					<ptl:foreach \\$input[' . $pd7bfd6f7 . '] i item>
						<tr>'; $v652526cc06 = ''; if ($pbf2a75a9) $v652526cc06 .= '<td class="multiple-selection"><input type="checkbox" name="multiple_selection[' . $pd98df87c . '][<ptl:echo \$i/>]" value="1"/></td>'; foreach ($pfdbbc383 as $v5e45ec9bb9) { $pd152184b = $v9195465250["attributes_settings"][$v5e45ec9bb9]; $v1b0cfa478b = $ped0a6251[$v5e45ec9bb9]; $pb65331d8 = in_array($v5e45ec9bb9, $pe2f18119); $pc4202532 = in_array($v5e45ec9bb9, $pe54f8a0f); $v8ddbc583e8 = self::mcc16b3e4f8c1($pd98df87c, $pd7bfd6f7, $v5e45ec9bb9, $ped0a6251, $pd152184b, $pe2f18119, $pb65331d8, $pc4202532, $v6634cfd0ad, $v80efa55503, $v5a911d8233, $v9195465250["single_update"]["action_type"] == "ajax_on_blur", false, $v9195465250["multiple_update"] || $v9195465250["multiple_insert_update"] || $v9195465250["single_update"]); $v652526cc06 .= '		<td class="field field-' . strtolower(str_replace(" ", "-", $v1b0cfa478b["type"])) . " " . $v5e45ec9bb9 . ($pb65331d8 ? " is-pk" : "") . ($pc4202532 ? " is-pk-auto-increment" : "") . " field-" . $v5a911d8233 . ($pd152184b["class"] ? " " . self::ma3887fc6bbbb($pd152184b["class"]) : "") . '">
								' . $v8ddbc583e8 . '
							</td>'; } if ($pc10e884e) { $v652526cc06 .= '		<td class="actions">'; if ($v9195465250["single_update"]) { $v4edb9d8be1 = self::mddd8e42f4121("update", $pd98df87c . "_save", "Save", $v9195465250["single_update"], $pd98df87c, $v2f0e633d4c, $v768b231eba, 'executeSingleAction(this, onUpdate)'); $v652526cc06 .= '		<span class="icon save"' . $v4edb9d8be1 . '></span>'; } if ($v9195465250["single_delete"]) { $v6d3990173e = $v9195465250["single_delete"]; if (!isset($v6d3990173e["confirmation_message"])) { if ($pd81f7df7) { $v6d3990173e["confirmation_message"] .= "You are about to delete this $v2f0e633d4c.\nNote that this $v2f0e633d4c may have some dependencies/children in the following table(s):"; for ($v43dd7d0051 = 0; $v43dd7d0051 < count($pd81f7df7); $v43dd7d0051++) $v6d3990173e["confirmation_message"] .= "\n- " + self::getName($pd81f7df7[$v43dd7d0051]); $v6d3990173e["confirmation_message"] .= "\n\nYou should delete the correspondent dependencies/children first, and only then delete this $v2f0e633d4c.\n\nAre you sure that you wish to proceed with this $v2f0e633d4c deletion (before delete it's dependencies)?"; } else $v6d3990173e["confirmation_message"] = "Do you wish to delete this $v2f0e633d4c?"; } $v4edb9d8be1 = self::mddd8e42f4121("delete", $pd98df87c . "_delete", "Delete", $v6d3990173e, $pd98df87c, $v2f0e633d4c, $v768b231eba, 'executeSingleAction(this, onDelete)'); $v652526cc06 .= '		<span class="icon delete"' . $v4edb9d8be1 . '></span>'; } $v652526cc06 .= '		</td>'; } if ($v9195465250["links"]) $v652526cc06 .= '<td class="links">' . self::ma093534445db($v9195465250["links"], $pd98df87c, $pd7bfd6f7, $ped0a6251, $pe2f18119) . '</td>'; $v067674f4e4 .= $v652526cc06; $v067674f4e4 .= '		</tr>
					</ptl:foreach>
				</ptl:if>
			</tbody>
		</table>
	</div>
	' . ($v9f3ec7f561 ? '<div class="bottom-pagination">' . $pd00687a7 . '</div>' : ''); if ($pbf2a75a9) { $v067674f4e4 .= '<div class="buttons">'; if ($v9195465250["multiple_insert_update"]) $v067674f4e4 .= self::mb09249aa54b5("insert_update", $pd98df87c . "_add_save", "Save", $v9195465250["multiple_insert_update"], $pd98df87c, $v2f0e633d4c, $v768b231eba, true); else if ($v9195465250["multiple_insert"]) $v067674f4e4 .= self::mb09249aa54b5("insert", $pd98df87c . "_add", "Add", $v9195465250["multiple_insert"], $pd98df87c, $v2f0e633d4c, $v768b231eba, true); else if ($v9195465250["multiple_update"]) $v067674f4e4 .= self::mb09249aa54b5("update", $pd98df87c . "_save", "Save", $v9195465250["multiple_update"], $pd98df87c, $v2f0e633d4c, $v768b231eba, true); if ($v9195465250["multiple_delete"]) { $v6d3990173e = $v9195465250["multiple_delete"]; if (!isset($v6d3990173e["confirmation_message"])) { $v40c1606d7e = self::getName($pd7bfd6f7); if ($pd81f7df7) { $v6d3990173e["confirmation_message"] .= "You are about to delete multiples $v40c1606d7e.\nNote that these $v40c1606d7e may have some dependencies/children in the following table(s):"; for ($v43dd7d0051 = 0; $v43dd7d0051 < count($pd81f7df7); $v43dd7d0051++) $v6d3990173e["confirmation_message"] .= "\n- " + self::getName($pd81f7df7[$v43dd7d0051]); $v6d3990173e["confirmation_message"] .= "\n\nYou should delete the correspondent dependencies/children first, and only then delete these $v40c1606d7e.\n\nAre you sure that you wish to proceed with this $v40c1606d7e deletion (before delete it's dependencies)?"; } else $v6d3990173e["confirmation_message"] = "Do you wish to delete multiples $v40c1606d7e?"; } $v067674f4e4 .= self::mb09249aa54b5("delete", $pd98df87c . "_delete", "Delete", $v6d3990173e, $pd98df87c, $v2f0e633d4c, $v768b231eba, true); } $v067674f4e4 .= '</div>'; } $v067674f4e4 .= '</div>'; if ($v7868010f1c) $v067674f4e4 .= '</form>
			<script>if (typeof MyJSLib != "undefined") { MyJSLib.FormHandler.initForm( $("#' . $v90cd343a76 . '")[0] ) }</script>'; return $v067674f4e4; } private static function f0689db3241($pac4bc40a, $v8c5df8072b, $pd98df87c, $v2f0e633d4c, $v768b231eba, $pfdbbc383, $pe2f18119, $pe54f8a0f, $v9195465250, $v3b3c256e78) { $v55d2af88fe = array(); $ped0a6251 = WorkFlowDBHandler::getTableFromTables($pac4bc40a, $v8c5df8072b); if ($v9195465250["multiple_insert_update"] || $v9195465250["multiple_insert"] || $v9195465250["multiple_update"] || $v9195465250["multiple_delete"]) $v55d2af88fe[] = array( "field" => array( "class" => 'multiple-selection', "input" => array( "type" => "checkbox", "name" => "multiple_insert_selection[$pd98df87c][]", "value" => "1", "extra_attributes" => array( array("name" => "style", "value" => "display:none;") ), ) ) ); foreach ($pfdbbc383 as $v5e45ec9bb9) $v55d2af88fe[] = self::mcdf029955be9($v5e45ec9bb9, $ped0a6251, $pd98df87c, $pfdbbc383, $pe2f18119, $pe54f8a0f, $v9195465250, true, true, true, true); if (($v9195465250["multiple_insert_update"] || $v9195465250["multiple_insert"]) && !$v9195465250["single_insert"]) $v55d2af88fe[] = array( "field" => array( "class" => "actions", "input" => array( "type" => "label", "class" => "icon delete", "extra_attributes" => array( array('name' => 'onClick', 'value' => '$(this).parent().closest(\'tr\').remove()') ), ) ) ); else { $paf762455 = self::mb8630b308ea4("insert", $pd98df87c . "_add", "Add", $v9195465250["single_insert"], $pd98df87c, $v2f0e633d4c, $v768b231eba, 'executeSingleAction(this, onSingleInsert)'); $v55d2af88fe[] = array( "field" => array( "class" => 'actions', "input" => array( "type" => "label", "class" => "icon insert", "extra_attributes" => $paf762455, "previous_html" => '<span class="icon delete" onClick="$(this).parent().closest(\'tr\').remove()"></span>', ) ) ); } if ($v9195465250["links"]) foreach ($v9195465250["links"] as $pdeee6a59) { $v55d2af88fe[] = array( "field" => array( "class" => "link link-$pd98df87c " . $pdeee6a59["class"] ) ); } $v72b89d9af2 = '<tr data-is-insert-record="1">'; $v37c5c0e60b = '<tr>'; $pfc216969 = new HtmlFormHandler(array("parse_values" => false)); $pc37695cb = count($v55d2af88fe); for ($v43dd7d0051 = 0; $v43dd7d0051 < $pc37695cb; $v43dd7d0051++) { $v56a8548987 = $v55d2af88fe[$v43dd7d0051]; $v2d35fd76d2 = $v56a8548987["field"]; $pf9587957 = $v3b3c256e78[$v43dd7d0051]["field"]; $v3ae55a9a2e = $pf9587957["class"] ? ' class="' . $pf9587957["class"] . '"' : ''; $v72b89d9af2 .= '<td' . $v3ae55a9a2e . '>' . $pfc216969->getFieldInputHtml($v2d35fd76d2) . '</td>'; $v37c5c0e60b .= '<td' . $v3ae55a9a2e . '>' . $pfc216969->getFieldInputHtml($pf9587957) . '</td>'; } $v72b89d9af2 .= '</tr>'; $v37c5c0e60b .= '</tr>'; foreach ($pfdbbc383 as $v5e45ec9bb9) { $v72b89d9af2 = str_replace("=\"{$pd98df87c}[#idx#][orig_$v5e45ec9bb9]\"", "=\"{$pd98df87c}[][orig_$v5e45ec9bb9]\"", str_replace("=\"{$pd98df87c}[#idx#][$v5e45ec9bb9]\"", "=\"{$pd98df87c}[][$v5e45ec9bb9]\"", str_replace("=\"#[idx][$v5e45ec9bb9]#\"", '=""', $v72b89d9af2))); $v37c5c0e60b = str_replace("#[idx][$v5e45ec9bb9]#", "#$v5e45ec9bb9#", str_replace("=\"{$pd98df87c}[#idx#][orig_$v5e45ec9bb9]\"", "=\"{$pd98df87c}[][orig_$v5e45ec9bb9]\"", str_replace("=\"{$pd98df87c}[#idx#][$v5e45ec9bb9]\"", "=\"{$pd98df87c}[][$v5e45ec9bb9]\"", str_replace("=\"#[idx][$v5e45ec9bb9]#\"", '=""', $v37c5c0e60b)))); } $v37c5c0e60b = str_replace("name=\"multiple_selection[$pd98df87c][#idx#]\"", "name=\"multiple_selection[$pd98df87c][]\"", $v37c5c0e60b); return array($v72b89d9af2, $v37c5c0e60b); } private static function maa96eb997e95($pac4bc40a, $v8c5df8072b, $pd98df87c, $v2f0e633d4c, $pd7bfd6f7, $v768b231eba, $pfdbbc383, $pe2f18119, $pe54f8a0f, $v9195465250) { $v72b89d9af2 = ''; $v37c5c0e60b = ''; $ped0a6251 = WorkFlowDBHandler::getTableFromTables($pac4bc40a, $v8c5df8072b); $v6634cfd0ad = !empty($v9195465250["single_update"]); $v80efa55503 = !empty($v9195465250["single_delete"]); if ($v9195465250["multiple_insert_update"] || $v9195465250["multiple_insert"] || $v9195465250["multiple_update"] || $v9195465250["multiple_delete"]) { $v72b89d9af2 .= '<td class="multiple-selection"><input type="checkbox" name="multiple_insert_selection[' . $pd98df87c . '][]" value="1" checked style="display:none;"/></td>'; $v37c5c0e60b .= '<td class="multiple-selection"><input type="checkbox" name="multiple_selection[' . $pd98df87c . '][]" value="1"/></td>'; } foreach ($pfdbbc383 as $v5e45ec9bb9) { $pd152184b = $v9195465250["attributes_settings"][$v5e45ec9bb9]; $v781520fbd8 = $ped0a6251[$v5e45ec9bb9]; $pb65331d8 = in_array($v5e45ec9bb9, $pe2f18119); $pc4202532 = in_array($v5e45ec9bb9, $pe54f8a0f); $v2e159b1342 = '<td class="field field-' . strtolower(str_replace(" ", "-", $v781520fbd8["type"])) . " " . $v5e45ec9bb9 . ($pb65331d8 ? " is-pk" : "") . ($pc4202532 ? " is-pk-auto-increment" : "") . " field-" . $v5a911d8233 . ($pd152184b["class"] ? " " . self::ma3887fc6bbbb($pd152184b["class"]) : "") . '">'; $v72b89d9af2 .= $v2e159b1342 . self::mcc16b3e4f8c1($pd98df87c, '', $v5e45ec9bb9, $ped0a6251, $pd152184b, $pe2f18119, $pb65331d8, $pc4202532, true, $v80efa55503, $v02a69d4e0f = null, false, true, true) . '</td>'; $v37c5c0e60b .= $v2e159b1342 . self::mcc16b3e4f8c1($pd98df87c, '', $v5e45ec9bb9, $ped0a6251, $pd152184b, $pe2f18119, $pb65331d8, $pc4202532, $v6634cfd0ad, $v80efa55503, $v5a911d8233, $v9195465250["single_update"]["action_type"] == "ajax_on_blur", true, $v9195465250["multiple_update"] || $v9195465250["multiple_insert_update"] || $v9195465250["single_update"]) . '</td>'; } $v72b89d9af2 .= '<td class="actions">
			<span class="icon delete" onClick="$(this).parent().closest(\'tr\').remove()"></span>'; if ($v9195465250["single_insert"]) { $v3683aadbd0 = self::mddd8e42f4121("insert", $pd98df87c . "_add", "Add", $v9195465250["single_insert"], $pd98df87c, $v2f0e633d4c, $v768b231eba, 'executeSingleAction(this, onSingleInsert)'); $v72b89d9af2 .= '<span class="icon insert"' . $v3683aadbd0 . '></span>'; } $v72b89d9af2 .= '</td>
		' . ($v9195465250["links"] ? '<td class="links"></td>' : ''); $peeb1a166 = self::mddd8e42f4121("update", $pd98df87c . "_save", "Save", $v9195465250["single_update"], $pd98df87c, $v2f0e633d4c, $v768b231eba, 'executeSingleAction(this, onUpdate)'); $pe9f4d689 = self::mddd8e42f4121("delete", $pd98df87c . "_delete", "Delete", $v9195465250["single_delete"], $pd98df87c, $v2f0e633d4c, $v768b231eba, 'executeSingleAction(this, onDelete)'); $v37c5c0e60b .= '
			<td class="actions">
				' . ($v9195465250["single_update"] ? '<span class="icon save"' . $peeb1a166 . '></span>' : '') . '
				' . ($v9195465250["single_delete"] ? '<span class="icon delete"' . $pe9f4d689 . '></span>' : '') . '
			</td>
			' . ($v9195465250["links"] ? '<td class="links">' . self::ma093534445db($v9195465250["links"], $pd98df87c, $pd7bfd6f7, $ped0a6251, $pe2f18119, true) . '</td>' : ''); $v72b89d9af2 = '<tr data-is-insert-record="1">' . $v72b89d9af2 . '</tr>'; $v37c5c0e60b = '<tr>' . $v37c5c0e60b . '</tr>'; foreach ($pfdbbc383 as $v5e45ec9bb9) { $v37c5c0e60b = str_replace("#[idx][$v5e45ec9bb9]#", "#$v5e45ec9bb9#", $v37c5c0e60b); } return array($v72b89d9af2, $v37c5c0e60b); } private static function f920f3a1346($pac4bc40a, $v8c5df8072b, $pd98df87c, $v2f0e633d4c, $v768b231eba, $pfdbbc383, $pe2f18119, $pe54f8a0f, $v9195465250, $v7045f4608a) { $v55d2af88fe = array(); $pe8bf529f = array(); $ped0a6251 = WorkFlowDBHandler::getTableFromTables($pac4bc40a, $v8c5df8072b); if ($v9195465250["multiple_insert_update"] || $v9195465250["multiple_insert"] || $v9195465250["multiple_update"] || $v9195465250["multiple_delete"]) $v55d2af88fe[] = array( "field" => array( "class" => 'multiple-selection', "input" => array( "type" => "checkbox", "name" => "multiple_insert_selection[$pd98df87c][]", "value" => "1", "extra_attributes" => array( array("name" => "style", "value" => "display:none;") ), ) ) ); foreach ($pfdbbc383 as $v5e45ec9bb9) { if (in_array($v5e45ec9bb9, $pe54f8a0f)) continue 1; $v55d2af88fe[] = self::mcdf029955be9($v5e45ec9bb9, $ped0a6251, $pd98df87c, $pfdbbc383, $pe2f18119, $pe54f8a0f, $v9195465250, true, true, true, true); } if ($v9195465250["single_insert"]) { $paf762455 = self::mb8630b308ea4("insert", $pd98df87c . "_add", "Add", $v9195465250["single_insert"], $pd98df87c, $v2f0e633d4c, $v768b231eba, 'executeSingleAction(this, onSingleInsert)'); $pe8bf529f[] = array( "field" => array( "class" => "button button-insert button-insert-$pd98df87c", "input" => array( "type" => "button", "name" => $pd98df87c . "_add", "value" => "Add", "extra_attributes" => $paf762455, "next_html" => '<span class="icon delete" onClick="$(this).parent().closest(\'li\').remove()"></span>', ) ) ); } else $pe8bf529f[] = array( "field" => array( "class" => "button button-insert button-insert-$pd98df87c", "input" => array( "type" => "label", "class" => "icon delete", "extra_attributes" => array( array('name' => 'onClick', 'value' => '$(this).parent().closest(\'li\').remove()') ), ) ) ); $v76f1660d94 = array(); $v76f1660d94[] = array( "container" => array( "class" => "fields-container", "previous_html" => "", "next_html" => "", "elements" => $v55d2af88fe ) ); $v76f1660d94[] = array( "container" => array( "class" => "buttons single-buttons", "elements" => $pe8bf529f ) ); $pfc216969 = new HtmlFormHandler(array("parse_values" => false)); $v72b89d9af2 = '<li data-is-insert-record="1">' . $pfc216969->createElements($v76f1660d94) . '</li>'; $v37c5c0e60b = '<li>' . $pfc216969->createElements($v7045f4608a) . '</li>'; foreach ($pfdbbc383 as $v5e45ec9bb9) { $v72b89d9af2 = str_replace("=\"{$pd98df87c}[#idx#][orig_$v5e45ec9bb9]\"", "=\"{$pd98df87c}[][orig_$v5e45ec9bb9]\"", str_replace("=\"{$pd98df87c}[#idx#][$v5e45ec9bb9]\"", "=\"{$pd98df87c}[][$v5e45ec9bb9]\"", str_replace("=\"#[idx][$v5e45ec9bb9]#\"", '=""', $v72b89d9af2))); $v37c5c0e60b = str_replace("#[idx][$v5e45ec9bb9]#", "#$v5e45ec9bb9#", str_replace("=\"{$pd98df87c}[#idx#][orig_$v5e45ec9bb9]\"", "=\"{$pd98df87c}[][orig_$v5e45ec9bb9]\"", str_replace("=\"{$pd98df87c}[#idx#][$v5e45ec9bb9]\"", "=\"{$pd98df87c}[][$v5e45ec9bb9]\"", str_replace("=\"#[idx][$v5e45ec9bb9]#\"", '=""', $v37c5c0e60b)))); } $v37c5c0e60b = str_replace("name=\"multiple_selection[$pd98df87c][#idx#]\"", "name=\"multiple_selection[$pd98df87c][]\"", $v37c5c0e60b); return array($v72b89d9af2, $v37c5c0e60b); } private static function mbae6c478ca4e($pac4bc40a, $v8c5df8072b, $pd98df87c, $v2f0e633d4c, $pd7bfd6f7, $v768b231eba, $pfdbbc383, $pe2f18119, $pe54f8a0f, $v9195465250) { $v72b89d9af2 = '<div class="fields-container">'; $v37c5c0e60b = '<div class="fields-container">'; $ped0a6251 = WorkFlowDBHandler::getTableFromTables($pac4bc40a, $v8c5df8072b); $v6634cfd0ad = !empty($v9195465250["single_update"]); $v80efa55503 = !empty($v9195465250["single_delete"]); if ($v9195465250["multiple_insert_update"] || $v9195465250["multiple_insert"] || $v9195465250["multiple_update"] || $v9195465250["multiple_delete"]) { $v72b89d9af2 .= '<div class="multiple-selection" style="display:none;"><input type="checkbox" name="multiple_insert_selection[' . $pd98df87c . '][]" value="1" checked/></div>'; $v37c5c0e60b .= '<div class="multiple-selection"><label>Select to perform action</label><input type="checkbox" name="multiple_selection[' . $pd98df87c . '][]" value="1"/></div>'; } foreach ($pfdbbc383 as $v5e45ec9bb9) { $pd152184b = $v9195465250["attributes_settings"][$v5e45ec9bb9]; $v781520fbd8 = $ped0a6251[$v5e45ec9bb9]; $pb65331d8 = in_array($v5e45ec9bb9, $pe2f18119); $pc4202532 = in_array($v5e45ec9bb9, $pe54f8a0f); $pf187374e = '<div class="field field-' . strtolower(str_replace(" ", "-", $v781520fbd8["type"])) . " " . $v5e45ec9bb9 . ($pb65331d8 ? " is-pk" : "") . ($pc4202532 ? " is-pk-auto-increment" : "") . " field-" . $v5a911d8233 . ($pd152184b["class"] ? " " . self::ma3887fc6bbbb($pd152184b["class"]) : "") . '">
				' . self::f5b773892e7($v5e45ec9bb9, $pd152184b); if (!$pc4202532) $v72b89d9af2 .= $pf187374e . self::mcc16b3e4f8c1($pd98df87c, '', $v5e45ec9bb9, $ped0a6251, $pd152184b, $pe2f18119, $pb65331d8, $pc4202532, true, $v80efa55503, $v02a69d4e0f = null, false, true, true) . '</div>'; $v37c5c0e60b .= $pf187374e . self::mcc16b3e4f8c1($pd98df87c, '', $v5e45ec9bb9, $ped0a6251, $pd152184b, $pe2f18119, $pb65331d8, $pc4202532, $v6634cfd0ad, $v80efa55503, $v5a911d8233, $v9195465250["single_update"]["action_type"] == "ajax_on_blur", true, $v9195465250["multiple_update"] || $v9195465250["multiple_insert_update"] || $v9195465250["single_update"]) . '</div>'; } $v72b89d9af2 .= '</div>
				<div class="buttons single-buttons">
					<div class="button button-insert button-insert-' . $pd98df87c . '">'; if ($v9195465250["single_insert"]) { $v072872573a = self::mddd8e42f4121("insert", $pd98df87c . "_add", "Add", $v9195465250["single_insert"], $pd98df87c, $v2f0e633d4c, $v768b231eba, 'executeSingleAction(this, onSingleInsert)'); $v72b89d9af2 .= '<input type="button" value="Add" name="' . $pd98df87c . '_add"' . $v072872573a . ' />'; } $v72b89d9af2 .= '
						<span class="icon delete" onClick="$(this).parent().closest(\'li\').remove()"></span>
					</div>
				</div>'; $v37c5c0e60b .= '</div>'; if ($v9195465250["single_update"] || $v9195465250["single_delete"]) { $peeb1a166 = self::mddd8e42f4121("update", $pd98df87c . "_save", "Save", $v9195465250["single_update"], $pd98df87c, $v2f0e633d4c, $v768b231eba, 'executeSingleAction(this, onUpdate)'); $pe9f4d689 = self::mddd8e42f4121("delete", $pd98df87c . "_delete", "Delete", $v9195465250["single_delete"], $pd98df87c, $v2f0e633d4c, $v768b231eba, 'executeSingleAction(this, onDelete)'); $v37c5c0e60b .= '
				<div class="buttons single-buttons">
					' . ($v9195465250["single_update"] ? '
						<div class="button button-update button-update-' . $pd98df87c . '">
							<input type="button" value="Save" name="' . $pd98df87c . '_save"' . $peeb1a166 . ' />
						</div>' : '') . '
					' . ($v9195465250["single_delete"] ? '
						<div class="button button-delete button-delete-' . $pd98df87c . '">
							<input type="button" value="Delete" name="' . $pd98df87c . '_delete"' . $pe9f4d689 . ' />
						</div>' : '') . '
				</div>
				' . ($v9195465250["links"] ? '<div class="links">' . self::ma093534445db($v9195465250["links"], $pd98df87c, $pd7bfd6f7, $ped0a6251, $pe2f18119, true) . '</div>' : ''); } $v72b89d9af2 = '<li data-is-insert-record="1">' . $v72b89d9af2 . '</li>'; $v37c5c0e60b = '<li>' . $v37c5c0e60b . '</li>'; foreach ($pfdbbc383 as $v5e45ec9bb9) { $v37c5c0e60b = str_replace("#[idx][$v5e45ec9bb9]#", "#$v5e45ec9bb9#", $v37c5c0e60b); } return array($v72b89d9af2, $v37c5c0e60b); } private static function mcc16b3e4f8c1($pd98df87c, $pd7bfd6f7, $v5e45ec9bb9, $ped0a6251, $pd152184b, $pe2f18119, $pb65331d8, $pc4202532, $v6634cfd0ad, $v80efa55503, &$v5a911d8233 = null, $pf0fd3b95 = false, $v653eabec38 = false, $pd512bd61 = false) { $v781520fbd8 = $ped0a6251[$v5e45ec9bb9]; $pb494e708 = self::f19d90c9add($pd98df87c, $v781520fbd8, $v5a911d8233, array("ajax_on_blur" => $pf0fd3b95, "multiple_key_press" => $pd512bd61)); if ($pd152184b["type"]) $v5a911d8233 = $pd152184b["type"]; $v067674f4e4 = self::ma3887fc6bbbb($pd152184b["input_previous_html"]); $pe8d694c4 = empty($pd7bfd6f7); $v90963767ae = !$pe8d694c4 ? (strlen($pd152184b["input_value"]) ? self::ma3887fc6bbbb($pd152184b["input_value"]) : '<ptl:echo str_replace(\'"\', \'&quot;\', (\\$input[' . $pd7bfd6f7 . '][\\$i][' . $v5e45ec9bb9 . '] )) />') : ''; $v4ef49e289c = $pd98df87c . ($v653eabec38 ? '[]' : '[<ptl:echo \$i/>]') . '[' . $v5e45ec9bb9 . ']'; $v2513d90238 = $pd152184b["input_class"] ? ' class="' . self::ma3887fc6bbbb($pd152184b["input_class"]) . '"' : ''; $pc15c8e4e = $v90963767ae; if (!$pe8d694c4 && $pd152184b["available_values"]) { $v90963767ae = '
				<ptl:var:av_exists false/>
				<ptl:var:var_aux \\$input[' . $pd7bfd6f7 . '][\\$i][' . $v5e45ec9bb9 . '] />'; if (is_array($pd152184b["available_values"])) $v90963767ae .= '<ptl:var:avs ' . str_replace(" => ", " =&gt; ", str_replace("\n", "", var_export($pd152184b["available_values"], true))) . ' />'; else $v90963767ae .= '<ptl:var:avs \\$input[' . $pd152184b["available_values"] . ']/>'; $v90963767ae .= '
				<ptl:if is_array(\\$avs) />
					<ptl:foreach \\$avs k v>
						<ptl:if \\$k == \\$var_aux>
							<ptl:echo \\$v/>
							<ptl:var:av_exists true/>
							<ptl:break/>
						</ptl:if>
					</ptl:foreach>
				</ptl:if>
				<ptl:if !\\$av_exists>
					<ptl:echo \\$var_aux/>
				</ptl:if>'; } if ($v5a911d8233 == "hidden") $v067674f4e4 .= '<input' . $v2513d90238 . ' type="hidden" name="' . $v4ef49e289c . '" value="' . $pc15c8e4e . '" />'; else if (!$v6634cfd0ad) { if ($pd152184b["type"] == "link") { $v5a911d8233 = "link"; $v067674f4e4 .= '<a class="field-value' . ($pd152184b["input_class"] ? " " . self::ma3887fc6bbbb($pd152184b["input_class"]) : "") . '"' . $v2513d90238 . ' href="' . self::f9149542f9f($pd152184b["href"], $pd7bfd6f7, $ped0a6251, $pe2f18119, true, $pe8d694c4, true) . '"' . ($pd152184b["target"] ? ' target="' . self::ma3887fc6bbbb($pd152184b["target"]) . '"' : "") . '>' . $v90963767ae . '</a>'; } else { if (!$pd152184b["type"]) $v5a911d8233 = "label"; $pfc216969 = new HtmlFormHandler(array("parse_values" => false)); $v067674f4e4 .= $pfc216969->getFieldInputHtml(array( "input" => array( "type" => $v5a911d8233, "class" => self::f8ddab88b24($pd152184b["input_class"], "field-value", true) . " " . $pd152184b["input_class"], "value" => $v90963767ae, ) )); } if ($v80efa55503 && $pb65331d8) $v067674f4e4 .= '<input' . $v2513d90238 . ' type="hidden" name="' . $v4ef49e289c . '" value="' . $pc15c8e4e . '" />'; } else if ($pc4202532) { $v5a911d8233 = "label"; $v067674f4e4 .= '<span class="field-value' . ($pd152184b["input_class"] ? " " . self::ma3887fc6bbbb($pd152184b["input_class"]) : "") . '">' . $pc15c8e4e . '</span>
			<input' . $v2513d90238 . ' type="hidden" name="' . $v4ef49e289c . '" value="' . $pc15c8e4e . '" />'; } else { if ($pb65331d8 && ($v5a911d8233 != "hidden" || $pd152184b["options"])) $v067674f4e4 .= '<input' . $v2513d90238 . ' type="hidden" name="' . $pd98df87c . ($v653eabec38 ? '[]' : '[<ptl:echo \$i/>]') . '[orig_' . $v5e45ec9bb9 . ']" value="' . $pc15c8e4e . '" />'; if ($pd152184b["options"] && !$pd152184b["type"]) $v5a911d8233 = "select"; if ($v5a911d8233 == "textarea") $v067674f4e4 .= '<textarea' . $v2513d90238 . ' name="' . $v4ef49e289c . '"' . $pb494e708 . '>' . $pc15c8e4e . '</textarea>'; else if ($pd152184b["options"]) { } else if ($v5a911d8233 == "select") { $v067674f4e4 .= '<select' . $v2513d90238 . ' name="' . $v4ef49e289c . '"' . $pb494e708; if ($pd152184b["options"]) { if ($pd152184b["options_javascript_variable_name"]) $v067674f4e4 .= ' data-options-javascript-variable-name="' . $pd152184b["options_javascript_variable_name"] . '"'; $v067674f4e4 .= '>'; if (is_array($pd152184b["options"])) foreach($pd152184b["options"] as $pe5c5e2fe => $v956913c90f) { $pb69caaf8 = !$pe8d694c4 ? '<ptl:echo ("' . $pe5c5e2fe . '" == \\$input[' . $pd7bfd6f7 . '][\\$i][' . $v5e45ec9bb9 . '] ? " selected" : "")/>' : ''; $v067674f4e4 .= '<option value="' . $pe5c5e2fe . '"' . $pb69caaf8 . '>' . $v956913c90f . '</option>'; } else { $v1cfba8c105 = $pd152184b["options"]; $pb69caaf8 = !$pe8d694c4 ? '<ptl:echo (\\$k == \\$input[' . $pd7bfd6f7 . '][\\$i][' . $v5e45ec9bb9 . '] ? " selected" : "")/>' : ''; $v067674f4e4 .= '<ptl:if is_array(\\$input[' . $v1cfba8c105 . '])>
									<ptl:foreach \\$input[' . $v1cfba8c105 . '] k v>
										<option value="<ptl:echo str_replace(\'"\', \'&quot;\', \\$k) />"' . $pb69caaf8 . '><ptl:echo \\$v/></option>
									</ptl:foreach>
								</ptl:if>'; } } else $v067674f4e4 .= '>'; $v067674f4e4 .= '</select>'; } else if ($v5a911d8233 == "checkbox" || $v5a911d8233 == "radio") { if (is_array($pd152184b["options"])) { $pc37695cb = count($pd152184b["options"]); foreach($pd152184b["options"] as $pe5c5e2fe => $v956913c90f) { $v2fbd726542 = !$pe8d694c4 ? '<ptl:echo ("' . $pe5c5e2fe . '" == \\$input[' . $pd7bfd6f7 . '][\\$i][' . $v5e45ec9bb9 . '] ? " checked" : "")/>' : ''; if ($pc37695cb > 1) $v067674f4e4 .= '<div' . $v2513d90238 . '><label>' . $v956913c90f . '</label><input' . $v2513d90238 . ' type="' . $v5a911d8233 . '" name="' . $v4ef49e289c . '" value="' . $pe5c5e2fe . '"' . $v2fbd726542 . $pb494e708 . ' /></div>'; else $v067674f4e4 .= '<input' . $v2513d90238 . ' type="' . $v5a911d8233 . '" name="' . $v4ef49e289c . '" value="' . $pe5c5e2fe . '"' . $v2fbd726542 . $pb494e708 . ' />'; } } else if ($pd152184b["options"]) { $v1cfba8c105 = $pd152184b["options"]; $v1cfba8c105 = $pd152184b["options"]; $v2fbd726542 = !$pe8d694c4 ? '<ptl:echo (\\$k == \\$input[' . $pd7bfd6f7 . '][\\$i][' . $v5e45ec9bb9 . '] ? " checked" : "")/>' : ''; $v067674f4e4 .= '<ptl:if is_array(\\$input[' . $v1cfba8c105 . '])>
								<ptl:var:t count(\\$input[' . $v1cfba8c105 . ']) />
								
								<ptl:foreach \\$input[' . $v1cfba8c105 . '] k v>
									<ptl:if \\$t &gt; 1>
										<div' . $v2513d90238 . '>
											<label><ptl:echo \\$v/></label>
											<input' . $v2513d90238 . ' type="' . $v5a911d8233 . '" name="' . $v4ef49e289c . '" value="<ptl:echo str_replace(\'"\', \'&quot;\', \\$k) />"' . $v2fbd726542 . $pb494e708 . ' />
										</div>
									<ptl:else>
										<input' . $v2513d90238 . ' type="' . $v5a911d8233 . '" name="' . $v4ef49e289c . '" value="<ptl:echo str_replace(\'"\', \'&quot;\', \\$k) />"' . $v2fbd726542 . $pb494e708 . ' />
									</ptl:if>
								</ptl:foreach>
							</ptl:if>'; } else { $v2fbd726542 = !$pe8d694c4 ? ' <ptl:echo (\\$input[' . $pd7bfd6f7 . '][\\$i][' . $v5e45ec9bb9 . '] == 1 ? "checked" : "") />' : ''; $v067674f4e4 .= '<input' . $v2513d90238 . ' type="' . $v5a911d8233 . '" name="' . $v4ef49e289c . '" value="1"' . $v2fbd726542 . $pb494e708 . ' />'; } } else if (!in_array($v5a911d8233, self::$editable_input_types)) { $v067674f4e4 .= '<input type="hidden" name="' . $v4ef49e289c . '" value="' . $pc15c8e4e . '" />'; $pfc216969 = new HtmlFormHandler(array("parse_values" => false)); $v067674f4e4 .= $pfc216969->getFieldInputHtml(array( "input" => array( "type" => $v5a911d8233, "class" => self::f8ddab88b24($pd152184b["input_class"], "field-value", true) . " " . $v2513d90238, "value" => $v90963767ae, ) )); } else $v067674f4e4 .= '<input' . $v2513d90238 . ' type="' . $v5a911d8233 . '" name="' . $v4ef49e289c . '" value="' . $pc15c8e4e . '"' . ($v5a911d8233 != "hidden" ? $pb494e708 : '') . ' />'; } $v067674f4e4 .= self::ma3887fc6bbbb($pd152184b["input_next_html"]); return $v067674f4e4; } private static function ma093534445db($v5ed3bcae90, $pd98df87c, $pd7bfd6f7, $ped0a6251, $pe2f18119, $v039faf5fd3 = false) { $v067674f4e4 = ''; if ($v5ed3bcae90) { foreach ($v5ed3bcae90 as $pdeee6a59) { self::md82e09e85352($pdeee6a59, $pd7bfd6f7, $ped0a6251, $pe2f18119, true, false, true, $v039faf5fd3); $v63967fdd7c = $pdeee6a59["url"] ? ' href="' . self::ma3887fc6bbbb($pdeee6a59["url"]) . '"' : ''; $pb8c0935b = $pdeee6a59["title"] ? ' title="' . self::ma3887fc6bbbb($pdeee6a59["title"]) . '"' : ''; $v6aafc8f2c4 = $pdeee6a59["target"] ? ' target="' . self::ma3887fc6bbbb($pdeee6a59["target"]) . '"' : ''; $paf762455 = ""; if ($pdeee6a59["extra_attributes"]) { if(is_array($pdeee6a59["extra_attributes"])) foreach ($pdeee6a59["extra_attributes"] as $v1b08a89324) if ($v1b08a89324["name"]) $paf762455 .= ' ' . self::ma3887fc6bbbb($v1b08a89324["name"]) . '="' . self::ma3887fc6bbbb($v1b08a89324["value"]) . '"'; else $paf762455 .= ' ' . self::ma3887fc6bbbb($pdeee6a59["extra_attributes"]); } $v067674f4e4 .= '<div class="link link-' . $pd98df87c . ' ' . self::ma3887fc6bbbb($pdeee6a59["class"]) . '">' . self::ma3887fc6bbbb($pdeee6a59["previous_html"]) . '<a' . $v63967fdd7c . $pb8c0935b . $v6aafc8f2c4 . $paf762455 . '>' . self::ma3887fc6bbbb($pdeee6a59["value"] ? $pdeee6a59["value"] : $pdeee6a59["title"]) . '</a>' . self::ma3887fc6bbbb($pdeee6a59["next_html"]) . '</div>' . "\n"; } } return $v067674f4e4; } private static function mec0957c1c7ad($pac4bc40a, $v8c5df8072b, $pd98df87c, $v2f0e633d4c, $pd7bfd6f7, $pfdbbc383, $pe2f18119, $pe54f8a0f, $pd81f7df7, $v9195465250, &$peecef390, $pabde73f0 = false, $v94682778e5 = "", $v768b231eba = "") { $v3e3a84080a = $v9195465250["single_insert"] || $v9195465250["multiple_insert"] || $v9195465250["multiple_insert_update"]; $pb0b5cc75 = $v9195465250["single_update"] || $v9195465250["multiple_update"] || $v9195465250["multiple_insert_update"]; $v80efa55503 = $v9195465250["single_delete"] || $v9195465250["multiple_delete"]; $v7868010f1c = $v9195465250["multiple_insert_update"] || $v9195465250["multiple_insert"] || $v9195465250["multiple_update"] || $v9195465250["multiple_delete"]; $pa34e4896 = substr($v9195465250["multiple_insert_update"]["action_type"], 0, 5) != "ajax_" || substr($v9195465250["multiple_insert"]["action_type"], 0, 5) != "ajax_" || substr($v9195465250["multiple_update"]["action_type"], 0, 5) != "ajax_" || substr($v9195465250["multiple_delete"]["action_type"], 0, 5) != "ajax_"; $v86e5d83e26 = self::f68c8abfc9e($pac4bc40a, $v8c5df8072b, $pd98df87c, $pfdbbc383, $pe2f18119, $pe54f8a0f, $v9195465250, $v3e3a84080a, $pb0b5cc75, $v80efa55503, "tree"); $v543078298b = array(); if ($v9195465250["single_update"]) $v543078298b[] = self::f420eefd19f("update", $pd98df87c . "_save", "Save", $v9195465250["single_update"], $pd98df87c, $v2f0e633d4c, $v768b231eba); if ($v9195465250["single_delete"]) { $v6d3990173e = $v9195465250["single_delete"]; if (!isset($v6d3990173e["confirmation_message"])) { if ($pd81f7df7) { $v6d3990173e["confirmation_message"] .= "You are about to delete this $v2f0e633d4c.\nNote that this $v2f0e633d4c may have some dependencies/children in the following table(s):"; for ($v43dd7d0051 = 0; $v43dd7d0051 < count($pd81f7df7); $v43dd7d0051++) $v6d3990173e["confirmation_message"] .= "\n- " + self::getName($pd81f7df7[$v43dd7d0051]); $v6d3990173e["confirmation_message"] .= "\n\nYou should delete the correspondent dependencies/children first, and only then delete this $v2f0e633d4c.\n\nAre you sure that you wish to proceed with this $v2f0e633d4c deletion (before delete it's dependencies)?"; } else $v6d3990173e["confirmation_message"] = "Do you wish to delete this $v2f0e633d4c?"; } $v543078298b[] = self::f420eefd19f("delete", $pd98df87c . "_delete", "Delete", $v9195465250["single_delete"], $pd98df87c, $v2f0e633d4c, $v768b231eba); } $v5ed3bcae90 = array(); if ($v9195465250["links"]) foreach ($v9195465250["links"] as $pdeee6a59) { $ped0a6251 = WorkFlowDBHandler::getTableFromTables($pac4bc40a, $v8c5df8072b); self::md82e09e85352($pdeee6a59, $pd98df87c, $ped0a6251, $pe2f18119, true, false, false, false); $v5ed3bcae90[] = array( "field" => array( "class" => "link link-$pd98df87c " . $pdeee6a59["class"], "input" => array( "type" => "link", "value" => $pdeee6a59["value"] ? $pdeee6a59["value"] : $pdeee6a59["title"], "href" => $pdeee6a59["url"], "target" => $pdeee6a59["target"], "title" => $pdeee6a59["title"], "extra_attributes" => $pdeee6a59["extra_attributes"], "previous_html" => $pdeee6a59["previous_html"], "next_html" => $pdeee6a59["next_html"], ) ) ); } $v1f531deafa = array(); if ($v86e5d83e26) $v1f531deafa[] = array( "container" => array( "class" => "fields-container", "previous_html" => "", "next_html" => "", "elements" => $v86e5d83e26 ) ); if ($v543078298b) $v1f531deafa[] = array( "container" => array( "class" => "buttons single-buttons", "elements" => $v543078298b ) ); if ($v5ed3bcae90) $v1f531deafa[] = array( "container" => array( "class" => "links", "elements" => $v5ed3bcae90 ) ); $v1e1c955c3e = array(); if ($v9195465250["single_insert"] || $v9195465250["multiple_insert_update"] || $v9195465250["multiple_insert"]) { $v6390ae2db3 = self::f920f3a1346($pac4bc40a, $v8c5df8072b, $pd98df87c, $v2f0e633d4c, $v768b231eba, $pfdbbc383, $pe2f18119, $pe54f8a0f, $v9195465250, $v1f531deafa); $v67079be353 = HashCode::getHashCodePositive($v768b231eba); $peecef390 .= "\n" . self::f1596b25a68("{$pd98df87c}_tree_{$v67079be353}_before_insert_html", $v6390ae2db3[0]); $peecef390 .= "\n" . self::f1596b25a68("{$pd98df87c}_tree_{$v67079be353}_after_insert_html", $v6390ae2db3[1]); $peecef390 .= "\n"; } if ($v9195465250["multiple_insert_update"]) $v1e1c955c3e[] = self::f420eefd19f("insert_update", $pd98df87c . "_add_save", "Save", $v9195465250["multiple_insert_update"], $pd98df87c, $v2f0e633d4c, $v768b231eba, true); else if ($v9195465250["multiple_insert"]) $v1e1c955c3e[] = self::f420eefd19f("insert", $pd98df87c . "_add", "Add", $v9195465250["multiple_insert"], $pd98df87c, $v2f0e633d4c, $v768b231eba, true); else if ($v9195465250["multiple_update"]) $v1e1c955c3e[] = self::f420eefd19f("update", $pd98df87c . "_save", "Save", $v9195465250["multiple_update"], $pd98df87c, $v2f0e633d4c, $v768b231eba, true); if ($v9195465250["multiple_delete"]) { $v6d3990173e = $v9195465250["multiple_delete"]; if (!isset($v6d3990173e["confirmation_message"])) { $v40c1606d7e = self::getName($pd7bfd6f7); if ($pd81f7df7) { $v6d3990173e["confirmation_message"] .= "You are about to delete multiples $v40c1606d7e.\nNote that these $v40c1606d7e may have some dependencies/children in the following table(s):"; for ($v43dd7d0051 = 0; $v43dd7d0051 < count($pd81f7df7); $v43dd7d0051++) $v6d3990173e["confirmation_message"] .= "\n- " + self::getName($pd81f7df7[$v43dd7d0051]); $v6d3990173e["confirmation_message"] .= "\n\nYou should delete the correspondent dependencies/children first, and only then delete these $v40c1606d7e.\n\nAre you sure that you wish to proceed with this $v40c1606d7e deletion (before delete it's dependencies)?"; } else $v6d3990173e["confirmation_message"] = "Do you wish to delete multiples $v40c1606d7e?"; } $v1e1c955c3e[] = self::f420eefd19f("delete", $pd98df87c . "_delete", "Delete", $v6d3990173e, $pd98df87c, $v2f0e633d4c, $v768b231eba, true); } $v9f3ec7f561 = !$pabde73f0 || $pabde73f0["active"]; if ($v9f3ec7f561) { $v31d72616e1 = array( "container" => array( "class" => "top-pagination", "elements" => array( array( "pagination" => array( "pagination_template" => "bootstrap1", "rows_per_page" => "#" . $pd7bfd6f7 . "_rows_per_page#", "page_number" => "#" . $pd7bfd6f7 . "_current_page#", "max_num_of_shown_pages" => "20", "total_rows" => "#" . $pd7bfd6f7 . "_count#", "page_attr_name" => $pd7bfd6f7 . "_current_page", "on_click_js_func" => $pabde73f0 ? $pabde73f0["on_click_js_func"] : null ) ) ) ) ); $pb65b81dc = $v31d72616e1; $pb65b81dc["container"]["class"] = "bottom-pagination"; } $pc5d3a026 = array(); if ($v9195465250["single_insert"] || $v9195465250["multiple_insert"] || $v9195465250["multiple_insert_update"]) { $pfb80a61e = 'addNewItem(this)'; $pff1806f2 = $v9195465250["multiple_insert_update"] ? "insert_update" : "insert"; $pf6af6e67 = $v9195465250["multiple_insert_update"] ? $pd98df87c . "_add_save" : $pd98df87c . "_add"; $v29e16a56c0 = $v9195465250["multiple_insert_update"] ? "Save" : "Add"; $pb033e699 = $v9195465250["multiple_insert_update"] ? $v9195465250["multiple_insert_update"] : ($v9195465250["multiple_insert"] ? $v9195465250["multiple_insert"] : $v9195465250["single_insert"]); $v4edb9d8be1 = self::mddd8e42f4121($pff1806f2, $pf6af6e67, $v29e16a56c0, $pb033e699, $pd98df87c, $v2f0e633d4c, $v768b231eba, $pfb80a61e); $pc5d3a026[] = array( "container" => array( "class" => "buttons multiple-buttons add-button", "previous_html" => '<a href="javascript:void(0);"' . $v4edb9d8be1 . '><span class="icon add"></span> Add ' . $v2f0e633d4c . '</a>' ) ); } if ($v9f3ec7f561) $pc5d3a026[] = $v31d72616e1; $pc5d3a026[] = array( "container" => array( "class" => "list-container", "previous_html" => "", "next_html" => "", "elements" => array( 0 => array( "tree" => array( "tree_class" => "list-tree", "default_input_data" => "#" . $pd7bfd6f7 . "#", "elements" => $v1f531deafa ) ) ) ) ); if ($v1e1c955c3e) $pc5d3a026[] = array( "container" => array( "class" => "buttons multiple-buttons", "elements" => $v1e1c955c3e ) ); if ($v9f3ec7f561) $pc5d3a026[] = $pb65b81dc; $v90cd343a76 = "form_" . rand(0, 10000); return array( "with_form" => $v7868010f1c, "form_id" => $v90cd343a76, "form_method" => "post", "form_class" => "", "form_on_submit" => $pa34e4896 ? "" : "return false", "form_action" => "", "form_type" => "horizontal", "form_containers" => array( array( "container" => array( "id" => $v768b231eba, "class" => 'list-' . str_replace(array("_", " "), "-", self::getParsedTableName($pd7bfd6f7)) . ' ' . $v94682778e5, "previous_html" => "", "next_html" => "", "elements" => $pc5d3a026 ) ) ), "form_css" => "", "form_js" => $v7868010f1c ? 'if (typeof MyJSLib != "undefined") { MyJSLib.FormHandler.initForm( $("#' . $v90cd343a76 . '")[0] ) }' : '' ); } private static function f5eb7ed3d12($pac4bc40a, $v8c5df8072b, $pd98df87c, $v2f0e633d4c, $pd7bfd6f7, $pfdbbc383, $pe2f18119, $pe54f8a0f, $pd81f7df7, $v9195465250, &$peecef390, $pabde73f0 = false, $v94682778e5 = "", $v768b231eba = "") { $ped0a6251 = WorkFlowDBHandler::getTableFromTables($pac4bc40a, $v8c5df8072b); $v3e3a84080a = $v9195465250["single_insert"] || $v9195465250["multiple_insert"] || $v9195465250["multiple_insert_update"]; $v6634cfd0ad = $v9195465250["single_update"] || $v9195465250["multiple_update"] || $v9195465250["multiple_insert_update"]; $v80efa55503 = $v9195465250["single_delete"] || $v9195465250["multiple_delete"]; $pbf2a75a9 = $v9195465250["multiple_insert_update"] || $v9195465250["multiple_insert"] || $v9195465250["multiple_update"] || $v9195465250["multiple_delete"]; $v7868010f1c = $pbf2a75a9; $pa34e4896 = substr($v9195465250["multiple_insert_update"]["action_type"], 0, 5) != "ajax_" || substr($v9195465250["multiple_insert"]["action_type"], 0, 5) != "ajax_" || substr($v9195465250["multiple_update"]["action_type"], 0, 5) != "ajax_" || substr($v9195465250["multiple_delete"]["action_type"], 0, 5) != "ajax_"; $v9f3ec7f561 = !$pabde73f0 || $pabde73f0["active"]; if ($v9f3ec7f561) $pd00687a7 = '
		<ptl:var:PaginationLayout new PaginationLayout(\$input["' . $pd7bfd6f7 . '_count"], \$input["' . $pd7bfd6f7 . '_rows_per_page"], array("' . $pd7bfd6f7 . '_current_page" =&gt; \$input["' . $pd7bfd6f7 . '_current_page"]), "' . $pd7bfd6f7 . '_current_page"' . ($pabde73f0 && $pabde73f0["on_click_js_func"] ? ', "' . $pabde73f0["on_click_js_func"] . '"' : '') . ') />
		<ptl:var:PaginationLayout-&gt;show_x_pages_at_once 20 />
		<ptl:var:pagination_data \$PaginationLayout-&gt;data />
		<ptl:var:pagination_data["style"] "bootstrap1" />
		<ptl:echo \$PaginationLayout-&gt;designWithStyle(1, \$pagination_data) />'; $v067674f4e4 = ''; if ($v7868010f1c) { $v90cd343a76 = "form_" . rand(0, 10000); $v02a69d4e0f = '(typeof MyJSLib == \'undefined\' || MyJSLib.FormHandler.formCheck(this))'; $v067674f4e4 .= '<form id="' . $v90cd343a76 . '" method="post" class="form-horizontal" onSubmit="' . ($pa34e4896 ? 'return ' . $v02a69d4e0f : $v02a69d4e0f . ';return false') . ';' . '" enctype="multipart/form-data">'; } $v067674f4e4 .= '
<div class="list-' . str_replace(array("_", " "), "-", self::getParsedTableName($pd7bfd6f7)) . ' ' . $v94682778e5 . '"' . ($v768b231eba ? ' id="' . $v768b231eba . '"' : '') . '>'; if ($v9195465250["single_insert"] || $v9195465250["multiple_insert"] || $v9195465250["multiple_insert_update"]) { $pfb80a61e = 'addNewItem(this)'; $pff1806f2 = $v9195465250["multiple_insert_update"] ? "insert_update" : "insert"; $pf6af6e67 = $v9195465250["multiple_insert_update"] ? $pd98df87c . "_add_save" : $pd98df87c . "_add"; $v29e16a56c0 = $v9195465250["multiple_insert_update"] ? "Save" : "Add"; $pb033e699 = $v9195465250["multiple_insert_update"] ? $v9195465250["multiple_insert_update"] : ($v9195465250["multiple_insert"] ? $v9195465250["multiple_insert"] : $v9195465250["single_insert"]); $v4edb9d8be1 = self::mddd8e42f4121($pff1806f2, $pf6af6e67, $v29e16a56c0, $pb033e699, $pd98df87c, $v2f0e633d4c, $v768b231eba, $pfb80a61e); $v067674f4e4 .= '<div class="buttons multiple-buttons add-button">
				<a href="javascript:void(0);"' . $v4edb9d8be1 . '><span class="icon add"></span> Add ' . $v2f0e633d4c . '</a>
			</div>'; } $v067674f4e4 .= ($v9f3ec7f561 ? '<div class="top-pagination">' . $pd00687a7 . '</div>' : '') . '
	<div class="list-container">
		<ul class="list-tree">
			<ptl:if is_array(\\$input[' . $pd7bfd6f7 . '])>
				<ptl:foreach \\$input[' . $pd7bfd6f7 . '] i item>
					<li>
						<div class="fields-container">'; if ($pbf2a75a9) $v067674f4e4 .= '<div class="multiple-selection"><label>Select to perform action</label><input type="checkbox" name="multiple_selection[' . $pd98df87c . '][<ptl:echo \$i/>]" value="1"/></div>'; foreach ($pfdbbc383 as $v5e45ec9bb9) { $pd152184b = $v9195465250["attributes_settings"][$v5e45ec9bb9]; $v1b0cfa478b = $ped0a6251[$v5e45ec9bb9]; $pb65331d8 = in_array($v5e45ec9bb9, $pe2f18119); $pc4202532 = in_array($v5e45ec9bb9, $pe54f8a0f); if ($v3e3a84080a && !$pb0b5cc75 && !$v80efa55503 && $pc4202532) continue 1; $v8ddbc583e8 = self::mcc16b3e4f8c1($pd98df87c, $pd7bfd6f7, $v5e45ec9bb9, $ped0a6251, $pd152184b, $pe2f18119, $pb65331d8, $pc4202532, $v6634cfd0ad, $v80efa55503, $v5a911d8233, $v9195465250["single_update"]["action_type"] == "ajax_on_blur", false, $v9195465250["multiple_update"] || $v9195465250["multiple_insert_update"] || $v9195465250["single_update"]); $v067674f4e4 .= '		<div class="field field-' . strtolower(str_replace(" ", "-", $v1b0cfa478b["type"])) . " " . $v5e45ec9bb9 . ($pb65331d8 ? " is-pk" : "") . ($pc4202532 ? " is-pk-auto-increment" : "") . " field-" . $v5a911d8233 . ($pd152184b["class"] ? " " . self::ma3887fc6bbbb($pd152184b["class"]) : "") . '">
								' . self::f5b773892e7($v5e45ec9bb9, $pd152184b) . '
								' . $v8ddbc583e8 . '
							</div>'; } $v067674f4e4 .= '		</div>'; if ($v9195465250["single_insert"] || $v9195465250["single_update"] || $v9195465250["single_delete"]) { $v067674f4e4 .= '	<div class="buttons single-buttons">'; if ($v9195465250["single_update"]) $v067674f4e4 .= self::mb09249aa54b5("update", $pd98df87c . "_save", "Save", $v9195465250["single_update"], $pd98df87c, $v2f0e633d4c, $v768b231eba); if ($v9195465250["single_delete"]) { $v6d3990173e = $v9195465250["single_delete"]; if (!isset($v6d3990173e["confirmation_message"])) { if ($pd81f7df7) { $v6d3990173e["confirmation_message"] .= "You are about to delete this $v2f0e633d4c.\nNote that this $v2f0e633d4c may have some dependencies/children in the following table(s):"; for ($v43dd7d0051 = 0; $v43dd7d0051 < count($pd81f7df7); $v43dd7d0051++) $v6d3990173e["confirmation_message"] .= "\n- " + self::getName($pd81f7df7[$v43dd7d0051]); $v6d3990173e["confirmation_message"] .= "\n\nYou should delete the correspondent dependencies/children first, and only then delete this $v2f0e633d4c.\n\nAre you sure that you wish to proceed with this $v2f0e633d4c deletion (before delete it's dependencies)?"; } else $v6d3990173e["confirmation_message"] = "Do you wish to delete this $v2f0e633d4c?"; } $v067674f4e4 .= self::mb09249aa54b5("delete", $pd98df87c . "_delete", "Delete", $v6d3990173e, $pd98df87c, $v2f0e633d4c, $v768b231eba); } $v067674f4e4 .= '	</div>'; } if ($v9195465250["links"]) $v067674f4e4 .= '	<div class="links">' . self::ma093534445db($v9195465250["links"], $pd98df87c, $pd7bfd6f7, $ped0a6251, $pe2f18119) . '</div>'; $v067674f4e4 .= '	</li>
				</ptl:foreach>
			</ptl:if>
		</ul>
	</div>
	' . ($v9f3ec7f561 ? '<div class="bottom-pagination">' . $pd00687a7 . '</div>' : ''); if ($v9195465250["single_insert"] || $v9195465250["multiple_insert_update"] || $v9195465250["multiple_insert"]) { $v6390ae2db3 = self::mbae6c478ca4e($pac4bc40a, $v8c5df8072b, $pd98df87c, $v2f0e633d4c, $pd7bfd6f7, $v768b231eba, $pfdbbc383, $pe2f18119, $pe54f8a0f, $v9195465250); $v67079be353 = HashCode::getHashCodePositive($v768b231eba); $peecef390 .= "\n" . self::f1596b25a68("{$pd98df87c}_tree_{$v67079be353}_before_insert_html", $v6390ae2db3[0], true); $peecef390 .= "\n" . self::f1596b25a68("{$pd98df87c}_tree_{$v67079be353}_after_insert_html", $v6390ae2db3[1], true); $peecef390 .= "\n"; } if ($pbf2a75a9) { $v067674f4e4 .= '<div class="buttons multiple-buttons">'; if ($v9195465250["multiple_insert_update"]) $v067674f4e4 .= self::mb09249aa54b5("insert_update", $pd98df87c . "_add_save", "Save", $v9195465250["multiple_insert_update"], $pd98df87c, $v2f0e633d4c, $v768b231eba, true); else if ($v9195465250["multiple_insert"]) $v067674f4e4 .= self::mb09249aa54b5("insert", $pd98df87c . "_add", "Add", $v9195465250["multiple_insert"], $pd98df87c, $v2f0e633d4c, $v768b231eba, true); else if ($v9195465250["multiple_update"]) $v067674f4e4 .= self::mb09249aa54b5("update", $pd98df87c . "_save", "Save", $v9195465250["multiple_update"], $pd98df87c, $v2f0e633d4c, $v768b231eba, true); if ($v9195465250["multiple_delete"]) { $v6d3990173e = $v9195465250["multiple_delete"]; if (!isset($v6d3990173e["confirmation_message"])) { $v40c1606d7e = self::getName($pd7bfd6f7); if ($pd81f7df7) { $v6d3990173e["confirmation_message"] .= "You are about to delete multiples $v40c1606d7e.\nNote that these $v40c1606d7e may have some dependencies/children in the following table(s):"; for ($v43dd7d0051 = 0; $v43dd7d0051 < count($pd81f7df7); $v43dd7d0051++) $v6d3990173e["confirmation_message"] .= "\n- " + self::getName($pd81f7df7[$v43dd7d0051]); $v6d3990173e["confirmation_message"] .= "\n\nYou should delete the correspondent dependencies/children first, and only then delete these $v40c1606d7e.\n\nAre you sure that you wish to proceed with this $v40c1606d7e deletion (before delete it's dependencies)?"; } else $v6d3990173e["confirmation_message"] = "Do you wish to delete multiples $v40c1606d7e?"; } $v067674f4e4 .= self::mb09249aa54b5("delete", $pd98df87c . "_delete", "Delete", $v6d3990173e, $pd98df87c, $v2f0e633d4c, $v768b231eba, true); } $v067674f4e4 .= '</div>'; } $v067674f4e4 .= '</div>'; if ($v7868010f1c) $v067674f4e4 .= '</form>
			<script>if (typeof MyJSLib != "undefined") { MyJSLib.FormHandler.initForm( $("#' . $v90cd343a76 . '")[0] ) }</script>'; return $v067674f4e4; } public static function getActionsSettingsVars($pae434d3a, $pa0a5279b = false) { $v761f4d757f = array(); $pa0a5279b = is_array($pa0a5279b) ? $pa0a5279b : ($pa0a5279b ? array($pa0a5279b) : array()); foreach ($pae434d3a as $peeff7b55) if ($peeff7b55["result_var_name"]) { $v0d39e09d41 = $peeff7b55["result_var_name"]; if (!in_array($v0d39e09d41, $pa0a5279b)) { if (is_array($peeff7b55["action_value"]) && $peeff7b55["action_value"]["actions"]) { $pae7a4be4 = self::getActionsSettingsVars($peeff7b55["action_value"]["actions"], $pa0a5279b); $pff5cfe29 = $v761f4d757f[$v0d39e09d41]; $v761f4d757f[$v0d39e09d41] = is_array($pff5cfe29) ? array_merge($pff5cfe29, $pae7a4be4) : $pae7a4be4; } else if (!isset($v761f4d757f[$v0d39e09d41])) $v761f4d757f[$v0d39e09d41] = true; } } else if (is_array($peeff7b55["action_value"]) && $peeff7b55["action_value"]["actions"]) { $pae7a4be4 = self::getActionsSettingsVars($peeff7b55["action_value"]["actions"], $pa0a5279b); $v761f4d757f = array_merge($v761f4d757f, $pae7a4be4); } return $v761f4d757f; } public static function printActionsSettingsVars($v761f4d757f, $pdcf670f6 = "") { $v067674f4e4 = "array(\n"; foreach ($v761f4d757f as $v1cfba8c105 => $pae7a4be4) { $v067674f4e4 .= "$pdcf670f6\"$v1cfba8c105\" => "; if (is_array($pae7a4be4)) $v067674f4e4 .= self::printActionsSettingsVars($pae7a4be4, $pdcf670f6 . "\t"); else $v067674f4e4 .= "\$$v1cfba8c105"; $v067674f4e4 .= ",\n"; } $v067674f4e4 .= substr($pdcf670f6, -1) . ")"; return $v067674f4e4; } private static function f68c8abfc9e($pac4bc40a, $v8c5df8072b, $pd98df87c, $pfdbbc383, $pe2f18119, $pe54f8a0f, $v9195465250, $v3e3a84080a, $pb0b5cc75, $v80efa55503, $v8af7d532f2 = false, $pc470bdf8 = false) { $ped0a6251 = WorkFlowDBHandler::getTableFromTables($pac4bc40a, $v8c5df8072b); $v86e5d83e26 = array(); $v6634cfd0ad = $v3e3a84080a || $pb0b5cc75; if ($v8af7d532f2 && ($v9195465250["multiple_insert_update"] || $v9195465250["multiple_insert"] || $v9195465250["multiple_update"] || $v9195465250["multiple_delete"])) { $v86e5d83e26[] = array( "field" => array( "class" => 'multiple-selection', "label" => array( "value" => $v8af7d532f2 === "tree" ? "Select to perform action" : "", ), "input" => array( "type" => "checkbox", "name" => "multiple_selection[$pd98df87c][#idx#]", "options" => array(array("value" => 1)), ) ) ); } foreach ($pfdbbc383 as $v5e45ec9bb9) { if (!$v8af7d532f2 && $v3e3a84080a && !$pb0b5cc75 && !$v80efa55503 && in_array($v5e45ec9bb9, $pe54f8a0f)) continue 1; $v86e5d83e26[] = self::mcdf029955be9($v5e45ec9bb9, $ped0a6251, $pd98df87c, $pfdbbc383, $pe2f18119, $pe54f8a0f, $v9195465250, $v6634cfd0ad, $v80efa55503, $v8af7d532f2, $pc470bdf8); } return $v86e5d83e26; } private static function mcdf029955be9($v5e45ec9bb9, $ped0a6251, $pd98df87c, $pfdbbc383, $pe2f18119, $pe54f8a0f, $v9195465250, $v6634cfd0ad, $v80efa55503, $v8af7d532f2 = false, $pc470bdf8 = false) { $v1b0cfa478b = $ped0a6251[$v5e45ec9bb9]; $pd152184b = $v9195465250["attributes_settings"][$v5e45ec9bb9]; $v90963767ae = strlen($pd152184b["input_value"]) ? $pd152184b["input_value"] : ($v8af7d532f2 ? ($pc470bdf8 ? '' : '#[idx][' . $v5e45ec9bb9 . ']#') : '#' . $pd98df87c . '[' . $v5e45ec9bb9 . ']#'); $v4ef49e289c = $pd98df87c . ($v8af7d532f2 ? '[#idx#]' : '') . '[' . $v5e45ec9bb9 . ']'; $pb65331d8 = in_array($v5e45ec9bb9, $pe2f18119); $pc4202532 = in_array($v5e45ec9bb9, $pe54f8a0f); $v3ae55a9a2e = "field field-" . strtolower(str_replace(" ", "-", $v1b0cfa478b["type"])) . " " . $v5e45ec9bb9 . ($pb65331d8 ? " is-pk" : "") . ($pc4202532 ? " is-pk-auto-increment" : ""); if ($pd152184b["class"]) $v3ae55a9a2e = self::f8ddab88b24($pd152184b["class"], $v3ae55a9a2e, true) . " " . $pd152184b["class"]; $v9acc88059e = strlen($pd152184b["label_value"]) ? $pd152184b["label_value"] : self::getName($v5e45ec9bb9); if (!$v8af7d532f2) $v9acc88059e .= self::f8ddab88b24($pd152184b["label_value"], ":"); $v4e79ecc7c0 = empty(PHPUICodeExpressionHandler::getValueType($pd152184b["input_class"], array("empty_string_type" => "string", "non_set_type" => "string"))); $v7bf0d860cd = empty(PHPUICodeExpressionHandler::getValueType($pd152184b["input_value"], array("empty_string_type" => "string", "non_set_type" => "string"))); $v964146dbb6 = empty(PHPUICodeExpressionHandler::getValueType($pd152184b["input_previous_html"], array("empty_string_type" => "string", "non_set_type" => "string"))); $v2de4fbd75c = ""; if ($pd152184b["input_previous_html"]) { if (!$v964146dbb6 && ($v4e79ecc7c0 || $v7bf0d860cd)) $v2de4fbd75c = "'" . addcslashes($pd152184b["input_previous_html"], "\\'") . "'"; else $v2de4fbd75c = $pd152184b["input_previous_html"]; } $v2e1e0db913 = $v5d3813882f = null; $v2d93385579 = array(); if ($pd152184b["available_values"]) { if (is_array($pd152184b["available_values"])) $v2d93385579 = $pd152184b["available_values"]; else if (is_string($pd152184b["available_values"])) $v2d93385579 = "#" . $pd152184b["available_values"] . "#"; } if ($pd152184b["type"] == "hidden") $v5d170b1de6 = array( "field" => array( "class" => $v3ae55a9a2e . self::f8ddab88b24($pd152184b["class"], "field-hidden"), "input" => array( "type" => "hidden", "class" => $pd152184b["input_class"], "name" => $v4ef49e289c, "value" => $v90963767ae, "previous_html" => $pd152184b["input_previous_html"], "next_html" => $pd152184b["input_next_html"], ), ) ); else if (!$v6634cfd0ad) { if ($pb65331d8 && $v80efa55503) $v2de4fbd75c .= self::mf939289341b4($v4ef49e289c, $v90963767ae, $pd152184b["input_class"], $v4e79ecc7c0, $v7bf0d860cd, $v964146dbb6, !empty($v2de4fbd75c)); if ($pd152184b["type"] == "link") $v5d170b1de6 = array( "field" => array( "class" => $v3ae55a9a2e . self::f8ddab88b24($pd152184b["class"], "field-link field-link-" . $pd98df87c . " field-link-" . $pd98df87c . "-" . $v5e45ec9bb9), "label" => array( "value" => $v9acc88059e, "class" => $pd152184b["label_class"], "previous_html" => $pd152184b["label_previous_html"], "next_html" => $pd152184b["label_next_html"], ), "input" => array( "type" => "link", "class" => self::f8ddab88b24($pd152184b["input_class"], "field-value", true) . " " . $pd152184b["input_class"], "value" => $v90963767ae, "href" => self::f9149542f9f($pd152184b["href"], $pd98df87c, $ped0a6251, $pe2f18119, $v8af7d532f2, $pc470bdf8), "target" => $pd152184b["target"], "available_values" => $v2d93385579, "previous_html" => $v2de4fbd75c, "next_html" => $pd152184b["input_next_html"], ), ) ); else $v5d170b1de6 = array( "field" => array( "class" => $v3ae55a9a2e . self::f8ddab88b24($pd152184b["class"], "field-label"), "label" => array( "value" => $v9acc88059e, "class" => $pd152184b["label_class"], "previous_html" => $pd152184b["label_previous_html"], "next_html" => $pd152184b["label_next_html"], ), "input" => array( "type" => $pd152184b["type"] ? $pd152184b["type"] : "label", "class" => self::f8ddab88b24($pd152184b["input_class"], "field-value", true) . " " . $pd152184b["input_class"], "value" => $v90963767ae, "available_values" => $v2d93385579, "previous_html" => $v2de4fbd75c, "next_html" => $pd152184b["input_next_html"], ), ) ); } else if ($pc4202532) { $v2de4fbd75c .= self::mf939289341b4($v4ef49e289c, $v90963767ae, $pd152184b["input_class"], $v4e79ecc7c0, $v7bf0d860cd, $v964146dbb6, !empty($v2de4fbd75c)); $v5d170b1de6 = array( "field" => array( "class" => $v3ae55a9a2e . " " . self::f8ddab88b24($pd152184b["class"], "field-label"), "label" => array( "value" => $v9acc88059e, "class" => $pd152184b["label_class"], "previous_html" => $pd152184b["label_previous_html"], "next_html" => $pd152184b["label_next_html"], ), "input" => array( "type" => "label", "class" => self::f8ddab88b24($pd152184b["input_class"], "field-value", true) . " " . $pd152184b["input_class"], "value" => $v90963767ae, "available_values" => $v2d93385579, "previous_html" => $v2de4fbd75c, "next_html" => $pd152184b["input_next_html"], ), ) ); } else { $v9abfb1e31c = $v52a39aea36 = $v9179355ff1 = $pdfa0b83c = $paf762455 = $pa9e1f4ff = $v2e1e0db913 = $v5d3813882f = null; self::mc780ee97242e($v1b0cfa478b, $v5a911d8233, $v9abfb1e31c, $v52a39aea36, $v9179355ff1, $pc96525d3, $pdfa0b83c, $paf762455, $pa9e1f4ff); if ($pd152184b["type"] && (!$pc470bdf8 || in_array($pd152184b["type"], self::$editable_input_types))) $v5a911d8233 = $pd152184b["type"]; $v2e1e0db913 = array(); if ($paf762455) foreach ($paf762455 as $pe5c5e2fe => $v956913c90f) $v2e1e0db913[] = array( "name" => $pe5c5e2fe, "value" => $v956913c90f ); if ($v9195465250["single_update"]["action_type"] == "ajax_on_blur" && !$pc470bdf8) $v2e1e0db913[] = array( "name" => "onBlur", "value" => 'update' . str_replace(" ", "", self::getName($pd98df87c)) . '(this, onUpdate)' ); if ($v9195465250["multiple_update"] || $v9195465250["multiple_insert_update"] || ($v8af7d532f2 && $v9195465250["single_update"])) $v2e1e0db913[] = array( "name" => $v5a911d8233 == "select" || $v5a911d8233 == "checkbox" || $v5a911d8233 == "radio" ? "onChange" : "onKeyDown", "value" => 'onMultipleUpdateKeyDown(this)' ); $v5d3813882f = array(); if ($pd152184b["options"]) { if (!$pd152184b["type"]) $v5a911d8233 = "select"; else if ($pc470bdf8 && $v5a911d8233 != "select" && $v5a911d8233 != "checkbox" && $v5a911d8233 != "radio") $v5a911d8233 = "select"; if ($v5a911d8233 == "select" || $v5a911d8233 == "checkbox" || $v5a911d8233 == "radio") { $v2d93385579 = null; if (is_array($pd152184b["options"])) $v5d3813882f = $pd152184b["options"]; else if (is_string($pd152184b["options"])) $v5d3813882f = "#" . $pd152184b["options"] . "#"; if ($pd152184b["options_javascript_variable_name"]) $v2e1e0db913[] = array( "name" => "data-options-javascript-variable-name", "value" => $pd152184b["options_javascript_variable_name"] ); } } if ($pb65331d8 && $v5a911d8233 != "hidden") $v2de4fbd75c .= self::mf939289341b4($pd98df87c . ($v8af7d532f2 ? '[#idx#]' : '') . '[orig_' . $v5e45ec9bb9 . ']', $v90963767ae, $pd152184b["input_class"], $v4e79ecc7c0, $v7bf0d860cd, $v964146dbb6, !empty($v2de4fbd75c)); if (!in_array($v5a911d8233, self::$editable_input_types)) $v2de4fbd75c .= self::mf939289341b4($pd98df87c . ($v8af7d532f2 ? '[#idx#]' : '') . '[' . $v5e45ec9bb9 . ']', $v90963767ae, "", false, $v7bf0d860cd, $v964146dbb6, !empty($v2de4fbd75c)); $v5d170b1de6 = array( "field" => array( "class" => $v3ae55a9a2e . " " . self::f8ddab88b24($pd152184b["class"], "field-" . $v5a911d8233), "label" => array( "value" => $v9acc88059e, "class" => $pd152184b["label_class"], "previous_html" => $pd152184b["label_previous_html"], "next_html" => $pd152184b["label_next_html"], ), "input" => array( "type" => $v5a911d8233, "class" => $pd152184b["input_class"], "name" => $v4ef49e289c, "value" => $v90963767ae, "place_holder" => $pdfa0b83c, "allow_null" => $v9abfb1e31c, "max_length" => $pa9e1f4ff, "validation_label" => $pc96525d3, "validation_message" => $v9179355ff1, "validation_type" => $v52a39aea36, "extra_attributes" => $v2e1e0db913, "available_values" => $v2d93385579, "options" => $v5d3813882f, "previous_html" => $v2de4fbd75c, "next_html" => $pd152184b["input_next_html"], ), ) ); } return $v5d170b1de6; } private static function mf939289341b4($v4ef49e289c, $v90963767ae, $pff829605, $v4e79ecc7c0, $v7bf0d860cd, $v964146dbb6, $pdef467ad = true) { if ($v4e79ecc7c0 || $v7bf0d860cd || $v964146dbb6) { $pf8ed4912 = ($pdef467ad ? ' . ' : '') . '\'<input'; if ($pff829605) { $pf8ed4912 .= ' class="'; if ($v4e79ecc7c0) $pf8ed4912 .= '\' . ' . $pff829605 . ' . \''; else $pf8ed4912 .= $pff829605; $pf8ed4912 .= '"'; } $pf8ed4912 .= ' type="hidden" name="' . $v4ef49e289c . '" value="'; if ($v7bf0d860cd) $pf8ed4912 .= '\' . ' . $v90963767ae . ' . \''; else $pf8ed4912 .= $v90963767ae; $pf8ed4912 .= '" />\''; } else $pf8ed4912 = '<input' . ($pff829605 ? ' class="' . $pff829605 . '"' : '') . ' type="hidden" name="' . $v4ef49e289c . '" value="' . $v90963767ae . '" />'; return $pf8ed4912; } private static function f8ddab88b24($pd6a929b7, $v327f72fb62, $v05de6eeaf2 = false) { if ($pd6a929b7) { $pe3bfb0b9 = PHPUICodeExpressionHandler::getValueType($pd6a929b7, array("empty_string_type" => "string", "non_set_type" => "string")); if (empty($pe3bfb0b9)) return (!$v05de6eeaf2 ? " . " : "") . "'" . addcslashes($v327f72fb62, "\\'") . "'" . ($v05de6eeaf2 ? " . " : ""); } return " " . $v327f72fb62; } private static function f03e13e4ef7($v9195465250, $v2f75815c56, $pb3f8356a, $pabde73f0) { $v067674f4e4 = ''; $pc3b52287 = substr($v9195465250["single_insert"]["action_type"], 0, 5) == "ajax_"; $v5222cf6182 = substr($v9195465250["single_update"]["action_type"], 0, 5) == "ajax_"; $v6e3aed5d91 = substr($v9195465250["single_delete"]["action_type"], 0, 5) == "ajax_"; $v87b0433426 = substr($v9195465250["multiple_insert"]["action_type"], 0, 5) == "ajax_"; $pfe729e56 = substr($v9195465250["multiple_update"]["action_type"], 0, 5) == "ajax_"; $v5573ca8e1e = substr($v9195465250["multiple_delete"]["action_type"], 0, 5) == "ajax_"; $v4b6c188bfa = substr($v9195465250["multiple_insert_update"]["action_type"], 0, 5) == "ajax_"; if (strpos($v2f75815c56, "vendor/phpjs/functions/strings/parse_str.js") === false && ($pc3b52287 || $v5222cf6182 || $v6e3aed5d91 || $v4b6c188bfa || $v87b0433426 || $pfe729e56 || $v5573ca8e1e)) $v067674f4e4 .= '
if (typeof parse_str != "function")
	document.write(unescape("%3Cscript src=\'{$project_common_url_prefix}vendor/phpjs/functions/strings/parse_str.js\' type=\'text/javascript\'%3E%3C/script%3E"));
'; if (strpos($v2f75815c56, ".replaceAll = function(") === false && ($v9195465250["single_insert"] || $v9195465250["single_update"] || $v9195465250["single_delete"] || $v9195465250["multiple_insert"] || $v9195465250["multiple_update"] || $v9195465250["multiple_delete"] || $v9195465250["multiple_insert_update"])) $v067674f4e4 .= '
if (typeof String.prototype.replaceAll != "function")
	String.prototype.replaceAll = function(to_replace, replacement) {
		return this.split(to_replace).join(replacement);
	}
'; if (strpos($v2f75815c56, "function loadPageWithNewNavigation(") === false && $pb3f8356a == "multiple_form" && !$pabde73f0["on_click_js_func"]) $v067674f4e4 .= '
if (typeof loadPageWithNewNavigation != "function")
	function loadPageWithNewNavigation(page_attr_name, page_number) {
		var url = document.location.toString();
		eval("url = decodeURI(url).replace(/" + page_attr_name + "=[^&]*/gi, \'\');");
		url += (url.indexOf("?") == -1 ? "?" : "&") + page_attr_name + "=" + page_number;
		url = url.replace(/[&]+/g, "&");
		
		document.location = url;
		return false;
	}
'; if (strpos($v2f75815c56, "function getRedirectUrlWithPks(") === false && ($pc3b52287 || $v5222cf6182 || $v6e3aed5d91 || $v4b6c188bfa || $v87b0433426 || $pfe729e56 || $v5573ca8e1e)) $v067674f4e4 .= '
if (typeof getRedirectUrlWithPks != "function")
	function getRedirectUrlWithPks(url, fields) {
		var qs = "";
		
		$.each(fields, function(idx, field) {
			field = $(field)
			
			if (field.is("input, textarea, select") && field.parent().hasClass("is-pk"))
				qs += (qs ? "&" : "") + field.attr("name") + "=" + field.val();
		});
		
		url += (url.indexOf("?") == -1 ? "?" : "&") + qs;
		
		return url;
	}
'; if (strpos($v2f75815c56, "function getItemRowIndex(") === false && ($pb3f8356a == "list_table" || $pb3f8356a == "list_form" || $pb3f8356a == "multiple_form") && ($v9195465250["single_insert"] || $v9195465250["multiple_insert_update"] || $v9195465250["multiple_insert"])) $v067674f4e4 .= '
if (typeof getItemRowIndex != "function")
	function getItemRowIndex(item, field_name_prefix) {
		var fields = $(item).find("input, textarea, select");
			
		for (var i = 0; i < fields.length; i++) {
			var name = fields[i].name;
			
			if (name.indexOf(field_name_prefix + "[") === 0) {
				var s = field_name_prefix.length + 1;
				var row_index = parseInt(name.substr(s, name.indexOf("]", s) - s));
				
				if ($.isNumeric(row_index))
					return row_index;
			}
		}
		
		return null;
	}
'; if (strpos($v2f75815c56, "function getNextRowIndex(") === false && ($pb3f8356a == "list_table" || $pb3f8356a == "list_form" || $pb3f8356a == "multiple_form") && ($v9195465250["single_insert"] || $v9195465250["multiple_insert_update"] || $v9195465250["multiple_insert"])) $v067674f4e4 .= '
if (typeof getNextRowIndex != "function")
	function getNextRowIndex(parent, field_name_prefix) {
		var next_row_index = 0;
		var children = $(parent).children();
		
		for (var i = 0; i < children.length; i++) {
			var row_index = getItemRowIndex(children[i], field_name_prefix);
			next_row_index = row_index && next_row_index < row_index ? row_index : next_row_index;
		};
		next_row_index++;
		
		return next_row_index;
	}
'; if (strpos($v2f75815c56, "function getRowIndexElement(") === false && ($v4b6c188bfa || $v87b0433426 || $pfe729e56 || $v5573ca8e1e)) $v067674f4e4 .= '
if (typeof getRowIndexElement != "function")
	function getRowIndexElement(parent, field_name_prefix, row_index) {
		var children = $(parent).find("li, tr");
		
		for (var i = 0; i < children.length; i++) {
			var child = $( children[i] );
			var fields = child.find("input, textarea, select");
			
			for (var j = 0; j < fields.length; j++) {
				var name = fields[j].name;
				
				if (name.indexOf(field_name_prefix + "[") === 0) {
					var s = field_name_prefix.length + 1;
					var field_row_index = parseInt(name.substr(s, name.indexOf("]", s) - s));
					
					if (row_index == field_row_index)
						return child;
					
					break;
				}
			}
		}
		
		return null;
	}
'; if (strpos($v2f75815c56, "function onMultipleUpdateKeyDown(") === false && ($v9195465250["multiple_insert_update"] || $v9195465250["multiple_insert"] || $v9195465250["multiple_update"] || (($pb3f8356a == "list_table" || $pb3f8356a == "list_form") && $v9195465250["single_update"]))) $v067674f4e4 .= '
if (typeof onMultipleUpdateKeyDown != "function")
	function onMultipleUpdateKeyDown(elm) {
		var input = $(elm).parent().closest("li, tr").find(".multiple-selection input");
		
		if (!input.is(":checked"))
			input.attr("checked", "checked").prop("checked", true);
	}
'; if (strpos($v2f75815c56, "function onInsert(") === false && ($pc3b52287 || $v4b6c188bfa || $v87b0433426)) $v067674f4e4 .= '
if (typeof onInsert != "function")
	function onInsert(elm, data, status, field_name_prefix) {
		if (status) {
			var fields = $(elm).parent().closest("tr, li, form").find(".field"); //it could be a td or a sub-div inside of li. Do not add .children(".field") bc the .field items inside of the li are not directly children.
			
			if (fields.length > 0) {
				//preparing PKS
				var pks = $.isNumeric(data) ? data : ($.isPlainObject(data) && $.isPlainObject(data[field_name_prefix]) ? data[field_name_prefix]["data"] : null);
				
				if ($.isNumeric(pks))
					$.each(fields.filter(".is-pk-auto-increment").children("input, textarea, select, .field-value"), function (idx, field) {
						field = $(field);
						
						if (field.is("input, textarea, select"))
							field.val(pks);
						else
							field.html(pks);
					});
				else if ($.isPlainObject(pks)) //update all the other fields including the other pks and fields starting by "orig_" or "old_"
					for (var attr_name in pks) {
						var pk_value = pks[attr_name];
						
						$.each(fields.filter("." + attr_name).children("input, textarea, select, .field-value"), function (idx, field) {
							field = $(field);
							
							if (field.is("input, textarea, select")) {
								if (field.is("input[type=checkbox], input[type=radio]")) {
									if (field.attr("value") == pk_value)
										field.attr("checked", "checked").prop("checked", true);
									else
										field.removeAttr("checked").prop("checked", false);
								}
								else
									field.val(pk_value);
							}
							else
								field.html(pk_value);
						});
					}
			}
		}
	}
'; if (strpos($v2f75815c56, "function prepareAfterInsertHtml(") === false && ($pc3b52287 || $v4b6c188bfa || $v87b0433426)) $v067674f4e4 .= '
if (typeof prepareAfterInsertHtml != "function") 
	function prepareAfterInsertHtml(elm, data, status, field_name_prefix, after_insert_html) {
		if (status) {
			elm = $(elm);
			var before_insert_parent = elm.parent().closest("tr, li, .multiple-form").first();
			var before_insert_fields = before_insert_parent.find(".field"); //it could be a td or a sub-div inside of li. Do not add .children(".field") bc the .field items inside of the li are not directly children.
			
			var row_index = getItemRowIndex(before_insert_parent, field_name_prefix);
			
			if (!row_index && !before_insert_parent.hasClass("multiple-form"))
				alert("Wrong row index in prepareAfterInsertHtml function. Please check this function!");
			
			var new_item = after_insert_html;
			new_item = new_item.replaceAll(field_name_prefix + "[]", field_name_prefix + "[" + row_index + "]");
			new_item = new_item.replaceAll("&lt;script", "<script").replaceAll("&lt;/script", "</script");
			new_item = new_item.replaceAll("multiple_selection[" + field_name_prefix + "][]", "multiple_selection[" + field_name_prefix + "][" + row_index + "]"); //in case of multiple insert in tables
			new_item = $(new_item);
			
			//preparing select fields with correspondent options
			prepareSelectFieldsWithJavascriptOptions(new_item);
			
			var after_insert_fields = new_item.find(".field"); //it could be a td or a sub-div inside of li. Do not add .children(".field") bc the .field items inside of the li are not directly children.
			
			$.each(before_insert_fields, function (idx, before_insert_field) {
				before_insert_field = $(before_insert_field);
				var after_insert_field = $(after_insert_fields[idx])
				
				//preparing update/view fields with values
				if (!before_insert_field.hasClass("actions") && !before_insert_field.hasClass("link")) {
					var before_fields = before_insert_field.children("input, textarea, select, .field-value");
					var after_fields = after_insert_field.children("input, textarea, select, .field-value");
					
					$.each(before_fields, function(idy, item) {
						item = $(item);
						var name = item.attr("name");
						var value = item.val();
						
						if (after_fields.filter("[name=\'" + name + "\']").length > 0)
							$.each(after_fields.filter("[name=\'" + name + "\']"), function (idw, field) {
								field = $(field);
								
								if (field.is("input[type=checkbox], input[type=radio]")) {
									if (field.attr("value") == value)
										field.attr("checked", "checked").prop("checked", true);
									else
										field.removeAttr("checked").prop("checked", false);
								}
								else
									field.val(value);
							});
						else if (item.hasClass("field-value") && after_fields.filter(".field-value").length > 0)
							$.each(after_fields.filter(".field-value"), function (idw, field) {
								$(field).html(value);
							});
						else
							$.each(after_fields, function (idw, field) {
								field = $(field);
								
								if (field.is("input, textarea, select")) {
									if (field.is("input[type=checkbox], input[type=radio]")) {
										if (field.attr("value") == value)
											field.attr("checked", "checked").prop("checked", true);
										else
											field.removeAttr("checked").prop("checked", false);
									}
									else
										field.val(value);
								}
								else
									field.html(value);
							});
					});
				}
			});
			
			onInsert(after_insert_fields[0], data, status, field_name_prefix);
			
			//preparing links if exist
			new_item.find(".actions, .link").find("a").each(function (idx, a) { //it could be a td or a sub-div inside of li. Do not add .children(".actions, .link") bc the .actions/.link items inside of the li are not directly children.
				var a_attrs_to_check = ["href", "data-query-string"];
				
				for (var k in a_attrs_to_check) {
					var attr_name_to_check = a_attrs_to_check[k];
					
					if (a.hasAttribute(attr_name_to_check)) {
						var attr_value_to_check = a.getAttribute(attr_name_to_check);
						var matches = ("" + attr_value_to_check).match(/#([\w\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u024F\u1EBD\u1EBC \-\+\.]+)#/g); //Do not use /#([\p{L}\w \-\+\.]+)#/gu bc it does not work in IE.
						
						if (matches) {
							for (var i = 0; i < matches.length; i++) {
								var m = matches[i];
								var attr_name = m.substr(1, m.length - 2);
								var field = after_insert_fields.filter("." + attr_name).children("input, textarea, select, .field-value").first(); //Note that the PK-Auto-Incremented fields must have hidden inputs, so we can get the inserted values
								var value = "";
								
								if (field[0]) {
									if (field.is("input, textarea, select"))
										value = field.val();
									else
										value = field.html();
								}
								
								attr_value_to_check = attr_value_to_check.replace(m, value);
							}
							
							a.setAttribute(attr_name_to_check, attr_value_to_check);
						}
					}
				}
			});
			
			//adding new element and delete insert element
			new_item.insertAfter(before_insert_parent);
			before_insert_parent.remove();
			
			if (typeof onNewHtml == "function")
				onNewHtml(elm, new_item);
		}
	}
'; if (strpos($v2f75815c56, "function onSingleInsert(") === false && $pc3b52287 && $pb3f8356a != "multiple_form") $v067674f4e4 .= '
if (typeof onSingleInsert != "function") 
	function onSingleInsert(elm, data, status, field_name_prefix) {
		if (status && data) {
			elm = $(elm);
			var lc = elm.parent().closest(".list-items").children(".list-container");
			var p = lc.children("ul.list-tree, table.list-table");
			
			if (!p[0]) //in case of DataTables runs, it will copy the table to another children
				p = elm.parent().closest("ul.list-tree, table.list-table"); 
			
			var type = p.hasClass("list-tree") ? "tree" : "table";
			var table_name = elm.attr("data-table-name");
			var panel_id_hash = elm.attr("data-panel-id-hash");
			eval("var after_insert_html = " + table_name + "_" + type + "_" + panel_id_hash + "_after_insert_html;");
			
			return prepareAfterInsertHtml(elm, data, status, field_name_prefix, after_insert_html);
		}
	}
'; if (strpos($v2f75815c56, "function onMultipleFormSingleInsert(") === false && $pc3b52287 && $pb3f8356a == "multiple_form") $v067674f4e4 .= '
if (typeof onMultipleFormSingleInsert != "function") 
	function onMultipleFormSingleInsert(elm, data, status, field_name_prefix) {
		if (status && data) {
			elm = $(elm);
			var type = "multiple_form";
			var table_name = elm.attr("data-table-name");
			var panel_id_hash = elm.attr("data-panel-id-hash");
			eval("var after_insert_html = " + table_name + "_" + type + "_" + panel_id_hash + "_after_insert_html;");
			
			return prepareAfterInsertHtml(elm, data, status, field_name_prefix, after_insert_html);
		}
	}
'; if (strpos($v2f75815c56, "function onMultipleInsert(") === false && $v87b0433426) $v067674f4e4 .= '
if (typeof onMultipleInsert != "function") 
	function onMultipleInsert(elm, data, status, field_name_prefix) {
		if (status && data)
			if ($.isPlainObject(data) && data[field_name_prefix] && $.isPlainObject(data[field_name_prefix]) && data[field_name_prefix]["data"] && ($.isPlainObject(data[field_name_prefix]["data"]) || $.isArray(data[field_name_prefix]["data"]))) {
				elm = $(elm);
				var lc = elm.parent().closest(".list-items").children(".list-container");
				var p = lc.children("ul.list-tree, table.list-table");
				
				if (!p[0]) //in case of DataTables runs, it will copy the table to another children
					p = elm.parent().closest("ul.list-tree, table.list-table"); 
				
				var type = p.hasClass("list-tree") ? "tree" : "table";
				var table_name = elm.attr("data-table-name");
				var panel_id_hash = elm.attr("data-panel-id-hash");
				eval("var after_insert_html = " + table_name + "_" + type + "_" + panel_id_hash + "_after_insert_html;");
				
				$.each(data[field_name_prefix]["data"], function(row_index, item) {
					if ($.isNumeric(row_index)) {
						var p = elm.parent().closest("form");
						var row = getRowIndexElement(p, field_name_prefix, row_index);
						
						if (row) {
							var item_data = {};
							item_data[field_name_prefix] = {"data": item};
							prepareAfterInsertHtml(row.children().first(), item_data, true, field_name_prefix, after_insert_html);
						}
					}
				});
			}
	}
'; if (strpos($v2f75815c56, "function onUpdate(") === false && ($v5222cf6182 || $pfe729e56 || $v4b6c188bfa)) $v067674f4e4 .= '
if (typeof onUpdate != "function")
	function onUpdate(elm, data, status, field_name_prefix) {
		if (status) {
			var pks_elms = $(elm).parent().closest("tr, li, form").find(".is-pk");
			
			$.each(pks_elms, function (idx, td) {
				var fields = $(td).find("input, textarea, select");
				var orig_fields = [];
				var pk_value = null;
				
				$.each(fields, function (idx, field) {
					if (field.name.substr(0, 5) == "orig_")
						orig_fields.push(field);
					else
						pk_value = $(field).val();
				});
				
				if (pk_value != null && ("" + pk_value).length > 0)
					$.each(orig_fields, function (idx, field) {
						$(field).val(pk_value);
					});
			});
		}
	}
'; if (strpos($v2f75815c56, "function onMultipleUpdate(") === false && $pfe729e56) $v067674f4e4 .= '
if (typeof onMultipleUpdate != "function")
	function onMultipleUpdate(elm, data, status, field_name_prefix) {
		if (status && data) {
			elm = $(elm);
			
			if ($.isPlainObject(data) && data[field_name_prefix] && $.isPlainObject(data[field_name_prefix]) && data[field_name_prefix]["data"] && ($.isPlainObject(data[field_name_prefix]["data"]) || $.isArray(data[field_name_prefix]["data"])))
				$.each(data[field_name_prefix]["data"], function(row_index, item) {
					if ($.isNumeric(row_index)) {
						var p = elm.parent().closest("form");
						var row = getRowIndexElement(p, field_name_prefix, row_index);
						
						if (row) {
							var item_data = {};
							item_data[field_name_prefix] = {"data": item};
							onUpdate(row.children().first(), item_data, true, field_name_prefix);
						}
					}
				});
		}
	}
'; if (strpos($v2f75815c56, "function onMultipleInsertUpdate(") === false && $v4b6c188bfa) $v067674f4e4 .= '
if (typeof onMultipleInsertUpdate != "function") 
	function onMultipleInsertUpdate(elm, data, status, field_name_prefix) {
		if (status && data)
			if ($.isPlainObject(data) && data[field_name_prefix] && $.isPlainObject(data[field_name_prefix]) && data[field_name_prefix]["data"] && ($.isPlainObject(data[field_name_prefix]["data"]) || $.isArray(data[field_name_prefix]["data"]))) {
				elm = $(elm);
				var lc = elm.parent().closest(".list-items").children(".list-container");
				var p = lc.children("ul.list-tree, table.list-table");
				
				if (!p[0]) //in case of DataTables runs, it will copy the table to another children
					p = elm.parent().closest("ul.list-tree, table.list-table"); 
				
				var type = p.hasClass("list-tree") ? "tree" : "table";
				var table_name = elm.attr("data-table-name");
				var panel_id_hash = elm.attr("data-panel-id-hash");
				eval("var after_insert_html = " + table_name + "_" + type + "_" + panel_id_hash + "_after_insert_html;");
				
				$.each(data[field_name_prefix]["data"], function(row_index, item) {
					if ($.isNumeric(row_index)) {
						var p = elm.parent().closest("form");
						var row = getRowIndexElement(p, field_name_prefix, row_index);
						
						if (row) {
							var item_data = {};
							item_data[field_name_prefix] = {"data": item};
							
							//call correspondent function according if item is a new record or existent one.
							if (row.attr("data-is-insert-record") == 1)
								prepareAfterInsertHtml(row.children().first(), item_data, true, field_name_prefix, after_insert_html);
							else
								onUpdate(row.children().first(), item_data, true, field_name_prefix);
						}
					}
				});
			}
	}
'; if (strpos($v2f75815c56, "function onDelete(") === false && ($v6e3aed5d91 || $v5573ca8e1e)) $v067674f4e4 .= '
if (typeof onDelete != "function")
	function onDelete(elm, data, status, field_name_prefix) {
		if (status)
			$(elm).parent().closest("tr, li, form").remove();
	}
'; if (strpos($v2f75815c56, "function onMultipleDelete(") === false && $v5573ca8e1e) $v067674f4e4 .= '
if (typeof onMultipleDelete != "function")
	function onMultipleDelete(elm, data, status, field_name_prefix) {
		if (status && data) {
			elm = $(elm);
			
			if ($.isPlainObject(data) && data[field_name_prefix] && $.isPlainObject(data[field_name_prefix]) && data[field_name_prefix]["data"] && ($.isPlainObject(data[field_name_prefix]["data"]) || $.isArray(data[field_name_prefix]["data"])))
				$.each(data[field_name_prefix]["data"], function(row_index, item) {
					if ($.isNumeric(row_index)) {
						var p = elm.parent().closest("form");
						var row = getRowIndexElement(p, field_name_prefix, row_index);
						
						if (row) {
							var item_data = {};
							item_data[field_name_prefix] = {"data": item};
							onDelete(row.children().first(), item_data, true, field_name_prefix);
						}
					}
				});
		}
	}
'; if (strpos($v2f75815c56, "function addNewItem(") === false && ($pb3f8356a == "list_table" || $pb3f8356a == "list_form") && ($v9195465250["single_insert"] || $v9195465250["multiple_insert_update"] || $v9195465250["multiple_insert"])) $v067674f4e4 .= '
if (typeof addNewItem != "function") 
	function addNewItem(elm) {
		elm = $(elm);
		var lc = elm.parent().closest(".list-items").children(".list-container");
		var p = lc.children("ul.list-tree, table.list-table");
		
		if (!p[0]) //in case of DataTables runs, it will copy the table to another children
			p = elm.parent().closest("ul.list-tree, table.list-table"); 
		
		var is_tree = p.hasClass("list-tree");
		var tbody_or_ul = is_tree ? p : p.children("tbody");
		
		if (!tbody_or_ul[0]) {
			alert("Error: couldn\'t find parent element to add new item. Please check your javascript function: addNewItem!");
			return;
		}
		
		//preparing fields name with the correct row index
		var table_name = elm.attr("data-table-name");
		var panel_id_hash = elm.attr("data-panel-id-hash");
		var row_index = getNextRowIndex(tbody_or_ul, table_name);
		var type = p.hasClass("list-tree") ? "tree" : "table";
		eval("var new_item = " + table_name + "_" + type + "_" + panel_id_hash + "_before_insert_html;");
		new_item = new_item.replaceAll(table_name + "[]", table_name + "[" + row_index + "]");
		new_item = new_item.replaceAll("&lt;script", "<script").replaceAll("&lt;/script", "</script");
		
		//in case of multiple insert in tables
		new_item = new_item.replaceAll("multiple_selection[" + table_name + "][]", "multiple_selection[" + table_name + "][" + row_index + "]");
		new_item = new_item.replaceAll("multiple_insert_selection[" + table_name + "][]", "multiple_insert_selection[" + table_name + "][" + row_index + "]");
		
		new_item = $(new_item);
		
		//adding new row to table
		tbody_or_ul.append(new_item);
    
		//preparing select fields with correspondent options
		prepareSelectFieldsWithJavascriptOptions(new_item);
		
		//populate the input fields with the values from the query string. When is a new item, populate the fields with the _GET[attr_name]
		prepareNewFieldsWithQueryStringValues(table_name, new_item);
		
		if (typeof onNewHtml == "function")
			onNewHtml(elm, new_item);
	}
'; if (strpos($v2f75815c56, "function addMultipleFormNewItem(") === false && $pb3f8356a == "multiple_form" && $v9195465250["single_insert"]) $v067674f4e4 .= '
if (typeof addMultipleFormNewItem != "function") 
	function addMultipleFormNewItem(elm) {
		elm = $(elm);
		var add_button_container = $(elm).parent().closest(".add-button");
		
		//preparing fields name with the correct row index
		var table_name = elm.attr("data-table-name");
		var panel_id_hash = elm.attr("data-panel-id-hash");
		var type = "multiple_form";
		eval("var new_item = " + table_name + "_" + type + "_" + panel_id_hash + "_before_insert_html;");
		new_item = new_item.replaceAll("&lt;script", "<script").replaceAll("&lt;/script", "</script");
		
		new_item = $(new_item);
		
		var close_button = $(\'<div class="button button-close"><input type="button" value="Close"></div>\');
		close_button.click(function() {
			new_item.remove();
		});
		new_item.find(" > .multiple-form > .buttons").append(close_button);
		
		//adding new row to table
		new_item.insertAfter(add_button_container);
		
		//preparing select fields with correspondent options
		prepareSelectFieldsWithJavascriptOptions(new_item);
		
		//populate the input fields with the values from the query string. When is a new item, populate the fields with the _GET[attr_name]
		prepareNewFieldsWithQueryStringValues(table_name, new_item);
		
		if (typeof onNewHtml == "function")
			onNewHtml(elm, new_item);
	}
'; if (strpos($v2f75815c56, "function prepareNewFieldsWithQueryStringValues(") === false && ($pb3f8356a == "list_table" || $pb3f8356a == "list_form" || $pb3f8356a == "multiple_form") && ($v9195465250["single_insert"] || $v9195465250["multiple_insert_update"] || $v9195465250["multiple_insert"])) $v067674f4e4 .= '
if (typeof prepareNewFieldsWithQueryStringValues != "function") 
	function prepareNewFieldsWithQueryStringValues(table_name, new_item) {
		//populate the input fields with the values from the query string. When is a new item, populate the fields with the _GET[attr_name]
		var embeded_container = new_item.parent().closest(".embeded-inner-task");
		var default_url = embeded_container.attr("data-url"); //contains the querystring with the default values to be set
		var inputs = new_item.find(\'input, textarea, select\');
		
		$.each(inputs, function(idx, input) {
			input = $(input);
			var name = "" + input.attr("name");
			
			if (name.substr(0, table_name.length + 1) == table_name + "[" && name.substr(name.length - 1) == "]") {
				name = name.substr(table_name.length, name.length - table_name.length); //[attr_name] or [idx][attr_name]
				
				//for forms
				var match = name.match(/^\[([\w\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u024F\u1EBD\u1EBC \-\+\.]+)\]$/); //\'\\w\' means all words with \'_\' and \'u\' means with accents and  too. Do not use /^\[([\p{L}\w \-\+\.]+)\]$/u bc it does not work in IE.
				
				//for lists
				if (!match) 
					match = name.match(/^\[[0-9]+\]\[([\w\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u024F\u1EBD\u1EBC \-\+\.]+)\]$/); //\'\\w\' means all words with \'_\' and \'u\' means with accents and  too. Do not use /^\[([\p{L}\w \-\+\.]+)\]$/u bc it does not work in IE.
				
				var attr_name = match ? match[1] : null;
				
				if (attr_name) {
					var attr_value = getQueryStringParameterByName(attr_name, default_url);
					
					if (attr_value != null) { //if null it means does not exists in the querystring
						if (input.is("input[type=checkbox], input[type=radio]")) {
							if (input.attr("value") == attr_value)
								input.attr("checked", "checked").prop("checked", true);
							else
								input.removeAttr("checked").prop("checked", false);
						}
						else
							input.val(attr_value);
						
						var p = input.parent();
						var fv = p.children(\'.field-value\');
						fv.html(attr_value);
						
						//check if parent has class: "is-pk-auto-increment" and if yes, adds a reset button to remove the pk pre-loaded value, in case the user prefers to use the auto-increment feature, instead of the pre-loaded value.
						if (p.hasClass("is-pk-auto-increment")) {
							var r = p.children(".reset");
							
							if (!r[0]) {
								r = $(\'<span class="icon reset" title="Reset this value to default">&times;</span>\');
								p.append(r);
								
								r.click(function() {
									input.val("");
									fv.html("");
									r.remove();
								});
							}
						}
						else
							p.children(".reset").remove();
					}
				}
			}
		});
	}
'; if (strpos($v2f75815c56, "function getQueryStringParameterByName(") === false && ($pb3f8356a == "list_table" || $pb3f8356a == "list_form" || $pb3f8356a == "multiple_form") && ($v9195465250["single_insert"] || $v9195465250["multiple_insert_update"] || $v9195465250["multiple_insert"])) $v067674f4e4 .= '
if (typeof getQueryStringParameterByName != "function") 
	function getQueryStringParameterByName(name, url) {
		if (!url) 
			url = window.location.href;
		
		name = name.replace(/[\\[]/, "\\\\[").replace(/[\\]]/, "\\\\]");
		var regex = new RegExp("[\\?&]" + name + "(=([^&#]*)|&|#|$)");
		var results = regex.exec(url);
		
		if (!results)
			return null;
		
		if (!results[2])
			return "";
		
		return decodeURIComponent(results[2].replace(/\\+/g, " "));
	}
'; if (strpos($v2f75815c56, "function prepareSelectFieldsWithJavascriptOptions(") === false && ($pb3f8356a == "list_table" || $pb3f8356a == "list_form" || $pb3f8356a == "multiple_form") && ($v9195465250["single_insert"] || $v9195465250["multiple_insert_update"] || $v9195465250["multiple_insert"])) $v067674f4e4 .= '
if (typeof prepareSelectFieldsWithJavascriptOptions != "function") 
	function prepareSelectFieldsWithJavascriptOptions(item) {
		//preparing select fields with correspondent options
		var selects = item.find("select");

		$.each(selects, function(idx, select) {
			select = $(select);
			var options = select.attr("data-options-javascript-variable-name");
			
			if (options) {
				try {
					eval("options = " + options + ";");
				} catch(e) {}
				
				if (options) {
					var html = "<option></option>";
					
					if ($.isPlainObject(options) || $.isArray(options))
						$.each(options, function(option_id, option_label) {
							html += \'<option value="\' + option_id + \'">\' + option_label + \'</option>\';
						});
					
					select.html(html);
				}
			}
		});
	}
'; if (strpos($v2f75815c56, "function executeSingleAction(") === false && ($pc3b52287 || $v5222cf6182 || $v6e3aed5d91)) $v067674f4e4 .= '
if (typeof executeSingleAction != "function")
	function executeSingleAction(elm, success_func) {
		elm = $(elm);
		var confirmation = elm.attr("data-confirmation");
		var confirmation_message = elm.attr("data-confirmation-message");
		
		if (!confirmation || confirm(confirmation_message)) {
			var url = elm.attr("data-url");
			var form_obj = elm.parent().closest("tr, li, form");
			var fields = form_obj.find("input, textarea, select");
			var status = typeof MyJSLib == \'undefined\' || MyJSLib.FormHandler.formElementsCheck( fields.toArray() );
			
			if (status) {
				if (url) {
					var form_data = {};
					var query_string = fields.serialize();
					parse_str(query_string, form_data);
					
					var table_name = elm.attr("data-table-name");
					var button_type = elm.attr("data-button-type");
					var has_permission_var_name = "has_" + (button_type == "delete" ? "delete" : "write") + "_permission";
					var ok_msg_message = elm.attr("data-ok-msg-message");
					var ok_msg_redirect_url = elm.attr("data-ok-msg-redirect-url");
					var error_msg_message = elm.attr("data-error-msg-message");
					var error_msg_redirect_url = elm.attr("data-error-msg-redirect-url");
					
					//bc the fields name inside of the TR/LI elements contain the row index (this is table_name[index]), we need to remove it and pass directly the selected item data.
					if (form_obj.is("tr, li") && form_data[table_name])
						for (var row_index in form_data[table_name]) {
							form_data[table_name] = form_data[table_name][row_index];
							break;
						}
					
					if (elm.is("input, button"))
						form_data[ elm.attr("name") ] = elm.val();
					else
						form_data[ elm.attr("data-button-name") ] = 1;
					
					//console.log(form_data);
					
					$.ajax({
						type: "POST",
						url: url,
						data: form_data,
						dataType: "json",
						success: function(data) {
							var status = false;
							var status_message = null;
							var has_permission = true;

							if ($.isPlainObject(data) && data) {
								status = data["status"];
								status_message = data["message"];

								if (data.hasOwnProperty(table_name) && data[table_name]) {
									if (data[table_name].hasOwnProperty(table_name + "_status"))
										status = data[table_name][table_name + "_status"];
									else if ($.isPlainObject(data[table_name]["data"]) && data[table_name]["data"].hasOwnProperty("' . $pd98df87c . '_status"))
										status = data[table_name]["data"][table_name + "_status"];
									else if (data[table_name].hasOwnProperty("status"))
										status = data[table_name]["status"];
									
									var msg = data[table_name].hasOwnProperty(table_name + "_status_message") ? data[table_name][table_name + "_status_message"] : data[table_name]["status_message"];
									status_message = msg ? msg : status_message;
									
									if (data[table_name].hasOwnProperty(has_permission_var_name))
										has_permission = data[table_name][has_permission_var_name];
								}
							}
							else if ($.isNumeric(data) && data > 0) 
								status = true;

							if (success_func && typeof success_func == "function")
								success_func(elm[0], data, status, table_name);

							if (status) {
								if (ok_msg_message)
									status_message = ok_msg_message + (status_message ? " " + status_message : "");
								
								if (status_message)
									alert(status_message);
								
								if (ok_msg_redirect_url)
									document.location = getRedirectUrlWithPks(ok_msg_redirect_url, fields, true);
							}
							else {
								if (error_msg_message)
									status_message = error_msg_message + (status_message ? " " + status_message : "");

								if (!has_permission)
									alert("You do not have permission to " + (button_type == "insert_update" ? "update" : button_type) + " this " + table_name + "!");
								else if (status_message)
									alert(status_message);
								
								if (error_msg_redirect_url)
									document.location = getRedirectUrlWithPks(error_msg_redirect_url, fields, false);
							}
						},
						error: function() {
							if (error_msg_message)
								alert(error_msg_message);
							
							if (error_msg_redirect_url)
								document.location = getRedirectUrlWithPks(error_msg_redirect_url, fields, false);
						}
					});
				}
				else
					alert("Error: URL cannot be undefined in the executeSingleAction function!");
			}
		}
	}
'; if (strpos($v2f75815c56, "function executeMultipleActions(") === false && ($v49dcef9a11 || $pfe729e56 || $v5573ca8e1e)) $v067674f4e4 .= '
if (typeof executeMultipleActions != "function")
	function executeMultipleActions(elm, success_func) {
		elm = $(elm);
		var confirmation = elm.attr("data-confirmation");
		var confirmation_message = elm.attr("data-confirmation-message");
		
		if (!confirmation || confirm(confirmation_message)) {
			var table_name = elm.attr("data-table-name");
			var button_type = elm.attr("data-button-type");
			var has_permission_var_name = "has_" + (button_type == "delete" ? "delete" : "write") + "_permission";
			var ok_msg_message = elm.attr("data-ok-msg-message");
			var ok_msg_redirect_url = elm.attr("data-ok-msg-redirect-url");
			var error_msg_message = elm.attr("data-error-msg-message");
			var error_msg_redirect_url = elm.attr("data-error-msg-redirect-url");
			
			var url = elm.attr("data-url");
			var form_obj = elm.parent().closest("form");
			
			//get the fields that have the multiple-selection checkbox active
			var fields = [];
			var multiple_selection_inputs = form_obj.find(".multiple-selection input");
			$.each(multiple_selection_inputs, function(idx, input) {
				input = $(input);
				var push_to_fields = input.is(":checked");
				
				if (push_to_fields && (button_type == "update" || button_type == "delete"))
					push_to_fields = input.attr("name").indexOf("multiple_selection[") == 0;
				
				if (push_to_fields) {
					var item_fields = input.parent().closest("li, tr").find("input, textarea, select").toArray();

					$.each(item_fields, function(idy, field) {
						if ($.inArray(field, fields) == -1)
							fields.push(field);
					});
				}
			});
			
			if (fields.length == 0) {
				alert("Please select some items first!");
				return;
			}
			
			var status = typeof MyJSLib == \'undefined\' || MyJSLib.FormHandler.formElementsCheck(fields);
			fields = $(fields);
			
			if (status) {
				if (url) {
					var form_data = {};
					var query_string = fields.serialize();
					parse_str(query_string, form_data);
					
					if (elm.is("input, button"))
						form_data[ elm.attr("name") ] = elm.val();
					else
						form_data[ elm.attr("data-button-name") ] = 1;
					
					//console.log(form_data);
					
					$.ajax({
						type: "POST",
						url: url,
						data: form_data,
						dataType: "json",
						success: function(data) {
							var status = false;
							var status_message = null;
							var has_permission = true;

							if ($.isPlainObject(data) && data) {
								status = data["status"];
								status_message = data["message"];
								
								if (data.hasOwnProperty(table_name + "_status_message"))
									status_message = data[table_name + "_status_message"];
								
								if (data.hasOwnProperty(table_name) && data[table_name] && ($.isPlainObject(data[table_name]) || $.isArray(data[table_name]))) {
									if (data[table_name].hasOwnProperty(table_name + "_status") || data[table_name].hasOwnProperty("status")) {
										status = data[table_name].hasOwnProperty(table_name + "_status") ? data[table_name][table_name + "_status"] : data[table_name]["status"];
										
										var msg = data[table_name].hasOwnProperty(table_name + "_status_message") ? data[table_name][table_name + "_status_message"] : data[table_name]["status_message"];
										status_message = msg ? msg : status_message;
										
										if (data[table_name].hasOwnProperty(has_permission_var_name))
											has_permission = data[table_name][has_permission_var_name];
									}
									else if ($.isPlainObject(data[table_name]["data"]) || $.isArray(data[table_name]["data"])) {
										status = true;
										
										$.each(data[table_name]["data"], function(row_index, item) {
											if ($.isNumeric(row_index)) {
												if (!item)
													status = false;
												else if ($.isPlainObject(item) && item.hasOwnProperty(table_name + "_status") && !item[table_name + "_status"])
													status = false;
											}
										});
									}
								}
							}
							else if ($.isNumeric(data) && data == 1) 
								status = true;

							if (success_func && typeof success_func == "function")
								success_func(elm[0], data, status, table_name);

							if (status) {
								if (ok_msg_message)
									status_message = ok_msg_message + (status_message ? " " + status_message : "");

								if (status_message)
									alert(status_message);
									
								if (ok_msg_redirect_url)
									document.location = getRedirectUrlWithPks(ok_msg_redirect_url, fields, true);
							}
							else {
								if (error_msg_message)
									status_message = error_msg_message + (status_message ? " " + status_message : "");
								
								if (!has_permission)
									alert("You do not have permission to " + (button_type == "insert_update" ? "update" : button_type) + " this " + table_name + "!");
								else if (status_message)
									alert(status_message);
								
								if (error_msg_redirect_url)
									document.location = getRedirectUrlWithPks(error_msg_redirect_url, fields, false);
							}
						},
						error: function() {
							if (error_msg_message)
								alert(error_msg_message);
							
							if (error_msg_redirect_url)
								document.location = getRedirectUrlWithPks(error_msg_redirect_url, fields, false);
						}
					});
				}
				else
					alert("Error: URL cannot be undefined in the executeMultipleActions function!");
			}
		}
	}
'; return $v067674f4e4; } private static function f19d90c9add($pd98df87c, $pd152184b, &$v5a911d8233, $v5d3813882f = false) { self::mc780ee97242e($pd152184b, $v5a911d8233, $v9abfb1e31c, $v52a39aea36, $v9179355ff1, $pc96525d3, $pdfa0b83c, $paf762455, $pa9e1f4ff); $pb494e708 = ' data-allow-null="' . ($v9abfb1e31c ? 1 : 0) . '"'; if ($v52a39aea36) $pb494e708 .= ' data-validation-type="' . $v52a39aea36 . '"'; if ($v9179355ff1) $pb494e708 .= ' data-validation-message="' . addcslashes($v9179355ff1, '"') . '"'; if ($pc96525d3) $pb494e708 .= ' data-validation-label="' . addcslashes($pc96525d3, '"') . '"'; if ($pdfa0b83c) $pb494e708 .= ' placeHolder="' . addcslashes($pdfa0b83c, '"') . '"'; if ($pa9e1f4ff) $pb494e708 .= ' maxLength="' . $pa9e1f4ff . '"'; if ($paf762455) foreach ($paf762455 as $pe5c5e2fe => $v956913c90f) $pb494e708 .= ' ' . $pe5c5e2fe . '="' . addcslashes($v956913c90f, '"') . '"'; if ($v5d3813882f["ajax_on_blur"]) $pb494e708 .= ' onBlur="update' . str_replace(" ", "", self::getName($pd98df87c)) . '(this, onUpdate)"'; if ($v5d3813882f["multiple_key_press"]) $pb494e708 .= " " . ($v5a911d8233 == "select" || $v5a911d8233 == "checkbox" || $v5a911d8233 == "radio" ? "onChange" : "onKeyDown") . '="onMultipleUpdateKeyDown(this)"'; return $pb494e708; } private static function mc780ee97242e($v1b0cfa478b, &$v5a911d8233 = null, &$v9abfb1e31c = null, &$v52a39aea36 = null, &$v9179355ff1 = null, &$pc96525d3 = null, &$pdfa0b83c = null, &$paf762455 = null, &$pa9e1f4ff = null) { $v5a911d8233 = $v52a39aea36 = $v9179355ff1 = $pdfa0b83c = null; $v9abfb1e31c = !isset($v1b0cfa478b["null"]) || $v1b0cfa478b["null"] ? "1" : "0"; $pa9e1f4ff = self::f2e5c6334f5($v1b0cfa478b); $v9acc88059e = self::getName($v1b0cfa478b["name"]); $pc96525d3 = $v9acc88059e; switch ($v1b0cfa478b["type"]) { case "int": $v52a39aea36 = "int"; $v9179355ff1 = "'$v9acc88059e' field is not a valid integer number."; $v5a911d8233 = "number"; break; case "bigint": $v52a39aea36 = "bigint"; $v9179355ff1 = "'$v9acc88059e' field is not a valid big integer number."; $v5a911d8233 = "number"; break; case "decimal": $v52a39aea36 = "decimal"; $v9179355ff1 = "'$v9acc88059e' field is not a valid decimal number."; $v5a911d8233 = "number"; $paf762455 = array("step" => "any"); break; case "double": $v52a39aea36 = "double"; $v9179355ff1 = "'$v9acc88059e' field is not a valid double number."; $v5a911d8233 = "number"; $paf762455 = array("step" => "0.00000000000001"); break; case "float": $v52a39aea36 = "float"; $v9179355ff1 = "'$v9acc88059e' field is not a valid float number."; $v5a911d8233 = "number"; $paf762455 = array("step" => "0.0000001"); break; case "smallint": if ($v1b0cfa478b["length"] == 1) $v5a911d8233 = "checkbox"; else { $v52a39aea36 = "smallint"; $v9179355ff1 = "'$v9acc88059e' field is not a valid small integer number."; $v5a911d8233 = "number"; } break; case "bit": case "boolean": $v5a911d8233 = "checkbox"; break; case "tinyint": if ($v1b0cfa478b["length"] == 1) $v5a911d8233 = "checkbox"; break; case "mediumtext": case "text": case "longtext": case "blob": case "longblob": $v5a911d8233 = "textarea"; break; case "date": $pdfa0b83c = "yyyy-mm-dd"; $v52a39aea36 = "date"; $v9179355ff1 = "'$v9acc88059e' field is not a valid date. Please respect this format: $pdfa0b83c"; $v5a911d8233 = "date"; break; case "datetime": case "datetime2": case "datetimeoffset": case "smalldatetime": case "timestamp": case "timestamp without time zone": $pdfa0b83c = "yyyy-mm-dd hh:ii:ss"; $v52a39aea36 = "datetime"; $v9179355ff1 = "'$v9acc88059e' field is not a valid date. Please respect this format: $pdfa0b83c"; $v5a911d8233 = "datetime"; break; case "time": case "time without time zone": $pdfa0b83c = "hh:ii:ss"; $v52a39aea36 = "time"; $v9179355ff1 = "'$v9acc88059e' field is not a valid time. Please respect this format: $pdfa0b83c"; $v5a911d8233 = "time"; break; } if ($v9abfb1e31c == "0" && ($v5a911d8233 == "checkbox" || $v5a911d8233 == "radio") && (ObjTypeHandler::isDBTypeNumeric($v1b0cfa478b["type"]) || ObjTypeHandler::isPHPTypeNumeric($v1b0cfa478b["type"]))) $v9abfb1e31c = "1"; if (!$v5a911d8233 && stripos($v1b0cfa478b["type"], "char") !== false && $v1b0cfa478b["length"] >= 200) $v5a911d8233 = "textarea"; if (ObjTypeHandler::isDBTypeNumeric($v1b0cfa478b["type"]) || ObjTypeHandler::isPHPTypeNumeric($v1b0cfa478b["type"])) { $v52a39aea36 = $v52a39aea36 ? $v52a39aea36 : "number"; $v9179355ff1 = "'$v9acc88059e' field is not a valid number."; $v5a911d8233 = $v5a911d8233 ? $v5a911d8233 : "number"; } else if (stripos($v1b0cfa478b["name"], "email") !== false) { $pdfa0b83c = "example@email.here"; $v52a39aea36 = $v52a39aea36 ? $v52a39aea36 : "email"; $v9179355ff1 = "'$v9acc88059e' field is not a valid email."; $v5a911d8233 = $v5a911d8233 ? $v5a911d8233 : "email"; } else if (stripos($v1b0cfa478b["name"], "date") !== false) { $pdfa0b83c = $pdfa0b83c ? $pdfa0b83c : "yyyy-mm-dd hh:ii:ss"; $v52a39aea36 = $v52a39aea36 ? $v52a39aea36 : "datetime"; $v9179355ff1 = "'$v9acc88059e' field is not a valid date. Please respect this format: yyyy-mm-dd hh:ii:ss"; $v5a911d8233 = $v5a911d8233 ? $v5a911d8233 : "datetime"; } else if (stripos($v1b0cfa478b["name"], "url") !== false) { $v5a911d8233 = $v5a911d8233 ? $v5a911d8233 : "url"; } else if (stripos($v1b0cfa478b["name"], "phone") !== false) { $v52a39aea36 = $v52a39aea36 ? $v52a39aea36 : "phone"; $v9179355ff1 = "'$v9acc88059e' field is not a valid phone."; $v5a911d8233 = $v5a911d8233 ? $v5a911d8233 : "tel"; } if (!$v5a911d8233) $v5a911d8233 = "text"; } private static function f2e5c6334f5($v1b0cfa478b) { $v3fb9f41470 = $v1b0cfa478b["type"]; $v0911c6122e = $v1b0cfa478b["length"]; if ($v0911c6122e) { $pf6a673d2 = array("date", "datetime", "datetime2", "datetimeoffset", "smalldatetime", "timestamp", "timestamp without time zone", "time", "time without time zone"); if (strpos($v3fb9f41470, "char") !== false || strpos($v3fb9f41470, "text") !== false || strpos($v3fb9f41470, "blob") !== false || in_array($v3fb9f41470, $pf6a673d2)) return $v0911c6122e; } return null; } public static function getName($v5e813b295b) { return ucwords(strtolower( (str_replace(array("_", "-", "."), " ", trim($v5e813b295b)) )) ); } public static function getPlural($v5e813b295b) { $pf579a273 = strtolower(substr($v5e813b295b, -1)); return $pf579a273 == "y" ? substr($v5e813b295b, 0, -1) . "ies" : ($pf579a273 != "s" ? $v5e813b295b . "s" : $v5e813b295b); } public static function getParsedTableName($v5e813b295b) { return str_replace(".", "_", $v5e813b295b); } private function f6f4cf79bef($pac4bc40a, $v8c5df8072b, $v9a4a47d31e, $pe2f18119, $v9801bb06d0 = false) { $ped0a6251 = WorkFlowDBHandler::getTableFromTables($pac4bc40a, $v8c5df8072b); $pc4222023 = array(); $pe2f18119 = array_flip($pe2f18119); $v2ee72186a7 = strtolower($v8c5df8072b); foreach ($pac4bc40a as $v82dfd45b80 => $ped0a6251) if ($v2ee72186a7 != strtolower($v82dfd45b80)) { $v71e25614c4 = $pe2f18119; foreach ($ped0a6251 as $v5e45ec9bb9 => $v1b0cfa478b) if ($v1b0cfa478b["fk"]) foreach ($v1b0cfa478b["fk"] as $pa7c14731) if (strtolower($pa7c14731["table"]) == $v2ee72186a7 && $pe2f18119[ $pa7c14731["attribute"] ]) { unset($v71e25614c4[ $pa7c14731["attribute"] ]); if (!$v71e25614c4) break; } if (!$v71e25614c4) $pc4222023[] = $v9a4a47d31e[$v82dfd45b80] ? $v9a4a47d31e[$v82dfd45b80] : $v82dfd45b80; } return $pc4222023; } private static function me27f08e0aa1a($pecad7cca, $v8710ac8f3f) { switch ($v8710ac8f3f["brokers_layer_type"]) { case "callbusinesslogic": case "callibatisquery": if (!empty($v8710ac8f3f["options"])) { $v8710ac8f3f["parameters"] = null; $v8710ac8f3f["parameters_type"] = ""; $v067674f4e4 = self::f1ed784ed09($pecad7cca, $v8710ac8f3f); if ($v067674f4e4) { $pbd1bc7b0 = strpos($v067674f4e4, '", null, '); $v5d3813882f = substr($v067674f4e4, $pbd1bc7b0 + 9, -1); } } break; case "callhibernatemethod": if (!empty($v8710ac8f3f["sma_options"])) { $v70bc60625e = self::f1ed784ed09($pecad7cca, $v8710ac8f3f); $v8710ac8f3f["sma_options"] = null; $v8710ac8f3f["sma_options_type"] = ""; $v308ab1b9a5 = self::f1ed784ed09($pecad7cca, $v8710ac8f3f); if ($v70bc60625e && $v308ab1b9a5) { $v308ab1b9a5 = substr(trim($v308ab1b9a5), 0, -1); $v70bc60625e = substr(trim($v70bc60625e), 0, -1); $v70bc60625e = trim( str_replace($v308ab1b9a5, "", $v70bc60625e) ); $v70bc60625e = substr($v70bc60625e, 0, 1) == "," ? substr($v70bc60625e, 1) : $v70bc60625e; $v5d3813882f = trim($v70bc60625e); } } break; case "getquerydata": case "setquerydata": if (!empty($v8710ac8f3f["options"])) { $v8710ac8f3f["sql"] = "test"; $v8710ac8f3f["sql_type"] = "variable"; $v067674f4e4 = self::f1ed784ed09($pecad7cca, $v8710ac8f3f); if ($v067674f4e4) { $pbd1bc7b0 = strpos($v067674f4e4, '($test, '); $v5d3813882f = substr($v067674f4e4, $pbd1bc7b0 + 8, -1); } } break; } return isset($v5d3813882f) && $v5d3813882f != "null" ? $v5d3813882f : ""; } private static function f1ed784ed09($pecad7cca, $v8710ac8f3f) { $v88bb618d40 = $v8710ac8f3f["brokers_layer_type"]; $v7f5911d32d = $pecad7cca->getTasksByTag($v88bb618d40); $v7f5911d32d = $v7f5911d32d[0]; if ($v7f5911d32d) { $v7f5911d32d["properties"] = $v8710ac8f3f; $v7f5911d32d["obj"]->data = $v7f5911d32d; $v067674f4e4 = trim( $v7f5911d32d["obj"]->printCode(null, null) ); $v067674f4e4 = substr($v067674f4e4, -1) == ";" ? substr($v067674f4e4, 0, -1) : $v067674f4e4; return $v067674f4e4; } return ""; } private static function mb47ebce07865($pd7bfd6f7, &$v8710ac8f3f, $pabde73f0) { $v6371de0f0c = $pabde73f0["start_row"] ? $pabde73f0["start_row"] : null; $v19429f8570 = $pabde73f0["rows_per_page"] ? $pabde73f0["rows_per_page"] : 100; $v6f41d73021 = $v8710ac8f3f["brokers_layer_type"] == "callhibernatemethod" ? "sma_options" : "options"; $v5d3813882f = $v8710ac8f3f[$v6f41d73021]; $v5d3813882f = $v5d3813882f ? $v5d3813882f : array(); if (is_array($v5d3813882f)) { $v5d3813882f[] = array( "key" => "start", "key_type" => "string", "value" => $v6371de0f0c, "value_type" => $v6371de0f0c && !is_numeric($v6371de0f0c) && substr($v6371de0f0c, 0, 1) != '$' ? "string" : "" ); $v5d3813882f[] = array( "key" => "limit", "key_type" => "string", "value" => $v19429f8570, "value_type" => $v19429f8570 && !is_numeric($v19429f8570) && substr($v19429f8570, 0, 1) != '$' ? "string" : "" ); $v8710ac8f3f[$v6f41d73021] = $v5d3813882f; } } public static function prepareBrokerSettings(&$v8710ac8f3f, $pab752e34, $pb09c0b5b, $v872f5b4dbb, $v8b13fa2358, $pac4bc40a) { if ($v8710ac8f3f) switch ($v8710ac8f3f["brokers_layer_type"]) { case "insert": case "update": case "delete": case "select": if (!$v8b13fa2358) { if (isset($v8710ac8f3f["db_driver"])) $v8710ac8f3f["db_driver"] = ""; } else if ($v872f5b4dbb) $v8710ac8f3f["db_driver"] = $v872f5b4dbb; if ($v8710ac8f3f["sql"]) self::f9e1b56b7f9($v8710ac8f3f, $pab752e34, $pb09c0b5b, $v872f5b4dbb, $v8b13fa2358, $pac4bc40a); break; case "callbusinesslogic": case "callibatisquery": case "callhibernatemethod": case "getquerydata": case "setquerydata": $pb8e4491c = $v0933d21792 = $pd56a3a5a = $pda07cd98 = false; $v7d72d26e62 = $v8710ac8f3f["brokers_layer_type"] == "getquerydata" && stripos(trim($v8710ac8f3f["sql"]), "select ") === 0; $v008b6c7d08 = $v8710ac8f3f["brokers_layer_type"] != "getquerydata" && $v8710ac8f3f["brokers_layer_type"] != "setquerydata"; foreach ($v8710ac8f3f as $pbfa01ed1 => $v956913c90f) { switch ($pbfa01ed1) { case "method_obj": if ($v956913c90f) { $v0ee64549f2 = strpos($v956913c90f, "::") || ($v8710ac8f3f["brokers_layer_type"] == "callobjectmethod" && $v8710ac8f3f["method_static"] == 1); $pd6f5fc01 = strpos($v956913c90f, "->"); $v956913c90f = substr($v956913c90f, 0, 1) != '$' && (!$v0ee64549f2 || ($pd6f5fc01 && $v0ee64549f2 > $pd6f5fc01)) ? '$' . $v956913c90f : $v956913c90f; $v956913c90f = substr($v956913c90f, 0, 1) == '$' ? $v956913c90f : '"' . $v956913c90f . '"'; $v8710ac8f3f[$pbfa01ed1] = $v956913c90f; $v8710ac8f3f[$pbfa01ed1 . "_type"] = "method"; } break; case "sma_ids": if ($v956913c90f && substr($v956913c90f, 0, 1) != '$') $v8710ac8f3f[$pbfa01ed1 . "_type"] = "string"; break; case "options": if (is_array($v956913c90f)) { foreach ($v956913c90f as $pd69fb7d0 => $v2a500a7080) { if ($v2a500a7080["key"] == "db_driver" && $v2a500a7080["key_type"] == "string") { $pd56a3a5a = true; if (!$v8b13fa2358) unset($v8710ac8f3f[$pbfa01ed1][$pd69fb7d0]); else if ($v872f5b4dbb) { $v8710ac8f3f[$pbfa01ed1][$pd69fb7d0]["value"] = $v872f5b4dbb; $v8710ac8f3f[$pbfa01ed1][$pd69fb7d0]["value_type"] = "string"; } break; } else if ($v008b6c7d08 && $v2a500a7080["key"] == "db_broker" && $v2a500a7080["key_type"] == "string") { $v0933d21792 = true; if (!$pb09c0b5b) unset($v8710ac8f3f[$pbfa01ed1][$pd69fb7d0]); else if ($pab752e34) { $v8710ac8f3f[$pbfa01ed1][$pd69fb7d0]["value"] = $pab752e34; $v8710ac8f3f[$pbfa01ed1][$pd69fb7d0]["value_type"] = "string"; } break; } else if ($v7d72d26e62 && $v2a500a7080["key"] == "return_type" && $v2a500a7080["key_type"] == "string") { $pda07cd98 = true; $v8710ac8f3f[$pbfa01ed1][$pd69fb7d0]["value"] = "result"; $v8710ac8f3f[$pbfa01ed1][$pd69fb7d0]["value_type"] = "string"; } } } break; } } if (!$v8710ac8f3f["options"]) $v8710ac8f3f["options"] = array(); if (is_array($v8710ac8f3f["options"])) { if ($v8b13fa2358 && $v872f5b4dbb && !$pd56a3a5a) $v8710ac8f3f["options"][] = array( "key" => "db_driver", "key_type" => "string", "value" => $v872f5b4dbb, "value_type" => "string", ); if ($v008b6c7d08 && $pb09c0b5b && $pab752e34 && !$v0933d21792) $v8710ac8f3f["options"][] = array( "key" => "db_broker", "key_type" => "string", "value" => $pab752e34, "value_type" => "string", ); } if ($v7d72d26e62 && !$pda07cd98) { $v6f41d73021 = $v8710ac8f3f["brokers_layer_type"] == "callhibernatemethod" && ( ($v8710ac8f3f["service_method"] == "callQuery" && $v8710ac8f3f["sma_query_type"] == "select") || $v8710ac8f3f["service_method"] == "callSelect" ) ? "sma_option" : "options"; if (!$v8710ac8f3f[$v6f41d73021]) $v8710ac8f3f[$v6f41d73021] = array(); if (is_array($v8710ac8f3f[$v6f41d73021])) $v8710ac8f3f[$v6f41d73021][] = array( "key" => "return_type", "key_type" => "string", "value" => "result", "value_type" => "string", ); } self::f9e1b56b7f9($v8710ac8f3f, $pab752e34, $pb09c0b5b, $v872f5b4dbb, $v8b13fa2358, $pac4bc40a); break; } } private static function f9e1b56b7f9(&$v8710ac8f3f, $pab752e34, $pb09c0b5b, $v872f5b4dbb, $v8b13fa2358, $pac4bc40a) { $v88bb618d40 = $v8710ac8f3f["brokers_layer_type"]; $pfc72dc56 = $v88bb618d40 == "getquerydata" || $v88bb618d40 == "setquerydata"; $pefe41785 = $v88bb618d40 == "insert" || $v88bb618d40 == "update" || $v88bb618d40 == "delete" || $v88bb618d40 == "select"; if ($pfc72dc56 || $pefe41785) { $v539082ff30 = null; $pab9d8506 = "select"; if ($v8710ac8f3f["sql"]) { self::me9970753b3ec($v8710ac8f3f["sql"]); $v539082ff30 = DB::convertDefaultSQLToObject($v8710ac8f3f["sql"]); $pab9d8506 = $v539082ff30 ? $v539082ff30["type"] : null; } $pf8a51df0 = $pab9d8506 == "insert" || $pab9d8506 == "update" || $pab9d8506 == "delete" || $pab9d8506 == "select"; if ($pf8a51df0) { if ($v539082ff30) { $v539082ff30["main_table"] = $v539082ff30["table"]; $pc6a840f3 = DB::convertObjectToDefaultSQL($v539082ff30); $v65a396e40d = array( "type" => $v539082ff30["type"], "main_table" => $v539082ff30["main_table"], "attributes" => $v539082ff30["attributes"], "conditions" => $v539082ff30["conditions"], "limit" => $v539082ff30["limit"], "start" => $v539082ff30["start"], ); $v7eab668a0b = DB::convertObjectToDefaultSQL($v65a396e40d); $v2311710c25 = $v7eab668a0b == $pc6a840f3 && (!$v539082ff30["limit"] || !$v8710ac8f3f["options"] || is_array($v8710ac8f3f["options"])); if ($v2311710c25) { if ($v539082ff30["type"] == "select" && $v539082ff30["attributes"] && $pac4bc40a[ $v539082ff30["table"] ]) foreach ($v539082ff30["attributes"] as $v1b0cfa478b) if (!$pac4bc40a[ $v539082ff30["table"] ][ $v1b0cfa478b["column"] ]) { $v2311710c25 = false; break; } if ($v2311710c25) { unset($v8710ac8f3f["sql"]); unset($v8710ac8f3f["sql_type"]); if ($v539082ff30["type"] == "insert" && $v539082ff30["attributes"] && $pac4bc40a[ $v539082ff30["table"] ]) foreach ($v539082ff30["attributes"] as $pd69fb7d0 => $v1b0cfa478b) { $v1b0cfa478b = $pac4bc40a[ $v539082ff30["table"] ][ $v1b0cfa478b["column"] ]; if ($v1b0cfa478b && $v1b0cfa478b["primary_key"] && WorkFlowDataAccessHandler::isAutoIncrementedAttribute($v1b0cfa478b)) unset($v539082ff30["attributes"][$pd69fb7d0]); } $v8710ac8f3f["table"] = $v539082ff30["table"]; $v8710ac8f3f["attributes"] = $v539082ff30["attributes"]; $v8710ac8f3f["conditions"] = $v539082ff30["conditions"]; } } if ($v539082ff30["limit"] && (!$v8710ac8f3f["options"] || is_array($v8710ac8f3f["options"]))) { $v552b831ecd = $v539082ff30["limit"]; $v7e4b517c18 = $v539082ff30["start"]; $v8710ac8f3f["options_type"] = "array"; $v8710ac8f3f["options"] = is_array($v8710ac8f3f["options"]) ? $v8710ac8f3f["options"] : array(); $v711aded123 = $v150d54029b = false; if ($v8710ac8f3f["sql"]) { $v90786ceb50 = $v539082ff30; unset($v90786ceb50["limit"]); unset($v90786ceb50["start"]); $v8710ac8f3f["sql"] = DB::convertObjectToDefaultSQL($v90786ceb50); } foreach ($v8710ac8f3f["options"] as $pd69fb7d0 => $v956913c90f) { if ($v956913c90f["key"] == "limit" && $v956913c90f["key_type"] == "string") { $v8710ac8f3f["options"][$pd69fb7d0]["value"] = $v552b831ecd; $v8710ac8f3f["options"][$pd69fb7d0]["value_type"] = "string"; $v711aded123 = true; } else if (strlen("$v7e4b517c18") && $v956913c90f["key"] == "start" && $v956913c90f["key_type"] == "string") { $v8710ac8f3f["options"][$pd69fb7d0]["value"] = $v7e4b517c18; $v8710ac8f3f["options"][$pd69fb7d0]["value_type"] = "string"; $v150d54029b = true; } } if (!$v711aded123) $v8710ac8f3f["options"][] = array( "key" => "limit", "key_type" => "string", "value" => $v552b831ecd, "value_type" => "string", ); if (!$v150d54029b && strlen("$v7e4b517c18")) $v8710ac8f3f["options"][] = array( "key" => "start", "key_type" => "string", "value" => $v7e4b517c18, "value_type" => "string", ); } } if ($pfc72dc56) { if (is_array($v8710ac8f3f["options"])) { foreach ($v8710ac8f3f["options"] as $pd69fb7d0 => $v956913c90f) { if ($v956913c90f["key"] == "db_broker" && $v956913c90f["key_type"] == "string" && $v956913c90f["value_type"] == "string") { $pab752e34 = $v956913c90f["value"]; unset($v8710ac8f3f["options"][$pd69fb7d0]); } else if ($v956913c90f["key"] == "db_driver" && $v956913c90f["key_type"] == "string" && $v956913c90f["value_type"] == "string") { $v872f5b4dbb = $v956913c90f["value"]; unset($v8710ac8f3f["options"][$pd69fb7d0]); } else if ($v956913c90f["key"] == "return_type" && $v956913c90f["key_type"] == "string") unset($v8710ac8f3f["options"][$pd69fb7d0]); } $v8710ac8f3f["options"] = self::f80fd891e65($v8710ac8f3f["options"], "array"); } $v8710ac8f3f["brokers_layer_type"] = $pab9d8506; $v8710ac8f3f["dal_broker"] = $pab752e34; $v8710ac8f3f["db_driver"] = $v872f5b4dbb; $v8710ac8f3f["db_type"] = "db"; } } } } private static function f80fd891e65($v5d3813882f, $v6f41d73021) { if ($v6f41d73021 == "array") { if (is_array($v5d3813882f)) { $pf2aea42d = array(); foreach ($v5d3813882f as $pd69fb7d0 => $pe238ca78) { $pbfa01ed1 = self::f80fd891e65($pe238ca78["key"], $pe238ca78["key_type"]); if ($pe238ca78["items"]) $v67db1bd535 = self::f80fd891e65($pe238ca78["items"], "array"); else $v67db1bd535 = self::f80fd891e65($pe238ca78["value"], $pe238ca78["value_type"]); $pf2aea42d[$pbfa01ed1] = $v67db1bd535; } return $pf2aea42d; } else return $v5d3813882f; } else if ($v6f41d73021 == "variable" && is_string($v5d3813882f) && substr(trim($v5d3813882f), 0, 1) != '$') return '$' . trim($v5d3813882f); return $v5d3813882f; } public static function addConditionsToGetBrokerSettings(&$v8710ac8f3f, $paf1bc6f6) { if ($v8710ac8f3f && $paf1bc6f6) switch ($v8710ac8f3f["brokers_layer_type"]) { case "callbusinesslogic": case "callibatisquery": case "callhibernatemethod": $pbfa01ed1 = $v8710ac8f3f["brokers_layer_type"] == "callhibernatemethod" ? "sma_data" : "parameters"; $v9367d5be85 = $v8710ac8f3f[$pbfa01ed1]; if (is_array($v9367d5be85)) { foreach ($v9367d5be85 as $pd69fb7d0 => $pc5faab2f) if ($pc5faab2f["key_type"] == "string") { $v4e4eadc19e = strtolower($pc5faab2f["key"]); foreach ($paf1bc6f6 as $v8ad5107f9a => $v9e394b2939) { $v0b9a4b86a0 = $v9e394b2939["column"]; $v2d9011599a = $v9e394b2939["table"] ? preg_replace("/^" . $v9e394b2939["table"] . "\./", "", $v0b9a4b86a0) : $v0b9a4b86a0; if (strtolower($v0b9a4b86a0) == $v4e4eadc19e || strtolower($v2d9011599a) == $v4e4eadc19e) { $pc5faab2f["value"] = $v9e394b2939["value"]; $pc5faab2f["value_type"] = PHPUICodeExpressionHandler::getValueType($v9e394b2939["value"], array("empty_string_type" => "string", "non_set_type" => "string")); unset($pc5faab2f["items"]); $v9367d5be85[$pd69fb7d0] = $pc5faab2f; unset($paf1bc6f6[$v8ad5107f9a]); break; } } } $v8710ac8f3f[$pbfa01ed1 . "_type"] = "array"; $v8710ac8f3f[$pbfa01ed1] = $v9367d5be85; } break; case "getquerydata": case "setquerydata": if ($v8710ac8f3f["sql_type"] == "string" && preg_match("/\s+where\s+/i", $v8710ac8f3f["sql"])) { $v3c76382d93 = trim($v8710ac8f3f["sql"]); foreach ($paf1bc6f6 as $v8ad5107f9a => $v9e394b2939) { $v0b9a4b86a0 = $v9e394b2939["column"]; $v2d9011599a = $v9e394b2939["table"] ? preg_replace("/^" . $v9e394b2939["table"] . "\./", "", $v0b9a4b86a0) : $v0b9a4b86a0; $v3c76382d93 = preg_replace("/\s+$v0b9a4b86a0\s*=\s*'([^']*)'/i", "", $v3c76382d93); $v3c76382d93 = preg_replace("/\s+$v0b9a4b86a0\s*=\s*\"([^\"]*)\"/i", "", $v3c76382d93); $v3c76382d93 = preg_replace("/\s+$v0b9a4b86a0\s*=\s*([0-9]+)/i", "", $v3c76382d93); $v3c76382d93 = preg_replace("/\s+$v0b9a4b86a0\s*=\s*#([^#]*)#/i", "", $v3c76382d93); $v3c76382d93 = preg_replace("/\s+$v2d9011599a\s*=\s*'([^']*)'/i", "", $v3c76382d93); $v3c76382d93 = preg_replace("/\s+$v2d9011599a\s*=\s*\"([^\"]*)\"/i", "", $v3c76382d93); $v3c76382d93 = preg_replace("/\s+$v2d9011599a\s*=\s*([0-9]+)/i", "", $v3c76382d93); $v3c76382d93 = preg_replace("/\s+$v2d9011599a\s*=\s*#([^#]*)#/i", "", $v3c76382d93); } $v8710ac8f3f["sql"] = $v3c76382d93; } break; } self::addConditionsToBrokerSettings($v8710ac8f3f, $paf1bc6f6); } public static function addConditionsToBrokerSettings(&$v8710ac8f3f, $paf1bc6f6, $v442e28b3c7 = false) { if ($v8710ac8f3f && $paf1bc6f6) switch ($v8710ac8f3f["brokers_layer_type"]) { case "callbusinesslogic": case "callibatisquery": case "callhibernatemethod": $pbfa01ed1 = $v8710ac8f3f["brokers_layer_type"] == "callhibernatemethod" ? "sma_data" : "parameters"; $v9367d5be85 = $v8710ac8f3f[$pbfa01ed1]; if (!$v9367d5be85 || is_array($v9367d5be85) || $v8710ac8f3f[$pbfa01ed1 . "_type"] == "array") { if (!$v9367d5be85) $v9367d5be85 = array(); $v5ffdbfcbbd = null; foreach ($v9367d5be85 as $pd69fb7d0 => $pc5faab2f) if ($pc5faab2f["key_type"] == "string" && $pc5faab2f["key"] == "conditions") { $v5ffdbfcbbd = $pd69fb7d0; break; } if (!$v5ffdbfcbbd) $v5ffdbfcbbd = $pd69fb7d0 + 1; if (!$v9367d5be85[$v5ffdbfcbbd] || !$v9367d5be85[$v5ffdbfcbbd]["items"]) $v9367d5be85[$v5ffdbfcbbd] = array( "key" => "conditions", "key_type" => "string", "items" => array(), ); foreach ($paf1bc6f6 as $v32dd06ab9b) { $v97915b9670 = $v32dd06ab9b["column"]; if ($v97915b9670) { $pc3e857ed = PHPUICodeExpressionHandler::getValueType($v32dd06ab9b["value"], array("empty_string_type" => "string", "non_set_type" => "string")); $v7959970a41 = false; $pd69fb7d0 = null; foreach ($v9367d5be85[$v5ffdbfcbbd]["items"] as $pd69fb7d0 => $pc5faab2f) if ($pc5faab2f["key_type"] == "string" && $pc5faab2f["key"] == $v97915b9670) { $v9367d5be85[$v5ffdbfcbbd]["items"][$pd69fb7d0]["value"] = $v32dd06ab9b["value"]; $v9367d5be85[$v5ffdbfcbbd]["items"][$pd69fb7d0]["value_type"] = $pc3e857ed; $v7959970a41 = true; break; } if (!$v7959970a41) { $pd69fb7d0++; $v9367d5be85[$v5ffdbfcbbd]["items"][$pd69fb7d0] = array( "key" => $v97915b9670, "key_type" => "string", "value" => $v32dd06ab9b["value"], "value_type" => $pc3e857ed, ); } } } $v8710ac8f3f[$pbfa01ed1 . "_type"] = "array"; $v8710ac8f3f[$pbfa01ed1] = $v9367d5be85; } break; case "getquerydata": case "setquerydata": if ($v8710ac8f3f["sql_type"] == "string" && trim($v8710ac8f3f["sql"])) { $v8710ac8f3f["sql"] = trim($v8710ac8f3f["sql"]); if (substr($v8710ac8f3f["sql"], -1) == ";") $v8710ac8f3f["sql"] = substr($v8710ac8f3f["sql"], 0, -1); $v9c1896376b = DB::getSQLRelationshipConditions($paf1bc6f6, $v442e28b3c7); if ($v9c1896376b) { if (preg_match("/\s+where\s+/i", $v8710ac8f3f["sql"])) $v8710ac8f3f["sql"] = preg_replace("/(\s+where\s+)/i", "\${1}$v9c1896376b and ", $v8710ac8f3f["sql"]); else $v8710ac8f3f["sql"] .= " where " . $v9c1896376b; } } break; } } private static function md82e09e85352(&$pdeee6a59, $pd98df87c, $ped0a6251, $pe2f18119, $v8af7d532f2 = false, $pc470bdf8 = false, $v960e916cfd = false, $v039faf5fd3 = false) { if ($pdeee6a59) { $pdeee6a59["url"] = trim($pdeee6a59["url"]); if (strlen($pdeee6a59["url"])) $pdeee6a59["url"] = self::f9149542f9f($pdeee6a59["url"], $pd98df87c, $ped0a6251, $pe2f18119, $v8af7d532f2, $pc470bdf8, $v960e916cfd, $v039faf5fd3); if (!strlen($pdeee6a59["url"]) || stripos($pdeee6a59["url"], "javascript:") === 0) { $pc2defd39 = self::f9149542f9f("?", $pd98df87c, $ped0a6251, $pe2f18119, $v8af7d532f2, $pc470bdf8, $v960e916cfd, $v039faf5fd3); $pc2defd39 = substr($pc2defd39, 1); if ($pc2defd39) { if ($pdeee6a59["extra_attributes"]["name"] || $pdeee6a59["extra_attributes"]["value"]) $pdeee6a59["extra_attributes"] = array($pdeee6a59["extra_attributes"]); $v7959970a41 = false; if ($pdeee6a59["extra_attributes"]) foreach ($pdeee6a59["extra_attributes"] as &$v2e1e0db913) if ($v2e1e0db913["name"] == "data-query-string") { $v2e1e0db913["value"] .= "&" . $pc2defd39; $v7959970a41 = true; break; } if (!$v7959970a41) $pdeee6a59["extra_attributes"][] = array("name" => "data-query-string", "value" => $pc2defd39); } } } } private static function f9149542f9f($v63967fdd7c, $pd98df87c, $ped0a6251, $pe2f18119, $v8af7d532f2 = false, $pc470bdf8 = false, $v960e916cfd = false, $v039faf5fd3 = false) { if ($pc470bdf8 || !strlen($v63967fdd7c)) return "javascript:void(0)"; if ($ped0a6251) { if ($v63967fdd7c) { preg_match_all("/#([\w \-\+\.]+)#/u", $v63967fdd7c, $pbae7526c, PREG_PATTERN_ORDER); if ($pbae7526c && $pbae7526c[1] && !$v039faf5fd3) foreach ($pbae7526c[1] as $v87ae7286da) if (isset($ped0a6251[$v87ae7286da])) { if ($v960e916cfd) $v9a8b7dc209 = '<ptl:echo \\$input[' . $pd98df87c . ']' . ($v8af7d532f2 ? '[\\$i]' : '') . '[' . $v87ae7286da . '] />'; else $v9a8b7dc209 = $v8af7d532f2 ? '#[idx][' . $v87ae7286da . ']#' : '#' . $pd98df87c . '[' . $v87ae7286da . ']#'; $v63967fdd7c = str_replace("#$v87ae7286da#", $v9a8b7dc209, $v63967fdd7c); unset($ped0a6251[$v87ae7286da]); } } if ($pe2f18119 && stripos($v63967fdd7c, "javascript:") !== 0) { parse_str(parse_url($v63967fdd7c, PHP_URL_QUERY), $v5fc04b8042); $v5fc04b8042 = $v5fc04b8042 ? array_keys($v5fc04b8042) : array(); $pc2defd39 = ""; foreach ($ped0a6251 as $v5e45ec9bb9 => $v02a69d4e0f) if (in_array($v5e45ec9bb9, $pe2f18119) && !in_array($v5e45ec9bb9, $v5fc04b8042)) { $pc2defd39 .= ($pc2defd39 ? '&' : '') . $v5e45ec9bb9 . '='; if ($v039faf5fd3) $pc2defd39 .= "#$v5e45ec9bb9#"; else if ($v960e916cfd) $pc2defd39 .= '<ptl:echo \\$input[' . $pd98df87c . ']' . ($v8af7d532f2 ? '[\\$i]' : '') . '[' . $v5e45ec9bb9 . '] />'; else $pc2defd39 .= $v8af7d532f2 ? '#[idx][' . $v5e45ec9bb9 . ']#' : '#' . $pd98df87c . '[' . $v5e45ec9bb9 . ']#'; } if ($pc2defd39) $v63967fdd7c .= (strpos($v63967fdd7c, "?") !== false ? (substr($v63967fdd7c, -1) == "?" ? "" : "&") : "?") . $pc2defd39; } } return $v63967fdd7c; } private static function mbe068676c484($v8c5df8072b, $pd98df87c, &$v67db1bd535, $v4edfd58f2d = array('$_POST', '$_GET', '$_REQUEST'), &$v7959970a41 = null) { if (is_array($v67db1bd535)) { $v9994512d98 = array_keys($v67db1bd535); for ($v43dd7d0051 = 0; $v43dd7d0051 < count($v9994512d98); $v43dd7d0051++) { $pe5c5e2fe = $v9994512d98[$v43dd7d0051]; $v956913c90f = $v67db1bd535[$pe5c5e2fe]; $v7959970a41 = false; $v67db1bd535[$pe5c5e2fe] = self::mbe068676c484($v8c5df8072b, $pd98df87c, $v956913c90f, $v4edfd58f2d, $v7959970a41); if ($v7959970a41 && isset($v67db1bd535[$pe5c5e2fe . "_type"]) && (strlen($v67db1bd535[$pe5c5e2fe . "_type"]) == 0 || $v67db1bd535[$pe5c5e2fe . "_type"] == "variable")) $v67db1bd535[$pe5c5e2fe . "_type"] = "string"; } } else if ($v67db1bd535) { $v761f4d757f = self::getVariablesFromText($v67db1bd535); $v7959970a41 = false; $pc37695cb = count($v761f4d757f); $v8726312395 = array( '$_POST[' . $pd98df87c . '][', '$_POST["' . $pd98df87c . '"][', '$_POST[\'' . $pd98df87c . '\'][', '$_GET[' . $pd98df87c . '][', '$_GET["' . $pd98df87c . '"][', '$_GET[\'' . $pd98df87c . '\'][', '$_REQUEST[' . $pd98df87c . '][', '$_REQUEST["' . $pd98df87c . '"][', '$_REQUEST[\'' . $pd98df87c . '\'][', '$_POST[' . $v8c5df8072b . '][', '$_POST["' . $v8c5df8072b . '"][', '$_POST[\'' . $v8c5df8072b . '\'][', '$_GET[' . $v8c5df8072b . '][', '$_GET["' . $v8c5df8072b . '"][', '$_GET[\'' . $v8c5df8072b . '\'][', '$_REQUEST[' . $v8c5df8072b . '][', '$_REQUEST["' . $v8c5df8072b . '"][', '$_REQUEST[\'' . $v8c5df8072b . '\'][', '$_POST[', ); $v4edfd58f2d = is_array($v4edfd58f2d) ? $v4edfd58f2d : ($v4edfd58f2d ? array($v4edfd58f2d) : array()); for ($v43dd7d0051 = 0; $v43dd7d0051 < $pc37695cb; $v43dd7d0051++) { $v847e7d0a83 = $v761f4d757f[$v43dd7d0051]; foreach ($v8726312395 as $v4620a0d531) { $v02a69d4e0f = substr($v4620a0d531, 0, strpos($v4620a0d531, "[")); if (in_array($v02a69d4e0f, $v4edfd58f2d) && stripos($v847e7d0a83, $v4620a0d531) === 0) { $v55fbf8a6bb = substr($v847e7d0a83, strlen($v4620a0d531)); $v55fbf8a6bb = str_replace(array("'", '"'), "", $v55fbf8a6bb); $v67db1bd535 = str_replace("{" . $v847e7d0a83 . "}", "#{$pd98df87c}[" . $v55fbf8a6bb . "#", $v67db1bd535); $v67db1bd535 = str_replace($v847e7d0a83, "#{$pd98df87c}[" . $v55fbf8a6bb . "#", $v67db1bd535); $v7959970a41 = true; break; } } } } return $v67db1bd535; } private static function me9970753b3ec(&$v67db1bd535, &$v7959970a41 = null) { if (is_array($v67db1bd535)) { $v9994512d98 = array_keys($v67db1bd535); for ($v43dd7d0051 = 0; $v43dd7d0051 < count($v9994512d98); $v43dd7d0051++) { $pe5c5e2fe = $v9994512d98[$v43dd7d0051]; $v956913c90f = $v67db1bd535[$pe5c5e2fe]; $v7959970a41 = false; $v67db1bd535[$pe5c5e2fe] = self::me9970753b3ec($v956913c90f, $v7959970a41); if ($v7959970a41 && isset($v67db1bd535[$pe5c5e2fe . "_type"]) && (strlen($v67db1bd535[$pe5c5e2fe . "_type"]) == 0 || $v67db1bd535[$pe5c5e2fe . "_type"] == "variable")) $v67db1bd535[$pe5c5e2fe . "_type"] = "string"; } } else if ($v67db1bd535) { $v761f4d757f = self::getVariablesFromText($v67db1bd535); $v7959970a41 = false; $pc37695cb = count($v761f4d757f); $v8726312395 = array('$_POST', '$_GET', '$_REQUEST'); for ($v43dd7d0051 = 0; $v43dd7d0051 < $pc37695cb; $v43dd7d0051++) { $v847e7d0a83 = $v761f4d757f[$v43dd7d0051]; foreach ($v8726312395 as $v4620a0d531) if (stripos($v847e7d0a83, $v4620a0d531) === 0) { $v55fbf8a6bb = substr($v847e7d0a83, 1); $v55fbf8a6bb = str_replace(array("'", '"'), "", $v55fbf8a6bb); $v67db1bd535 = str_replace("{" . $v847e7d0a83 . "}", "#" . $v55fbf8a6bb . "#", $v67db1bd535); $v67db1bd535 = str_replace($v847e7d0a83, "#" . $v55fbf8a6bb . "#", $v67db1bd535); $v7959970a41 = true; break; } } } return $v67db1bd535; } public static function getVariablesFromText($v39e1347c93) { $v761f4d757f = array(); $pe2ae3be9 = strlen($v39e1347c93); preg_match_all('/\$\w+/iu', $v39e1347c93, $pbae7526c, PREG_OFFSET_CAPTURE); $pbae7526c = $pbae7526c[0]; if ($pbae7526c) for ($v43dd7d0051 = 0; $v43dd7d0051 < count($pbae7526c); $v43dd7d0051++) { $v87ae7286da = $pbae7526c[$v43dd7d0051]; $v847e7d0a83 = $v87ae7286da[0]; $pac65f06f = $v87ae7286da[1]; $v79b7cb19d1 = $v66327139f0 = false; $v5d69d70611 = 0; for ($v9d27441e80 = $pac65f06f + strlen($v847e7d0a83); $v9d27441e80 < $pe2ae3be9; $v9d27441e80++) { $pc288256e = $v39e1347c93[$v9d27441e80]; if ($pc288256e == '"' && !$v66327139f0) $v79b7cb19d1 = !$v79b7cb19d1; else if ($pc288256e == "'" && !$v79b7cb19d1) $v66327139f0 = !$v66327139f0; else if ($pc288256e == "[" && !$v66327139f0 && !$v79b7cb19d1) ++$v5d69d70611; else if ($pc288256e == "]" && !$v66327139f0 && !$v79b7cb19d1) --$v5d69d70611; else if (!$v66327139f0 && !$v79b7cb19d1 && $v5d69d70611 <= 0) break; } $v761f4d757f[] = substr($v39e1347c93, $pac65f06f, $v9d27441e80 - $pac65f06f); } return $v761f4d757f; } private static function mb42faf610de9($v188b4f5fa6) { $pc4223ce1 = $v188b4f5fa6->getPresentationLayer()->getBrokers(); if ($pc4223ce1) foreach ($pc4223ce1 as $v2b2cf4c0eb => $pd922c2f7) if (is_a($pd922c2f7, "IDataAccessBrokerClient")) return true; return false; } private static function f1596b25a68($v1cfba8c105, $pf8ed4912, $v960e916cfd = false) { $pf8ed4912 = str_replace(array("\n", "\r"), "", $pf8ed4912); $pf8ed4912 = str_replace("<script", "&lt;script", str_replace("</script", "&lt;/script", $pf8ed4912)); $pf8ed4912 = $v960e916cfd ? TextSanitizer::addCSlashesExcludingPTL($pf8ed4912, "\\'") : addcslashes($pf8ed4912, "\\'"); return "var $v1cfba8c105 = '$pf8ed4912';"; } private static function f54a4aa0d45($v9195465250, $pf21e39d4 = array()) { $pc2cdfd1b = self::mfa22aefcc775($v9195465250["attributes_settings"]); if ($pf21e39d4) $pc2cdfd1b = array_merge($pf21e39d4, $pc2cdfd1b); $pc2cdfd1b = array_unique($pc2cdfd1b); usort($pc2cdfd1b, array(self::class, "arraySortBasedInItemLength")); return $list; } private static function arraySortBasedInItemLength($pbde5fb24, $v7aeaf992f5) { if (is_array($pbde5fb24)) return 1; else if (is_array($v7aeaf992f5) || strlen($pbde5fb24) > strlen($v7aeaf992f5)) return -1; else return 1; } private static function mfa22aefcc775($pe5a746ff) { $pc2cdfd1b = array(); if (is_array($pe5a746ff)) { foreach ($pe5a746ff as $pe5c5e2fe => $v956913c90f) { $v3bfa43f7b7 = self::mfa22aefcc775($v956913c90f); if ($v3bfa43f7b7) $pc2cdfd1b = array_merge($pc2cdfd1b, $v3bfa43f7b7); } } else if ($pe5a746ff) { $v6c1a9bf043 = PHPUICodeExpressionHandler::getValueType($pe5a746ff, array("empty_string_type" => "string", "non_set_type" => "string")); if (empty($v6c1a9bf043) && !is_numeric($pe5a746ff)) $pc2cdfd1b[] = $pe5a746ff; } return $pc2cdfd1b; } } ?>
