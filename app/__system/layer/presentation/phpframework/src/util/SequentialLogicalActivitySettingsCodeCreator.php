<?php
/*
 * Copyright (c) 2007 PHPMyFrameWork - Joao Pinto
 * AUTHOR: Joao Paulo Lopes Pinto -- http://jplpinto.com
 * 
 * The use of this code must be allowed first by the creator Joao Pinto, since this is a private and proprietary code.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS 
 * OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY 
 * AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR 
 * CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL 
 * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, 
 * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER 
 * IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT 
 * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE. IN NO EVENT SHALL 
 * THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN 
 * AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE 
 * OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 */
include_once get_lib("org.phpframework.util.MyArray"); include_once get_lib("org.phpframework.workflow.WorkFlowTaskHandler"); include_once get_lib("org.phpframework.workflow.WorkFlowTask"); include_once get_lib("org.phpframework.phpscript.PHPUICodeExpressionHandler"); class SequentialLogicalActivitySettingsCodeCreator { public static function getActionsCode($v4bf8d90f04, $pfce4d1b3, $pae434d3a, $pdcf670f6 = "") { if (is_array($pae434d3a)) { $pbd1d2aeb = $pae434d3a; MyArray::arrKeysToLowerCase($pae434d3a, true); $v64e98269be = array("createform", "callbusinesslogic", "callibatisquery", "callhibernatemethod", "getquerydata", "setquerydata", "callfunction", "callobjectmethod", "restconnector", "soapconnector"); $pecad7cca = new WorkFlowTaskHandler($v4bf8d90f04, $pfce4d1b3); $pecad7cca->setCacheRootPath(LAYER_CACHE_PATH); $pecad7cca->setAllowedTaskTags($v64e98269be); $pecad7cca->initWorkFlowTasks(); $v067674f4e4 = self::getActionItemsCode($pae434d3a, $pecad7cca, $pdcf670f6, $pbd1d2aeb); return $v067674f4e4; } } public static function getActionItemsCode($pf72c1d58, $pecad7cca, $pdcf670f6 = "", $pe8d5e455 = null) { $v29d923fba8 = ""; if (is_array($pf72c1d58)) foreach ($pf72c1d58 as $pd69fb7d0 => $v1285a575c1) { $v256e3a39a7 = strtolower($v1285a575c1["action_type"]); $pcf8113cc = $v1285a575c1["action_value"]; $pef1796ff = isset($pe8d5e455[$pd69fb7d0]["action_value"]) ? $pe8d5e455[$pd69fb7d0]["action_value"] : array(); $pbb2163ef = strtolower($v1285a575c1["condition_type"]); $v84e76dfbbc = $v1285a575c1["condition_value"]; $v549a00a7aa = $v1285a575c1["action_description"]; if ($pbb2163ef != "execute_if_code" && $pbb2163ef != "execute_if_not_code") $v84e76dfbbc = self::prepareStringValue($v84e76dfbbc); $v29d923fba8 .= ($v29d923fba8 ? "," : "") . "\n{$pdcf670f6}array("; $v29d923fba8 .= "\n$pdcf670f6\t" . '"result_var_name" => ' . self::prepareStringValue($v1285a575c1["result_var_name"]); $v29d923fba8 .= ",\n$pdcf670f6\t" . '"action_type" => ' . self::prepareStringValue($v256e3a39a7); $v29d923fba8 .= ",\n$pdcf670f6\t" . '"condition_type" => ' . self::prepareStringValue($pbb2163ef); $v29d923fba8 .= ",\n$pdcf670f6\t" . '"condition_value" => ' . $v84e76dfbbc; $v29d923fba8 .= ",\n$pdcf670f6\t" . '"action_description" => ' . self::prepareStringValue($v549a00a7aa); switch ($v256e3a39a7) { case "html": $v7f5911d32d = $pecad7cca->getTasksByTag("createform"); $v7f5911d32d = $v7f5911d32d[0]; $v7f5911d32d["properties"] = array("form_settings_data_type" => $pcf8113cc["form_settings_data_type"], "form_settings_data" => $pcf8113cc["form_settings_data"]); $v7f5911d32d["obj"]->data = $v7f5911d32d; $v506993873a = trim($v7f5911d32d["obj"]->printCode(null, null, "$pdcf670f6\t")); $v506993873a = substr($v506993873a, strlen("HtmlFormHandler::createHtmlForm("), strlen(", null);") * -1); $v29d923fba8 .= $v506993873a ? ",\n$pdcf670f6\t" . '"action_value" => ' . trim($v506993873a) : ''; break; case "callbusinesslogic": case "callibatisquery": case "callhibernatemethod": case "getquerydata": case "setquerydata": case "callfunction": case "callobjectmethod": case "restconnector": case "soapconnector": if (!$pcf8113cc) $pcf8113cc = array(); $v29d923fba8 .= ",\n$pdcf670f6\t" . '"action_value" => array('; $pc839a6ca = ''; $v31e1321fc1 = $v256e3a39a7 == "soapconnector" && array_key_exists("data_type", $pcf8113cc) && $pcf8113cc["data_type"] == "options" && is_array($pcf8113cc["data"]); $v5bfc1761fc = $v256e3a39a7 == "restconnector" && array_key_exists("data_type", $pcf8113cc) && $pcf8113cc["data_type"] == "array" && is_array($pcf8113cc["data"]); if ($v31e1321fc1) { $v0ea4a935b8 = $pcf8113cc; $pcf8113cc = $pcf8113cc["data"]; $pdcf670f6 .= "\t"; } foreach ($pcf8113cc as $pbfa01ed1 => $v956913c90f) switch ($pbfa01ed1) { case "method_obj": if ($v956913c90f) { $v0ee64549f2 = strpos($v956913c90f, "::") || ($v256e3a39a7 == "callobjectmethod" && $pcf8113cc["method_static"] == 1); $pd6f5fc01 = strpos($v956913c90f, "->"); $v956913c90f = substr($v956913c90f, 0, 1) != '$' && (!$v0ee64549f2 || ($pd6f5fc01 && $v0ee64549f2 > $pd6f5fc01)) ? '$' . $v956913c90f : $v956913c90f; $v956913c90f = substr($v956913c90f, 0, 1) == '$' ? $v956913c90f : '"' . $v956913c90f . '"'; $pc839a6ca .= ($pc839a6ca ? ',' : '') . "\n$pdcf670f6\t\t" . '"' . $pbfa01ed1 . '" => ' . $v956913c90f; } break; case "broker_method_obj_type": case "func_name": case "method_name": case "method_static": case "include_once": $pc839a6ca .= ($pc839a6ca ? ',' : '') . "\n$pdcf670f6\t\t" . '"' . $pbfa01ed1 . '" => ' . self::prepareStringValue($v956913c90f); break; case "func_args": case "method_args": $v4052b38cf8 = ''; if (is_array($v956913c90f)) foreach ($v956913c90f as $v2a500a7080) if (is_array($v2a500a7080["childs"]["value"][0]) && array_key_exists("value", $v2a500a7080["childs"]["value"][0])) { $pe30f23ec = $v2a500a7080["childs"]["value"][0]["value"]; $pf1bd4088 = $v2a500a7080["childs"]["type"][0]["value"]; $pe30f23ec = WorkFlowTask::getVariableValueCode($pe30f23ec, $pf1bd4088); $pe30f23ec = strlen($pe30f23ec) ? $pe30f23ec : "null"; $v4052b38cf8 .= ($v4052b38cf8 ? ',' : '') . "\n$pdcf670f6\t\t\t" . $pe30f23ec; } $pc839a6ca .= ($pc839a6ca ? ',' : '') . "\n$pdcf670f6\t\t" . '"' . $pbfa01ed1 . '" => array('; $pc839a6ca .= $v4052b38cf8 . "\n$pdcf670f6\t\t)"; break; case "sma_ids": $v956913c90f = substr($v956913c90f, 0, 1) == '$' ? $v956913c90f : '"' . $v956913c90f . '"'; $pc839a6ca .= ($pc839a6ca ? ',' : '') . "\n$pdcf670f6\t\t" . '"' . $pbfa01ed1 . '" => ' . $v956913c90f; break; default: if ($v31e1321fc1 && ($pbfa01ed1 == "options" || $pbfa01ed1 == "headers") && $pcf8113cc[$pbfa01ed1 . "_type"] == "options" && is_array($v956913c90f)) { $v4052b38cf8 = ''; if ($pbfa01ed1 == "options") { foreach ($v956913c90f as $v2a500a7080) if ($v2a500a7080["name"]) { $pe30f23ec = $v2a500a7080["value"]; $pf1bd4088 = $v2a500a7080["var_type"]; $pe30f23ec = WorkFlowTask::getVariableValueCode($pe30f23ec, $pf1bd4088); $pe30f23ec = strlen($pe30f23ec) ? $pe30f23ec : "null"; $v4052b38cf8 .= ($v4052b38cf8 ? ',' : '') . "\n$pdcf670f6\t\t\t" . '"' . $v2a500a7080["name"] . '" => ' . $pe30f23ec; } } else if ($pbfa01ed1 == "headers") { $v7ef38d464b = array("namespace", "name", "must_understand", "actor", "parameters"); foreach ($v956913c90f as $v2a500a7080) { $pf886d9d2 = ''; foreach ($v7ef38d464b as $pa490f99d) if (array_key_exists($pa490f99d, $v2a500a7080)) { $pe30f23ec = $v2a500a7080[$pa490f99d]; $pf1bd4088 = $v2a500a7080[$pa490f99d . "_type"]; if ($pa490f99d == "must_understand" && $pf1bd4088 == "options" && !is_numeric($pe30f23ec)) $pe30f23ec = WorkFlowTask::getVariableValueCode($pe30f23ec, "string"); else if ($pa490f99d == "parameters" && $pf1bd4088 == "array" && is_array($pe30f23ec)) $pe30f23ec = str_replace("\n", "\n$pdcf670f6\t\t\t\t", WorkFlowTask::getArrayString($pe30f23ec)); else { $pe30f23ec = WorkFlowTask::getVariableValueCode($pe30f23ec, $pf1bd4088); $pe30f23ec = strlen($pe30f23ec) ? $pe30f23ec : "null"; } $pf886d9d2 .= ($pf886d9d2 ? ',' : '') . "\n$pdcf670f6\t\t\t\t" . '"' . $pa490f99d . '" => ' . $pe30f23ec; } $v4052b38cf8 .= ($v4052b38cf8 ? ',' : '') . "\n$pdcf670f6\t\t\t" . 'array('; $v4052b38cf8 .= $pf886d9d2 . "\n$pdcf670f6\t\t\t)"; } } $pc839a6ca .= ($pc839a6ca ? ',' : '') . "\n$pdcf670f6\t\t" . '"' . $pbfa01ed1 . '" => array('; $pc839a6ca .= $v4052b38cf8 . "\n$pdcf670f6\t\t)"; break; } else if ($v5bfc1761fc && $pbfa01ed1 == "data" && $pcf8113cc[$pbfa01ed1 . "_type"] == "array" && is_array($v956913c90f)) { foreach ($v956913c90f as $pd69fb7d0 => $v2a500a7080) { if ($v2a500a7080["key_type"] == "options") $v956913c90f[$pd69fb7d0]["key_type"] = "string"; if ($v2a500a7080["key"] == "settings" && is_array($v2a500a7080["items"])) foreach ($v2a500a7080["items"] as $pba4efda6 => $v691eff9ca2) { if ($v691eff9ca2["key_type"] == "options") $v956913c90f[$pd69fb7d0]["items"][$pba4efda6]["key_type"] = "string"; } } $v956913c90f = str_replace("\n", "\n$pdcf670f6\t\t", WorkFlowTask::getArrayString($v956913c90f)); $pc839a6ca .= ($pc839a6ca ? ',' : '') . "\n$pdcf670f6\t\t" . '"' . $pbfa01ed1 . '" => ' . (strlen($v956913c90f) ? $v956913c90f : "null"); } else if (array_key_exists($pbfa01ed1 . "_type", $pcf8113cc)) { $v1491940c54 = $pcf8113cc[$pbfa01ed1 . "_type"]; if ($v1491940c54 == "array") $v956913c90f = str_replace("\n", "\n$pdcf670f6\t\t", WorkFlowTask::getArrayString($v956913c90f)); else { if (($v31e1321fc1 || $v5bfc1761fc) && $v1491940c54 == "options") $v1491940c54 = "string"; $v956913c90f = WorkFlowTask::getVariableValueCode($v956913c90f, $v1491940c54); } $pc839a6ca .= ($pc839a6ca ? ',' : '') . "\n$pdcf670f6\t\t" . '"' . $pbfa01ed1 . '" => ' . (strlen($v956913c90f) ? $v956913c90f : "null"); } } if ($v31e1321fc1) { $pdcf670f6 = substr($pdcf670f6, 0, -1); $pc839a6ca = "\n$pdcf670f6\t\t" . '"data" => array(' . $pc839a6ca; $pc839a6ca .= "\n$pdcf670f6\t\t" . ')'; $pcf8113cc = $v0ea4a935b8; if (array_key_exists("result_type", $pcf8113cc)) { $ped7cce7c = $pcf8113cc["result_type_type"] == "options" ? "string" : $pcf8113cc["result_type_type"]; $v956913c90f = WorkFlowTask::getVariableValueCode($pcf8113cc["result_type"], $ped7cce7c); $pc839a6ca .= ',' . "\n$pdcf670f6\t\t" . '"result_type" => ' . (strlen($v956913c90f) ? $v956913c90f : "null"); } } $v29d923fba8 .= $pc839a6ca . "\n$pdcf670f6\t)"; break; case "insert": case "update": case "delete": case "select": case "count": case "procedure": case "getinsertedid": $v29d923fba8 .= ",\n$pdcf670f6\t" . '"action_value" => array('; $v29d923fba8 .= "\n$pdcf670f6\t\t" . '"dal_broker" => ' . self::prepareStringValue($pcf8113cc["dal_broker"]); $v29d923fba8 .= ",\n$pdcf670f6\t\t" . '"db_driver" => ' . self::prepareStringValue($pcf8113cc["db_driver"]); $v29d923fba8 .= ",\n$pdcf670f6\t\t" . '"db_type" => ' . self::prepareStringValue($pcf8113cc["db_type"]); if ($v256e3a39a7 != "getinsertedid") { if ($pcf8113cc["table"]) { $v29d923fba8 .= ",\n$pdcf670f6\t\t" . '"table" => ' . self::prepareStringValue($pcf8113cc["table"]); $pfdbbc383 = $pcf8113cc["attributes"]; if ($pfdbbc383) { $v29d923fba8 .= ",\n$pdcf670f6\t\t" . '"attributes" => array('; $pc10f8e84 = ''; foreach ($pfdbbc383 as $v97915b9670) { $pc10f8e84 .= ($pc10f8e84 ? "," : "") . "\n$pdcf670f6\t\t\tarray(" . "\n$pdcf670f6\t\t\t\t" . '"column" => ' . self::prepareStringValue($v97915b9670["column"]) . ",\n$pdcf670f6\t\t\t\t" . '"value" => ' . self::prepareStringValue($v97915b9670["value"]) . ",\n$pdcf670f6\t\t\t)"; } $v29d923fba8 .= $pc10f8e84 . "\n$pdcf670f6\t\t" . ')'; } $paf1bc6f6 = $pcf8113cc["conditions"]; if ($paf1bc6f6) { $v29d923fba8 .= ",\n$pdcf670f6\t\t" . '"conditions" => array('; $v83e299db97 = ''; foreach ($paf1bc6f6 as $v32dd06ab9b) { $v83e299db97 .= ($v83e299db97 ? "," : "") . "\n$pdcf670f6\t\t\tarray(" . "\n$pdcf670f6\t\t\t\t" . '"column" => ' . self::prepareStringValue($v32dd06ab9b["column"]) . ",\n$pdcf670f6\t\t\t\t" . '"value" => ' . self::prepareStringValue($v32dd06ab9b["value"]) . ",\n$pdcf670f6\t\t\t)"; } $v29d923fba8 .= $v83e299db97 . "\n$pdcf670f6\t\t" . ')'; } } else $v29d923fba8 .= ",\n$pdcf670f6\t\t" . '"sql" => ' . self::prepareStringValue($pcf8113cc["sql"]); } $pe7720ba3 = ""; if ($pcf8113cc["options_type"] == "array") $pe7720ba3 = str_replace("\n", "\n$pdcf670f6\t\t", WorkFlowTask::getArrayString($pcf8113cc["options"])); else $pe7720ba3 = WorkFlowTask::getVariableValueCode($pcf8113cc["options"], $pcf8113cc["options_type"]); $v29d923fba8 .= ",\n$pdcf670f6\t\t" . '"options" => ' . (strlen($pe7720ba3) ? $pe7720ba3 : "null"); $v29d923fba8 .= "\n$pdcf670f6\t" . ')'; break; case "show_ok_msg": case "show_ok_msg_and_stop": case "show_ok_msg_and_die": case "show_ok_msg_and_redirect": case "show_error_msg": case "show_error_msg_and_stop": case "show_error_msg_and_die": case "show_error_msg_and_redirect": case "alert_msg": case "alert_msg_and_stop": case "alert_msg_and_redirect": $v29d923fba8 .= ",\n$pdcf670f6\t" . '"action_value" => array('; $v29d923fba8 .= "\n$pdcf670f6\t\t" . '"message" => ' . self::prepareStringValue($pcf8113cc["message"]); $v29d923fba8 .= ",\n$pdcf670f6\t\t" . '"redirect_url" => ' . self::prepareStringValue($pcf8113cc["redirect_url"]); $v29d923fba8 .= "\n$pdcf670f6\t" . ')'; break; case "redirect": $v61ed7a5bf4 = null; $v959a588da6 = null; if (is_array($pcf8113cc)) { $v61ed7a5bf4 = $pcf8113cc["redirect_type"]; $v959a588da6 = $pcf8113cc["redirect_url"]; } else $v959a588da6 = $pcf8113cc; $v29d923fba8 .= ",\n$pdcf670f6\t" . '"action_value" => array('; $v29d923fba8 .= "\n$pdcf670f6\t\t" . '"redirect_type" => ' . self::prepareStringValue($v61ed7a5bf4); $v29d923fba8 .= ",\n$pdcf670f6\t\t" . '"redirect_url" => ' . self::prepareStringValue($v959a588da6); $v29d923fba8 .= "\n$pdcf670f6\t" . ')'; break; case "return_previous_record": case "return_next_record": case "return_specific_record": $v29d923fba8 .= ",\n$pdcf670f6\t" . '"action_value" => array('; $v29d923fba8 .= "\n$pdcf670f6\t\t" . '"records_variable_name" => ' . (substr($pcf8113cc["records_variable_name"], 0, 1) == '$' ? $pcf8113cc["records_variable_name"] : self::prepareStringValue($pcf8113cc["records_variable_name"])); $v29d923fba8 .= ",\n$pdcf670f6\t\t" . '"index_variable_name" => ' . self::prepareStringValue($pcf8113cc["index_variable_name"]); $v29d923fba8 .= "\n$pdcf670f6\t" . ')'; break; case "check_logged_user_permissions": $v29d923fba8 .= ",\n$pdcf670f6\t" . '"action_value" => array('; $v29d923fba8 .= "\n$pdcf670f6\t\t" . '"all_permissions_checked" => ' . ($pcf8113cc["all_permissions_checked"] ? 1 : 0); $pa11cdd5f = trim($pcf8113cc["entity_path_var_name"]) ? trim($pcf8113cc["entity_path_var_name"]) : '$entity_path'; $pa11cdd5f = (substr($pa11cdd5f, 0, 1) != '$' ? '$' : '') . $pa11cdd5f; $v29d923fba8 .= ",\n$pdcf670f6\t\t" . '"entity_path" => ' . $pa11cdd5f; $v85aed045f7 = substr($pcf8113cc["logged_user_id"], 0, 1) == '$' ? $pcf8113cc["logged_user_id"] : self::prepareStringValue($pcf8113cc["logged_user_id"]); $v29d923fba8 .= ",\n$pdcf670f6\t\t" . '"logged_user_id" => ' . $v85aed045f7; $pa929f3e8 = $pcf8113cc["users_perms"]; if ($pa929f3e8) { $v29d923fba8 .= ",\n$pdcf670f6\t\t" . '"users_perms" => array('; $v6cac947c52 = ''; foreach ($pa929f3e8 as $v74b37bf978) { $v6cac947c52 .= ($v6cac947c52 ? "," : "") . "\n$pdcf670f6\t\t\tarray(" . "\n$pdcf670f6\t\t\t\t" . '"user_type_id" => ' . self::prepareStringValue($v74b37bf978["user_type_id"]) . ",\n$pdcf670f6\t\t\t\t" . '"activity_id" => ' . self::prepareStringValue($v74b37bf978["activity_id"]) . ",\n$pdcf670f6\t\t\t)"; } $v29d923fba8 .= $v6cac947c52 . "\n$pdcf670f6\t\t" . ')'; } $v29d923fba8 .= "\n$pdcf670f6\t" . ')'; break; case "code": $pcf8113cc = trim($pcf8113cc); $pff5830e4 = substr($pcf8113cc, 0, 1); $pf548ad60 = substr($pcf8113cc, -1); $pe9daf1fc = PHPUICodeExpressionHandler::getValueType($pcf8113cc, array("non_set_type" => "string", "empty_string_type" => "string")); if (!$pe9daf1fc && ($pff5830e4 != '"' || $pf548ad60 != '"') && ($pff5830e4 != "'" || $pf548ad60 != "'")) $pe9daf1fc = "string"; $v29d923fba8 .= $pcf8113cc ? ",\n$pdcf670f6\t" . '"action_value" => ' . PHPUICodeExpressionHandler::getArgumentCode($pcf8113cc, $pe9daf1fc) : ''; break; case "string": $v3fb9f41470 = PHPUICodeExpressionHandler::getValueType($pcf8113cc, array("non_set_type" => "string", "empty_string_type" => "string")); if ($v3fb9f41470 == "string") $pcf8113cc = self::prepareStringValue($pcf8113cc); $v29d923fba8 .= ",\n$pdcf670f6\t" . '"action_value" => ' . $pcf8113cc; break; case "array": $v7f5911d32d = $pecad7cca->getTasksByTag("createform"); $v7f5911d32d = $v7f5911d32d[0]; $v7f5911d32d["properties"] = array("form_input_data_type" => "array", "form_input_data" => $pcf8113cc); $v7f5911d32d["obj"]->data = $v7f5911d32d; $v506993873a = trim($v7f5911d32d["obj"]->printCode(null, null)); $v506993873a = substr($v506993873a, strlen("HtmlFormHandler::createHtmlForm(null, "), strlen(");") * -1); $v29d923fba8 .= $v506993873a ? ",\n$pdcf670f6\t" . '"action_value" => ' . str_replace("\n", "\n$pdcf670f6\t", $v506993873a) : ''; break; case "variable": case "sanitize_variable": $v847e7d0a83 = trim($pcf8113cc); if ($v847e7d0a83) { $v847e7d0a83 = self::prepareVariableNameValue($v847e7d0a83); $v29d923fba8 .= ",\n$pdcf670f6\t" . '"action_value" => ' . $v847e7d0a83; } break; case "list_report": $v847e7d0a83 = trim($pcf8113cc["variable"]); if ($v847e7d0a83) { $v847e7d0a83 = self::prepareVariableNameValue($v847e7d0a83); $v3fb9f41470 = trim($pcf8113cc["type"]); $pe86cbe92 = trim($pcf8113cc["doc_name"]); $v28c1cd997a = trim($pcf8113cc["continue"]); $v29d923fba8 .= ",\n$pdcf670f6\t" . '"action_value" => array('; $v29d923fba8 .= "\n$pdcf670f6\t\t" . '"type" => ' . self::prepareStringValue($v3fb9f41470); $v29d923fba8 .= ",\n$pdcf670f6\t\t" . '"doc_name" => ' . self::prepareStringValue($pe86cbe92); $v29d923fba8 .= ",\n$pdcf670f6\t\t" . '"variable" => ' . $v847e7d0a83; $v29d923fba8 .= ",\n$pdcf670f6\t\t" . '"continue" => ' . self::prepareStringValue($v28c1cd997a); $v29d923fba8 .= "\n$pdcf670f6\t" . ')'; } break; case "call_block": $peebaaf55 = trim($pcf8113cc["block"]); $v93756c94b3 = trim($pcf8113cc["project"]); $pbd458bff = trim($pcf8113cc["block_local_variables_var_name"]); $v29d923fba8 .= ",\n$pdcf670f6\t" . '"action_value" => array('; $v29d923fba8 .= "\n$pdcf670f6\t\t" . '"block" => ' . self::prepareStringValue($peebaaf55); $v29d923fba8 .= ",\n$pdcf670f6\t\t" . '"project" => ' . self::prepareStringValue($v93756c94b3); $v29d923fba8 .= "\n$pdcf670f6\t" . ')'; break; case "call_view": $pa36e00ea = trim($pcf8113cc["view"]); $v93756c94b3 = trim($pcf8113cc["project"]); $v29d923fba8 .= ",\n$pdcf670f6\t" . '"action_value" => array('; $v29d923fba8 .= "\n$pdcf670f6\t\t" . '"view" => ' . self::prepareStringValue($pa36e00ea); $v29d923fba8 .= ",\n$pdcf670f6\t\t" . '"project" => ' . self::prepareStringValue($v93756c94b3); $v29d923fba8 .= "\n$pdcf670f6\t" . ')'; break; case "include_file": $pa32be502 = trim($pcf8113cc["path"]); $v4616a9abfd = trim($pcf8113cc["once"]); $v3fb9f41470 = PHPUICodeExpressionHandler::getValueType($pa32be502, array("non_set_type" => "string", "empty_string_type" => "string")); if ($v3fb9f41470 == "string") $pa32be502 = self::prepareStringValue($pa32be502); $v29d923fba8 .= ",\n$pdcf670f6\t" . '"action_value" => array('; $v29d923fba8 .= "\n$pdcf670f6\t\t" . '"path" => ' . $pa32be502; $v29d923fba8 .= ",\n$pdcf670f6\t\t" . '"once" => ' . ($v4616a9abfd ? 1 : 0); $v29d923fba8 .= "\n$pdcf670f6\t" . ')'; break; case "draw_graph": $v29d923fba8 .= ",\n$pdcf670f6\t" . '"action_value" => array('; if (is_array($pcf8113cc) && array_key_exists("code", $pcf8113cc)) { $v067674f4e4 = $pcf8113cc["code"]; $pff5830e4 = substr($v067674f4e4, 0, 1); $pf548ad60 = substr($v067674f4e4, -1); $pe9daf1fc = PHPUICodeExpressionHandler::getValueType($v067674f4e4, array("non_set_type" => "string", "empty_string_type" => "string")); if (!$pe9daf1fc && ($pff5830e4 != '"' || $pf548ad60 != '"') && ($pff5830e4 != "'" || $pf548ad60 != "'")) $pe9daf1fc = "string"; $v067674f4e4 = PHPUICodeExpressionHandler::getArgumentCode($v067674f4e4, $pe9daf1fc); $v29d923fba8 .= "\n$pdcf670f6\t\t" . '"code" => ' . $v067674f4e4; } else { $v01cdaad323 = self::prepareStringValue($pcf8113cc["include_graph_library"]); $v607a49cf36 = self::prepareStringValue($pcf8113cc["width"]); $v3a0455afd7 = self::prepareStringValue($pcf8113cc["height"]); $pdfb8dd62 = trim($pcf8113cc["labels_variable"]); $pdfb8dd62 = $pdfb8dd62 ? self::prepareVariableNameValue($pdfb8dd62) : self::prepareStringValue($pdfb8dd62); $pafed3df8 = ''; $pb2a355f5 = !empty($pef1796ff["data_sets"]) ? $pef1796ff["data_sets"] : (!empty($pcf8113cc["data_sets"]) ? $pcf8113cc["data_sets"] : array()); if ($pb2a355f5) { foreach ($pb2a355f5 as $pa5d1f26e) { $v7d0e1423bc = ''; if ($pa5d1f26e) foreach ($pa5d1f26e as $pbfa01ed1 => $v67db1bd535) { if ($pbfa01ed1 == "values_variable") { $v67db1bd535 = trim($v67db1bd535); $v67db1bd535 = $v67db1bd535 ? self::prepareVariableNameValue($v67db1bd535) : self::prepareStringValue($v67db1bd535); } else $v67db1bd535 = self::prepareStringValue($v67db1bd535); if ($pbfa01ed1) $v7d0e1423bc .= ($v7d0e1423bc ? "," : "") . "\n$pdcf670f6\t\t\t\t" . '"' . $pbfa01ed1 . '" => ' . $v67db1bd535; } $pafed3df8 .= ($pafed3df8 ? "," : "") . "\n$pdcf670f6\t\t\tarray("; $pafed3df8 .= $v7d0e1423bc; $pafed3df8 .= "\n$pdcf670f6\t\t\t)"; } } $v29d923fba8 .= "\n$pdcf670f6\t\t" . '"include_graph_library" => ' . $v01cdaad323; $v29d923fba8 .= ",\n$pdcf670f6\t\t" . '"width" => ' . $v607a49cf36; $v29d923fba8 .= ",\n$pdcf670f6\t\t" . '"height" => ' . $v3a0455afd7; $v29d923fba8 .= ",\n$pdcf670f6\t\t" . '"labels_variable" => ' . $pdfb8dd62; $v29d923fba8 .= ",\n$pdcf670f6\t\t" . '"data_sets" => array('; $v29d923fba8 .= $pafed3df8; $v29d923fba8 .= "\n$pdcf670f6\t\t" . ')'; } $v29d923fba8 .= "\n$pdcf670f6\t" . ')'; break; case "loop": $v29d923fba8 .= ",\n$pdcf670f6\t" . '"action_value" => array('; $v29d923fba8 .= "\n$pdcf670f6\t\t" . '"records_variable_name" => ' . (substr($pcf8113cc["records_variable_name"], 0, 1) == '$' ? $pcf8113cc["records_variable_name"] : self::prepareStringValue($pcf8113cc["records_variable_name"])); $v29d923fba8 .= ",\n$pdcf670f6\t\t" . '"records_start_index" => ' . self::prepareStringValue($pcf8113cc["records_start_index"]); $v29d923fba8 .= ",\n$pdcf670f6\t\t" . '"records_end_index" => ' . self::prepareStringValue($pcf8113cc["records_end_index"]); $v29d923fba8 .= ",\n$pdcf670f6\t\t" . '"array_item_key_variable_name" => ' . self::prepareStringValue($pcf8113cc["array_item_key_variable_name"]); $v29d923fba8 .= ",\n$pdcf670f6\t\t" . '"array_item_value_variable_name" => ' . self::prepareStringValue($pcf8113cc["array_item_value_variable_name"]); $v29d923fba8 .= ",\n$pdcf670f6\t\t" . '"actions" => ' . self::getActionItemsCode($pcf8113cc["actions"], $pecad7cca, $pdcf670f6 . "\t\t\t", $pef1796ff["actions"]); $v29d923fba8 .= "\n$pdcf670f6\t" . ')'; break; case "group": $v29d923fba8 .= ",\n$pdcf670f6\t" . '"action_value" => array('; $v29d923fba8 .= "\n$pdcf670f6\t\t" . '"group_name" => ' . self::prepareStringValue($pcf8113cc["group_name"]); $v29d923fba8 .= ",\n$pdcf670f6\t\t" . '"actions" => ' . self::getActionItemsCode($pcf8113cc["actions"], $pecad7cca, $pdcf670f6 . "\t\t\t", $pef1796ff["actions"]); $v29d923fba8 .= "\n$pdcf670f6\t" . ')'; break; } $v29d923fba8 .= "\n$pdcf670f6" . ')'; } return "array(" . $v29d923fba8 . ($v29d923fba8 ? "\n" . substr($pdcf670f6, 0, -1) : "") . ")"; } public static function prepareVariableNameValue($v847e7d0a83) { $pff5830e4 = substr($v847e7d0a83, 0, 1); $pf548ad60 = substr($v847e7d0a83, -1); if (($pff5830e4 == "#" && $pf548ad60 == "#") || ($pff5830e4 == '"' && $pf548ad60 == '"') || ($pff5830e4 == "'" && $pf548ad60 == "'")) $v847e7d0a83 = self::prepareStringValue($v847e7d0a83); else if ($pff5830e4 != '$') { $v3fb9f41470 = PHPUICodeExpressionHandler::getValueType($v847e7d0a83, array("non_set_type" => "string", "empty_string_type" => "string")); if ($v3fb9f41470 == "string") $v847e7d0a83 = '$'. $v847e7d0a83; } return $v847e7d0a83; } public static function prepareStringValue($v67db1bd535) { $v3fb9f41470 = PHPUICodeExpressionHandler::getValueType($v67db1bd535, array("non_set_type" => "string", "empty_string_type" => "string")); return PHPUICodeExpressionHandler::getArgumentCode($v67db1bd535, $v3fb9f41470); } } ?>
