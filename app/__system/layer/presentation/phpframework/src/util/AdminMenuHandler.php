<?php
/*
 * Copyright (c) 2024 Bloxtor - http://bloxtor.com
 * 
 * Please note that this code belongs to the Bloxtor framework and must comply with the Bloxtor license.
 * If you do not accept these provisions, or if the Bloxtor License is not present or cannot be found, you are not entitled to use this code and must stop and delete it immediately.
 */
include_once get_lib("org.phpframework.bean.BeanFactory"); include_once get_lib("org.phpframework.phpscript.PHPCodePrintingHandler"); include_once get_lib("org.phpframework.xmlfile.XMLFileParser"); include_once get_lib("org.phpframework.sqlmap.ibatis.IBatisClient"); include_once get_lib("org.phpframework.sqlmap.hibernate.HibernateClient"); include_once get_lib("org.phpframework.layer.dataaccess.IbatisDataAccessLayer"); include_once get_lib("org.phpframework.layer.dataaccess.HibernateDataAccessLayer"); include_once get_lib("org.phpframework.layer.businesslogic.BusinessLogicLayer"); include_once get_lib("org.phpframework.layer.presentation.PresentationLayer"); include_once get_lib("org.phpframework.util.FilePermissionHandler"); include_once $EVC->getUtilPath("WorkFlowBeansFileHandler"); include_once $EVC->getUtilPath("LayoutTypeProjectUIHandler"); class AdminMenuHandler { public static function addReferencedFolderToFilesList(&$v6ee393d9fb, $pa0462a8e, $v8ffce2a791, $pa32be502, $v8773b3a63a) { $pc2380ff3 = "referenced"; self::mdd09f31dbdd3($pc2380ff3, $v6ee393d9fb); $v6ee393d9fb[$pc2380ff3] = array( "properties" => array( "path" => $pa32be502, "bean_file_name" => $pa0462a8e, "bean_name" => $v8ffce2a791, "item_id" => self::getItemId("$pa0462a8e/$v8ffce2a791/$pa32be502/$pc2380ff3"), "item_type" => "referenced_folder", "parse_get_sub_files_url_handler" => LayoutTypeProjectUIHandler::getJavascriptHandlerToParseGetSubFilesUrlWithOnlyReferencedFiles(), ) ); return $v6ee393d9fb; } public static function getLayersFiles($v0cd49d5a59) { $pfc29e23b = self::getLayers($v0cd49d5a59); $v2635bad135 = array(); foreach ($pfc29e23b as $v3fb9f41470 => $v4a24304713) foreach ($v4a24304713 as $v5e813b295b => $v7dffdb5a5b) $v2635bad135[$v3fb9f41470][$v5e813b295b] = self::getBeanObjs($v7dffdb5a5b, $v5e813b295b, $v0cd49d5a59, false, 0); $v2635bad135["vendors"]["vendor"] = self::getVendorObjs(false, 1); return $v2635bad135; } public static function getLayers($v0cd49d5a59) { $pfaf08f23 = new PHPVariablesFileHandler($v0cd49d5a59); $pfaf08f23->startUserGlobalVariables(); $pfc29e23b = array(); $pa32be502 = BEAN_PATH; if (is_dir($pa32be502) && ($v89d33f4133 = opendir($pa32be502)) ) { while( ($v7dffdb5a5b = readdir($v89d33f4133)) !== false) { if (substr($v7dffdb5a5b, strlen($v7dffdb5a5b) - 4) == ".xml" && $v7dffdb5a5b != "app.xml" && !strstr($v7dffdb5a5b, "_bll_common_services.xml", true)) { $pddfc29cd = new BeanFactory(); $pddfc29cd->init(array("file" => $pa32be502 . $v7dffdb5a5b)); $v1e9dc98c41 = $pddfc29cd->getBeans(); $pddfc29cd->initObjects(); foreach ($v1e9dc98c41 as $v8ffce2a791 => $pdec569fb) { $v972f1a5c2b = $pddfc29cd->getObject($v8ffce2a791); if (is_a($v972f1a5c2b, "ILayer")) { if (is_a($v972f1a5c2b, "DBLayer")) $pfc29e23b["db_layers"][ $pdec569fb->name ] = $v7dffdb5a5b; else if (is_a($v972f1a5c2b, "DataAccessLayer")) $pfc29e23b["data_access_layers"][ $pdec569fb->name ] = $v7dffdb5a5b; else if (is_a($v972f1a5c2b, "BusinessLogicLayer")) $pfc29e23b["business_logic_layers"][ $pdec569fb->name ] = $v7dffdb5a5b; else if (is_a($v972f1a5c2b, "PresentationLayer")) $pfc29e23b["presentation_layers"][ $pdec569fb->name ] = $v7dffdb5a5b; } } } } closedir($v89d33f4133); } $pfaf08f23->endUserGlobalVariables(); return $pfc29e23b; } public static function getDaoObjs($pa32be502 = false, $pb1924b99 = -1) { $v52b4591032 = array(); $v6385f213f2 = DAO_PATH; $v52b4591032 = self::f4ec63ba166($v6385f213f2, $pa32be502, "dao", $pb1924b99, true); $v52b4591032["properties"] = array( "path" => "", "item_id" => self::getItemId($v6385f213f2), "item_type" => "dao", ); return $v52b4591032; } public static function getTestUnitObjs($pa32be502 = false, $pb1924b99 = -1) { $v52b4591032 = array(); $v312a7f4997 = TEST_UNIT_PATH; $v52b4591032 = self::f4ec63ba166($v312a7f4997, $pa32be502, "test_unit", $pb1924b99, true); $v52b4591032["properties"] = array( "path" => "", "item_id" => self::getItemId($v312a7f4997), "item_type" => "test_unit", ); return $v52b4591032; } public static function getLibObjs($pa32be502 = false, $pb1924b99 = -1) { $v52b4591032 = array(); $v0d15f8fa65 = LIB_PATH; $v52b4591032 = self::f4ec63ba166($v0d15f8fa65, $pa32be502, "lib", $pb1924b99, true); $v52b4591032["properties"] = array( "path" => "", "item_id" => self::getItemId($v0d15f8fa65), "item_type" => "lib", ); return $v52b4591032; } public static function getVendorObjs($pa32be502 = false, $pb1924b99 = -1) { $v52b4591032 = array(); if (substr($pa32be502, 0, 3) == "dao" && (strlen($pa32be502) == 3 || substr($pa32be502, 3, 1) == "/")) $v52b4591032 = self::getDaoObjs($pa32be502, $pb1924b99); else if (substr($pa32be502, 0, 8) == "testunit" && (strlen($pa32be502) == 8 || substr($pa32be502, 8, 1) == "/")) $v52b4591032 = self::getTestUnitObjs($pa32be502, $pb1924b99); else { $v61e704c482 = VENDOR_PATH; $v52b4591032 = self::f4ec63ba166($v61e704c482, $pa32be502, "vendor", $pb1924b99, true); $v52b4591032 = self::f2b0e44f2a7($v52b4591032); $v52b4591032["properties"] = array( "path" => "", "item_id" => self::getItemId($v61e704c482), "item_type" => "vendor", ); } return $v52b4591032; } public static function getOtherObjs($pa32be502 = false, $pb1924b99 = -1) { $v52b4591032 = array(); $pe982d629 = OTHER_PATH; $v52b4591032 = self::f4ec63ba166($pe982d629, $pa32be502, "other", $pb1924b99, true); $v52b4591032 = self::md8b26d94e3e2($v52b4591032); $v52b4591032["properties"] = array( "path" => "", "item_id" => self::getItemId($pe982d629), "item_type" => "other", ); return $v52b4591032; } private static function f2b0e44f2a7($v10eb48c548) { if ($v10eb48c548) foreach ($v10eb48c548 as $v250a1176c9 => $v4e10095a1d) { $v9073377656 = isset($v4e10095a1d["properties"]) ? $v4e10095a1d["properties"] : null; if (isset($v9073377656["item_type"]) && $v9073377656["item_type"] == "folder") { $pa32be502 = isset($v9073377656["path"]) ? $v9073377656["path"] : null; $pa32be502 = substr($pa32be502, -1) == "/" ? substr($pa32be502, 0, -1) : $pa32be502; if ($pa32be502 == "dao") { $v10eb48c548[$v250a1176c9]["properties"] = array( "path" => "", "item_type" => "dao", "item_id" => self::getItemId(DAO_PATH) ); } else if ($pa32be502 == "testunit") { $v10eb48c548[$v250a1176c9]["properties"] = array( "path" => "", "item_id" => self::getItemId(TEST_UNIT_PATH), "item_type" => "test_unit", ); } else if ($pa32be502 == "codeworkfloweditor") $v10eb48c548[$v250a1176c9]["properties"]["item_type"] = "code_workflow_editor"; else if ($pa32be502 == "codeworkfloweditor/task") $v10eb48c548[$v250a1176c9]["properties"]["item_type"] = "code_workflow_editor_task"; else if ($pa32be502 == "layoutuieditor") $v10eb48c548[$v250a1176c9]["properties"]["item_type"] = "layout_ui_editor"; else if ($pa32be502 == "layoutuieditor/widget") $v10eb48c548[$v250a1176c9]["properties"]["item_type"] = "layout_ui_editor_widget"; else if ($pa32be502 == "phpmyadmin") unset($v10eb48c548["phpmyadmin"]); } } return $v10eb48c548; } private static function md8b26d94e3e2($v10eb48c548) { if ($v10eb48c548) foreach ($v10eb48c548 as $v250a1176c9 => $v4e10095a1d) { $v9073377656 = isset($v4e10095a1d["properties"]) ? $v4e10095a1d["properties"] : null; if (isset($v9073377656["item_type"]) && $v9073377656["item_type"] == "folder") { $pa32be502 = isset($v9073377656["path"]) ? $v9073377656["path"] : null; $pa32be502 = substr($pa32be502, -1) == "/" ? substr($pa32be502, 0, -1) : $pa32be502; if ($pa32be502 == "workflow" || $pa32be502 == "authdb") unset($v10eb48c548[$v250a1176c9]); } } return $v10eb48c548; } public static function getPresentationFolderFiles($pa0462a8e, $v8ffce2a791, $v0cd49d5a59 = false, $pa32be502 = false, $pb1924b99 = -1, $v0c98cda30e = "", $v5d3813882f = null) { $v10eb48c548 = array(); $pfaf08f23 = new PHPVariablesFileHandler($v0cd49d5a59); $pfaf08f23->startUserGlobalVariables(); $pce995d72 = BEAN_PATH . $pa0462a8e; $pddfc29cd = new BeanFactory(); $pddfc29cd->init(array("file" => $pce995d72)); $pdec569fb = $pddfc29cd->getBean($v8ffce2a791); $pddfc29cd->initObject($pdec569fb->name); $v972f1a5c2b = $pddfc29cd->getObject($pdec569fb->name); if (is_a($v972f1a5c2b, "PresentationLayer")) { $pf31e2f2c = self::md289a8ec818f($pddfc29cd, $pdec569fb, $v972f1a5c2b); $v5d3813882f = is_array($v5d3813882f) ? array_merge($pf31e2f2c, $v5d3813882f) : $pf31e2f2c; $v10eb48c548 = self::mac334d245e9f($v972f1a5c2b, $pa32be502, $pb1924b99, $v0c98cda30e == "webroot" ? "" : $v0c98cda30e, $v5d3813882f); $v6b46aeb158 = $v972f1a5c2b->getCacheLayer(); $pa47fac06 = $v972f1a5c2b->getCommonProjectName(); $v60e201d1bb = substr($pa32be502, 0, strlen("$pa47fac06/")) == "$pa47fac06/"; if ($v0c98cda30e == "cache" && $v6b46aeb158 && !empty($v6b46aeb158->settings["presentation_caches_path"]) && substr($pa32be502, strlen($v6b46aeb158->settings["presentation_caches_path"]) * -1) == $v6b46aeb158->settings["presentation_caches_path"]) { $pc8e54a92 = substr($pa32be502, 0, strlen($v6b46aeb158->settings["presentation_caches_path"]) * -1); if (!$v60e201d1bb) { $v10eb48c548 = self::f287d8e82d1($v10eb48c548, $v5d3813882f, $pc8e54a92, $v6b46aeb158); $v10eb48c548 = self::f9fb068deaa($v10eb48c548, $v5d3813882f, $pc8e54a92); $v10eb48c548 = self::f06c5d997e2($v10eb48c548, $v5d3813882f, $pc8e54a92); } } else if ($v0c98cda30e == "config" && substr($pa32be502, strlen("/src/config/") * -1) == "/src/config/") $v10eb48c548 = self::mfb516aba688b($v10eb48c548, $v5d3813882f); else if ($v0c98cda30e == "util") $v10eb48c548 = self::mbd4f307c78b7($v10eb48c548, $v5d3813882f, $v972f1a5c2b); else if ($v0c98cda30e == "template" && substr($pa32be502, strlen("/src/template/") * -1) == "/src/template/") $v10eb48c548 = self::mfab168763202($v10eb48c548, $v5d3813882f); else if ($v0c98cda30e == "template" && substr(dirname($pa32be502) . "/", strlen("/src/template/") * -1) == "/src/template/") $v10eb48c548 = self::mfc97c88a4fff($v10eb48c548, $v5d3813882f); else if (($v0c98cda30e == "" || $v0c98cda30e == "webroot") && substr($pa32be502, strlen("/webroot/") * -1) == "/webroot/") { $v10eb48c548 = self::f0892ef30b9($v10eb48c548, $v5d3813882f); $v10eb48c548 = self::meab531d4ee30($v10eb48c548, $v5d3813882f, $pa32be502, $pa47fac06); } else if (($v0c98cda30e == "" || $v0c98cda30e == "webroot") && $v60e201d1bb && substr($pa32be502, 0, strlen("$pa47fac06/webroot/")) == "$pa47fac06/webroot/") $v10eb48c548 = self::meab531d4ee30($v10eb48c548, $v5d3813882f, $pa32be502, $pa47fac06); else if ($v0c98cda30e == "module") $v10eb48c548 = self::f16cf48bdbc($v10eb48c548, $v5d3813882f, $v972f1a5c2b); $v10eb48c548["properties"] = array( "path" => $pa32be502, "bean_file_name" => $pa0462a8e, "bean_name" => $v8ffce2a791, "item_id" => self::getItemId("$pa0462a8e/$v8ffce2a791/$pa32be502"), "item_type" => self::f8215b66774($v972f1a5c2b), ); } $pfaf08f23->endUserGlobalVariables(); return $v10eb48c548; } public static function getBeanObjs($pa0462a8e, $v8ffce2a791, $v0cd49d5a59 = false, $pa32be502 = false, $pb1924b99 = -1, $v5d3813882f = null) { $v10eb48c548 = array(); $v8773b3a63a = ""; if (!empty($pa32be502) && substr($pa32be502, strlen($pa32be502) - 1) != "/") $pa32be502 .= "/"; $pfaf08f23 = new PHPVariablesFileHandler($v0cd49d5a59); $pfaf08f23->startUserGlobalVariables(); $pce995d72 = BEAN_PATH . $pa0462a8e; $pddfc29cd = new BeanFactory(); $pddfc29cd->init(array("file" => $pce995d72)); $pdec569fb = $pddfc29cd->getBean($v8ffce2a791); if ($pdec569fb) { $pddfc29cd->initObject($pdec569fb->name); $v972f1a5c2b = $pddfc29cd->getObject($pdec569fb->name); if (is_a($v972f1a5c2b, "DBLayer")) $v10eb48c548 = self::getBeanDBObjs($pdec569fb, $pddfc29cd->getBeans(), $pddfc29cd->getObjects()); else if (is_a($v972f1a5c2b, "DataAccessLayer")) $v10eb48c548 = self::getBeanLayerObjs($v972f1a5c2b, $pa32be502, $pb1924b99); else if (is_a($v972f1a5c2b, "BusinessLogicLayer")) $v10eb48c548 = self::getBeanLayerObjs($v972f1a5c2b, $pa32be502, $pb1924b99, $v5d3813882f); else if (is_a($v972f1a5c2b, "PresentationLayer")) { $pf31e2f2c = self::md289a8ec818f($pddfc29cd, $pdec569fb, $v972f1a5c2b); $v5d3813882f = is_array($v5d3813882f) ? array_merge($pf31e2f2c, $v5d3813882f) : $pf31e2f2c; $v10eb48c548 = self::getBeanLayerObjs($v972f1a5c2b, $pa32be502, $pb1924b99, $v5d3813882f); } if ($v10eb48c548) { $v10eb48c548["properties"]["bean_file_name"] = $pa0462a8e; $v10eb48c548["properties"]["bean_name"] = $v8ffce2a791; $v10eb48c548["properties"]["item_id"] = self::getItemId("$pa0462a8e/$v8ffce2a791"); $v10eb48c548["properties"]["item_type"] = self::f8215b66774($v972f1a5c2b); $v10eb48c548["properties"]["item_label"] = WorkFlowBeansFileHandler::getLayerNameFromBeanObject($pdec569fb->name, $v972f1a5c2b); } } $pfaf08f23->endUserGlobalVariables(); return $v10eb48c548; } private static function md289a8ec818f($pddfc29cd, $pdec569fb, $v972f1a5c2b) { $v5d3813882f = array(); $v7aeaf992f5 = self::f853035203e($pddfc29cd, "PresentationRouter", "presentationLayer", $pdec569fb->name); if ($v7aeaf992f5) $v5d3813882f["PresentationPRouter"] = $pddfc29cd->getObject($v7aeaf992f5->name); $v7aeaf992f5 = self::f853035203e($pddfc29cd, "EVC", "presentationLayer", $pdec569fb->name); if ($v7aeaf992f5) { $v7aeaf992f5 = self::mbcc2db8d77e6($pddfc29cd, "CMSLayer", 1, $v7aeaf992f5->name); if ($v7aeaf992f5) { $v7aeaf992f5 = self::mbcc2db8d77e6($pddfc29cd, "MultipleCMSCacheLayer", 1, $v7aeaf992f5->name); if ($v7aeaf992f5) $v5d3813882f["PresentationMultipleCMSCacheLayer"] = $pddfc29cd->getObject($v7aeaf992f5->name); } } $v7aeaf992f5 = self::mbcc2db8d77e6($pddfc29cd, "DispatcherCacheHandler", 2, $pdec569fb->constructor_args[1]->reference); if (!$v7aeaf992f5) { $v71e2250812 = WorkFlowBeansFileHandler::getLayerNameFromBeanObject($pdec569fb->name, $v972f1a5c2b); $v7aeaf992f5 = $pddfc29cd->getBean($v71e2250812 . "PDispatcherCacheHandler"); if (!$v7aeaf992f5) $v7aeaf992f5 = self::mbb8e51ab636b($pddfc29cd, "DispatcherCacheHandler"); } if ($v7aeaf992f5) $v5d3813882f["PresentationPDispatcherCacheHandler"] = $pddfc29cd->getObject($v7aeaf992f5->name); return $v5d3813882f; } private static function f853035203e($pddfc29cd, $v4b5886970f, $v549de46e31, $v16d4131732) { $v1e9dc98c41 = $pddfc29cd->getBeans(); foreach($v1e9dc98c41 as $pf00752d4 => $v7aeaf992f5) { $pddfc29cd->initObject($pf00752d4); $v972f1a5c2b = $pddfc29cd->getObject($pf00752d4); if (is_a($v972f1a5c2b, $v4b5886970f) && $v7aeaf992f5->properties) foreach ($v7aeaf992f5->properties as $v1654ac0a73) if ($v1654ac0a73->name == $v549de46e31 && $v1654ac0a73->reference == $v16d4131732) return $v7aeaf992f5; } return null; } private static function mbcc2db8d77e6($pddfc29cd, $v4b5886970f, $pec118f61, $pd628de0f) { $pec118f61 = $pec118f61 ? $pec118f61 : 0; $v1e9dc98c41 = $pddfc29cd->getBeans(); foreach($v1e9dc98c41 as $pf00752d4 => $v7aeaf992f5) { $pddfc29cd->initObject($pf00752d4); $v972f1a5c2b = $pddfc29cd->getObject($pf00752d4); if (is_a($v972f1a5c2b, $v4b5886970f) && $v7aeaf992f5->constructor_args) foreach ($v7aeaf992f5->constructor_args as $v4122422558) if ($v4122422558->index == $pec118f61 && $v4122422558->reference == $pd628de0f) return $v7aeaf992f5; } return null; } private static function mbb8e51ab636b($pddfc29cd, $v4b5886970f) { $v1e9dc98c41 = $pddfc29cd->getBeans(); foreach($v1e9dc98c41 as $pf00752d4 => $v7aeaf992f5) { $pddfc29cd->initObject($pf00752d4); $v972f1a5c2b = $pddfc29cd->getObject($pf00752d4); if (is_a($v972f1a5c2b, $v4b5886970f)) return $v7aeaf992f5; } return null; } private static function f8215b66774($v972f1a5c2b) { if (is_a($v972f1a5c2b, "DBLayer")) return "db"; else if (is_a($v972f1a5c2b, "DataAccessLayer")) return $v972f1a5c2b->getType(); else if (is_a($v972f1a5c2b, "BusinessLogicLayer")) return "businesslogic"; else if (is_a($v972f1a5c2b, "PresentationLayer")) return "presentation"; return null; } public static function getBeanLayerObjs($v847a7225e0, $pa32be502, $pb1924b99 = -1, $v5d3813882f = null) { $v10eb48c548 = array(); $v810cb863ed = $v847a7225e0->getModulesFilePathSetting(); $v70210c15fa = !empty($v810cb863ed) ? $v847a7225e0->getModulesAlias($v810cb863ed) : array(); if (is_a($v847a7225e0, "DataAccessLayer")) { self::mc5d988b5ae45($v847a7225e0, $pa32be502, $v70210c15fa); $v52b4591032 = self::f4de9cb3908($v847a7225e0, $pa32be502, $pb1924b99, $v70210c15fa); } else if (is_a($v847a7225e0, "BusinessLogicLayer")) { self::mc5d988b5ae45($v847a7225e0, $pa32be502, $v70210c15fa); $v52b4591032 = self::mfc66c7aeb327($v847a7225e0, $pa32be502, $pb1924b99, $v70210c15fa, $v5d3813882f); if ($v52b4591032) $v52b4591032["properties"]["automatic_ui"] = self::f84f278cac5($v847a7225e0, array("IDataAccessBrokerClient", "IDBBrokerClient")); } else if(is_a($v847a7225e0, "PresentationLayer")) { $v52b4591032 = self::f7198e53278($v847a7225e0, $pa32be502, $pb1924b99, $v70210c15fa, $v5d3813882f); if ($v52b4591032) $v52b4591032["properties"]["automatic_ui"] = self::f84f278cac5($v847a7225e0, array("IBusinessLogicBrokerClient", "IDataAccessBrokerClient", "IDBBrokerClient")); } self::mb408bd1b6427($v847a7225e0, $v70210c15fa); $v10eb48c548["aliases"] = $v70210c15fa; $v10eb48c548 = $v52b4591032 ? array_replace($v10eb48c548, $v52b4591032) : array(); return $v10eb48c548; } private static function f84f278cac5($v847a7225e0, $pc6614717) { $pc6614717 = is_array($pc6614717) ? $pc6614717 : ($pc6614717 ? array($pc6614717) : null); $pc4223ce1 = $v847a7225e0->getBrokers(); if ($pc6614717 && $pc4223ce1) foreach ($pc6614717 as $v4bc91dc53e) foreach ($pc4223ce1 as $v2b2cf4c0eb => $pd922c2f7) if (is_a($pd922c2f7, $v4bc91dc53e)) return true; return false; } private static function mc5d988b5ae45($v847a7225e0, $pa32be502, &$v70210c15fa) { $v0a2c893c9b = $v847a7225e0->getServicesFileNameSetting(); $v9d50494084 = $v847a7225e0->getLayerPathSetting(); if (!empty($v0a2c893c9b) && !empty($pa32be502)) { do { $pa32be502 = dirname($pa32be502) . "/"; $pa32be502 = $pa32be502 == "./" ? "" : $pa32be502; $v70210c15fa = array_merge($v70210c15fa, $v847a7225e0->getServicesAlias($v9d50494084 . $pa32be502 . $v0a2c893c9b)); } while(!empty($pa32be502)); } } private static function f4ec63ba166($v9d50494084, $pa32be502, $pfd248cca, $pb1924b99 = -1, $v591664fdaf = true) { $peae4fad0 = $v9d50494084 . $pa32be502; $v802bcfdfc9 = $pb1924b99 > 0 ? $pb1924b99 - 1 : $pb1924b99; $v6ee393d9fb = array(); if ( ($pb1924b99 > 0 || $pb1924b99 == -1) && is_dir($peae4fad0) && ($v89d33f4133 = opendir($peae4fad0)) ) { while( ($v7dffdb5a5b = readdir($v89d33f4133)) !== false) { if (substr($v7dffdb5a5b, 0, 1) != ".") { $pf3dc0762 = $peae4fad0 . $v7dffdb5a5b; $pc2380ff3 = $v7dffdb5a5b; $pef349725 = array( "item_type" => (is_dir($pf3dc0762) ? "folder" : "file"), "item_id" => self::getItemId($pf3dc0762), "item_menu" => self::made17331b2e4($pf3dc0762) ); if (is_dir($pf3dc0762)) { $pef349725["path"] = $pa32be502 . $v7dffdb5a5b . "/"; self::mdd09f31dbdd3($pc2380ff3, $v6ee393d9fb); if ($pb1924b99 > 0 || $pb1924b99 == -1) { $v50bd615fb0 = self::f4ec63ba166($v9d50494084, $pef349725["path"], $pfd248cca, $v802bcfdfc9, $v591664fdaf); $v6ee393d9fb[$pc2380ff3] = array_merge(array("properties" => $pef349725), $v50bd615fb0); } else $v6ee393d9fb[$pc2380ff3] = array("properties" => $pef349725); if ($pfd248cca == "dao") { $v7f9dd5e26b = $peae4fad0 == $v9d50494084 && $v7dffdb5a5b == "common"; $pca93ea3f = $peae4fad0 == $v9d50494084 && $v7dffdb5a5b == "module"; $v9980cafc4d = $peae4fad0 == $v9d50494084 && $v7dffdb5a5b == "program"; $pa67be420 = $peae4fad0 == $v9d50494084 && $v7dffdb5a5b == "resource"; $v6ee393d9fb[$pc2380ff3]["properties"]["item_type"] = $v7f9dd5e26b ? "cms_common" : ($pca93ea3f ? "cms_module" : ($v9980cafc4d ? "cms_program" : ($pa67be420 ? "cms_resource" : "folder"))); } } else { $v5442ff2fbd = pathinfo($pf3dc0762); $v4dc65579bd = isset($v5442ff2fbd["extension"]) ? strtolower($v5442ff2fbd["extension"]) : ""; if ($v4dc65579bd == "zip" && $v591664fdaf) $v3fb9f41470 = "zip_file"; else if ($pfd248cca == "dao" && $v4dc65579bd == "php") { try { include_once $pf3dc0762; $v3fb9f41470 = is_subclass_of($v5442ff2fbd["filename"], "ObjType") ? "objtype" : (is_subclass_of($v5442ff2fbd["filename"], "HibernateModel") ? "hibernatemodel" : "file"); } catch (Error $paec2c009) { } catch(ParseError $paec2c009) { } catch(ErrorException $paec2c009) { } catch(Exception $paec2c009) { } } else $v3fb9f41470 = "file"; $pc2380ff3 = $v4dc65579bd == "php" ? $v5442ff2fbd["filename"] : $v7dffdb5a5b; self::f2c857e84a5($pc2380ff3, $v6ee393d9fb, $peae4fad0 . $pc2380ff3); $pef349725["path"] = $pa32be502 . $v7dffdb5a5b; $pef349725["item_type"] = $v3fb9f41470; $v6ee393d9fb[$pc2380ff3] = array("properties" => $pef349725); if ($pfd248cca == "test_unit" && $v4dc65579bd == "php") { try { $v6490ea3a15 = file_get_contents($pf3dc0762); if (preg_match('/public\s+function\s+execute\s*\(\s*\)/', $v6490ea3a15) && preg_match('/\s+extends\s+TestUnit\s+/', $v6490ea3a15)) { $pedde3449 = PHPCodePrintingHandler::getPHPClassesFromFile($pf3dc0762); unset($pedde3449[0]); if (!empty($pedde3449) && count($pedde3449) == 1) { foreach ($pedde3449 as $pe5762321 => $v4c704b9c94) { $v1335217393 = isset($v4c704b9c94["name"]) ? $v4c704b9c94["name"] : null; $v29b8167bc3 = false; if (!empty($v4c704b9c94["methods"])) { $pc37695cb = count($v4c704b9c94["methods"]); for ($v43dd7d0051 = 0; $v43dd7d0051 < $pc37695cb; $v43dd7d0051++) { $v6cd9d4006f = $v4c704b9c94["methods"][$v43dd7d0051]; if (isset($v6cd9d4006f["name"]) && $v6cd9d4006f["name"] == "execute") { $v29b8167bc3 = true; break; } } } if ($v29b8167bc3 && $pe5762321 == $v5442ff2fbd["filename"]) { $pef349725 = array("path" => $pa32be502 . $v7dffdb5a5b); $pef349725["item_type"] = "test_unit_obj"; $pef349725["item_id"] = self::getItemId("$pa32be502$v7dffdb5a5b/$pe5762321"); $pe04f136f = $pe5762321; self::mdd09f31dbdd3($pe04f136f, $v6ee393d9fb[$pc2380ff3]); $v6ee393d9fb[$pc2380ff3][$pe04f136f] = array("properties" => $pef349725); $v6ee393d9fb[$pc2380ff3]["properties"]["item_class"] = "disabled"; } } } } } catch (Error $paec2c009) { } catch(ParseError $paec2c009) { } catch(ErrorException $paec2c009) { } catch(Exception $paec2c009) { } } } } } closedir($v89d33f4133); } ksort($v6ee393d9fb); return $v6ee393d9fb; } public static function getBeanDBObjs($pdec569fb, $v1e9dc98c41, $v10eb48c548) { $v52b4591032 = array(); $pc37695cb = count($pdec569fb->functions); for ($v43dd7d0051 = 0; $v43dd7d0051 < $pc37695cb; $v43dd7d0051++) { if ($pdec569fb->functions[$v43dd7d0051]->name == "addBroker") { $v6da63250f5 = $pdec569fb->functions[$v43dd7d0051]->parameters[1]->reference; if (!empty($v1e9dc98c41[$v6da63250f5])) { $v2ba4ef2b6a = $v1e9dc98c41[$v6da63250f5]; $v3b8f6bcbd7 = array( "type" => DB::getDriverTypeByClassName($v2ba4ef2b6a->class_name) ); $pd28479e5 = count($v2ba4ef2b6a->functions); for ($v9d27441e80 = 0; $v9d27441e80 < $pd28479e5; $v9d27441e80++) { if (strtolower($v2ba4ef2b6a->functions[$v9d27441e80]->name) == "setoptions") { foreach ($v2ba4ef2b6a->functions[$v9d27441e80]->parameters as $pc5faab2f) { $pcd64e413 = $v10eb48c548[$pc5faab2f->reference]; if (is_array($pcd64e413)) $v3b8f6bcbd7 = array_merge($v3b8f6bcbd7, $pcd64e413); break; } } } if (isset($v3b8f6bcbd7["password"])) $v3b8f6bcbd7["password"] = "***"; if (isset($v3b8f6bcbd7["persistent"])) $v3b8f6bcbd7["persistent"] = $v3b8f6bcbd7["persistent"] ? "YES" : "NO"; if (isset($v3b8f6bcbd7["new_link"])) $v3b8f6bcbd7["new_link"] = $v3b8f6bcbd7["new_link"] ? "YES" : "NO"; $v52b4591032[ $v2ba4ef2b6a->name ]["properties"] = array( "item_type" => "db_driver", "item_id" => self::getItemId($v2ba4ef2b6a->path . "/" . $v2ba4ef2b6a->name), "item_menu" => $v3b8f6bcbd7, "bean_name" => $v2ba4ef2b6a->name, "bean_file_name" => self::f16320caa85($v2ba4ef2b6a->name), ); } } } ksort($v52b4591032); return $v52b4591032; } private static function f16320caa85($v8ffce2a791, $pa32be502 = "") { $pa32be502 .= $pa32be502 && subtr($pa32be502, -1) != "/" ? "/" : ""; $pa0d36d6f = scandir(BEAN_PATH . $pa32be502); if ($pa0d36d6f) foreach ($pa0d36d6f as $pa175352b) if ($pa175352b != "." && $pa175352b != "..") { $pb12450da = $pa32be502 . $pa175352b; $pf3dc0762 = BEAN_PATH . $pb12450da; if (is_dir($pf3dc0762)) { $pa0462a8e = self::f16320caa85($v8ffce2a791, $pb12450da); } else { $v6490ea3a15 = file_get_contents($pf3dc0762); preg_match('/<bean([^>]*)name="' . $v8ffce2a791 . '"/', $v6490ea3a15, $pbae7526c, PREG_OFFSET_CAPTURE); if ($pbae7526c) $pa0462a8e = $pb12450da; } if ($pa0462a8e) return str_replace("//", "/", $pa0462a8e); } } private static function f4de9cb3908($pc32eb201, $pa32be502, $pb1924b99 = -1, &$v70210c15fa = false) { $v9d50494084 = $pc32eb201->getLayerPathSetting(); $v52b4591032 = array("properties" => array("path" => $pa32be502)); $v70210c15fa = empty($v70210c15fa) ? array() : $v70210c15fa; $peae4fad0 = $v9d50494084 . $pa32be502; $v802bcfdfc9 = $pb1924b99 > 0 ? $pb1924b99 - 1 : $pb1924b99; $v708afe0698 = array("modules.xml", "services.xml", "cache.xml", "cache_handler.xml"); $v0a2c893c9b = $pc32eb201->getServicesFileNameSetting(); if (!empty($v0a2c893c9b)) $v70210c15fa = array_merge($v70210c15fa, $pc32eb201->getServicesAlias($peae4fad0 . $v0a2c893c9b)); if ( ($pb1924b99 > 0 || $pb1924b99 == -1) && is_dir($peae4fad0) && ($v89d33f4133 = opendir($peae4fad0)) ) { while( ($v7dffdb5a5b = readdir($v89d33f4133)) !== false) { if (substr($v7dffdb5a5b, 0, 1) != ".") { $pf3dc0762 = $peae4fad0 . $v7dffdb5a5b; $v5442ff2fbd = pathinfo($v7dffdb5a5b); $v4dc65579bd = isset($v5442ff2fbd["extension"]) ? strtolower($v5442ff2fbd["extension"]) : ""; $pc2380ff3 = $v7dffdb5a5b; $v12cbe3df36 = self::made17331b2e4($pf3dc0762); if (is_dir($pf3dc0762)) { $v7f9dd5e26b = $peae4fad0 == $v9d50494084 && $v7dffdb5a5b == "common"; $pca93ea3f = $peae4fad0 == $v9d50494084 && $v7dffdb5a5b == "module"; $v9980cafc4d = $peae4fad0 == $v9d50494084 && $v7dffdb5a5b == "program"; $pa67be420 = $peae4fad0 == $v9d50494084 && $v7dffdb5a5b == "resource"; if ($pb1924b99 > 0 || $pb1924b99 == -1) { $v1b52505418 = self::f4de9cb3908($pc32eb201, $pa32be502 . $v7dffdb5a5b . "/", $v802bcfdfc9, $v70210c15fa); } else { $v1b52505418 = array("properties" => array("path" => $pa32be502 . $v7dffdb5a5b . "/")); } $v1b52505418["properties"]["item_type"] = $v7f9dd5e26b ? "cms_common" : ($pca93ea3f ? "cms_module" : ($v9980cafc4d ? "cms_program" : ($pa67be420 ? "cms_resource" : "folder"))); $v1b52505418["properties"]["item_id"] = self::getItemId($pf3dc0762); $v1b52505418["properties"]["item_menu"] = $v12cbe3df36; if (isset($v70210c15fa[ $pf3dc0762 ])) { $v1b52505418["properties"]["alias"] = $v70210c15fa[ $pf3dc0762 ]; } self::mdd09f31dbdd3($pc2380ff3, $v52b4591032); $v52b4591032[$pc2380ff3] = $v1b52505418; } else if ($v4dc65579bd == "xml") { $pc2380ff3 = $v4dc65579bd == "xml" ? $v5442ff2fbd["filename"] : $pc2380ff3; self::f2c857e84a5($pc2380ff3, $v52b4591032, $pf3dc0762); try { $v7ea0fbe4cd = self::mc86fb6226162($pf3dc0762); $v982d6fe381 = null; $v1b52505418 = array(); if (isset($v7ea0fbe4cd["sql_mapping"])) { $v50d32a6fc4 = isset($v7ea0fbe4cd["sql_mapping"][0]["childs"]) ? $v7ea0fbe4cd["sql_mapping"][0]["childs"] : null; if ($pc32eb201->getType() == "ibatis") { $v50d32a6fc4 = HibernateClient::getDataAccessNodesConfigured($v50d32a6fc4); $v1b52505418 = self::f4fb4873a45($v50d32a6fc4, $v70210c15fa, $pf3dc0762, $v9d50494084, "queries"); } else if (!empty($v50d32a6fc4["class"])) { $pc37695cb = count($v50d32a6fc4["class"]); for($v43dd7d0051 = 0; $v43dd7d0051 < $pc37695cb; $v43dd7d0051++) { $v972f1a5c2b = $v50d32a6fc4["class"][$v43dd7d0051]; HibernateClient::prepareObjNode($v972f1a5c2b); $v9ff79a4a24 = XMLFileParser::getAttribute($v972f1a5c2b, "name"); $v1612a5ddce = !empty($v972f1a5c2b["childs"]["queries"]) ? self::f4fb4873a45($v972f1a5c2b["childs"]["queries"], $v70210c15fa, $pf3dc0762, $v9d50494084, "queries", $v9ff79a4a24) : array(); $v69f1629ff2 = !empty($v972f1a5c2b["childs"]["relationships"]) ? self::f4fb4873a45($v972f1a5c2b["childs"]["relationships"], $v70210c15fa, $pf3dc0762, $v9d50494084, "relationships", $v9ff79a4a24) : array(); $v9f7d2149eb = self::f2226e24ad7($pf3dc0762, $v9d50494084, $v9ff79a4a24); $v9967b457fa = isset($v972f1a5c2b["@"]) ? $v972f1a5c2b["@"] : null; if (isset($v70210c15fa[$pf3dc0762][$v9ff79a4a24])) { $v9967b457fa["alias"] = $v70210c15fa[$pf3dc0762][$v9ff79a4a24]; } $v9967b457fa["path"] = $pa32be502 . $v7dffdb5a5b; $v9967b457fa["item_type"] = "obj"; $v9967b457fa["item_menu"] = $v12cbe3df36; $v1b52505418[$v9ff79a4a24] = array_merge(array("properties" => $v9967b457fa), $v9f7d2149eb, $v69f1629ff2, $v1612a5ddce); } } if (!empty($v50d32a6fc4["import"])) { $pc37695cb = count($v50d32a6fc4["import"]); for ($v43dd7d0051 = 0; $v43dd7d0051 < $pc37695cb; $v43dd7d0051++) { $v108a0911a2 = XMLFileParser::getValue($v50d32a6fc4["import"][$v43dd7d0051]); if ($v108a0911a2) { $v7aeaf992f5 = basename($v108a0911a2); $v108a0911a2 = strlen($v7aeaf992f5) >= 20 ? $v7aeaf992f5 : "..." . substr($v108a0911a2, strlen($v108a0911a2) - 20); } else { $v108a0911a2 = "import_" . ($v43dd7d0051 + 1); } $v1b52505418[$v108a0911a2] = array( "properties" => array( "path" => $pa32be502 . $v7dffdb5a5b, "item_type" => "call_import", "item_id" => self::getItemId("$pf3dc0762/$v108a0911a2"), "item_menu" => $v12cbe3df36 ), ); } } $v982d6fe381 = "file"; } else if (isset($v7ea0fbe4cd["import"])) { $v50d32a6fc4 = isset($v7ea0fbe4cd["import"][0]["childs"]) ? $v7ea0fbe4cd["import"][0]["childs"] : null; $v1b52505418 = $v50d32a6fc4 ? self::f4fb4873a45($v50d32a6fc4, $v70210c15fa, $pf3dc0762, $v9d50494084, "import", false) : array(); $v982d6fe381 = "import"; } $pef349725 = array( "path" => $pa32be502 . $v7dffdb5a5b, "item_type" => in_array($v7dffdb5a5b, $v708afe0698) ? "reserved_file" : ($v982d6fe381 ? $v982d6fe381 : "file"), "item_id" => self::getItemId($pf3dc0762), "item_class" => $v982d6fe381 == "file" ? "disabled" : "", "item_menu" => $v12cbe3df36 ); $v52b4591032[$pc2380ff3] = array_merge(array("properties" => $pef349725), $v1b52505418); } catch(Exception $paec2c009) { $v52b4591032[$pc2380ff3] = array("properties" => array( "path" => $pa32be502 . $v7dffdb5a5b, "item_type" => in_array($v7dffdb5a5b, $v708afe0698) ? "reserved_file" : "file", "item_id" => self::getItemId($pf3dc0762), "item_menu" => $v12cbe3df36 )); } } else if (!empty($pa32be502)) { self::f2c857e84a5($pc2380ff3, $v52b4591032, $pf3dc0762); $v52b4591032[$pc2380ff3] = array("properties" => array( "path" => $pa32be502 . $v7dffdb5a5b, "item_type" => in_array($v7dffdb5a5b, $v708afe0698) ? "reserved_file" : ($v4dc65579bd == "zip" ? "zip_file": "undefined_file"), "item_id" => self::getItemId($pf3dc0762), "item_menu" => $v12cbe3df36 )); } } } closedir($v89d33f4133); } ksort($v52b4591032); return $v52b4591032; } private static function f4fb4873a45($v50d32a6fc4, $v70210c15fa, $pf3dc0762, $v9d50494084, $v05e3431fe2, $pa9694aaa = false) { $v498e86681e = array(); $v12cbe3df36 = self::made17331b2e4($pf3dc0762); foreach ($v50d32a6fc4 as $v9c4bf49720 => $v29680e12e6) { $v8773b3a63a = null; if ($v9c4bf49720 == "insert" || $v9c4bf49720 == "update" || $v9c4bf49720 == "select" || $v9c4bf49720 == "delete" || $v9c4bf49720 == "procedure") { $v8773b3a63a = "query"; } else if ($v9c4bf49720 == "one_to_one" || $v9c4bf49720 == "one_to_many" || $v9c4bf49720 == "many_to_one" || $v9c4bf49720 == "many_to_many") { $v8773b3a63a = "relationship"; } else if ($v9c4bf49720 == "parameter_map" || $v9c4bf49720 == "result_map") { $v8773b3a63a = "map"; } if ($v8773b3a63a) { foreach ($v29680e12e6 as $pff56eb51 => $v6694236c2c) { if (is_numeric($pff56eb51)) $pff56eb51 = XMLFileParser::getAttribute($v6694236c2c, "id"); if ($pff56eb51) { $v9967b457fa = array( "path" => substr($pf3dc0762, strlen($v9d50494084)), "item_type" => $v8773b3a63a, "item_id" => self::getItemId("$pf3dc0762/$pff56eb51"), "item_menu" => $v12cbe3df36, "query_type" => $v9c4bf49720, "relationship_type" => $v05e3431fe2, ); if ($pa9694aaa) $v9967b457fa["hbn_obj_id"] = $pa9694aaa; if (isset($v70210c15fa[$pf3dc0762][$pff56eb51])) $v9967b457fa["alias"] = $v70210c15fa[$pf3dc0762][$pff56eb51]; $v498e86681e[$pff56eb51] = array("properties" => $v9967b457fa); } } } } ksort($v498e86681e); return $v498e86681e; } private static function f2226e24ad7($pf3dc0762, $v9d50494084, $pa9694aaa) { $pe084c6b2 = array("insert", "insertAll", "update", "updateAll", "insertOrUpdate", "insertOrUpdateAll", "updatePrimaryKeys", "delete", "deleteAll", "findById", "find", "count", "findRelationships", "findRelationship", "countRelationships", "countRelationship"); $pc37695cb = count($pe084c6b2); for ($v43dd7d0051 = 0; $v43dd7d0051 < $pc37695cb; $v43dd7d0051++) { $pff56eb51 = $pe084c6b2[$v43dd7d0051]; $pef349725 = array( "path" => substr($pf3dc0762, strlen($v9d50494084)), "item_type" => "hbn_native", "item_id" => self::getItemId("$pf3dc0762/$pff56eb51"), "query_type" => "", "relationship_type" => "native", "hbn_obj_id" => $pa9694aaa, ); $v50d32a6fc4[$pff56eb51] = array("properties" => $pef349725); } return $v50d32a6fc4; } private static function mfc66c7aeb327($v5bef829add, $pa32be502, $pb1924b99 = -1, &$v70210c15fa = false, $v5d3813882f = null) { $v9d50494084 = $v5bef829add->getLayerPathSetting(); $v69943f3766 = $v5d3813882f && !empty($v5d3813882f["all"]); $pc6325a70 = array("properties" => array("path" => $pa32be502)); $v70210c15fa = empty($v70210c15fa) ? array() : $v70210c15fa; $peae4fad0 = $v9d50494084 . $pa32be502; $v802bcfdfc9 = $pb1924b99 > 0 ? $pb1924b99 - 1 : $pb1924b99; $v78404531fa = array("modules.xml", "services.xml", "cache.xml", "cache_handler.xml", "CommonService.php"); $v0a2c893c9b = $v5bef829add->getServicesFileNameSetting(); if (!empty($v0a2c893c9b)) $v70210c15fa = array_merge($v70210c15fa, $v5bef829add->getServicesAlias($peae4fad0 . $v0a2c893c9b)); if ( ($pb1924b99 > 0 || $pb1924b99 == -1) && is_dir($peae4fad0) && ($v89d33f4133 = opendir($peae4fad0)) ) { while( ($v7dffdb5a5b = readdir($v89d33f4133)) !== false) { if (substr($v7dffdb5a5b, 0, 1) != ".") { $pf3dc0762 = $peae4fad0 . $v7dffdb5a5b; $pc2380ff3 = $v7dffdb5a5b; $v12cbe3df36 = self::made17331b2e4($pf3dc0762); if (is_dir($pf3dc0762)) { $v7f9dd5e26b = $peae4fad0 == $v9d50494084 && $v7dffdb5a5b == "common"; $pca93ea3f = $peae4fad0 == $v9d50494084 && $v7dffdb5a5b == "module"; $v9980cafc4d = $peae4fad0 == $v9d50494084 && $v7dffdb5a5b == "program"; $pa67be420 = $peae4fad0 == $v9d50494084 && $v7dffdb5a5b == "resource"; if ($pb1924b99 > 0 || $pb1924b99 == -1) $pfa37f3ba = self::mfc66c7aeb327($v5bef829add, $pa32be502 . $v7dffdb5a5b . "/", $v802bcfdfc9, $v70210c15fa); else $pfa37f3ba = array("properties" => array("path" => $pa32be502 . $v7dffdb5a5b . "/")); $pfa37f3ba["properties"]["item_type"] = $v7f9dd5e26b ? "cms_common" : ($pca93ea3f ? "cms_module" : ($v9980cafc4d ? "cms_program" : ($pa67be420 ? "cms_resource" : "folder"))); $pfa37f3ba["properties"]["item_id"] = self::getItemId($pf3dc0762); $pfa37f3ba["properties"]["item_menu"] = $v12cbe3df36; if (isset($v70210c15fa[ $pf3dc0762 ])) $pfa37f3ba["properties"]["alias"] = $v70210c15fa[ $pf3dc0762 ]; self::mdd09f31dbdd3($pc2380ff3, $pc6325a70); $pc6325a70[$pc2380ff3] = $pfa37f3ba; } else if (!empty($pa32be502)) { $v5442ff2fbd = pathinfo($v7dffdb5a5b); $v4dc65579bd = isset($v5442ff2fbd["extension"]) ? strtolower($v5442ff2fbd["extension"]) : ""; $pc2380ff3 = $v4dc65579bd == "php" ? $v5442ff2fbd["filename"] : $pc2380ff3; self::f2c857e84a5($pc2380ff3, $pc6325a70, $pf3dc0762); if (in_array($v7dffdb5a5b, $v78404531fa)) { $pef349725 = array( "path" => $pa32be502 . $v7dffdb5a5b, "item_type" => "file", "item_id" => self::getItemId($pf3dc0762), "item_menu" => $v12cbe3df36 ); $pc6325a70[$pc2380ff3] = array("properties" => $pef349725); } else { $pedde3449 = $v12efdd30d7 = false; $v01b7bef391 = $v4dc65579bd == "php"; $pef349725 = array( "path" => $pa32be502 . $v7dffdb5a5b, "item_type" => $v01b7bef391 ? "file" : ($v4dc65579bd == "zip" ? "zip_file" : "undefined_file"), "item_id" => self::getItemId($pf3dc0762), "item_menu" => $v12cbe3df36 ); $pc6325a70[$pc2380ff3] = array("properties" => $pef349725); if ($v01b7bef391) { $pedde3449 = PHPCodePrintingHandler::getPHPClassesFromFile($pf3dc0762); $v2b56495c24 = 0; $v5eb6bf1cc3 = false; $v12efdd30d7 = isset($pedde3449[0]) ? $pedde3449[0] : null; unset($pedde3449[0]); if (!empty($pedde3449)) { $pa1c3a9c4 = array(); foreach ($pedde3449 as $pe5762321 => $v4c704b9c94) { $v1335217393 = isset($v4c704b9c94["name"]) ? $v4c704b9c94["name"] : null; $pcc2fe66c = isset($v4c704b9c94["doc_comments"]) && is_array($v4c704b9c94["doc_comments"]) ? implode("\n", $v4c704b9c94["doc_comments"]) : ""; $pa436ab2e = strpos($pcc2fe66c, "@hidden") !== false; if (!$pa436ab2e || $v69943f3766) { $v2b56495c24++; if ($v1335217393 != pathinfo($v7dffdb5a5b, PATHINFO_FILENAME)) $v5eb6bf1cc3 = true; $pef349725 = array("path" => $pa32be502 . $v7dffdb5a5b); $v1ce69f3b9f = array(); if (!empty($pa1c3a9c4[$v1335217393])) { if ($pa1c3a9c4[$v1335217393]) { $pfd460c59 = isset($pa1c3a9c4[$v1335217393]["properties"]["service"]) ? $pa1c3a9c4[$v1335217393]["properties"]["service"] : null; $pa1c3a9c4[$pfd460c59] = $pa1c3a9c4[$v1335217393]; unset($pa1c3a9c4[$v1335217393]); } else if (!empty($pa1c3a9c4[$v1335217393 . " "])) { $pfd460c59 = isset($pa1c3a9c4[$v1335217393 . " "]["properties"]["service"]) ? $pa1c3a9c4[$v1335217393 . " "]["properties"]["service"] : null; $pa1c3a9c4[$pfd460c59] = $pa1c3a9c4[$v1335217393 . " "]; unset($pa1c3a9c4[$v1335217393 . " "]); } $pe04f136f = $pe5762321; } else $pe04f136f = $v1335217393; self::f2c857e84a5($pe04f136f, $pa1c3a9c4, $peae4fad0 . $v1335217393); self::mdd09f31dbdd3($pe04f136f, $pc6325a70); if (!empty($v4c704b9c94["methods"])) { $pc37695cb = count($v4c704b9c94["methods"]); for ($v43dd7d0051 = 0; $v43dd7d0051 < $pc37695cb; $v43dd7d0051++) { $v6cd9d4006f = $v4c704b9c94["methods"][$v43dd7d0051]; $v214bf3b7ee = isset($v6cd9d4006f["type"]) ? $v6cd9d4006f["type"] : null; $pc433eb90 = $v214bf3b7ee == "public" || $v214bf3b7ee == "construct"; if ($pc433eb90 || $v69943f3766) { $pcc2fe66c = isset($v6cd9d4006f["doc_comments"]) && is_array($v6cd9d4006f["doc_comments"]) ? implode("\n", $v6cd9d4006f["doc_comments"]) : ""; $pab5e8729 = strpos($pcc2fe66c, "@hidden") !== false; if (!$pab5e8729 || $v69943f3766) { $v603bd47baf = isset($v6cd9d4006f["name"]) ? $v6cd9d4006f["name"] : null; $v9967b457fa = array( "path" => $pa32be502 . $v7dffdb5a5b, "item_type" => "method", "item_id" => self::getItemId("$pf3dc0762/$pe04f136f/$v603bd47baf"), "item_class" => !$pc433eb90 || $pab5e8729 ? "hidden" : "", "service" => $pe5762321 ); if (isset($v70210c15fa[$pf3dc0762][$v1335217393][$v603bd47baf])) $v9967b457fa["alias"] = $v70210c15fa[$pf3dc0762][$v1335217393][$v603bd47baf]; if (isset($v70210c15fa[$pf3dc0762][$pe5762321][$v603bd47baf])) $v9967b457fa["alias"] = $v70210c15fa[$pf3dc0762][$pe5762321][$v603bd47baf]; $v1ce69f3b9f[$v603bd47baf] = array("properties" => $v9967b457fa); } } } } if (!empty($v4c704b9c94["extends"])) $pef349725["extends"] = $v4c704b9c94["extends"]; unset($pef349725["alias"]); if (isset($v70210c15fa[$pf3dc0762][$v1335217393])) { $v9994512d98 = array_keys($v70210c15fa[$pf3dc0762][$v1335217393]); foreach ($v9994512d98 as $pbfa01ed1) if (is_numeric($pbfa01ed1)) $pef349725["alias"][] = $v70210c15fa[$pf3dc0762][$v1335217393][$pbfa01ed1]; } if (isset($v70210c15fa[$pf3dc0762][$pe5762321])) { $v9994512d98 = array_keys($v70210c15fa[$pf3dc0762][$pe5762321]); foreach ($v9994512d98 as $pbfa01ed1) if (is_numeric($pbfa01ed1)) $pef349725["alias"][] = $v70210c15fa[$pf3dc0762][$pe5762321][$pbfa01ed1]; } $pef349725["item_type"] = "service"; $pef349725["item_id"] = self::getItemId("$pf3dc0762/$pe04f136f"); $pef349725["service"] = $pe5762321; $pef349725["item_menu"] = $v12cbe3df36; $pef349725["item_class"] = $pa436ab2e ? "hidden" : ""; $pa1c3a9c4[$pe04f136f] = array_merge(array("properties" => $pef349725), $v1ce69f3b9f); } } $pc6325a70[$pc2380ff3] = array_merge($pc6325a70[$pc2380ff3], $pa1c3a9c4); } if (is_array($v12efdd30d7) && !empty($v12efdd30d7["methods"])) { $pef349725 = array("path" => $pa32be502 . $v7dffdb5a5b, "item_type" => "function"); $pe084c6b2 = array(); $pc37695cb = count($v12efdd30d7["methods"]); for ($v43dd7d0051 = 0; $v43dd7d0051 < $pc37695cb; $v43dd7d0051++) { $v6cd9d4006f = $v12efdd30d7["methods"][$v43dd7d0051]; $pcc2fe66c = isset($v6cd9d4006f["doc_comments"]) && is_array($v6cd9d4006f["doc_comments"]) ? implode("\n", $v6cd9d4006f["doc_comments"]) : ""; $pab5e8729 = strpos($pcc2fe66c, "@hidden") !== false; if (!$pab5e8729 || $v69943f3766) { $v603bd47baf = isset($v6cd9d4006f["name"]) ? $v6cd9d4006f["name"] : null; unset($pef349725["alias"]); if (isset($v70210c15fa[$pf3dc0762][0][$v603bd47baf])) $pef349725["alias"] = $v70210c15fa[$pf3dc0762][0][$v603bd47baf]; self::f2c857e84a5($v603bd47baf, $pe084c6b2, $peae4fad0 . $v603bd47baf); self::mdd09f31dbdd3($v603bd47baf, $pc6325a70); $pef349725["function"] = $v6cd9d4006f; $pef349725["item_id"] = self::getItemId("$pf3dc0762/$v603bd47baf"); $pef349725["item_menu"] = $v12cbe3df36; $pef349725["item_class"] = $pab5e8729 ? "hidden" : ""; $pe084c6b2[$v603bd47baf] = array("properties" => $pef349725); } } $pc6325a70[$pc2380ff3] = array_merge($pc6325a70[$pc2380ff3], $pe084c6b2); } else if ($v2b56495c24 == 1 && !$v5eb6bf1cc3) $pc6325a70[$pc2380ff3]["properties"]["item_class"] = "disabled"; } } } } } closedir($v89d33f4133); } ksort($pc6325a70); return $pc6325a70; } private static function f7198e53278($pd3623f40, $pa32be502, $pb1924b99 = -1, &$v70210c15fa = false, $v5d3813882f = null) { $v9d50494084 = $pd3623f40->getLayerPathSetting(); $v90b50cf52d = array("properties" => array("path" => $pa32be502)); $v70210c15fa = empty($v70210c15fa) ? array() : $v70210c15fa; $peae4fad0 = $v9d50494084 . $pa32be502; $v802bcfdfc9 = $pb1924b99 > 0 ? $pb1924b99 - 1 : $pb1924b99; if (empty($pd3623f40->settings["presentation_webroot_path"])) launch_exception(new Exception("'PresentationLayer->settings[presentation_webroot_path]' cannot be undefined!")); $pf8271f9d = $pd3623f40->settings["presentation_webroot_path"]; $pa47fac06 = $pd3623f40->getCommonProjectName(); $pe9717439 = $pa32be502 ? is_dir($peae4fad0 . $pf8271f9d) : false; if ($pe9717439) { $v7dffdb5a5b = substr($pa32be502, -1) == "/" ? substr($pa32be502, 0, -1) : $pa32be502; $v90b50cf52d = self::mb99823dc3bd8($pd3623f40, "", $v802bcfdfc9, $v7dffdb5a5b, $peae4fad0, $pa47fac06, $v5d3813882f); } else { if ( ($pb1924b99 > 0 || $pb1924b99 == -1) && is_dir($peae4fad0) && ($v89d33f4133 = opendir($peae4fad0)) ) { while( ($v7dffdb5a5b = readdir($v89d33f4133)) !== false) { if (substr($v7dffdb5a5b, 0, 1) != ".") { $pf3dc0762 = $peae4fad0 . $v7dffdb5a5b; $pc2380ff3 = $v7dffdb5a5b; if (is_dir($pf3dc0762)) { $pf3dc0762 .= "/"; self::mdd09f31dbdd3($pc2380ff3, $v90b50cf52d); if (!is_dir($pf3dc0762 . $pf8271f9d)) { if ($pb1924b99 > 0 || $pb1924b99 == -1) $pb4fa3b99 = self::f7198e53278($pd3623f40, $pa32be502 . $v7dffdb5a5b . "/", $v802bcfdfc9, $v70210c15fa, $v5d3813882f); else $pb4fa3b99 = array("properties" => array("path" => $pa32be502 . $v7dffdb5a5b . "/")); $pb4fa3b99["properties"]["item_type"] = "project_folder"; $pb4fa3b99["properties"]["item_id"] = self::getItemId($pf3dc0762); $pb4fa3b99["properties"]["item_menu"] = self::made17331b2e4($pf3dc0762); $pb4fa3b99["properties"]["folder_type"] = "project_folder"; if (isset($v70210c15fa[ $pf3dc0762 ])) $pb4fa3b99["properties"]["alias"] = $v70210c15fa[ $pf3dc0762 ]; $v90b50cf52d[$pc2380ff3] = $pb4fa3b99; } else $v90b50cf52d[$pc2380ff3] = self::mb99823dc3bd8($pd3623f40, $pa32be502, $v802bcfdfc9, $v7dffdb5a5b, $pf3dc0762, $pa47fac06, $v5d3813882f); } else if ($pa32be502 || !in_array($v7dffdb5a5b, array("init.php", "modules.xml", ".htaccess"))) { self::f2c857e84a5($pc2380ff3, $v90b50cf52d, $pf3dc0762); $v90b50cf52d[$pc2380ff3] = array( "properties" => array( "path" => $pa32be502 . $v7dffdb5a5b, "item_type" => pathinfo($v7dffdb5a5b, PATHINFO_EXTENSION) == "zip" ? "zip_file" : "file", "item_id" => self::getItemId($pf3dc0762), "item_menu" => self::made17331b2e4($pf3dc0762) ) ); } } } closedir($v89d33f4133); ksort($v90b50cf52d); } } return $v90b50cf52d; } private static function mb99823dc3bd8($pd3623f40, $pa32be502, $v802bcfdfc9, $v7dffdb5a5b, $pf3dc0762, $pa47fac06, $v5d3813882f = null) { $v60e201d1bb = $pa32be502 . $v7dffdb5a5b == $pa47fac06; $v93756c94b3 = array( "properties" => array( "path" => $pa32be502 . $v7dffdb5a5b . "/", "item_type" => $v60e201d1bb ? "project_common" : "project", "item_id" => self::getItemId($pf3dc0762), "item_menu" => self::made17331b2e4($pf3dc0762) ) ); if (empty($pd3623f40->settings["presentation_entities_path"])) launch_exception(new Exception("'PresentationLayer->settings[presentation_entities_path]' cannot be undefined!")); else if (empty($pd3623f40->settings["presentation_views_path"])) launch_exception(new Exception("'PresentationLayer->settings[presentation_views_path]' cannot be undefined!")); else if (empty($pd3623f40->settings["presentation_templates_path"])) launch_exception(new Exception("'PresentationLayer->settings[presentation_templates_path]' cannot be undefined!")); else if (empty($pd3623f40->settings["presentation_blocks_path"])) launch_exception(new Exception("'PresentationLayer->settings[presentation_blocks_path]' cannot be undefined!")); else if (empty($pd3623f40->settings["presentation_utils_path"])) launch_exception(new Exception("'PresentationLayer->settings[presentation_utils_path]' cannot be undefined!")); else if (empty($pd3623f40->settings["presentation_configs_path"])) launch_exception(new Exception("'PresentationLayer->settings[presentation_configs_path]' cannot be undefined!")); else if (empty($pd3623f40->settings["presentation_controllers_path"])) launch_exception(new Exception("'PresentationLayer->settings[presentation_controllers_path]' cannot be undefined!")); else if (empty($pd3623f40->settings["presentation_webroot_path"])) launch_exception(new Exception("'PresentationLayer->settings[presentation_webroot_path]' cannot be undefined!")); else if (empty($pd3623f40->settings["presentation_modules_path"])) launch_exception(new Exception("'PresentationLayer->settings[presentation_modules_path]' cannot be undefined!")); $v6b817be097 = $pa32be502 . $v7dffdb5a5b . "/" . $pd3623f40->settings["presentation_entities_path"]; $pb3c62a2d = $pa32be502 . $v7dffdb5a5b . "/" . $pd3623f40->settings["presentation_views_path"]; $v7f83e5a900 = $pa32be502 . $v7dffdb5a5b . "/" . $pd3623f40->settings["presentation_templates_path"]; $v4876e08d4b = $pa32be502 . $v7dffdb5a5b . "/" . $pd3623f40->settings["presentation_blocks_path"]; $v5de0f30e4f = $pa32be502 . $v7dffdb5a5b . "/" . $pd3623f40->settings["presentation_utils_path"]; $v429cd6f111 = $pa32be502 . $v7dffdb5a5b . "/" . $pd3623f40->settings["presentation_configs_path"]; $v7527c0fcad = $pa32be502 . $v7dffdb5a5b . "/" . $pd3623f40->settings["presentation_controllers_path"]; $v5c398c2c28 = $pa32be502 . $v7dffdb5a5b . "/" . $pd3623f40->settings["presentation_webroot_path"]; $pe61ee068 = $pa32be502 . $v7dffdb5a5b . "/" . $pd3623f40->settings["presentation_modules_path"]; $v93756c94b3["configs"] = self::mac334d245e9f($pd3623f40, $v429cd6f111, $v802bcfdfc9, "config", $v5d3813882f); $v93756c94b3["pages (entities)"] = self::mac334d245e9f($pd3623f40, $v6b817be097, $v802bcfdfc9, "entity", $v5d3813882f); $v93756c94b3["views"] = self::mac334d245e9f($pd3623f40, $pb3c62a2d, $v802bcfdfc9, "view", $v5d3813882f); $v93756c94b3["templates"] = self::mac334d245e9f($pd3623f40, $v7f83e5a900, $v802bcfdfc9, "template", $v5d3813882f); $v93756c94b3["blocks"] = self::mac334d245e9f($pd3623f40, $v4876e08d4b, $v802bcfdfc9, "block", $v5d3813882f); $v93756c94b3["utils"] = self::mac334d245e9f($pd3623f40, $v5de0f30e4f, $v802bcfdfc9, "util", $v5d3813882f); $v93756c94b3["webroot"] = self::mac334d245e9f($pd3623f40, $v5c398c2c28, $v802bcfdfc9, "", $v5d3813882f); $v93756c94b3["others"] = array( "properties" => array( "item_type" => "properties", ), "controllers" => self::mac334d245e9f($pd3623f40, $v7527c0fcad, $v802bcfdfc9, "controller", $v5d3813882f), "modules" => self::mac334d245e9f($pd3623f40, $pe61ee068, $v802bcfdfc9, "module", $v5d3813882f), ); $v6b46aeb158 = $pd3623f40->getCacheLayer(); if ($v6b46aeb158 && !empty($v6b46aeb158->settings["presentation_caches_path"])) { $v191aecc242 = $pa32be502 . $v7dffdb5a5b . "/" . $v6b46aeb158->settings["presentation_caches_path"]; $v93756c94b3["others"]["caches"] = self::mac334d245e9f($pd3623f40, $v191aecc242, $v802bcfdfc9, "cache", $v5d3813882f); $v93756c94b3["others"]["caches"]["properties"] = array( "path" => $v191aecc242, "item_type" => "caches_folder", "item_id" => self::getItemId($v191aecc242), "folder_type" => "cache", ); if (!$v60e201d1bb) $v93756c94b3["others"]["caches"] = self::f287d8e82d1($v93756c94b3["others"]["caches"], $v5d3813882f, $pa32be502 . $v7dffdb5a5b . "/", $v6b46aeb158); } if ($v5d3813882f && !$v60e201d1bb) { $pc8e54a92 = $pa32be502 . $v7dffdb5a5b . "/"; $v93756c94b3["others"]["caches"] = isset($v93756c94b3["others"]["caches"]) ? $v93756c94b3["others"]["caches"] : null; $v93756c94b3["others"]["caches"] = self::f9fb068deaa($v93756c94b3["others"]["caches"], $v5d3813882f, $pc8e54a92); $v93756c94b3["others"]["caches"] = self::f06c5d997e2($v93756c94b3["others"]["caches"], $v5d3813882f, $pc8e54a92); $v93756c94b3["others"]["routers"] = isset($v93756c94b3["others"]["routers"]) ? $v93756c94b3["others"]["routers"] : null; $v93756c94b3["others"]["routers"] = self::mb2bce1f82bcf($v93756c94b3["others"]["routers"], $v5d3813882f, $pc8e54a92); } $v93756c94b3["configs"] = self::mfb516aba688b($v93756c94b3["configs"], $v5d3813882f); $v93756c94b3["utils"] = self::mbd4f307c78b7($v93756c94b3["utils"], $v5d3813882f, $pd3623f40); $v93756c94b3["webroot"] = self::f0892ef30b9($v93756c94b3["webroot"], $v5d3813882f); if ($v60e201d1bb) $v93756c94b3["webroot"] = self::meab531d4ee30($v93756c94b3["webroot"], $v5d3813882f, $pa32be502 . $v7dffdb5a5b . "/webroot/", $pa47fac06); $v93756c94b3["templates"] = self::mfab168763202($v93756c94b3["templates"], $v5d3813882f); if ($v93756c94b3["templates"]) foreach ($v93756c94b3["templates"] as $pe5c5e2fe => $v956913c90f) if ($pe5c5e2fe != "properties" && isset($v956913c90f["properties"]["item_type"]) && $v956913c90f["properties"]["item_type"] == "template_folder") $v93756c94b3["templates"][$pe5c5e2fe] = self::mfc97c88a4fff($v956913c90f, $v5d3813882f); $v93756c94b3["configs"]["properties"] = array( "path" => $v429cd6f111, "item_type" => "configs_folder", "item_id" => self::getItemId($v429cd6f111), "folder_type" => "config", ); $v93756c94b3["pages (entities)"]["properties"] = array( "path" => $v6b817be097, "item_type" => "entities_folder", "item_id" => self::getItemId($v6b817be097), "folder_type" => "entity", ); $v93756c94b3["views"]["properties"] = array( "path" => $pb3c62a2d, "item_type" => "views_folder", "item_id" => self::getItemId($pb3c62a2d), "folder_type" => "view", ); $v93756c94b3["templates"]["properties"] = array( "path" => $v7f83e5a900, "item_type" => "templates_folder", "item_id" => self::getItemId($v7f83e5a900), "folder_type" => "template", ); $v93756c94b3["blocks"]["properties"] = array( "path" => $v4876e08d4b, "item_type" => "blocks_folder", "item_id" => self::getItemId($v4876e08d4b), "folder_type" => "block", ); $v93756c94b3["utils"]["properties"] = array( "path" => $v5de0f30e4f, "item_type" => "utils_folder", "item_id" => self::getItemId($v5de0f30e4f), "folder_type" => "util", ); $v93756c94b3["webroot"]["properties"] = array( "path" => $v5c398c2c28, "item_type" => "webroot_folder", "item_id" => self::getItemId($v5c398c2c28), "folder_type" => "", ); $v93756c94b3["others"]["controllers"]["properties"] = array( "path" => $v7527c0fcad, "item_type" => "controllers_folder", "item_id" => self::getItemId($v7527c0fcad), "folder_type" => "controller", ); if (file_exists($pf3dc0762 . "/" . $pd3623f40->settings["presentation_modules_path"])) { if ($v60e201d1bb && $v93756c94b3["others"]["modules"]) $v93756c94b3["others"]["modules"] = self::f16cf48bdbc($v93756c94b3["others"]["modules"], $v5d3813882f, $pd3623f40); $v93756c94b3["others"]["modules"]["properties"] = array( "path" => $pe61ee068, "item_type" => "cms_module", "item_id" => self::getItemId($pe61ee068), "folder_type" => "module", ); } else unset($v93756c94b3["others"]["modules"]); if (file_exists($pf3dc0762 . "/" . $pd3623f40->settings["presentation_entities_path"])) $v93756c94b3["pages (entities)"]["properties"]["project_with_auto_view"] = self::f5df3598e48($pd3623f40, $pf3dc0762); return $v93756c94b3; } private static function f5df3598e48($pd3623f40, $pf3dc0762) { if (empty($pd3623f40->settings["presentation_configs_path"])) launch_exception(new Exception("'PresentationLayer->settings[presentation_configs_path]' cannot be undefined!")); $v97417c4539 = $pf3dc0762 . "/" . $pd3623f40->settings["presentation_configs_path"] . "pre_init_config." . $pd3623f40->getPresentationFileExtension(); $pfaf08f23 = new PHPVariablesFileHandler($v97417c4539); $pfaf08f23->startUserGlobalVariables(); $v9eb8abc21a = !empty($GLOBALS["project_with_auto_view"]) ? 1 : 0; $pfaf08f23->endUserGlobalVariables(); return $v9eb8abc21a; } private static function mfb516aba688b($v10eb48c548, $v5d3813882f) { if (!empty($v10eb48c548["init.php"])) $v10eb48c548["init.php"]["properties"]["item_type"] = "reserved_file"; else if (!empty($v10eb48c548["init"])) $v10eb48c548["init"]["properties"]["item_type"] = "reserved_file"; if (!empty($v10eb48c548["pre_init_config.php"])) $v10eb48c548["pre_init_config.php"]["properties"]["item_type"] = "reserved_file"; else if (!empty($v10eb48c548["pre_init_config"])) $v10eb48c548["pre_init_config"]["properties"]["item_type"] = "reserved_file"; if (!empty($v10eb48c548["config.php"])) $v10eb48c548["config.php"]["properties"]["item_type"] = "reserved_file"; else if (!empty($v10eb48c548["config"])) $v10eb48c548["config"]["properties"]["item_type"] = "reserved_file"; if (!empty($v10eb48c548["cache"])) $v10eb48c548["cache"]["properties"]["item_type"] = "reserved_folder"; if ($v5d3813882f && !empty($v5d3813882f["PresentationPRouter"]) && is_a($v5d3813882f["PresentationPRouter"], "PresentationRouter") && !empty($v5d3813882f["PresentationPRouter"]->settings["routers_file_name"]) && !empty($v10eb48c548[ $v5d3813882f["PresentationPRouter"]->settings["routers_file_name"] ]) ) unset($v10eb48c548[ $v5d3813882f["PresentationPRouter"]->settings["routers_file_name"] ]); return $v10eb48c548; } private static function mbd4f307c78b7($v10eb48c548, $v5d3813882f, $pd3623f40) { $v9d50494084 = $pd3623f40->getLayerPathSetting(); $v69943f3766 = $v5d3813882f && !empty($v5d3813882f["all"]); if ($v10eb48c548) foreach ($v10eb48c548 as $v250a1176c9 => $v4e10095a1d) { $v9073377656 = isset($v4e10095a1d["properties"]) ? $v4e10095a1d["properties"] : null; if (isset($v9073377656["item_type"]) && $v9073377656["item_type"] == "util_file") { $pf3dc0762 = $v9d50494084 . $v9073377656["path"]; if (file_exists($pf3dc0762) && pathinfo($pf3dc0762, PATHINFO_EXTENSION) == "php") { $pc6325a70 = array(); $pedde3449 = PHPCodePrintingHandler::getPHPClassesFromFile($pf3dc0762); $v12efdd30d7 = isset($pedde3449[0]) ? $pedde3449[0] : null; unset($pedde3449[0]); if (!empty($pedde3449)) { foreach ($pedde3449 as $pe5762321 => $v4c704b9c94) { $v1335217393 = isset($v4c704b9c94["name"]) ? $v4c704b9c94["name"] : null; $pcc2fe66c = isset($v4c704b9c94["doc_comments"]) && is_array($v4c704b9c94["doc_comments"]) ? implode("\n", $v4c704b9c94["doc_comments"]) : ""; $pa436ab2e = strpos($pcc2fe66c, "@hidden") !== false; if (!$pa436ab2e || $v69943f3766) { $pef349725 = array("path" => $v9073377656["path"]); $pb2bb35e9 = array(); $pe04f136f = $v1335217393; self::mdd09f31dbdd3($pe04f136f, $pc6325a70); self::mdd09f31dbdd3($pe04f136f, $v10eb48c548); if (!empty($v4c704b9c94["methods"])) { $pc37695cb = count($v4c704b9c94["methods"]); for ($v43dd7d0051 = 0; $v43dd7d0051 < $pc37695cb; $v43dd7d0051++) { $v6cd9d4006f = $v4c704b9c94["methods"][$v43dd7d0051]; $v214bf3b7ee = isset($v6cd9d4006f["type"]) ? $v6cd9d4006f["type"] : null; $pc433eb90 = $v214bf3b7ee == "public" || $v214bf3b7ee == "construct"; if ($pc433eb90 || $v69943f3766) { $pcc2fe66c = isset($v6cd9d4006f["doc_comments"]) && is_array($v6cd9d4006f["doc_comments"]) ? implode("\n", $v6cd9d4006f["doc_comments"]) : ""; $pab5e8729 = strpos($pcc2fe66c, "@hidden") !== false; if (!$pab5e8729 || $v69943f3766) { $v603bd47baf = isset($v6cd9d4006f["name"]) ? $v6cd9d4006f["name"] : null; $v9967b457fa = array( "path" => $v9073377656["path"], "item_type" => "method", "item_id" => self::getItemId("$pf3dc0762/$pe04f136f/$v603bd47baf"), "item_class" => !$pc433eb90 || $pab5e8729 ? "hidden" : "", "class" => $pe5762321 ); $pb2bb35e9[$v603bd47baf] = array("properties" => $v9967b457fa); } } } } $pef349725["item_type"] = "class"; $pef349725["item_id"] = self::getItemId("$pf3dc0762/$pe04f136f"); $pef349725["item_class"] = $pa436ab2e ? "hidden" : ""; $pef349725["class"] = $pe5762321; $pc6325a70[$pe04f136f] = array_merge(array("properties" => $pef349725), $pb2bb35e9); } } } if (is_array($v12efdd30d7) && !empty($v12efdd30d7["methods"])) { $pef349725 = array("path" => $v9073377656["path"], "item_type" => "function"); $pc37695cb = count($v12efdd30d7["methods"]); for ($v43dd7d0051 = 0; $v43dd7d0051 < $pc37695cb; $v43dd7d0051++) { $v6cd9d4006f = $v12efdd30d7["methods"][$v43dd7d0051]; $v603bd47baf = isset($v6cd9d4006f["name"]) ? $v6cd9d4006f["name"] : null; $pcc2fe66c = isset($v6cd9d4006f["doc_comments"]) && is_array($v6cd9d4006f["doc_comments"]) ? implode("\n", $v6cd9d4006f["doc_comments"]) : ""; $pab5e8729 = strpos($pcc2fe66c, "@hidden") !== false; if (!$pab5e8729 || $v69943f3766) { self::mdd09f31dbdd3($v603bd47baf, $pc6325a70); self::mdd09f31dbdd3($v603bd47baf, $v10eb48c548); $pef349725["function"] = $v6cd9d4006f; $pef349725["item_id"] = self::getItemId("$pf3dc0762/$v603bd47baf"); $pef349725["item_class"] = $pab5e8729 ? "hidden" : ""; $pc6325a70[$v603bd47baf] = array("properties" => $pef349725); } } } if ($pc6325a70) $v10eb48c548[$v250a1176c9] = array_merge($v4e10095a1d, $pc6325a70); } } } return $v10eb48c548; } private static function mfc97c88a4fff($v10eb48c548, $v5d3813882f) { if (!empty($v10eb48c548["region"])) $v10eb48c548["region"]["properties"]["item_type"] = "reserved_folder"; if (!empty($v10eb48c548["module"])) $v10eb48c548["module"]["properties"]["item_type"] = "reserved_folder"; return $v10eb48c548; } private static function mfab168763202($v10eb48c548, $v5d3813882f) { if ($v10eb48c548) foreach ($v10eb48c548 as $v5e813b295b => $v4e10095a1d) if ($v5e813b295b != "properties" && isset($v4e10095a1d["properties"]["item_type"]) && $v4e10095a1d["properties"]["item_type"] == "folder" && substr(dirname($v4e10095a1d["properties"]["path"]) . "/", strlen("/src/template/") * -1) == "/src/template/") $v10eb48c548[$v5e813b295b]["properties"]["item_type"] = "template_folder"; return $v10eb48c548; } private static function f0892ef30b9($v10eb48c548, $v5d3813882f) { if (!empty($v10eb48c548["index.php"])) $v10eb48c548["index.php"]["properties"]["item_type"] = "reserved_file"; else if (!empty($v10eb48c548["index"])) $v10eb48c548["index"]["properties"]["item_type"] = "reserved_file"; if (!empty($v10eb48c548["script.php"])) $v10eb48c548["script.php"]["properties"]["item_type"] = "reserved_file"; else if (!empty($v10eb48c548["script"])) $v10eb48c548["script"]["properties"]["item_type"] = "reserved_file"; return $v10eb48c548; } private static function meab531d4ee30($v10eb48c548, $v5d3813882f, $pc8e54a92, $pa47fac06) { if ($pc8e54a92 == "$pa47fac06/webroot/") { if (!empty($v10eb48c548["module"])) $v10eb48c548["module"]["properties"]["item_type"] = "cms_module"; if (!empty($v10eb48c548["cms"])) $v10eb48c548["cms"]["properties"]["item_type"] = "cms_folder"; } else if ($pc8e54a92 == "$pa47fac06/webroot/cms/") { if (!empty($v10eb48c548["wordpress"])) $v10eb48c548["wordpress"]["properties"]["item_type"] = "wordpress_folder"; } else if ($pc8e54a92 == "$pa47fac06/webroot/cms/wordpress/") { foreach ($v10eb48c548 as $v8ffce2a791 => $v4e10095a1d) $v10eb48c548[$v8ffce2a791]["properties"]["item_type"] = "wordpress_installation_folder"; } return $v10eb48c548; } private static function f16cf48bdbc($v10eb48c548, $v5d3813882f, $pd3623f40) { $v9d50494084 = $pd3623f40->getLayerPathSetting(); if ($v10eb48c548) foreach ($v10eb48c548 as $v250a1176c9 => $v4e10095a1d) { $v9073377656 = isset($v4e10095a1d["properties"]) ? $v4e10095a1d["properties"] : null; if (isset($v9073377656["item_type"]) && $v9073377656["item_type"] == "folder") { $v11506aed93 = $v9d50494084 . $v9073377656["path"]; $v144fe202ff = CMSModuleHandler::getCMSModuleHandlerImplFilePath($v11506aed93); if (file_exists($v144fe202ff)) { $pc629e648 = CMSModuleEnableHandler::isModuleEnabled($v11506aed93); $v10eb48c548[$v250a1176c9]["properties"]["item_type"] = "module_folder"; $v10eb48c548[$v250a1176c9]["properties"]["item_class"] = $pc629e648 ? "module_folder_enabled" : "module_folder_disabled"; } } } return $v10eb48c548; } private static function f287d8e82d1($v10eb48c548, $v5d3813882f, $pc8e54a92, $v6b46aeb158) { if (!empty($v6b46aeb158->settings["presentations_cache_file_name"])) { if (empty($v6b46aeb158->settings["presentation_caches_path"])) launch_exception(new Exception("'PresentationCacheLayer->settings[presentation_caches_path]' cannot be undefined!")); $v4ab58226de = $pc8e54a92 . $v6b46aeb158->settings["presentation_caches_path"] . $v6b46aeb158->settings["presentations_cache_file_name"]; $v10eb48c548["pages"] = array( "properties" => array( "path" => $v4ab58226de, "item_type" => "cache_file", "item_id" => self::getItemId($v4ab58226de), "folder_type" => "", ) ); if (!empty($v10eb48c548[ $v6b46aeb158->settings["presentations_cache_file_name"] ])) unset($v10eb48c548[ $v6b46aeb158->settings["presentations_cache_file_name"] ]); } return $v10eb48c548; } private static function f9fb068deaa($v10eb48c548, $v5d3813882f, $pc8e54a92) { if ($v5d3813882f && !empty($v5d3813882f["PresentationMultipleCMSCacheLayer"]) && is_a($v5d3813882f["PresentationMultipleCMSCacheLayer"], "MultipleCMSCacheLayer")) { $pa3e341cf = $v5d3813882f["PresentationMultipleCMSCacheLayer"]->getCMSModuleCacheLayer()->settings; if (!empty($pa3e341cf["presentation_cms_module_caches_path"]) && !empty($pa3e341cf["presentations_cms_module_cache_file_name"])) { $v4ab58226de = $pc8e54a92 . $pa3e341cf["presentation_cms_module_caches_path"] . $pa3e341cf["presentations_cms_module_cache_file_name"]; $v10eb48c548["modules"] = array( "properties" => array( "path" => $v4ab58226de, "item_type" => "cache_file", "item_id" => self::getItemId($v4ab58226de), "folder_type" => "", ) ); if (!empty($v10eb48c548[ $pa3e341cf["presentations_cms_module_cache_file_name"] ])) unset($v10eb48c548[ $pa3e341cf["presentations_cms_module_cache_file_name"] ]); } $pc01d97db = $v5d3813882f["PresentationMultipleCMSCacheLayer"]->getCMSBlockCacheLayer()->settings; if (!empty($pc01d97db["presentation_cms_block_caches_path"]) && !empty($pc01d97db["presentations_cms_block_cache_file_name"])) { $v4ab58226de = $pc8e54a92 . $pc01d97db["presentation_cms_block_caches_path"] . $pc01d97db["presentations_cms_block_cache_file_name"]; $v10eb48c548["blocks"] = array( "properties" => array( "path" => $v4ab58226de, "item_type" => "cache_file", "item_id" => self::getItemId($v4ab58226de), "folder_type" => "", ) ); if (!empty($v10eb48c548[ $pc01d97db["presentations_cms_block_cache_file_name"] ])) unset($v10eb48c548[ $pc01d97db["presentations_cms_block_cache_file_name"] ]); } } return $v10eb48c548; } private static function f06c5d997e2($v10eb48c548, $v5d3813882f, $pc8e54a92) { if ( !empty($v5d3813882f["PresentationPDispatcherCacheHandler"]) && is_a($v5d3813882f["PresentationPDispatcherCacheHandler"], "DispatcherCacheHandler") && !empty($v5d3813882f["PresentationPDispatcherCacheHandler"]->settings["dispatcher_caches_path"]) && !empty($v5d3813882f["PresentationPDispatcherCacheHandler"]->settings["dispatchers_cache_file_name"]) ) { $v4ab58226de = $pc8e54a92 . $v5d3813882f["PresentationPDispatcherCacheHandler"]->settings["dispatcher_caches_path"] . $v5d3813882f["PresentationPDispatcherCacheHandler"]->settings["dispatchers_cache_file_name"]; $v10eb48c548["dispatcher"] = array( "properties" => array( "path" => $v4ab58226de, "item_type" => "cache_file", "item_id" => self::getItemId($v4ab58226de), "folder_type" => "", ) ); if (!empty($v10eb48c548[ $v5d3813882f["PresentationPDispatcherCacheHandler"]->settings["dispatchers_cache_file_name"] ])) unset($v10eb48c548[ $v5d3813882f["PresentationPDispatcherCacheHandler"]->settings["dispatchers_cache_file_name"] ]); } return $v10eb48c548; } private static function mb2bce1f82bcf($v10eb48c548, $v5d3813882f, $pc8e54a92) { if ( !empty($v5d3813882f["PresentationPRouter"]) && is_a($v5d3813882f["PresentationPRouter"], "PresentationRouter") && !empty($v5d3813882f["PresentationPRouter"]->settings["routers_path"]) && !empty($v5d3813882f["PresentationPRouter"]->settings["routers_file_name"]) ) { $v4ab58226de = $pc8e54a92 . $v5d3813882f["PresentationPRouter"]->settings["routers_path"] . $v5d3813882f["PresentationPRouter"]->settings["routers_file_name"]; $v10eb48c548["properties"] = array( "path" => $v4ab58226de, "item_type" => "cache_file", "item_id" => self::getItemId($v4ab58226de), "folder_type" => "", ); } return $v10eb48c548; } private static function mac334d245e9f($pd3623f40, $pa32be502, $pb1924b99 = -1, $v0c98cda30e = "", $v5d3813882f = null) { $v9d50494084 = $pd3623f40->getLayerPathSetting(); $peae4fad0 = $v9d50494084 . $pa32be502; $v802bcfdfc9 = $pb1924b99 > 0 ? $pb1924b99 - 1 : $pb1924b99; $v2cd5d67337 = array(); if ( ($pb1924b99 > 0 || $pb1924b99 == -1) && is_dir($peae4fad0) && ($v89d33f4133 = opendir($peae4fad0)) ) { while( ($v7dffdb5a5b = readdir($v89d33f4133)) !== false) { if (substr($v7dffdb5a5b, 0, 1) != ".") { $pf3dc0762 = $peae4fad0 . $v7dffdb5a5b; if (is_dir($pf3dc0762)) $v8773b3a63a = "folder"; else { $v6bfcc44e7b = strtolower( pathinfo($pf3dc0762, PATHINFO_EXTENSION) ); if (!$v0c98cda30e) { if ($v6bfcc44e7b == "php") $v8773b3a63a = "file"; else if ($v6bfcc44e7b == "css") $v8773b3a63a = "css_file"; else if ($v6bfcc44e7b == "js") $v8773b3a63a = "js_file"; else if ($v6bfcc44e7b == "zip") $v8773b3a63a = "zip_file"; else if (exif_imagetype($pf3dc0762)) $v8773b3a63a = "img_file"; else $v8773b3a63a = "undefined_file"; } else { if ($v6bfcc44e7b != "php" && ($v0c98cda30e == "entity" || $v0c98cda30e == "view" || $v0c98cda30e == "template" || $v0c98cda30e == "util" || $v0c98cda30e == "controller" || $v0c98cda30e == "config" || $v0c98cda30e == "module" || $v0c98cda30e == "block")) $v8773b3a63a = $v6bfcc44e7b == "zip" ? "zip_file" : "undefined_file"; else $v8773b3a63a = strtolower($v0c98cda30e) . "_file"; } } $pef349725 = array( "item_type" => $v8773b3a63a, "item_id" => self::getItemId($pf3dc0762), "folder_type" => $v0c98cda30e, "item_menu" => self::made17331b2e4($pf3dc0762) ); if (is_dir($pf3dc0762)) { $pef349725["path"] = $pa32be502 . $v7dffdb5a5b . "/"; $pc2380ff3 = $v7dffdb5a5b; self::mdd09f31dbdd3($pc2380ff3, $v2cd5d67337); if ($pb1924b99 > 0 || $pb1924b99 == -1) { $v02a69d4e0f = self::mac334d245e9f($pd3623f40, $pef349725["path"], $v802bcfdfc9, $v0c98cda30e, $v5d3813882f); $v2cd5d67337[$pc2380ff3] = array_merge(array("properties" => $pef349725), $v02a69d4e0f); } else { $v2cd5d67337[$pc2380ff3] = array("properties" => $pef349725); } } else { $v5442ff2fbd = pathinfo($v7dffdb5a5b); $pc2380ff3 = isset($v5442ff2fbd["extension"]) && strtolower($v5442ff2fbd["extension"]) == "php" ? $v5442ff2fbd["filename"] : $v7dffdb5a5b; self::f2c857e84a5($pc2380ff3, $v2cd5d67337, $peae4fad0 . $pc2380ff3); $pef349725["path"] = $pa32be502 . $v7dffdb5a5b; $v2cd5d67337[$pc2380ff3] = array("properties" => $pef349725); } } } closedir($v89d33f4133); } ksort($v2cd5d67337); return $v2cd5d67337; } private static function f2c857e84a5(&$pc2380ff3, $pb8d8f7bf, $pf3dc0762 = null) { if ($pf3dc0762 && is_dir($pf3dc0762)) $pc2380ff3 .= " "; self::mdd09f31dbdd3($pc2380ff3, $pb8d8f7bf); } private static function mdd09f31dbdd3(&$pc2380ff3, $pb8d8f7bf) { $pc2380ff3 .= $pc2380ff3 == "properties" || $pc2380ff3 == "aliases" ? " " : ""; while (!empty($pb8d8f7bf[$pc2380ff3])) $pc2380ff3 .= " "; } private static function made17331b2e4($pf3dc0762) { $pdf6c365c = array( "file_name" => pathinfo($pf3dc0762, PATHINFO_BASENAME), "modified_date" => date("Y-m-d H:i:s", filemtime($pf3dc0762)) ); $v8d5105189f = FilePermissionHandler::getFileUserOwnerInfo($pf3dc0762); if ($v8d5105189f) $pdf6c365c["user_owner"] = isset($v8d5105189f["name"]) ? $v8d5105189f["name"] : null; $v0c3e1ae4b4 = FilePermissionHandler::getFileUserGroupInfo($pf3dc0762); if ($v0c3e1ae4b4) $pdf6c365c["user_group"] = isset($v0c3e1ae4b4["name"]) ? $v0c3e1ae4b4["name"] : null; $pdf6c365c["permissions"] = FilePermissionHandler::getFilePermissionsInfo($pf3dc0762); return $pdf6c365c; } private static function mb408bd1b6427($v847a7225e0, &$v70210c15fa) { $v9d50494084 = $v847a7225e0->getLayerPathSetting(); $pe38ed1ed = array(); foreach ($v70210c15fa as $pf3dc0762 => $v6694236c2c) { foreach ($v6694236c2c as $pbfa01ed1 => $v29ec97eb7e) { if (is_array($v29ec97eb7e)) { foreach ($v29ec97eb7e as $v2300608a66 => $v95eeadc9e9) { if (is_array($v95eeadc9e9)) { $pc37695cb = count($v95eeadc9e9); for ($v43dd7d0051 = 0; $v43dd7d0051 < $pc37695cb; $v43dd7d0051++) { $pf9149938 = $v95eeadc9e9[$v43dd7d0051]; $pe38ed1ed[$pf9149938] = array("properties" => array( "path" => self::f84b74bcef0($pf3dc0762, $v9d50494084), "class" => $pbfa01ed1, "function" => $v2300608a66, "item_id" => self::getItemId("$pf3dc0762/method/$pf9149938") )); } } else if (is_numeric($v2300608a66)) { $pe38ed1ed[$v95eeadc9e9] = array("properties" => array( "path" => self::f84b74bcef0($pf3dc0762, $v9d50494084), "class" => $pbfa01ed1, "item_id" => self::getItemId("$pf3dc0762/class/$v95eeadc9e9") )); } } } else if (is_numeric($pbfa01ed1)) { $pe38ed1ed[$v29ec97eb7e] = array("properties" => array( "path" => $pf3dc0762, "item_id" => self::getItemId("$pf3dc0762/module/$v29ec97eb7e") )); } } } $v70210c15fa = $pe38ed1ed; ksort($v70210c15fa); return $pe38ed1ed; } public static function getItemId($v327f72fb62) { return strtolower(preg_replace('/[^\w]+/u', 'a', base64_encode(hash("crc32b", $v327f72fb62)))); } private static function f84b74bcef0($pa32be502, $v9d50494084) { return substr($pa32be502, strlen($v9d50494084)); } private static function mc86fb6226162($pf3dc0762) { if (file_exists($pf3dc0762)) { $v09421cf63e = file_get_contents($pf3dc0762); $v09421cf63e = PHPScriptHandler::parseContent($v09421cf63e); $v6dcd71ad57 = new MyXML($v09421cf63e); $pfb662071 = $v6dcd71ad57->toArray(array("lower_case_keys" => true)); return $pfb662071; } return null; } } ?>
