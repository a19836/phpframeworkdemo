<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//iBATIS.com//DTD SQL Map 2.0//EN" "http://www.ibatis.com/dtd/sql-map-2.dtd">

<sql_mapping>
	<insert id="insert_teacher"><![CDATA[
		INSERT INTO `teacher` (`school_id`, `name`, `age`) VALUES (#school_id#, '#name#', #age#)
	]]></insert>
	<insert id="insert_teacher_with_ai_pk" hard_coded_ai_pk="1"><![CDATA[
		INSERT INTO `teacher` (`teacher_id`, `school_id`, `name`, `age`) VALUES (#teacher_id#, #school_id#, '#name#', #age#)
	]]></insert>
	<update id="update_teacher"><![CDATA[
		UPDATE `teacher` SET `school_id`=#school_id#, `name`='#name#', `age`=#age# WHERE `teacher_id` = #teacher_id#
	]]></update>
	<update id="update_teacher_primary_keys"><![CDATA[
		UPDATE `teacher` SET `teacher_id`=#new_teacher_id# WHERE `teacher_id` = #old_teacher_id#
	]]></update>
	<update id="update_all_teacher_items"><![CDATA[
		UPDATE `teacher` SET `school_id`=#school_id#, `name`='#name#', `age`=#age# WHERE 1=1 #searching_condition#
	]]></update>
	<delete id="delete_teacher"><![CDATA[
		DELETE FROM `teacher` WHERE `teacher_id` = #teacher_id#
	]]></delete>
	<delete id="delete_all_teacher_items"><![CDATA[
		DELETE FROM `teacher` WHERE 1=1 #searching_condition#
	]]></delete>
	<select id="get_teacher"><![CDATA[
		SELECT `teacher_id`, `school_id`, `name`, `age` FROM `teacher` WHERE `teacher_id` = #teacher_id#
	]]></select>
	<select id="get_teacher_items"><![CDATA[
		SELECT `teacher_id`, `school_id`, `name`, `age` FROM `teacher` WHERE 1=1 #searching_condition#
	]]></select>
	<select id="count_teacher_items"><![CDATA[
		SELECT count(*) AS total FROM `teacher` WHERE 1=1 #searching_condition#
	]]></select>
	<select id="get_teacher_school_parent"><![CDATA[
		SELECT `school`.`school_id`, `school`.`name` FROM `teacher`  inner JOIN `school` ON  `school`.`school_id` = `teacher`.`school_id` WHERE `teacher`.`teacher_id`=#teacher_id# #searching_condition#
	]]></select>
	<select id="count_teacher_school_parent"><![CDATA[
		SELECT count(*) AS total  FROM `teacher`  inner JOIN `school` ON  `school`.`school_id` = `teacher`.`school_id` WHERE `teacher`.`teacher_id`=#teacher_id# #searching_condition#
	]]></select>
</sql_mapping>